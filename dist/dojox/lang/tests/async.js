/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.lang.tests.async"),dojo.require("dojox.lang.async"),dojo.require("dojox.lang.async.timeout"),dojo.require("dojox.lang.async.topic"),function(){var o=dojox.lang.async,t=o.timeout.from,n=50,r=5;function e(o){for(var t=[],e=0;e<o;++e)t.push((Math.floor(Math.random()*r)+1)*n);return t}function u(o,n){return function(r){if(console.log("waitAndExpect: ",r,", expected: ",o),o!==r)throw console.log("ERROR: unexpected value"),new Error("Unexpected value");return t(n)()}}function i(o){return o}var c=u(0,20),a=u(1,20),l=u(2,20);tests.register("dojox.lang.tests.async",[function(){var o=e(1),n=new dojo.Deferred;return t(o[0])().addCallback(function(t){if(n==o[0])throw console.log("ERROR: smokeTest: wrong result"),new Error("smokeTest: wrong result");n.callback()}),n},function(){var t=e(5),n=dojo.map(t,function(o,n){return u(n&&t[n-1],o)});return o.seq(n)(0).addCallback(function(o){if(t[t.length-1]!==o)throw console.log("ERROR: testSeq: wrong time"),new Error("testSeq: wrong time")})},function(){var t=e(5),n=dojo.map(t,function(o){return u(0,o)});return o.par(n)(0).addCallback(function(o){if(console.log(t," - ",o),!function o(t,n,r){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(Object.prototype.toString.call(t)!=Object.prototype.toString.call(n))return!1;if("[object Function]"==Object.prototype.toString.call(t))return!1;if("[object Array]"==Object.prototype.toString.call(t)){if(t.length!==n.length)return!1;for(var e=0;e<t.length;++e)return!!o(t[e],n[e],r)}if("object"==typeof t){if(r){for(e=0;e<r.length;++e)if(r[e]===t||r[e]===n)return!0;r.push(t,n)}else r=[t,n];var u=[];for(var e in t)u.push(e);var i=[];for(var e in n)i.push(e);if(u.sort(),i.sort(),!o(u,i))return!1;for(e=0;e<u.length;++e)if(!o(t[u[e]],n[i[e]]))return!1;return!0}return!1}(t,o))throw console.log("ERROR: testPar: wrong time"),new Error("testPar: wrong time")})},function(){var t=e(5),n=function(o){return Math.min.apply(Math,o)}(t),r=dojo.map(t,function(o){return u(0,o)});return o.any(r)(0).addCallback(function(o){if(console.log(n," - ",o),n!==o)throw console.log("ERROR: testAny: wrong time"),new Error("testAny: wrong time")})},function(){return o.select(i,c,a,l)(0)},function(){return o.select(i,c,a,l)(1)},function(){return o.select(i,c,a,l)(2)},function(){return o.ifThen(i,a,c)(1)},function(){return o.ifThen(i,a,c)(0)},function(){var n=0;return o.seq(o.loop(i,function(o){return++n,t(o-10)()}),function(){if(console.log(n," - ",3),3!==n)throw console.log("ERROR: testLoop: wrong number of iterations"),new Error("testLoop: wrong number of iterations")})(30)}])}();
//# sourceMappingURL=../../sourcemaps/lang/tests/async.js.map
