/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.lang.aspect"),function(){var e,n=dojo,r=dojox.lang.aspect,t=Array.prototype,i=[],a=function(){this.next_before=this.prev_before=this.next_around=this.prev_around=this.next_afterReturning=this.prev_afterReturning=this.next_afterThrowing=this.prev_afterThrowing=this,this.counter=0};n.extend(a,{add:function(e){var r=n.isFunction(e),t={advice:e,dynamic:r};return this._add(t,"before","",r,e),this._add(t,"around","",r,e),this._add(t,"after","Returning",r,e),this._add(t,"after","Throwing",r,e),++this.counter,t},_add:function(e,n,r,t,i){var a=n+r;if(t||i[n]||r&&i[a]){var o="next_"+a,d="prev_"+a;(e[d]=this[d])[o]=e,(e[o]=this)[d]=e}},remove:function(e){this._remove(e,"before"),this._remove(e,"around"),this._remove(e,"afterReturning"),this._remove(e,"afterThrowing"),--this.counter},_remove:function(e,n){var r="next_"+n,t="prev_"+n;e[r]&&(e[r][t]=e[t],e[t][r]=e[r])},isEmpty:function(){return!this.counter}});r.advise=function(e,t,i){"object"!=typeof e&&(e=e.prototype);var a=[];t instanceof Array||(t=[t]);for(var o=0;o<t.length;++o){var d=t[o];if(d instanceof RegExp)for(var s in e)n.isFunction(e[s])&&d.test(s)&&a.push(s);else n.isFunction(e[d])&&a.push(d)}return n.isArray(i)||(i=[i]),r.adviseRaw(e,a,i)},r.adviseRaw=function(n,o,d){if(!o.length||!d.length)return null;for(var s={},v=d.length,c=o.length-1;c>=0;--c){var f=o[c],u=n[f],h=new Array(v),p=u.advices;if(!p){var l=n[f]=function(){var n,a,o,d,s,v=arguments.callee,c=v.advices;e&&i.push(e),e={instance:this,joinPoint:v,depth:i.length,around:c.prev_around,dynAdvices:[],dynIndex:0};try{for(a=c.prev_before;a!=c;a=a.prev_before)a.dynamic?(e.dynAdvices.push(o=new a.advice(e)),(s=o.before)&&s.apply(o,arguments)):(s=a.advice).before.apply(s,arguments);try{n=(c.prev_around==c?v.target:r.proceed).apply(this,arguments)}catch(d){for(e.dynIndex=e.dynAdvices.length,a=c.next_afterThrowing;a!=c;a=a.next_afterThrowing)(s=(o=a.dynamic?e.dynAdvices[--e.dynIndex]:a.advice).afterThrowing)&&s.call(o,d),(s=o.after)&&s.call(o);throw d}for(e.dynIndex=e.dynAdvices.length,a=c.next_afterReturning;a!=c;a=a.next_afterReturning)(s=(o=a.dynamic?e.dynAdvices[--e.dynIndex]:a.advice).afterReturning)&&s.call(o,n),(s=o.after)&&s.call(o);var f=v._listeners;for(a in f)a in t||f[a].apply(this,arguments)}finally{for(a=0;a<e.dynAdvices.length;++a)(o=e.dynAdvices[a]).destroy&&o.destroy();e=i.length?i.pop():null}return n};l.target=u.target||u,l.targetName=f,l._listeners=u._listeners||[],l.advices=new a,p=l.advices}for(var y=0;y<v;++y)h[y]=p.add(d[y]);s[f]=h}return[n,s]},r.unadvise=function(e){if(e){var r=e[0],i=e[1];for(var a in i){for(var o=r[a],d=o.advices,s=i[a],v=s.length-1;v>=0;--v)d.remove(s[v]);if(d.isEmpty()){var c=!0,f=o._listeners;if(f.length)for(v in f)if(!(v in t)){c=!1;break}if(c)r[a]=o.target;else{var u=r[a]=n._listener.getDispatcher();u.target=o.target,u._listeners=f}}}}},r.getContext=function(){return e},r.getContextStack=function(){return i},r.proceed=function(){for(var n=e.joinPoint,r=n.advices,t=e.around;t!=r;t=e.around){if(e.around=t.prev_around,!t.dynamic)return t.advice.around.apply(t.advice,arguments);var i=e.dynAdvices[e.dynIndex++],a=i.around;if(a)return a.apply(i,arguments)}return n.target.apply(e.instance,arguments)}}();
//# sourceMappingURL=../sourcemaps/lang/aspect.js.map
