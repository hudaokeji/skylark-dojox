/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.ClientFilter"),dojo.require("dojox.data.ClientFilter"),dojo.require("dojox.data.JsonRestStore"),mockService=function(e){var t=new dojo.Deferred;return setTimeout(function(){t.callback([{firstName:"John",lastName:"Smith",__id:"mock/1"},{firstName:"Jim",lastName:"Smith",__id:"mock/2"},{firstName:"Jill",lastName:"Smith",__id:"mock/3"},{firstName:"Jerry",lastName:"Smith",__id:"mock/4"}])},10),t},mockService.servicePath="mock/",jsonStore=new dojox.data.JsonRestStore({service:mockService}),doh.register("dojox.data.tests.ClientFilter",[function(e){var t=new doh.Deferred;return jsonStore.fetch({query:{lastName:"Smith",firstName:"*"},sort:[{attribute:"firstName",descending:!0}],onComplete:function(o,s){e.is(5,o.length),e.is(newJack,o[4]),console.log("updateWhileLoading",o[4],newJack),t.callback(!0)}}),newJack=jsonStore.newItem({firstName:"Jack",lastName:"Smith"}),t},function(e){var t,o=new doh.Deferred;return jsonStore.fetch({queryOptions:{cache:!0},query:{lastName:"Smith",firstName:"*"},sort:[{attribute:"firstName",descending:!0}],onComplete:function(t,o){e.is(5,t.length),e.is(newJack,t[4]),console.log("items[4]",t[4]);var s=jsonStore.newItem({firstName:"Joe",lastName:"Smith"});e.is(5,t.length),jsonStore.updateResultSet(t,o),e.is(6,t.length),e.is(s,t[1]);var n=jsonStore.newItem({firstName:"Jack",lastName:"Jones"});jsonStore.updateResultSet(t,o),e.is(6,t.length),jsonStore.setValue(s,"firstName","Jesse"),jsonStore.updateResultSet(t,o),e.is(6,t.length),e.is(s,t[3]),e.f(s==t[1]),jsonStore.deleteItem(newJack),jsonStore.updateResultSet(t,o),e.is(5,t.length),jsonStore.setValue(s,"lastName","Baker"),jsonStore.updateResultSet(t,o),e.is(4,t.length),jsonStore.setValue(n,"lastName","Smith"),jsonStore.updateResultSet(t,o),e.is(5,t.length)}}),console.log("sent first"),jsonStore.fetch({query:{lastName:"Smith",firstName:"Jack"},sort:[{attribute:"firstName",descending:!0}],onComplete:function(s,n){console.log("items first",s),t=!0,e.is(1,s.length),o.callback(!0)}}),console.log("sent seconds"),e.f(t),o},function(e){var t,o=new doh.Deferred;return jsonStore.fetch({query:{lastName:"Smith",firstName:"Jack"},sort:[{attribute:"firstName",descending:!0}],onComplete:function(s,n){console.log("items",s),t=!0,e.is(1,s.length),o.callback(!0)}}),e.t(t),o},function(e){var t=new doh.Deferred;return jsonStore.fetch({queryOptions:{cache:!0},query:{},onComplete:function(o,s){console.log("items",o),e.is(6,o.length),jsonStore.newItem({firstName:"Jack",lastName:"Jones"}),jsonStore.fetch({query:{},onComplete:function(t,o){e.is(7,t.length)}}),jsonStore.serverVersion=jsonStore._updates.length,jsonStore.newItem({firstName:"Jack",lastName:"Jones"}),jsonStore.fetch({query:{},onComplete:function(o,s){!0,e.is(8,o.length),t.callback(!0)}})}}),t},function(e){var t,o=new doh.Deferred;return jsonStore.fetch({query:{lastName:"Smith",firstName:"*"},sort:[{attribute:"firstName",descending:!0}],onComplete:function(s,n){var r=jsonStore.getValue(s[0],"firstName");console.log("last name: ",r,s[0]),e.is("John",r),jsonStore.fetch({query:{lastName:"Smith",firstName:"*"},sort:[{attribute:"firstName"}],onComplete:function(s,n){var r=jsonStore.getValue(s[0],"firstName");console.log("first name",r,s[0]),t=!0,e.is("Jack",r),o.callback(!0)}})}}),e.t(t),o}]);
//# sourceMappingURL=../../sourcemaps/data/tests/ClientFilter.js.map
