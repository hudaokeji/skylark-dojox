/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.AppStore"),dojo.require("dojox.data.AppStore"),dojo.require("dojo.data.api.Read"),dojo.require("dojo.data.api.Write"),dojo.require("dojo.data.api.Identity"),dojox.data.tests.stores.AppStore.getStore=function(t){return t=!!t,new dojox.data.AppStore({url:dojo.moduleUrl("dojox.atom.tests.widget","samplefeedEdit.xml").toString(),urlPreventCache:t})},doh.register("dojox.data.tests.stores.AppStore",[function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"*"},onComplete:function(e,o){t.assertEqual(8,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(!0),r=new doh.Deferred;return e.fetch({query:{title:"*"},onComplete:function(e,o){t.assertEqual(8,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;function o(e,o){t.assertEqual(0,e.length),r.callback(!0)}function n(r,n){t.assertEqual(6,r.length),n.start=9,n.count=100,n.onComplete=o,e.fetch(n)}function a(r,o){t.assertEqual(5,r.length),o.start=2,o.count=20,o.onComplete=n,e.fetch(o)}function s(r,o){t.assertEqual(1,r.length),o.start=0,o.count=5,o.onComplete=a,e.fetch(o)}function l(r,o){t.assertEqual(5,r.length),o.start=3,o.count=1,o.onComplete=s,e.fetch(o)}return e.fetch({onComplete:function(r,o){t.assertEqual(8,r.length),o.start=1,o.count=5,o.onComplete=l,e.fetch(o)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"?est Editable Entry #1"},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"*Test*"},onComplete:function(e,o){t.assertEqual(8,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"*test*"},queryOptions:{ignoreCase:!0},onComplete:function(e,o){t.assertEqual(8,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(o.length,1);var a=e.getLabel(o[0]);t.assertTrue(null!==a),t.assertEqual("Test Editable Entry #1",a),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(o.length,1);var a=e.getLabelAttributes(o[0]);t.assertTrue(dojo.isArray(a)),t.assertEqual("title",a[0]),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"id")),t.assertEqual(e.getValue(a,"id"),"http://example.com/samplefeedEdit.xml/entry/10"),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"id"));var s=e.getValues(a,"id");t.assertEqual(1,s.length),t.assertEqual(s[0],"http://example.com/samplefeedEdit.xml/entry/10"),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.isItem(a)),t.assertTrue(!e.isItem({})),t.assertTrue(!e.isItem("Foo")),t.assertTrue(!e.isItem(1)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=dojox.data.tests.stores.AppStore.getStore(),o=new doh.Deferred;function n(t,e){o.errback(t)}return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(a,s){t.assertEqual(1,a.length);var l=a[0];t.assertTrue(e.isItem(l)),r.fetch({query:{title:"Test Entry #1"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(r.isItem(s)),t.assertTrue(!e.isItem(s)),t.assertTrue(!r.isItem(l)),o.callback(!0)},onError:n})},onError:n}),o},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"title")),t.assertTrue(e.hasAttribute(a,"summary")),t.assertTrue(!e.hasAttribute(a,"bob")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),t.assertTrue(!e.containsValue(a,"title","bob")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=["Test Entry #6","Test Entry #5","Test Entry #4","Test Entry #3","Test Entry #2","Test Entry #1","Test Editable Entry #2","Test Editable Entry #1"],o=new doh.Deferred;return e.fetch({query:{title:"*"},sort:[{attribute:"title",descending:!0}],onComplete:function(n,a){t.assertEqual(8,n.length);for(var s=0;s<n.length;s++)t.assertEqual(r[s],e.getValue(n[s],"title"));o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=["Test Editable Entry #1","Test Editable Entry #2","Test Entry #1","Test Entry #2","Test Entry #3","Test Entry #4","Test Entry #5","Test Entry #6"],o=new doh.Deferred;return e.fetch({query:{title:"*"},sort:[{attribute:"title"}],onComplete:function(n,a){t.assertEqual(8,n.length);for(var s=0;s<n.length;s++)t.assertEqual(r[s],e.getValue(n[s],"title"));o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.isItemLoaded(a)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore().getFeatures(),r=0;for(var o in e)t.assertTrue("dojo.data.api.Read"===o||"dojo.data.api.Write"===o||"dojo.data.api.Identity"===o),r++;t.assertEqual(3,r)},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0],s=e.getAttributes(a);t.assertEqual(6,s.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore();e.newItem({title:"New entry",id:"12345",content:"This is test content",author:{name:"Bob"}});var r=new doh.Deferred;return e.fetch({query:{title:"New entry"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","New entry")),t.assertTrue(e.containsValue(a,"content","This is test content")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore();e.newItem({title:"New entry",id:"12345",content:"This is test content",author:{name:"Bob"}});var r=new doh.Deferred;function o(t,e){r.errback(t)}return e.fetch({query:{title:"New entry"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(e.containsValue(s,"title","New entry")),t.assertTrue(e.containsValue(s,"content","This is test content")),e.newItem({title:"New entry2",id:"12346",content:"This is test content",author:[{name:"Bob"}]}),e.fetch({query:{title:"New entry2"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","New entry2")),r.callback(!0)},onError:o})},onError:o}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;function o(t,e){r.errback(t)}return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(e.containsValue(s,"title","Test Editable Entry #1")),e.deleteItem(s),e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(e,o){t.assertEqual(0,e.length),r.callback(!0)},onError:o})},onError:o}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),e.setValue(a,"title","Edited title"),t.assertEqual(e.getValue(a,"title"),"Edited title"),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),e.setValues(a,"author",[{name:"John"},{name:"Bill",email:"bill@example.com",uri:"http://example.com/bill"}]);var s=e.getValues(a,"author");t.assertEqual(s[0].name,"John"),t.assertEqual(s[1].name,"Bill"),t.assertEqual(s[1].email,"bill@example.com"),t.assertEqual(s[1].uri,"http://example.com/bill"),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),e.unsetAttribute(a,"title"),t.assertTrue(!e.hasAttribute(a,"title")),t.assertTrue(e.isDirty(a)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),e.setValue(a,"title","Edited title"),t.assertEqual(e.getValue(a,"title"),"Edited title"),t.assertTrue(e.isDirty(a)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;function o(t,e){r.errback(t)}return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(e.containsValue(s,"title","Test Editable Entry #1")),t.assertTrue(!e.isDirty(s)),e.setValue(s,"title","Edited title"),t.assertEqual(e.getValue(s,"title"),"Edited title"),t.assertTrue(e.isDirty(s)),e.revert(),e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"title","Test Editable Entry #1")),r.callback(!0)},onError:o})},onError:o}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;function o(t,e){r.errback(t)}return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(e.containsValue(s,"title","Test Editable Entry #1")),e.deleteItem(s),e.fetch({query:{title:"*"},onComplete:function(n,a){t.assertEqual(7,n.length),e.newItem({title:"New entry",id:"12345",content:"This is test content",author:{name:"Bob"}}),e.fetch({query:{title:"New entry"},onComplete:function(n,a){t.assertEqual(1,n.length),e.revert(),e.fetch({query:{title:"New entry"},onComplete:function(e,o){t.assertEqual(0,e.length),r.callback(!0)},onError:o})},onError:o})},onError:o})},onError:o}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=e.getIdentity(o[0]);t.assertEqual("http://example.com/samplefeedEdit.xml/entry/10",a),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetch({query:{title:"Test Editable Entry #1"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=e.getIdentityAttributes(o[0]);t.assertEqual(1,a.length),t.assertEqual("id",a[0]),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetchItemByIdentity({identity:"http://example.com/samplefeedEdit.xml/entry/10",onItem:function(o,n){var a=e.getIdentity(o);t.assertEqual("http://example.com/samplefeedEdit.xml/entry/10",a),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new doh.Deferred;return e.fetchItemByIdentity({identity:"http://example.com/samplefeedEdit.xml/entry/10/none",onItem:function(e,o){t.assertTrue(null===e),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new dojo.data.api.Read,o=!0;for(var n in r){if("function"==typeof r[n])if("function"!=typeof e[n]){console.log("Problem with function: ["+n+"]"),o=!1;break}}t.assertTrue(o)},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new dojo.data.api.Write,o=!0;for(var n in r){if("function"==typeof r[n])if("function"!=typeof e[n]){o=!1;break}}t.assertTrue(o)},function(t){var e=dojox.data.tests.stores.AppStore.getStore(),r=new dojo.data.api.Identity,o=!0;for(var n in r){if("function"==typeof r[n])if("function"!=typeof e[n]){o=!1;break}}t.assertTrue(o)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/AppStore.js.map
