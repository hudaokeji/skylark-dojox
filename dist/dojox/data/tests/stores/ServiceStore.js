/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.ServiceStore"),dojo.require("dojox.rpc.Service"),dojo.require("dojox.rpc.Rest"),dojo.require("dojox.data.ServiceStore"),dojo.require("dojo.data.api.Read"),dojox.data.tests.stores.ServiceStore.error=function(e,t,o){t.errback(o)};var testServices=new dojox.rpc.Service(require.toUrl("dojox/rpc/tests/resources/test.smd")),jsonStore=new dojox.data.ServiceStore({service:testServices.jsonRestStore});doh.register("dojox.data.tests.stores.ServiceStore",[{name:"Fetch some items",timeout:1e4,runTest:function(e){var t=new doh.Deferred;return jsonStore.fetch({query:"query",onComplete:function(o,r){e.is(4,o.length),t.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.ServiceStore.error,doh,t)}),t}},{name:"fetchItemByIdentity, getValue, getValues, hasAttribute,containsValue, getAttributes, getIdentity",timeout:1e4,runTest:function(e){var t=new doh.Deferred;return jsonStore.fetchItemByIdentity({identity:1,onItem:function(o,r){e.is("Object 1",o.name),e.is("Object 1",jsonStore.getValue(o,"name")),e.t(jsonStore.hasAttribute(o,"name")),e.is(jsonStore.getValues(o,"name").length,1),e.t(jsonStore.isItem(o)),e.t(jsonStore.isItemLoaded(o)),e.t(jsonStore.containsValue(o,"name","Object 1")),e.f(jsonStore.containsValue(o,"name","Something Else")),e.is(jsonStore.getIdentity(o),1),e.t(dojo.indexOf(jsonStore.getAttributes(o),"name")>-1),e.is("default",jsonStore.getValue(o,"nothing","default")),t.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.ServiceStore.error,doh,t)}),t}},{name:"createLazyItem",timeout:1e4,runTest:function(e){var t=new doh.Deferred,o={_loadObject:function(e){this.name="loaded",delete this._loadObject,e(this)}};return e.f(jsonStore.isItemLoaded(o)),jsonStore.loadItem({item:o,onItem:function(){e.t(jsonStore.isItemLoaded(o)),e.is(o.name,"loaded"),t.callback(!0)}}),t}},{name:"lazyItem With Fetch",timeout:1e4,runTest:function(e){var t=new doh.Deferred;return jsonStore.idAttribute="id",jsonStore.syncMode=!0,jsonStore.fetch({query:"query",onComplete:function(o,r){o[0]._loadObject=function(e){jsonStore.fetch({query:this.id,onComplete:e})},e.t(jsonStore.getValue(o[0],"testArray").length),t.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.ServiceStore.error,doh,t)}),t}},{name:"ReadAPI:  Fetch_20_Streaming",timeout:1e4,runTest:function(e){var t=new doh.Deferred,o=0;return jsonStore.fetch({query:"bigQuery",onBegin:null,count:20,onItem:function(t,r){e.assertTrue("number"==typeof t),o++},onComplete:function(r,n){e.is(20,o),t.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.ServiceStore.error,e,t)}),t}},function(e){var t=new dojo.data.api.Read;for(i in t){if("_"!==i.toString().charAt(0))if("function"==typeof t[i])if("function"!=typeof jsonStore[i]){!1;break}}}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/ServiceStore.js.map
