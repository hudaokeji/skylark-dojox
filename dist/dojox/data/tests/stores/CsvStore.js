/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.CsvStore"),dojo.require("dojox.data.CsvStore"),dojo.require("dojo.data.api.Read"),dojo.require("dojo.data.api.Identity"),dojox.data.tests.stores.CsvStore.getDatasource=function(e){var t={};if(dojo.isBrowser)t.url=require.toUrl("dojox/data/tests/"+e).toString();else{var o;switch(e){case"stores/movies.csv":o+="Title, Year, Producer\n",o+="City of God, 2002, Katia Lund\n",o+="Rain,, Christine Jeffs\n",o+="2001: A Space Odyssey, 1968, Stanley Kubrick\n",o+='"This is a ""fake"" movie title", 1957, Sidney Lumet\n',o+="Alien, 1979   , Ridley Scott\n",o+='"The Sequel to ""Dances With Wolves.""", 1982, Ridley Scott\n',o+='"Caine Mutiny, The", 1954, "Dymtryk ""the King"", Edward"\n';break;case"stores/movies2.csv":o+="Title, Year, Producer\n",o+="City of God, 2002, Katia Lund\n",o+='Rain,"", Christine Jeffs\n',o+="2001: A Space Odyssey, 1968, Stanley Kubrick\n",o+='"This is a ""fake"" movie title", 1957, Sidney Lumet\n',o+="Alien, 1979   , Ridley Scott\n",o+='"The Sequel to ""Dances With Wolves.""", 1982, Ridley Scott\n',o+='"Caine Mutiny, The", 1954, "Dymtryk ""the King"", Edward"\n';break;case"stores/empty.csv":o+="Title, Year, Producer\n";break;case"stores/movies3.csv":o+="Title, Year, Producer\n",o+='"City\n of God", 2002, Katia Lund\n',o+='Rain,"", Christine Jeffs\n',o+="2001: A Space Odyssey, 1968, Stanley Kubrick\n",o+='"This is a ""fake"" movie title", 1957, Sidney Lumet\n',o+="Alien, 1979   , Ridley Scott\n",o+='"The Sequel to ""Dances With\n Wolves.""", 1982, Ridley Scott\n',o+='"Caine Mutiny, The", 1954, "Dymtryk ""the King"", Edward"\n';break;case"stores/books.csv":o+="Title, Author\n",o+="The Transparent Society, David Brin\n",o+="The First Measured Century, Theodore Caplow\n",o+="Maps in a Mirror, Orson Scott Card\n",o+="Princess Smartypants, Babette Cole\n",o+="Carfree Cities, Crawford J.H.\n",o+="Down and Out in the Magic Kingdom, Cory Doctorow\n",o+="Tax Shift, Alan Thein Durning\n",o+="The Sneetches and other stories, Dr. Seuss\n",o+="News from Tartary, Peter Fleming\n";break;case"stores/patterns.csv":o+="uniqueId, value\n",o+="9, jfq4@#!$!@Rf14r14i5u\n",o+="6, BaBaMaSaRa***Foo\n",o+="2, bar*foo\n",o+="8, 123abc\n",o+="4, bit$Bite\n",o+="3, 123abc\n",o+="10, 123abcdefg\n",o+="1, foo*bar\n",o+="7, \n",o+="5, 123abc\n";break;case"stores/semicolonSeparator.csv":o+="article;price\n",o+="1008;4,59\n",o+="1010;10,09\n",o+="1011;5,13\n",o+="1016;16,68\n",o+="1019;15,5\n",o+="1022;10,36\n";break;case"stores/pipeSeparator.csv":o+="article|price\n",o+="1008|4,59\n",o+="1010|10,09\n",o+="1011|5,13\n",o+="1016|16,68\n",o+="1019|15,5\n",o+="1022|10,36\n";break;case"stores/pipeSeparatorInData.csv":o+="article|price\n",o+='1008|"4,59|4,54"\n',o+="1010|10,09\n",o+="1011|5,13\n",o+="1016|16,68\n",o+="1019|15,5\n",o+="1022|10,36\n"}t.data=o}return t},dojox.data.tests.stores.CsvStore.verifyItems=function(e,t,o,r){if(t.length!=r.length)return!1;for(var s=0;s<t.length;s++)if(e.getValue(t[s],o)!==r[s])return!1;return!0},dojox.data.tests.stores.CsvStore.error=function(e,t,o){for(var r in o)console.log(o[r]);t.errback(o)},doh.register("dojox.data.tests.stores.CsvStore",[function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertTrue(7===t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/empty.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertTrue(0===t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/semicolonSeparator.csv");t.separator=";";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertEqual(6,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/pipeSeparator.csv");t.separator="|";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertEqual(6,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/pipeSeparatorInData.csv");t.separator="|";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertEqual(6,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies3.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertTrue(7===t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies2.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t){e.assertTrue(7===t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,o){e.is(1,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.urlPreventCache=!0;var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,o){e.is(1,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred,s=[!1,!1];try{o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,o){s[0]=!0,e.is(1,t.length),s[0]&&s[1]&&r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),o.fetch({query:{Title:"2001:*"},onComplete:function(t,o){s[1]=!0,e.is(1,t.length),s[0]&&s[1]&&r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)})}catch(e){for(var a in e)console.log(e[a])}return r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred,s=[!1,!1];return o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,o){s[0]=!0,e.is(1,t.length),s[0]&&s[1]&&r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),o.fetchItemByIdentity({identity:"6",onItem:function(t){s[1]=!0,e.assertTrue(null!==t),e.is('Dymtryk "the King", Edward',o.getValue(t,"Producer")),e.is("Caine Mutiny, The",o.getValue(t,"Title")),s[0]&&s[1]&&r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred,s=0;return o.fetch({onBegin:function(t,o){e.assertTrue(7===t)},onItem:function(t,r){e.assertTrue(o.isItem(t)),s++},onComplete:function(t,o){e.is(7,s),e.is(null,t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;function s(t,o){e.is(5,t.length),r.callback(!0)}function a(t,r){e.is(0,t.length),r.start=2,r.count=20,r.onComplete=s,o.fetch(r)}function n(t,r){e.is(5,t.length),r.start=9,r.count=100,r.onComplete=a,o.fetch(r)}function d(t,r){e.is(5,t.length),r.start=2,r.count=20,r.onComplete=n,o.fetch(r)}function i(t,r){e.is(1,t.length),r.start=0,r.count=5,r.onComplete=d,o.fetch(r)}function c(t,r){e.is(5,t.length),r.start=3,r.count=1,r.onComplete=i,o.fetch(r)}return o.fetch({onComplete:function(t,r){e.is(7,t.length),r.start=1,r.count=5,r.onComplete=c,o.fetch(r)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.label="Title";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,s){e.assertEqual(t.length,1);var a=o.getLabel(t[0]);e.assertTrue(null!==a),e.assertEqual('The Sequel to "Dances With Wolves."',a),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.label="Title";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{Title:"*Sequel*"},onComplete:function(t,s){e.assertEqual(t.length,1);var a=o.getLabelAttributes(t[0]);e.assertTrue(dojo.isArray(a)),e.assertEqual("Title",a[0]),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"6",onItem:function(t){e.assertTrue(null!==t),e.is('Dymtryk "the King", Edward',o.getValue(t,"Producer")),e.is("Caine Mutiny, The",o.getValue(t,"Title")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"0",onItem:function(t){e.assertTrue(null!==t),e.is("City of God",o.getValue(t,"Title")),e.is("2002",o.getValue(t,"Year")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"4",onItem:function(t){e.assertTrue(null!==t),e.is("1979",o.getValue(t,"Year")),e.is("Alien",o.getValue(t,"Title")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"2",onItem:function(t){e.assertTrue(null!==t),e.is("2001: A Space Odyssey",o.getValue(t,"Title")),e.is("Stanley Kubrick",o.getValue(t,"Producer")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(null!==t);var s=o.getValues(t,"Title");e.assertTrue(dojo.isArray(s)),e.is(1,s.length),e.is("Rain",s[0]),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(null!==t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.identifier="Title";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"City of God",onItem:function(t){e.assertTrue(null!==t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.identifier="Title";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"No Such Title",onItem:function(t){e.assertTrue(null===t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"7",onItem:function(t){e.assertTrue(null===t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"-1",onItem:function(t){e.assertTrue(null===t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"999999",onItem:function(t){e.assertTrue(null===t),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t,s){e.is(7,t.length);for(var a=!0,n=0;n<t.length;n++)if(o.getIdentity(t[n])!==n){a=!1;break}e.assertTrue(a),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.identifier="Title";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t,s){e.is(7,t.length);for(var a=!0,n=0;n<t.length;n++)if(!o.getIdentity(t[n])){a=!1;break}e.assertTrue(a),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv");t.identifier="Not Column";var o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(e,t){r.errback(new Error("Unexpected callback of success in failure case."))},onError:function(e){r.callback(!0)}}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(o.isItem(t)),e.assertEqual(null,o.getIdentityAttributes(t)),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(o.isItem(t)),e.assertTrue(!o.isItem({})),e.assertTrue(!o.isItem({item:"not an item"})),e.assertTrue(!o.isItem("not an item")),e.assertTrue(!o.isItem(["not an item"])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(null!==t),e.assertTrue(o.hasAttribute(t,"Title")),e.assertTrue(o.hasAttribute(t,"Producer")),e.assertTrue(!o.hasAttribute(t,"Year")),e.assertTrue(!o.hasAttribute(t,"Nothing")),e.assertTrue(!o.hasAttribute(t,"title"));var s=!1;try{o.hasAttribute(t,null)}catch(e){s=!0}e.assertTrue(s),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"4",onItem:function(t){e.assertTrue(null!==t),e.assertTrue(o.containsValue(t,"Title","Alien")),e.assertTrue(o.containsValue(t,"Year","1979")),e.assertTrue(o.containsValue(t,"Producer","Ridley Scott")),e.assertTrue(!o.containsValue(t,"Title","Alien2")),e.assertTrue(!o.containsValue(t,"Year","1979   ")),e.assertTrue(!o.containsValue(t,"Title",null));var s=!1;try{o.containsValue(t,null,"foo")}catch(e){s=!0}e.assertTrue(s),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"4",onItem:function(t){e.assertTrue(null!==t),e.assertTrue(o.isItem(t));var s=o.getAttributes(t);e.is(3,s.length);for(var a=0;a<s.length;a++)e.assertTrue("Title"===s[a]||"Year"===s[a]||"Producer"===s[a]);r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetchItemByIdentity({identity:"1",onItem:function(t){e.assertTrue(null!==t),e.assertTrue(o.isItem(t));var s=o.getAttributes(t);e.assertTrue(2===s.length),e.assertTrue("Title"===s[0]),e.assertTrue("Producer"===s[1]),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t).getFeatures(),r=0;for(var s in o)e.assertTrue("dojo.data.api.Read"===s||"dojo.data.api.Identity"===s),r++;e.assertTrue(2===r)},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{Producer:"* Scott"},onComplete:function(t,s){e.is(2,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"Title",["Alien",'The Sequel to "Dances With Wolves."'])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{value:"*$*"},onComplete:function(t,s){e.assertTrue(2===t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"value",["jfq4@#!$!@Rf14r14i5u","bit$Bite"])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{value:"bar\\*foo"},onComplete:function(t,s){e.is(1,t.length),e.assertTrue("bar*foo"===o.getValue(t[0],"value")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{value:"BAR\\*foo"},queryOptions:{ignoreCase:!0},onComplete:function(t,s){e.is(1,t.length),e.assertTrue("bar*foo"===o.getValue(t[0],"value")),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({query:{value:"BAR\\*foo"},queryOptions:{ignoreCase:!1},onComplete:function(t,o){e.is(0,t.length),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({onComplete:function(t,s){e.assertTrue(10===t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"uniqueId",["1","10","2","3","4","5","6","7","8","9"])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r),sort:[{attribute:"uniqueId"}]}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({sort:[{attribute:"uniqueId",descending:!0}],onComplete:function(t,s){e.is(10,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"uniqueId",["9","8","7","6","5","4","3","2","10","1"])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({sort:[{attribute:"uniqueId",descending:!0}],count:5,onComplete:function(t,s){e.is(5,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"uniqueId",["9","8","7","6","5"])),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({sort:[{attribute:"value"}],onComplete:function(t,s){var a=["123abc","123abc","123abc","123abcdefg","BaBaMaSaRa***Foo","bar*foo","bit$Bite","foo*bar","jfq4@#!$!@Rf14r14i5u",void 0];e.is(10,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"value",a)),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({sort:[{attribute:"value",descending:!0}],onComplete:function(t,s){var a=[void 0,"jfq4@#!$!@Rf14r14i5u","foo*bar","bit$Bite","bar*foo","BaBaMaSaRa***Foo","123abcdefg","123abc","123abc","123abc"];e.is(10,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"value",a)),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/patterns.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred;return o.fetch({sort:[{attribute:"value"},{attribute:"uniqueId",descending:!0}],onComplete:function(t,s){var a=["123abc","123abc","123abc","123abcdefg","BaBaMaSaRa***Foo","bar*foo","bit$Bite","foo*bar","jfq4@#!$!@Rf14r14i5u",void 0];e.is(10,t.length),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"uniqueId",["8","5","3","10","6","2","4","1","9","7"])),e.assertTrue(dojox.data.tests.stores.CsvStore.verifyItems(o,t,"value",a)),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},function(e){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t);o.comparatorMap={},o.comparatorMap.Producer=function(e,t){var o=0;function r(e){if(void 0!==e){var t=e.match(/\s*(\S+)$/);return t?t[1]:e}}var s=r(e),a=r(t);return s>a||void 0===s?o=1:(s<a||void 0===a)&&(o=-1),o};var r=new doh.Deferred;return o.fetch({sort:[{attribute:"Producer",descending:!0},{attribute:"Title",descending:!0}],onComplete:function(t,s){var a=[5,4,0,3,2,1,6];e.assertTrue(7===t.length);for(var n=!0,d=0;d<t.length;d++)if(o.getIdentity(t[d])!==a[d]){n=!1;break}e.assertTrue(n),r.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.CsvStore.error,e,r)}),r},{name:"testReadAPI_fetch_abort",runTest:function(e){if(dojo.isBrowser){var t=dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv"),o=new dojox.data.CsvStore(t),r=new doh.Deferred,s=!1,a=o.fetch({onComplete:function(t,o){e.is(7,t.length),s?(console.log("Made it to complete callback and abort was called.  Problem."),r.errback(new Error("Should not be here."))):(console.log("in onComplete and abort has not been called.  Timing.  This is okay."),r.callback(!0))},onError:function(t,o){e.assertTrue(!0),r.callback(!0)}});return s=!0,console.log("Calling abort."),a.abort(),r}}},function(e){var t=new dojox.data.CsvStore(dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv")),o=new dojo.data.api.Read,r=!0;for(var s in o){if("_"!==s.toString().charAt(0))if("function"==typeof o[s]){console.log("Looking at function: ["+s+"]");var a=t[s];if("function"!=typeof a){console.log("Problem with function: ["+s+"].   Got value: "+a),r=!1;break}}}e.assertTrue(r)},function(e){var t=new dojox.data.CsvStore(dojox.data.tests.stores.CsvStore.getDatasource("stores/movies.csv")),o=new dojo.data.api.Identity,r=!0;for(var s in o){if("_"!==s.toString().charAt(0))if("function"==typeof o[s])if(console.log("Looking at function: ["+s+"]"),"function"!=typeof t[s]){r=!1;break}}e.assertTrue(r)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/CsvStore.js.map
