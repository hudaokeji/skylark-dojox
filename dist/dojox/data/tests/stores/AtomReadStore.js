/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.AtomReadStore"),dojo.require("dojox.data.AtomReadStore"),dojo.require("dojo.data.api.Read"),dojox.data.tests.stores.AtomReadStore.getBlog1Store=function(){return new dojox.data.AtomReadStore({url:require.toUrl("dojox/data/tests/stores/atom1.xml").toString()})},dojox.data.tests.stores.AtomReadStore.error=function(e,t,o){t.errback(o)},doh.register("dojox.data.tests.stores.AtomReadStore",[{name:"ReadAPI:  Fetch_One",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(t,r){e.is(1,t.length),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,doh,o)}),o}},{name:"ReadAPI:  Fetch_5_Streaming",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred,r=0;return t.fetch({query:{},onBegin:null,count:5,onItem:function(o,a){e.assertTrue(t.isItem(o)),r++},onComplete:function(t,a){e.is(5,r),e.is(null,t),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  Fetch_Paging",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;function r(o,r){e.is(5,o.length),r.start=3,r.count=1,r.onComplete=a,t.fetch(r)}function a(o,r){console.log("dumpSecondFetch: got "+o.length),e.is(1,o.length),r.start=0,r.count=5,r.onComplete=s,t.fetch(r)}function s(o,r){console.log("dumpThirdFetch: got "+o.length),e.is(5,o.length),r.start=2,r.count=18,r.onComplete=n,t.fetch(r)}function n(o,r){console.log("dumpFourthFetch: got "+o.length),e.is(18,o.length),r.start=5,r.count=11,r.onComplete=u,t.fetch(r)}function u(o,r){console.log("dumpFifthFetch: got "+o.length),e.is(11,o.length),r.start=4,r.count=16,r.onComplete=d,t.fetch(r)}function d(t,r){console.log("dumpSixthFetch: got "+t.length),e.is(16,t.length),o.callback(!0)}return t.fetch({query:{},count:7,onComplete:function(o,a){e.is(7,o.length),a.start=1,a.count=5,a.onComplete=r,t.fetch(a)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getLabel",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r,a){e.assertEqual(r.length,1);var s=t.getLabel(r[0]);e.assertTrue(null!==s),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getLabelAttributes",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r,a){e.assertEqual(r.length,1);var s=t.getLabelAttributes(r[0]);e.assertTrue(dojo.isArray(s)),e.assertEqual("title",s[0]),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getValue",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r){e.is(1,r.length),e.assertTrue(null!==t.getValue(r[0],"summary")),e.assertTrue(null!==t.getValue(r[0],"content")),e.assertTrue(null!==t.getValue(r[0],"published")),e.assertTrue(null!==t.getValue(r[0],"updated")),console.log("typeof updated = "+typeof t.getValue(r[0],"updated")),e.assertTrue(t.getValue(r[0],"updated").getFullYear),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getValue_Failure",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=!1;try{t.getValue("NotAnItem","foo")}catch(e){o=!0}e.assertTrue(o)}},{name:"ReadAPI:  getValues",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r){e.is(1,r.length);var a=t.getValues(r[0],"summary");e.assertTrue(dojo.isArray(a));var s=t.getValues(r[0],"content");e.assertTrue(dojo.isArray(s));var n=t.getValues(r[0],"published");e.assertTrue(dojo.isArray(n));var u=t.getValues(r[0],"updated");e.assertTrue(dojo.isArray(u)),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getValues_Failure",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=!1;try{t.getValues("NotAnItem","foo")}catch(e){o=!0}e.assertTrue(o)}},{name:"ReadAPI:  isItem",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:5,onComplete:function(r){e.is(5,r.length);for(var a=0;a<r.length;a++)e.assertTrue(t.isItem(r[a]));o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  hasAttribute",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r){e.is(1,r.length),e.assertTrue(null!==r[0]),console.log("hasAttribute"),e.assertTrue(t.hasAttribute(r[0],"author")),e.assertTrue(t.hasAttribute(r[0],"published")),e.assertTrue(t.hasAttribute(r[0],"updated")),e.assertTrue(t.hasAttribute(r[0],"category")),e.assertTrue(t.hasAttribute(r[0],"id")),e.assertTrue(!t.hasAttribute(r[0],"foo")),e.assertTrue(!t.hasAttribute(r[0],"bar")),e.assertTrue(t.hasAttribute(r[0],"summary")),e.assertTrue(t.hasAttribute(r[0],"content")),e.assertTrue(t.hasAttribute(r[0],"title"));var a=t.getValue(r[0],"summary"),s=t.getValue(r[0],"content"),n=t.getValue(r[0],"title");e.assertTrue(a&&a.text&&"html"==a.type),e.assertTrue(s&&s.text&&"html"==s.type),e.assertTrue(n&&n.text&&"html"==n.type);try{t.hasAttribute(r[0],null),e.assertTrue(!1)}catch(e){}o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  containsValue",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r){e.is(1,r.length),e.assertTrue(t.containsValue(r[0],"id","http://shaneosullivan.wordpress.com/2008/01/22/using-aol-hosted-dojo-with-your-custom-code/")),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  getAttributes",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{},count:1,onComplete:function(r){e.is(1,r.length),e.assertTrue(t.isItem(r[0]));var a=t.getAttributes(r[0]);console.log("getAttributes 4: "+a.length),e.is(10,a.length),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  fetch_Category",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{category:"aol"},onComplete:function(r){e.is(2,r.length),e.assertTrue(t.isItem(r[0])),e.assertTrue(t.isItem(r[1]));var a=t.getValues(r[0],"category");e.assertTrue(dojo.some(a,function(e){return"aol"==e.term})),a=t.getValues(r[1],"category"),e.assertTrue(dojo.some(a,function(e){return"aol"==e.term})),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  fetch_byID",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{id:"http://shaneosullivan.wordpress.com/2007/10/05/dojo-grid-has-landed/"},onComplete:function(r){console.log("getById: items.length="+r.length),e.is(1,r.length),e.assertTrue(t.isItem(r[0]));var a=t.getValue(r[0],"title");console.log("getById: title.text="+a.text),e.assertTrue("Dojo Grid has landed"==a.text),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},{name:"ReadAPI:  fetch_alternate",timeout:5e3,runTest:function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new doh.Deferred;return t.fetch({query:{id:"http://shaneosullivan.wordpress.com/2007/10/05/dojo-grid-has-landed/"},onComplete:function(r){e.is(1,r.length),e.assertTrue(t.isItem(r[0]));var a=t.getValue(r[0],"alternate");e.assertEqual(a.href,"http://shaneosullivan.wordpress.com/2007/10/05/dojo-grid-has-landed/"),o.callback(!0)},onError:dojo.partial(dojox.data.tests.stores.AtomReadStore.error,e,o)}),o}},function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store().getFeatures(),o=0;for(i in t)e.assertTrue("dojo.data.api.Read"===i),o++;e.assertTrue(1===o)},function(e){var t=dojox.data.tests.stores.AtomReadStore.getBlog1Store(),o=new dojo.data.api.Read,r=!0;for(i in o){if("_"!==i.toString().charAt(0))if("function"==typeof o[i]){console.log("Looking at function: ["+i+"]");var a=t[i];if("function"!=typeof a){console.log("Problem with function: ["+i+"].   Got value: "+a),r=!1;break}}}e.assertTrue(r)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/AtomReadStore.js.map
