/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.HtmlTableStore"),dojo.require("dojox.data.HtmlTableStore"),dojo.require("dojo.data.api.Read"),dojo.require("dojo.data.api.Identity"),dojox.data.tests.stores.HtmlTableStore.getBooks2Store=function(){return new dojox.data.HtmlTableStore({url:require.toUrl("dojox/data/tests/stores/books2.html").toString(),tableId:"books2"})},dojox.data.tests.stores.HtmlTableStore.getBooksStore=function(){return new dojox.data.HtmlTableStore({url:require.toUrl("dojox/data/tests/stores/books.html").toString(),tableId:"books"})},doh.register("dojox.data.tests.stores.HtmlTableStore",[function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=new doh.Deferred;return e.fetch({query:{isbn:"*"},onComplete:function(e,o){t.assertEqual(20,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=new doh.Deferred;function o(r,o){t.assertEqual(5,r.length),o.start=3,o.count=1,o.onComplete=n,e.fetch(o)}function n(r,o){t.assertEqual(1,r.length),o.start=0,o.count=5,o.onComplete=a,e.fetch(o)}function a(r,o){t.assertEqual(5,r.length),o.start=2,o.count=20,o.onComplete=s,e.fetch(o)}function s(r,o){t.assertEqual(18,r.length),o.start=9,o.count=100,o.onComplete=l,e.fetch(o)}function l(r,o){t.assertEqual(11,r.length),o.start=2,o.count=20,o.onComplete=u,e.fetch(o)}function u(e,o){t.assertEqual(18,e.length),r.callback(!0)}return e.fetch({onComplete:function(r,n){t.assertEqual(20,r.length),n.start=1,n.count=5,n.onComplete=o,e.fetch(n)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"?9B574"},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B57?"},onComplete:function(e,o){t.assertEqual(4,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9*"},onComplete:function(e,o){t.assertEqual(5,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"?9b574"},queryOptions:{ignoreCase:!0},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"?9B574"},queryOptions:{ignoreCase:!1},onComplete:function(e,o){t.assertEqual(1,e.length),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(o.length,1);var a=e.getLabel(o[0]);t.assertTrue(null!==a),t.assertEqual("Table Row #3",a),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(o.length,1);var a=e.getLabelAttributes(o[0]);t.assertTrue(null===a),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"isbn")),t.assertEqual(e.getValue(a,"isbn"),"A9B574"),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"isbn"));var s=e.getValues(a,"isbn");t.assertEqual(1,s.length),t.assertEqual("A9B574",s[0]),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.isItem(a)),t.assertTrue(!e.isItem({})),t.assertTrue(!e.isItem("Foo")),t.assertTrue(!e.isItem(1)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),o=new doh.Deferred;function n(t,e){o.errback(t)}return e.fetch({query:{isbn:"1"},onComplete:function(a,s){t.assertEqual(1,a.length);var l=a[0];t.assertTrue(e.isItem(l)),r.fetch({query:{isbn:"A9B574"},onComplete:function(n,a){t.assertEqual(1,n.length);var s=n[0];t.assertTrue(r.isItem(s)),t.assertTrue(!e.isItem(s)),t.assertTrue(!r.isItem(l)),o.callback(!0)},onError:n})},onError:n}),o},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.hasAttribute(a,"isbn")),t.assertTrue(!e.hasAttribute(a,"bob")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.containsValue(a,"isbn","A9B574")),t.assertTrue(!e.containsValue(a,"isbn","bob")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=[9,8,7,6,5,4,3,20,2,19,18,17,16,15,14,13,12,11,10,1],o=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn",descending:!0}],onComplete:function(n,a){t.assertEqual(20,n.length);for(var s=0;s<n.length;s++)t.assertEqual(r[s],e.getValue(n[s],"isbn").toString());o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=[1,10,11,12,13,14,15,16,17,18,19,2,20,3,4,5,6,7,8,9],o=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn"}],onComplete:function(n,a){t.assertEqual(20,n.length);for(var s=0;s<n.length;s++)t.assertEqual(r[s],e.getValue(n[s],"isbn").toString());o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore();e.comparatorMap={},e.comparatorMap.isbn=function(t,e){var r=0;return parseInt(t.toString())>parseInt(e.toString())?r=1:parseInt(t.toString())<parseInt(e.toString())&&(r=-1),r};var r=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn",descending:!0}],onComplete:function(o,n){t.assertEqual(20,o.length);for(var a=20,s=0;s<o.length;s++)t.assertEqual(a,e.getValue(o[s],"isbn").toString()),a--;r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore();e.comparatorMap={},e.comparatorMap.isbn=function(t,e){var r=0;return parseInt(t.toString())>parseInt(e.toString())?r=1:parseInt(t.toString())<parseInt(e.toString())&&(r=-1),r};var r=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn"}],onComplete:function(o,n){t.assertEqual(20,o.length);for(var a=1,s=0;s<o.length;s++)t.assertEqual(a,e.getValue(o[s],"isbn").toString()),a++;r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertTrue(e.isItemLoaded(a)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store().getFeatures(),r=0;for(i in e)t.assertTrue("dojo.data.api.Read"===i||"dojo.data.api.Identity"===i),r++;t.assertEqual(2,r)},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0],s=e.getAttributes(a);t.assertEqual(3,s.length);for(var l=0;l<s.length;l++)t.assertTrue("isbn"===s[l]||"title"===s[l]||"author"===s[l]);r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=new dojo.data.api.Read,o=!0;for(i in r){if("function"==typeof r[i])if("function"!=typeof e[i]){console.log("Problem with function: ["+i+"]"),o=!1;break}}t.assertTrue(o)},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0];t.assertEqual(3,e.getIdentity(a)),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(o,n){t.assertEqual(1,o.length);var a=o[0],s=e.getIdentityAttributes(a);t.assertEqual(null,s),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooks2Store(),r=new doh.Deferred;return e.fetchItemByIdentity({identity:3,onItem:function(o,n){t.assertTrue(null!==o),t.assertTrue(e.isItem(o)),t.assertEqual("A9B574",e.getValue(o,"isbn")),r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlTableStore.getBooksStore(),r=new dojo.data.api.Identity,o=!0;for(i in r){if("function"==typeof r[i])if("function"!=typeof e[i]){console.log("Problem with function: ["+i+"]"),o=!1;break}}t.assertTrue(o)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/HtmlTableStore.js.map
