/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.FileStore"),dojo.require("dojox.data.FileStore"),dojo.require("dojo.data.api.Read"),dojo.require("dojo.data.api.Identity"),dojox.data.tests.stores.FileStore.getGeoStore=function(){return new dojox.data.FileStore({url:require.toUrl("dojox/data/tests/stores/filestore_dojoxdatageo.php").toString(),pathAsQueryParam:!0})},doh.register("dojox.data.tests.stores.FileStore",[{name:"testReadAPI_fetch_all",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"*"},queryOptions:{deep:!0},onComplete:function(t,a){e.assertEqual(49,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_one",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Commonwealth of Australia"},onComplete:function(t,a){e.assertEqual(1,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_paging",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;function a(t,a){e.assertEqual(20,t.length),r.callback(!0)}function o(r,o){e.assertEqual(40,r.length),o.start=2,o.count=20,o.onComplete=a,t.fetch(o)}function n(r,a){e.assertEqual(20,r.length),a.start=9,a.count=100,a.onComplete=o,t.fetch(a)}function s(r,a){e.assertEqual(5,r.length),a.start=2,a.count=20,a.onComplete=n,t.fetch(a)}function u(r,a){e.assertEqual(1,r.length),a.start=0,a.count=5,a.onComplete=s,t.fetch(a)}function i(r,a){e.assertEqual(5,r.length),a.start=3,a.count=1,a.onComplete=u,t.fetch(a)}return t.fetch({queryOptions:{deep:!0},onComplete:function(r,a){e.assertEqual(49,r.length),a.start=1,a.count=5,a.onComplete=i,t.fetch(a)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_pattern0",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"C*"},onComplete:function(t,a){e.assertEqual(3,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_pattern1",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"?ussia"},onComplete:function(t,a){e.assertEqual(1,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_pattern_caseInsensitive",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"germany"},queryOptions:{ignoreCase:!0},onComplete:function(t,a){e.assertEqual(1,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_fetch_pattern_caseSensitive",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Germany"},queryOptions:{ignoreCase:!1},onComplete:function(t,a){e.assertEqual(1,t.length),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_getLabel",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(a.length,1);var n=t.getLabel(a[0]);e.assertTrue(null!==n),e.assertEqual("China",n),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_getLabelAttributes",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(a.length,1);var n=t.getLabelAttributes(a[0]);e.assertTrue(null!==n),e.assertEqual("name",n[0]),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_getValue",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Guadalajara"},queryOptions:{deep:!0},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.hasAttribute(n,"name")),e.assertEqual(t.getValue(n,"name"),"Guadalajara"),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_getValues",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Guadalajara"},queryOptions:{deep:!0},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.hasAttribute(n,"name"));var s=t.getValues(n,"name");e.assertEqual(1,s.length),e.assertEqual("Guadalajara",s[0]),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_isItem",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Guadalajara"},queryOptions:{deep:!0},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.isItem(n)),e.assertTrue(!t.isItem({})),e.assertTrue(!t.isItem("Foo")),e.assertTrue(!t.isItem(1)),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_isItem_multistore",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=dojox.data.tests.stores.FileStore.getGeoStore(),a=new doh.Deferred;function o(e,t){a.errback(e)}return t.fetch({query:{name:"China"},onComplete:function(n,s){e.assertEqual(1,n.length);var u=n[0];e.assertTrue(t.isItem(u)),r.fetch({query:{name:"Guadalajara"},queryOptions:{deep:!0},onComplete:function(o,n){e.assertEqual(1,o.length);var s=o[0];e.assertTrue(r.isItem(s)),e.assertTrue(!t.isItem(s)),e.assertTrue(!r.isItem(u)),a.callback(!0)},onError:o})},onError:o}),a}},{name:"testReadAPI_hasAttribute",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.hasAttribute(n,"name")),e.assertTrue(!t.hasAttribute(n,"bob")),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_containsValue",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.containsValue(n,"name","China")),e.assertTrue(!t.containsValue(n,"name","bob")),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testReadAPI_sortDescending",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=["root.json","United States of America","Sudan","Spain","Russia","Mongolia","Mexico","Kenya","Italy","India","Germany","France","Egypt","Commonwealth of Australia","China","Canada","Brazil","Argentina"],a=new doh.Deferred;return t.fetch({query:{name:"*"},sort:[{attribute:"name",descending:!0}],onComplete:function(o,n){e.assertEqual(18,o.length);for(var s=0;s<o.length;s++)e.assertEqual(r[s],t.getValue(o[s],"name").toString());a.callback(!0)},onError:function(e,t){a.errback(e)}}),a}},{name:"testReadAPI_sortAscending",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=["root.json","United States of America","Sudan","Spain","Russia","Mongolia","Mexico","Kenya","Italy","India","Germany","France","Egypt","Commonwealth of Australia","China","Canada","Brazil","Argentina"].reverse(),a=new doh.Deferred;return t.fetch({query:{name:"*"},sort:[{attribute:"name"}],onComplete:function(o,n){e.assertEqual(18,o.length);for(var s=0;s<o.length;s++)e.assertEqual(r[s],t.getValue(o[s],"name").toString());a.callback(!0)},onError:function(e,t){a.errback(e)}}),a}},{name:"testReadAPI_isItemLoaded",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertTrue(t.isItemLoaded(n)),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},function(e){var t,r=dojox.data.tests.stores.FileStore.getGeoStore().getFeatures(),a=0;for(t in r)e.assertTrue("dojo.data.api.Read"===t||"dojo.data.api.Identity"===t),a++;e.assertEqual(2,a)},{name:"testReadAPI_getAttributes",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"China"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0],s=t.getAttributes(n);e.assertEqual(7,s.length);for(var u=0;u<s.length;u++)e.assertTrue("children"===s[u]||"directory"===s[u]||"name"===s[u]||"path"===s[u]||"modified"===s[u]||"size"===s[u]||"parentDir"===s[u]);r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},function(e){var t,r=dojox.data.tests.stores.FileStore.getGeoStore(),a=new dojo.data.api.Read,o=!0;for(t in a){if("function"==typeof a[t])if("function"!=typeof r[t]){console.log("Problem with function: ["+t+"]"),o=!1;break}}e.assertTrue(o)},{name:"testIdentityAPI_getIdentity",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Argentina"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0];e.assertEqual("./Argentina",t.getIdentity(n)),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testIdentityAPI_getIdentityAttributes",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetch({query:{name:"Argentina"},onComplete:function(a,o){e.assertEqual(1,a.length);var n=a[0],s=t.getIdentityAttributes(n);e.assertEqual(1,s.length),e.assertEqual("path",s[0]),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},{name:"testIdentityAPI_fetchItemByIdentity",timeout:1e4,runTest:function(e){var t=dojox.data.tests.stores.FileStore.getGeoStore(),r=new doh.Deferred;return t.fetchItemByIdentity({identity:"./Argentina",onItem:function(a,o){e.assertTrue(null!==a),e.assertTrue(t.isItem(a)),e.assertEqual("Argentina",t.getValue(a,"name")),r.callback(!0)},onError:function(e,t){r.errback(e)}}),r}},function(e){var t,r=dojox.data.tests.stores.FileStore.getGeoStore(),a=new dojo.data.api.Identity,o=!0;for(t in a){if("function"==typeof a[t])if("function"!=typeof r[t]){console.log("Problem with function: ["+t+"]"),o=!1;break}}e.assertTrue(o)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/FileStore.js.map
