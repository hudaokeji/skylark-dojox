/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.data.tests.stores.HtmlStore"),dojo.require("dojox.data.HtmlStore"),dojo.require("dojo.data.api.Read"),dojo.require("dojo.data.api.Identity"),dojox.data.tests.stores.HtmlStore.getBooks3Store=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/books3.html").toString(),dataId:"books3"})},dojox.data.tests.stores.HtmlStore.getBooks3StoreOnCreate=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/books3.html").toString(),dataId:"books3",fetchOnCreate:!0})},dojox.data.tests.stores.HtmlStore.getBooks2Store=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/books2.html").toString(),dataId:"books2"})},dojox.data.tests.stores.HtmlStore.getBooksStore=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/books.html").toString(),dataId:"books"})},dojox.data.tests.stores.HtmlStore.getBooksStoreWhitespace=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/booksWhitespace.html").toString(),dataId:"books",trimWhitespace:!0})},dojox.data.tests.stores.HtmlStore.getBooks3StoreWhitespace=function(){return new dojox.data.HtmlStore({url:require.toUrl("dojox/data/tests/stores/books3Whitespace.html").toString(),dataId:"books3",trimWhitespace:!0})},doh.register("dojox.data.tests.stores.HtmlStore",[function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=new doh.Deferred;return e.fetch({query:{isbn:"*"},onComplete:function(e,r){t.assertEqual(20,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStoreWhitespace(),o=new doh.Deferred;return e.fetch({query:{isbn:"*"},onComplete:function(e,r){t.assertEqual(20,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3Store(),o=new doh.Deferred;return e.fetch({query:{name:"*"},onComplete:function(e,r){t.assertEqual(5,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStoreWhitespace(),o=new doh.Deferred;return e.fetch({query:{isbn:"19"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3Store(),o=new doh.Deferred;return e.fetch({query:{name:"A9B57C - Title of 1 - Author of 1"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3StoreOnCreate(),o=new doh.Deferred;return e.fetch({query:{name:"A9B57C - Title of 1 - Author of 1"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3StoreWhitespace(),o=new doh.Deferred;return e.fetch({query:{name:"A9B57C - Title of 1 - Author of 1"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=new doh.Deferred;function r(o,r){t.assertEqual(5,o.length),r.start=3,r.count=1,r.onComplete=n,e.fetch(r)}function n(o,r){t.assertEqual(1,o.length),r.start=0,r.count=5,r.onComplete=s,e.fetch(r)}function s(o,r){t.assertEqual(5,o.length),r.start=2,r.count=20,r.onComplete=a,e.fetch(r)}function a(o,r){t.assertEqual(18,o.length),r.start=9,r.count=100,r.onComplete=u,e.fetch(r)}function u(o,r){t.assertEqual(11,o.length),r.start=2,r.count=20,r.onComplete=l,e.fetch(r)}function l(e,r){t.assertEqual(18,e.length),o.callback(!0)}return e.fetch({onComplete:function(o,n){t.assertEqual(20,o.length),n.start=1,n.count=5,n.onComplete=r,e.fetch(n)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"?9B574"},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B57?"},onComplete:function(e,r){t.assertEqual(4,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9*"},onComplete:function(e,r){t.assertEqual(5,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"?9b574"},queryOptions:{ignoreCase:!0},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"?9B574"},queryOptions:{ignoreCase:!1},onComplete:function(e,r){t.assertEqual(1,e.length),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(r.length,1);var s=e.getLabel(r[0]);t.assertTrue(null!==s),t.assertEqual("Item #4",s),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3Store(),o=new doh.Deferred;return e.fetch({query:{name:"A9B57C - Title of 1 - Author of 1"},onComplete:function(r,n){t.assertEqual(r.length,1);var s=e.getLabel(r[0]);t.assertTrue(null!==s),t.assertEqual("A9B57C - Title of 1 - Author of 1",s),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(r.length,1);var s=e.getLabelAttributes(r[0]);t.assertTrue(null===s),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.hasAttribute(s,"isbn")),t.assertEqual(e.getValue(s,"isbn"),"A9B574"),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.hasAttribute(s,"isbn"));var a=e.getValues(s,"isbn");t.assertEqual(1,a.length),t.assertEqual("A9B574",a[0]),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.isItem(s)),t.assertTrue(!e.isItem({})),t.assertTrue(!e.isItem("Foo")),t.assertTrue(!e.isItem(1)),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=dojox.data.tests.stores.HtmlStore.getBooks2Store(),r=new doh.Deferred;function n(t,e){r.errback(t)}return e.fetch({query:{isbn:"1"},onComplete:function(s,a){t.assertEqual(1,s.length);var u=s[0];t.assertTrue(e.isItem(u)),o.fetch({query:{isbn:"A9B574"},onComplete:function(n,s){t.assertEqual(1,n.length);var a=n[0];t.assertTrue(o.isItem(a)),t.assertTrue(!e.isItem(a)),t.assertTrue(!o.isItem(u)),r.callback(!0)},onError:n})},onError:n}),r},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.hasAttribute(s,"isbn")),t.assertTrue(!e.hasAttribute(s,"bob")),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.containsValue(s,"isbn","A9B574")),t.assertTrue(!e.containsValue(s,"isbn","bob")),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=[9,8,7,6,5,4,3,20,2,19,18,17,16,15,14,13,12,11,10,1],r=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn",descending:!0}],onComplete:function(n,s){t.assertEqual(20,n.length);for(var a=0;a<n.length;a++)t.assertEqual(o[a],e.getValue(n[a],"isbn").toString());r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=[1,10,11,12,13,14,15,16,17,18,19,2,20,3,4,5,6,7,8,9],r=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn"}],onComplete:function(n,s){t.assertEqual(20,n.length);for(var a=0;a<n.length;a++)t.assertEqual(o[a],e.getValue(n[a],"isbn").toString());r.callback(!0)},onError:function(t,e){r.errback(t)}}),r},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore();e.comparatorMap={},e.comparatorMap.isbn=function(t,e){var o=0;return parseInt(t.toString())>parseInt(e.toString())?o=1:parseInt(t.toString())<parseInt(e.toString())&&(o=-1),o};var o=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn",descending:!0}],onComplete:function(r,n){t.assertEqual(20,r.length);for(var s=20,a=0;a<r.length;a++)t.assertEqual(s,e.getValue(r[a],"isbn").toString()),s--;o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore();e.comparatorMap={},e.comparatorMap.isbn=function(t,e){var o=0;return parseInt(t.toString())>parseInt(e.toString())?o=1:parseInt(t.toString())<parseInt(e.toString())&&(o=-1),o};var o=new doh.Deferred;return e.fetch({query:{isbn:"*"},sort:[{attribute:"isbn"}],onComplete:function(r,n){t.assertEqual(20,r.length);for(var s=1,a=0;a<r.length;a++)t.assertEqual(s,e.getValue(r[a],"isbn").toString()),s++;o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertTrue(e.isItemLoaded(s)),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store().getFeatures(),o=0;for(i in e)t.assertTrue("dojo.data.api.Read"===i||"dojo.data.api.Identity"===i),o++;t.assertEqual(2,o)},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0],a=e.getAttributes(s);t.assertEqual(3,a.length);for(var u=0;u<a.length;u++)t.assertTrue("isbn"===a[u]||"title"===a[u]||"author"===a[u]);o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=new dojo.data.api.Read,r=!0;for(i in o){if("function"==typeof o[i])if("function"!=typeof e[i]){console.log("Problem with function: ["+i+"]"),r=!1;break}}t.assertTrue(r)},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertEqual(4,e.getIdentity(s)),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3Store(),o=new doh.Deferred;return e.fetch({query:{name:"A9B57C - Title of 1 - Author of 1"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0];t.assertEqual("A9B57C - Title of 1 - Author of 1",e.getIdentity(s)),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetch({query:{isbn:"A9B574"},onComplete:function(r,n){t.assertEqual(1,r.length);var s=r[0],a=e.getIdentityAttributes(s);t.assertEqual(null,a),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks2Store(),o=new doh.Deferred;return e.fetchItemByIdentity({identity:4,onItem:function(r,n){t.assertTrue(null!==r),t.assertTrue(e.isItem(r)),t.assertEqual("A9B574",e.getValue(r,"isbn")),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooks3Store(),o=new doh.Deferred;return e.fetchItemByIdentity({identity:"A9B57C - Title of 1 - Author of 1",onItem:function(r,n){t.assertTrue(null!==r),t.assertTrue(e.isItem(r)),t.assertEqual("A9B57C - Title of 1 - Author of 1",e.getValue(r,"name")),o.callback(!0)},onError:function(t,e){o.errback(t)}}),o},function(t){var e=dojox.data.tests.stores.HtmlStore.getBooksStore(),o=new dojo.data.api.Identity,r=!0;for(i in o){if("function"==typeof o[i])if("function"!=typeof e[i]){console.log("Problem with function: ["+i+"]"),r=!1;break}}t.assertTrue(r)}]);
//# sourceMappingURL=../../../sourcemaps/data/tests/stores/HtmlStore.js.map
