/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/query","dojo/dom-geometry","dojo/dom-attr","dojo/dom-style","dijit/registry","./LayoutBase","../utils/layout","../utils/constraints","dojo/sniff"],function(e,t,i,o,n,d,a,r,l,s,c,p,h){return e("dojox.app.controllers.Layout",s,{constructor:function(e,t){},onResize:function(){this._doResize(this.app),this.resizeSelectedChildren(this.app)},resizeSelectedChildren:function(e){for(var t in e.selectedChildren)e.selectedChildren[t]&&e.selectedChildren[t].domNode&&(this.app.log("in Layout resizeSelectedChildren calling resizeSelectedChildren calling _doResize for w.selectedChildren[hash].id="+e.selectedChildren[t].id),this._doResize(e.selectedChildren[t]),i.forEach(e.selectedChildren[t].domNode.children,function(e){l.byId(e.id)&&l.byId(e.id).resize&&l.byId(e.id).resize()}),this.resizeSelectedChildren(e.selectedChildren[t]))},initLayout:function(e){this.app.log("in app/controllers/Layout.initLayout event=",e),this.app.log("in app/controllers/Layout.initLayout event.view.parent.name=[",e.view.parent.name,"]"),e.view.domNode.parentNode&&(8!=h("ie")||e.view.domNode.parentElement)||(this.app.useConfigOrder?e.view.parent.domNode.appendChild(e.view.domNode):this.addViewToParentDomByConstraint(e)),a.set(e.view.domNode,"data-app-constraint",e.view.constraint),this.inherited(arguments)},addViewToParentDomByConstraint:function(e){var t=e.view.constraint;if("bottom"===t)e.view.parent.domNode.appendChild(e.view.domNode);else if("top"===t)e.view.parent.domNode.insertBefore(e.view.domNode,e.view.parent.domNode.firstChild);else if(e.view.parent.domNode.children.length>0)for(var i in e.view.parent.domNode.children){var o=e.view.parent.domNode.children[i],n="ltr"===r.get(e.view.parent.domNode,"direction"),d=n?"left":"right",a=n?"right":"left";if(o.getAttribute&&o.getAttribute("data-app-constraint")){var l=o.getAttribute("data-app-constraint");if("bottom"===l||l===a||"top"!==l&&t===d){e.view.parent.domNode.insertBefore(e.view.domNode,o);break}}}e.view.domNode.parentNode&&(8!=h("ie")||e.view.domNode.parentElement)||e.view.parent.domNode.appendChild(e.view.domNode)},_doResize:function(e){var i=e.domNode;if(i){var n={};if("h"in n&&"w"in n||(n=t.mixin(d.getMarginBox(i),n)),e!==this.app){var a=r.getComputedStyle(i),l=d.getMarginExtents(i,a),s=d.getBorderExtents(i,a),c=e._borderBox={w:n.w-(l.w+s.w),h:n.h-(l.h+s.h)},p=d.getPadExtents(i,a);e._contentBox={l:r.toPixelValue(i,a.paddingLeft),t:r.toPixelValue(i,a.paddingTop),w:c.w-p.w,h:c.h-p.h}}else e._contentBox={l:0,t:0,h:o.global.innerHeight||o.doc.documentElement.clientHeight,w:o.global.innerWidth||o.doc.documentElement.clientWidth};this.inherited(arguments)}else this.app.log("Warning - View has not been loaded, in Layout _doResize view.domNode is not set for view.id="+e.id+" view=",e)},layoutView:function(e){e.view&&(this.inherited(arguments),e.doResize&&(this._doResize(e.parent||this.app),this._doResize(e.view)))},_doLayout:function(e){if(e){var t;this.app.log("in Layout _doLayout called for view.id="+e.id+" view=",e);var o=p.getSelectedChild(e,e.constraint);o&&o.isFullScreen?console.warn("fullscreen sceen layout"):(t=n("> [data-app-constraint]",e.domNode).map(function(e){var t=l.getEnclosingWidget(e);return t?(t._constraint=a.get(e,"data-app-constraint"),t):{domNode:e,_constraint:a.get(e,"data-app-constraint")}}),o&&(t=i.filter(t,function(e){return e.domNode&&e._constraint},e))),e._contentBox&&c.layoutChildren(e.domNode,e._contentBox,t)}else console.warn("layout empty view.")}})});
//# sourceMappingURL=../../sourcemaps/app/controllers/Layout.js.map
