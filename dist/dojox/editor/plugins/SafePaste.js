/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo","dijit","dojox","dojox/editor/plugins/PasteFromWord","dijit/Dialog","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/string","dojo/i18n!dojox/editor/plugins/nls/SafePaste","dojo/i18n!dijit/nls/common","dojo/i18n!dijit/_editor/nls/commands"],function(t,i,e,o){var s=t.declare("dojox.editor.plugins.SafePaste",[o],{_initButton:function(){this._filters=this._filters.slice(0);var e=t.i18n.getLocalization("dojox.editor.plugins","SafePaste");t.mixin(e,t.i18n.getLocalization("dijit","common")),t.mixin(e,t.i18n.getLocalization("dijit._editor","commands")),this._uId=i.getUniqueId(this.editor.id),e.uId=this._uId,e.width=this.width||"400px",e.height=this.height||"300px",this._dialog=new i.Dialog({title:e.paste}).placeAt(t.body()),this._dialog.set("content",t.string.substitute(this._template,e)),t.style(t.byId(this._uId+"_rte"),"opacity",.001),this.connect(i.byId(this._uId+"_paste"),"onClick","_paste"),this.connect(i.byId(this._uId+"_cancel"),"onClick","_cancel"),this.connect(this._dialog,"onHide","_clearDialog"),t.forEach(this.stripTags,function(t){var i=t+"",e=new RegExp("<\\s*"+i+"[^>]*>","igm"),o=new RegExp("<\\\\?\\/\\s*"+i+"\\s*>","igm");this._filters.push({regexp:e,handler:""}),this._filters.push({regexp:o,handler:""})},this)},updateState:function(){},setEditor:function(i){this.editor=i,this._initButton(),this.editor.onLoadDeferred.addCallback(t.hitch(this,function(){var i=t.hitch(this,function(i){return i&&t.stopEvent(i),this._openDialog(),!0});this.connect(this.editor.editNode,"onpaste",i),this.editor._pasteImpl=i}))}});return t.subscribe(i._scopeName+".Editor.getPlugin",null,function(t){t.plugin||"safepaste"===t.args.name.toLowerCase()&&(t.plugin=new s({width:t.args.hasOwnProperty("width")?t.args.width:"400px",height:t.args.hasOwnProperty("height")?t.args.width:"300px",stripTags:t.args.hasOwnProperty("stripTags")?t.args.stripTags:null}))}),s});
//# sourceMappingURL=../../sourcemaps/editor/plugins/SafePaste.js.map
