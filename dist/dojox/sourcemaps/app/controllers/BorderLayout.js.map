{"version":3,"sources":["app/controllers/BorderLayout.js"],"names":["define","declare","domAttr","domStyle","LayoutBase","BorderContainer","StackContainer","ContentPane","registry","initLayout","event","bc","this","app","log","view","name","parent","borderLayoutCreated","byId","id","style","domNode","appendChild","startup","constraint","reg","cp1","addChild","noSplitter","borderLayoutNoSplitter","sc1","doLayout","splitter","region","set","inherited","arguments","hideView","sc","removedFromBc","removeChild","showView","cp","selectChild","resize"],"mappings":";;;;;;;AAAAA,QAAQ,qBAAsB,gBAAiB,iBAAkB,eAAe,+BAC9E,8BAA+B,2BAA4B,kBAC7D,SAASC,EAASC,EAASC,EAAUC,EAAYC,EAAiBC,EAAgBC,EAAaC,GAQ9F,OAAOP,EAAQ,qCAAsCG,GAEpDK,WAAY,SAASC,GAapB,IAAIC,EAFJC,KAAKC,IAAIC,IAAI,+DAA+DJ,EAAMK,KAAKC,KAAK,6BAA6BN,EAAMK,KAAKE,OAAOD,KAAK,KAG5IJ,KAAKM,oBAORP,EAAKH,EAASW,KAAKP,KAAKC,IAAIO,GAAG,QAN/BR,KAAKM,qBAAsB,EAC3BP,EAAK,IAAIN,GAAiBe,GAAGR,KAAKC,IAAIO,GAAG,MAAOC,MAAO,kDACvDX,EAAMK,KAAKE,OAAOK,QAAQC,YAAYZ,EAAGW,SAEzCX,EAAGa,WAKJZ,KAAKC,IAAIC,IAAI,oEAAoEJ,EAAMK,KAAKU,YAC5F,IAAIA,EAAaf,EAAMK,KAAKU,WAE5B,GAAGf,EAAMK,KAAKE,OAAOG,IAAMR,KAAKC,IAAIO,GAAG,CACtC,IAAIM,EAAMlB,EAASW,KAAKT,EAAMK,KAAKE,OAAOG,GAAG,IAAIK,GACjD,GAAGC,EAAI,EACFC,EAAMnB,EAASW,KAAKT,EAAMK,KAAKK,GAAG,OAAOK,IAO5CE,EAAIL,QAAQC,YAAYb,EAAMK,KAAKO,WALnCK,EAAM,IAAIpB,GAAaa,GAAGV,EAAMK,KAAKK,GAAG,OAAOK,KAC3CG,SAASlB,EAAMK,MACnBW,EAAIE,SAASD,GACbhB,EAAGiB,SAASF,QAIT,CAEJ,IAEIC,EAFAE,EAAajB,KAAKC,IAAIiB,yBAA0B,EAChDC,EAAM,IAAIzB,GAAgB0B,UAAU,EAAMC,UAAUJ,EAAYK,OAAOT,EAAYL,GAAGV,EAAMK,KAAKE,OAAOG,GAAG,IAAIK,KAC/GE,EAAM,IAAIpB,GAAaa,GAAGV,EAAMK,KAAKK,GAAG,OAAOK,KAC/CG,SAASlB,EAAMK,MACnBgB,EAAIH,SAASD,GACbhB,EAAGiB,SAASG,SAGbrB,EAAMK,KAAKE,OAAOK,QAAQC,YAAYb,EAAMK,KAAKO,SACjDpB,EAAQiC,IAAIzB,EAAMK,KAAKO,QAAS,sBAAuBZ,EAAMK,KAAKU,YAGnEb,KAAKwB,UAAUC,YAGhBC,SAAU,SAASvB,GAClB,IAAIJ,EAAKH,EAASW,KAAKP,KAAKC,IAAIO,GAAG,OAC/BmB,EAAK/B,EAASW,KAAKJ,EAAKE,OAAOG,GAAG,IAAIL,EAAKU,YAC5Cd,GAAM4B,IACRA,EAAGC,eAAgB,EACnB7B,EAAG8B,YAAYF,KAIjBG,SAAU,SAAS3B,GAClB,IAAIwB,EAAK/B,EAASW,KAAKJ,EAAKE,OAAOG,GAAG,IAAIL,EAAKU,YAC3CkB,EAAKnC,EAASW,KAAKJ,EAAKK,GAAG,OAAOL,EAAKU,YACxCc,GAAMI,IACLJ,EAAGC,gBACLD,EAAGC,eAAgB,EACnBhC,EAASW,KAAKP,KAAKC,IAAIO,GAAG,OAAOQ,SAASW,GAC1CpC,EAASgC,IAAIpB,EAAKO,QAAS,UAAW,KAEvCnB,EAASgC,IAAIQ,EAAGrB,QAAS,UAAW,IACpCiB,EAAGK,YAAYD,GACfJ,EAAGM","file":"../../../app/controllers/BorderLayout.js","sourcesContent":["define([\"dojo/_base/declare\", \"dojo/dom-attr\", \"dojo/dom-style\", \"./LayoutBase\",\"dijit/layout/BorderContainer\",\r\n\t\t\"dijit/layout/StackContainer\", \"dijit/layout/ContentPane\", \"dijit/registry\"],\r\nfunction(declare, domAttr, domStyle, LayoutBase, BorderContainer, StackContainer, ContentPane, registry){\r\n\t// module:\r\n\t//\t\tdojox/app/controllers/BorderLayout\r\n\t// summary:\r\n\t//\t\tWill layout an application with a BorderContainer.  \r\n\t//\t\tEach view to be shown in a region of the BorderContainer will be wrapped in a StackContainer and a ContentPane.\r\n\t//\t\t\r\n\r\n\treturn declare(\"dojox.app.controllers.BorderLayout\", LayoutBase, {\r\n\r\n\t\tinitLayout: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResponse to dojox/app \"app-initLayout\" event which is setup in LayoutBase.\r\n\t\t\t//\t\tThe initLayout event is called once when the View is being created the first time.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tUse emit to trigger \"app-initLayout\" event, and this function will respond to the event. For example:\r\n\t\t\t//\t\t|\tthis.app.emit(\"app-initLayout\", view);\r\n\t\t\t//\r\n\t\t\t// event: Object\r\n\t\t\t// |\t\t{\"view\": view, \"callback\": function(){}};\r\n\t\t\tthis.app.log(\"in app/controllers/BorderLayout.initLayout event.view.name=[\",event.view.name,\"] event.view.parent.name=[\",event.view.parent.name,\"]\");\r\n\r\n\t\t\tvar bc;\r\n\t\t\tif(!this.borderLayoutCreated){ // If the BorderContainer has not been created yet, create it.\r\n\t\t\t\tthis.borderLayoutCreated = true;\r\n\t\t\t\tbc = new BorderContainer({id:this.app.id+\"-BC\", style: \"height:100%;width:100%;border:1px solid black\"});\r\n\t\t\t\tevent.view.parent.domNode.appendChild(bc.domNode);\t// put the border container into the parent (app)\r\n\r\n\t\t\t\tbc.startup();\t// startup the BorderContainer\r\n\t\t\t}else{\r\n\t\t\t\tbc = registry.byId(this.app.id+\"-BC\");\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tthis.app.log(\"in app/controllers/BorderLayout.initLayout event.view.constraint=\",event.view.constraint);\r\n\t\t\tvar constraint = event.view.constraint;\t// constraint holds the region for this view, center, top etc.\r\n\t\t\t\r\n\t\t\tif(event.view.parent.id == this.app.id){\t// If the parent of this view is the app we are working with the BorderContainer\r\n\t\t\t\tvar reg = registry.byId(event.view.parent.id+\"-\"+constraint);\t\t\t\r\n\t\t\t\tif(reg){\t// already has a stackContainer, just create the contentPane for this view and add it to the stackContainer.\r\n\t\t\t\t\tvar cp1 = registry.byId(event.view.id+\"-cp-\"+constraint);\r\n\t\t\t\t\tif(!cp1){\r\n\t\t\t\t\t\tcp1 = new ContentPane({id:event.view.id+\"-cp-\"+constraint});\r\n\t\t\t\t\t\tcp1.addChild(event.view); // important to add the widget to the cp before adding cp to BorderContainer for height\r\n\t\t\t\t\t\treg.addChild(cp1);\r\n\t\t\t\t\t\tbc.addChild(reg);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcp1.domNode.appendChild(event.view.domNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{ // need a contentPane\r\n\t\t\t\t\t// this is where the region (constraint) is set for the BorderContainer's StackContainer\r\n\t\t\t\t\tvar noSplitter = this.app.borderLayoutNoSplitter || false;\r\n\t\t\t\t\tvar sc1 = new StackContainer({doLayout: true, splitter:!noSplitter, region:constraint, id:event.view.parent.id+\"-\"+constraint});\r\n\t\t\t\t\tvar cp1 = new ContentPane({id:event.view.id+\"-cp-\"+constraint});\r\n\t\t\t\t\tcp1.addChild(event.view); // should we use addChild or appendChild?\r\n\t\t\t\t\tsc1.addChild(cp1);\r\n\t\t\t\t\tbc.addChild(sc1);\r\n\t\t\t\t}\r\n\t\t\t}else{ // Not a top level page transition, so not changing a page in the BorderContainer, so handle it like Layout.\r\n\t\t\t\tevent.view.parent.domNode.appendChild(event.view.domNode);\r\n\t\t\t\tdomAttr.set(event.view.domNode, \"data-app-constraint\", event.view.constraint);\r\n\t\t\t}\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\thideView: function(view){\r\n\t\t\tvar bc = registry.byId(this.app.id+\"-BC\");\r\n\t\t\tvar sc = registry.byId(view.parent.id+\"-\"+view.constraint);\r\n\t\t\tif(bc && sc){\r\n\t\t\t\tsc.removedFromBc = true;\r\n\t\t\t\tbc.removeChild(sc);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshowView: function(view){\r\n\t\t\tvar sc = registry.byId(view.parent.id+\"-\"+view.constraint);\r\n\t\t\tvar cp = registry.byId(view.id+\"-cp-\"+view.constraint);\r\n\t\t\tif(sc && cp){\r\n\t\t\t\tif(sc.removedFromBc){\r\n\t\t\t\t\tsc.removedFromBc = false;\r\n\t\t\t\t\tregistry.byId(this.app.id+\"-BC\").addChild(sc);\r\n\t\t\t\t\tdomStyle.set(view.domNode, \"display\", \"\");\r\n\t\t\t\t}\r\n\t\t\t\tdomStyle.set(cp.domNode, \"display\", \"\");\r\n\t\t\t\tsc.selectChild(cp);\r\n\t\t\t\tsc.resize();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}