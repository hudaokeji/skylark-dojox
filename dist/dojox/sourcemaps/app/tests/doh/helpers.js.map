{"version":3,"sources":["app/tests/doh/helpers.js"],"names":["isVisible","node","p","domNode","dojo","style","position","y","h","x","w","isHidden","innerText","textContent","tabOrder","root","elems","walkTree","parent","query","forEach","child","isIE","scopeName","dijit","_isElementShown","isTabNavigable","push","elem","tabIndex","hasAttr","attr","pos","length","nodeName","toUpperCase","body","sort","a","b","map","onFocus","func","handle","subscribe","unsubscribe","setTimeout"],"mappings":";;;;;;;AAEA,SAASA,UAAuCC,GAG/C,IAAIC,EAEJ,OADGD,EAAKE,UAAUF,EAAOA,EAAKE,SACS,QAA/BC,KAAKC,MAAMJ,EAAM,YACW,UAAlCG,KAAKC,MAAMJ,EAAM,iBACjBC,EAAIE,KAAKE,SAASL,GAAM,IAASM,EAAIL,EAAEM,GAAK,GAAKN,EAAEO,EAAIP,EAAEQ,GAAK,GAAKR,EAAEM,GAAKN,EAAEQ,GAG/E,SAASC,SAAsCV,GAG9C,IAAIC,EAEJ,OADGD,EAAKE,UAAUF,EAAOA,EAAKE,SACS,QAA/BC,KAAKC,MAAMJ,EAAM,YACW,UAAlCG,KAAKC,MAAMJ,EAAM,iBACjBC,EAAIE,KAAKE,SAASL,GAAM,IAASM,EAAIL,EAAEM,EAAI,GAAKN,EAAEO,EAAIP,EAAEQ,EAAI,GAAKR,EAAEM,GAAK,GAAKN,EAAEQ,GAAK,GAGvF,SAASE,UAAsBX,GAG9B,OAAOA,EAAKY,aAAeZ,EAAKW,WAAa,GAG9C,SAASE,SAAsBC,GAK9B,IAAIC,KA2BJ,OAzBA,SAASC,EAAoBC,GAC5Bd,KAAKe,MAAM,MAAOD,GAAQE,QAAQ,SAASC,GAGtCjB,KAAKkB,MAA0B,SAAlBD,EAAME,YAAwBC,MAAMC,gBAAgBJ,KAIlEG,MAAME,eAAeL,IACvBL,EAAMW,MACLC,KAAMP,EACNQ,SAAUzB,KAAK0B,QAAQT,EAAO,YAAcjB,KAAK2B,KAAKV,EAAO,YAAc,EAC3EW,IAAKhB,EAAMiB,SAGsB,UAAhCZ,EAAMa,SAASC,eACjBlB,EAASI,MAIZJ,CAASF,GAAQX,KAAKgC,QAEtBpB,EAAMqB,KAAK,SAASC,EAAGC,GACtB,OAAOD,EAAET,UAAYU,EAAEV,SAAWS,EAAET,SAAWU,EAAEV,SAAWS,EAAEN,IAAMO,EAAEP,MAEhE5B,KAAKoC,IAAIxB,EAAO,SAASY,GAAO,OAAOA,EAAKA,OAIpD,SAASa,QAAQC,GAIhB,IAAIC,EAASvC,KAAKwC,UAAU,YAAa,SAAS3C,GACjDG,KAAKyC,YAAYF,GACjBG,WAAW,WAAYJ,EAAKzC,IAAU","file":"../../../../app/tests/doh/helpers.js","sourcesContent":["// Helper methods for automated testing\r\n\r\nfunction isVisible(/*dijit._Widget || DomNode*/ node){\r\n\t// summary:\r\n\t//\t\tReturn true if node/widget is visible\r\n\tvar p;\r\n\tif(node.domNode){ node = node.domNode; }\r\n\treturn (dojo.style(node, \"display\") != \"none\") &&\r\n\t\t(dojo.style(node, \"visibility\") != \"hidden\") &&\r\n\t\t(p = dojo.position(node, true), p.y + p.h >= 0 && p.x + p.w >= 0 && p.h && p.w);\r\n}\r\n\r\nfunction isHidden(/*dijit._Widget || DomNode*/ node){\r\n\t// summary:\r\n\t//\t\tReturn true if node/widget is hidden\r\n\tvar p;\r\n\tif(node.domNode){ node = node.domNode; }\r\n\treturn (dojo.style(node, \"display\") == \"none\") ||\r\n\t\t(dojo.style(node, \"visibility\") == \"hidden\") ||\r\n\t\t(p = dojo.position(node, true), p.y + p.h < 0 || p.x + p.w < 0 || p.h <= 0 || p.w <= 0);\r\n}\r\n\r\nfunction innerText(/*DomNode*/ node){\r\n\t// summary:\r\n\t//\t\tBrowser portable function to get the innerText of specified DOMNode\r\n\treturn node.textContent || node.innerText || \"\";\r\n}\r\n\r\nfunction tabOrder(/*DomNode?*/ root){\r\n\t// summary:\r\n\t//\t\tReturn all tab-navigable elements under specified node in the order that\r\n\t//\t\tthey will be visited (by repeated presses of the tab key)\r\n\r\n\tvar elems = [];\r\n\r\n\tfunction walkTree(/*DOMNode*/parent){\r\n\t\tdojo.query(\"> *\", parent).forEach(function(child){\r\n\t\t\t// Skip hidden elements, and also non-HTML elements (those in custom namespaces) in IE,\r\n\t\t\t// since show() invokes getAttribute(\"type\"), which crash on VML nodes in IE.\r\n\t\t\tif((dojo.isIE && child.scopeName!==\"HTML\") || !dijit._isElementShown(child)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(dijit.isTabNavigable(child)){\r\n\t\t\t\telems.push({\r\n\t\t\t\t\telem: child,\r\n\t\t\t\t\ttabIndex: dojo.hasAttr(child, \"tabIndex\") ? dojo.attr(child, \"tabIndex\") : 0,\r\n\t\t\t\t\tpos: elems.length\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(child.nodeName.toUpperCase() != 'SELECT'){\r\n\t\t\t\twalkTree(child);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\twalkTree(root || dojo.body());\r\n\r\n\telems.sort(function(a, b){\r\n\t\treturn a.tabIndex != b.tabIndex ? a.tabIndex - b.tabIndex : a.pos - b.pos;\r\n\t});\r\n\treturn dojo.map(elems, function(elem){ return elem.elem; });\r\n}\r\n\r\n\r\nfunction onFocus(func){\r\n\t// summary:\r\n\t//\t\tOn the next change of focus, and after widget has had time to react to focus event,\r\n\t//\t\tcall func(node) with the newly focused node\r\n\tvar handle = dojo.subscribe(\"focusNode\", function(node){\r\n\t\tdojo.unsubscribe(handle);\r\n\t\tsetTimeout(function(){ func(node); }, 0);\r\n\t});\r\n}"]}