{"version":3,"sources":["app/tests/mediaQuery3ColumnApp/controllers/NavigationController.js"],"names":["define","lang","declare","dom","domStyle","has","win","config","domClass","domAttr","domConstruct","Controller","constructor","app","this","small","medium","lastTransition","lastParams","lastEvent","lastSize","events","MQ3ColApp/TestOption1","TestOption1","MQ3ColApp/MainOption1","MainOption1","MQ3ColApp/MainOption2","MainOption2","MQ3ColApp/MainOption3","MainOption3","MQ3ColApp/LastOption1","LastOption1","MQ3ColApp/LastOption2","LastOption2","MQ3ColApp/LastOption3","LastOption3","MQ3ColApp/BackFromMain","BackFromMain","MQ3ColApp/BackFromTest","BackFromTest","MQ3ColApp/BackFromLast","BackFromLast","mblHideAddressBar","topic","subscribe","hitch","onResize","bind","global","e","doTransition","console","log","mainCenter","mainSel","tparam1","mainCenter2","mainCenter3","params","mixin","lastSel","isLarge","_getMainCenter","lastCenter","isSmall","left","center","right","back","lastLeft","lastRight","views","transOpts","title","target","url","reverse","transitionToView","getSize","isMedium","window","innerWidth","document","documentElement","clientWidth","width"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAkB,qBAAsB,WAAY,iBAAkB,aAAc,oBAAqB,oBAC/G,iBAAkB,gBAAiB,qBAAsB,wBAC3D,SAASC,EAAMC,EAASC,EAAKC,EAAUC,EAAKC,EAAKC,EAAQC,EAAUC,EAASC,EAAcC,GAOzF,OAAOT,EAAQ,wEAAyES,GAEvFC,YAAa,SAASC,GACrBC,KAAKD,IAAMA,EAEXC,KAAKC,MAAQ,IACbD,KAAKE,OAAS,IAEdF,KAAKG,eAAiB,GACtBH,KAAKI,WAAa,GAClBJ,KAAKK,UAAY,KACjBL,KAAKM,SAAW,GAEhBN,KAAKO,QACJC,wBAAyBR,KAAKS,YAC9BC,wBAAyBV,KAAKW,YAC9BC,wBAAyBZ,KAAKa,YAC9BC,wBAAyBd,KAAKe,YAC9BC,wBAAyBhB,KAAKiB,YAC9BC,wBAAyBlB,KAAKmB,YAC9BC,wBAAyBpB,KAAKqB,YAC9BC,yBAA0BtB,KAAKuB,aAC/BC,yBAA0BxB,KAAKyB,aAC/BC,yBAA0B1B,KAAK2B,cAK7BlC,EAAOmC,kBACTC,MAAMC,UAAU,+BAAgC3C,EAAK4C,MAAM/B,KAAMA,KAAKgC,WAGtEhC,KAAKiC,KAAKzC,EAAI0C,OAAQ3C,EAAI,OAAS,oBAAsB,SAAUJ,EAAK4C,MAAM/B,KAAMA,KAAKgC,YAI3FvB,YAAa,SAAS0B,GACrBnC,KAAKoC,aAAaD,EAAG,UAAU,WAAW,YAAa,KAAM,OAE9DxB,YAAa,SAASwB,GAErBE,QAAQC,IAAI,+CACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,aAF9BI,YAAcC,QAAU,cAAcC,QAAU,aAEG,IAElE5B,YAAa,SAASsB,GAErBE,QAAQC,IAAI,+CACZtC,KAAKoC,aAAaD,EAAG,UAAU,cAAc,aAF/BO,aAAeF,QAAU,iBAE2B,IAEnEzB,YAAa,SAASoB,GAErBE,QAAQC,IAAI,+CACZtC,KAAKoC,aAAaD,EAAG,UAAU,cAAc,aAF/BQ,aAAeH,QAAU,iBAE2B,IAEnEvB,YAAa,SAASkB,GACrB,IAAIS,EAASzD,EAAK0D,MAAM7C,KAAKI,YAAY0C,QAAU,gBAC/C9C,KAAK+C,WAIRV,QAAQC,IAAI,4DACZtC,KAAKoC,aAAaD,EAAG,UAAWnC,KAAKgD,iBAAiB,YAAaJ,GAAQ,KAJ3EP,QAAQC,IAAI,wEACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,YAAaS,GAAQ,KAMnEzB,YAAa,SAASgB,GACrB,IAAIS,EAASzD,EAAK0D,MAAM7C,KAAKI,YAAY0C,QAAU,gBAC/C9C,KAAK+C,WAIRV,QAAQC,IAAI,4DACZtC,KAAKoC,aAAaD,EAAG,UAAWnC,KAAKgD,iBAAiB,YAAaJ,GAAQ,KAJ3EP,QAAQC,IAAI,wEACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,YAAaS,GAAQ,KAMnEvB,YAAa,SAASc,GACrB,IAAIS,EAASzD,EAAK0D,MAAM7C,KAAKI,YAAY0C,QAAU,gBAC/C9C,KAAK+C,WAIRV,QAAQC,IAAI,4DACZtC,KAAKoC,aAAaD,EAAG,UAAWnC,KAAKgD,iBAAiB,YAAaJ,GAAQ,KAJ3EP,QAAQC,IAAI,wEACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,YAAaS,GAAQ,KAQnEI,eAAgB,WACf,MAAsB,cAAnBhD,KAAKiD,YAAiD,eAAnBjD,KAAKiD,YAAkD,eAAnBjD,KAAKiD,WACvEjD,KAAKiD,WAEN,cAIR1B,aAAc,SAASY,GACnBnC,KAAKkD,WACPb,QAAQC,IAAI,6DAEZtC,KAAKoC,aAAaD,EAAG,UAAU,YAAY,YAAanC,KAAKI,YAAY,KAEzEiC,QAAQC,IAAI,8DACZtC,KAAKoC,aAAaD,EAAG,aAAa,UAAU,YAAanC,KAAKI,YAAY,KAG5EqB,aAAc,SAASU,GACnBnC,KAAKkD,WACPb,QAAQC,IAAI,6DACZtC,KAAKoC,aAAaD,EAAG,UAAU,YAAY,YAAanC,KAAKI,YAAY,KAEzEiC,QAAQC,IAAI,8DACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,YAAanC,KAAKI,YAAY,KAG5EuB,aAAc,SAASQ,GACtBE,QAAQC,IAAI,gDACZtC,KAAKoC,aAAaD,EAAG,UAAU,aAAa,YAAanC,KAAKI,YAAY,IAG3EgC,aAAc,SAASD,EAAGgB,EAAMC,EAAQC,EAAOT,EAAQU,GACtDtD,KAAKuD,SAAWJ,EAChBnD,KAAKiD,WAAaG,EAClBpD,KAAKwD,UAAYH,EACjBrD,KAAKI,WAAawC,EAClB,IAAIa,EAAQzD,KAAKG,eAAiBgD,EAAK,IAAIC,EAE1CK,EAAQzD,KAAKG,eADD,eAAVkD,EAC4BI,EAAM,IAAIJ,EAEVI,EAAMJ,EAErChB,QAAQC,IAAI,mCAAmCmB,EAAM,iBAAiBzD,KAAK4C,QAE3E5C,KAAKI,WAAawC,EAClB5C,KAAKK,UAAY8B,EACjB,IAAIuB,GACHC,MAAOF,EACPG,OAAQH,EACRI,IAAK,IAAIJ,EACTK,QAASR,EAETV,OAAOA,GAER5C,KAAKD,IAAIgE,iBAAiB5B,EAAEyB,OAAOF,EAAUvB,IAK9CH,SAAU,WAINhC,KAAKM,UAAYN,KAAKgE,YAGzBhE,KAAKM,SAAWN,KAAKgE,UAGlBhE,KAAK+C,WAAa/C,KAAKK,WACA,iCAAxBL,KAAKG,gBAA6E,+BAAxBH,KAAKG,gBAChEkC,QAAQC,IAAI,iGACZtC,KAAKoC,aAAapC,KAAKK,UAAW,UAAU,aAAa,YAAaL,KAAKI,aACnEJ,KAAKiE,YAAcjE,KAAKK,YAEN,+BAAvBL,KAAKG,gBACPkC,QAAQC,IAAI,gHACZtC,KAAKoC,aAAapC,KAAKK,UAAW,UAAU,aAAa,YAAaL,KAAKI,aAC5C,gCAAvBJ,KAAKG,iBACbkC,QAAQC,IAAI,iHACZtC,KAAKoC,aAAapC,KAAKK,UAAW,UAAU,aAAa,YAAaL,KAAKI,gBAM9E4D,QAAS,WACR,OAAGhE,KAAK+C,UACA,QACC/C,KAAKiE,WACN,SAEA,SAKTlB,QAAS,WAER,OADYmB,OAAOC,YAAcC,SAASC,gBAAgBC,aAC3CtE,KAAKE,QAIrB+D,SAAU,WACT,IAAIM,EAAQL,OAAOC,YAAcC,SAASC,gBAAgBC,YAC1D,OAAOC,GAASvE,KAAKE,QAAUqE,EAAQvE,KAAKC,OAI7CiD,QAAS,WAER,OADYgB,OAAOC,YAAcC,SAASC,gBAAgBC,cAC1CtE,KAAKC","file":"../../../../../app/tests/mediaQuery3ColumnApp/controllers/NavigationController.js","sourcesContent":["define([\"dojo/_base/lang\",\"dojo/_base/declare\", \"dojo/dom\", \"dojo/dom-style\", \"dojo/sniff\", \"dojo/_base/window\", \"dojo/_base/config\",\r\n\t\t\"dojo/dom-class\", \"dojo/dom-attr\", \"dojo/dom-construct\", \"dojox/app/Controller\"],\r\nfunction(lang, declare, dom, domStyle, has, win, config, domClass, domAttr, domConstruct, Controller){\r\n\t// module:\r\n\t//\t\tdojox/app/tests/mediaQuery3ColumnApp/controllers/NavigationController\r\n\t// summary:\r\n\t//\t\tUsed to handle Navigation for the application \r\n\t//\t\t\r\n\r\n\treturn declare(\"dojox/app/tests/mediaQuery3ColumnApp/controllers/NavigationController\", Controller, {\r\n\r\n\t\tconstructor: function(app){\r\n\t\t\tthis.app = app;\r\n\t\t\t// large > 860 medium <= 860  small <= 560 \r\n\t\t\tthis.small = 560;\r\n\t\t\tthis.medium = 860;\r\n\t\r\n\t\t\tthis.lastTransition = \"\";\r\n\t\t\tthis.lastParams = \"\";\r\n\t\t\tthis.lastEvent = null;\r\n\t\t\tthis.lastSize = \"\";\r\n\t\t\t\r\n\t\t\tthis.events = {\r\n\t\t\t\t\"MQ3ColApp/TestOption1\": this.TestOption1,\r\n\t\t\t\t\"MQ3ColApp/MainOption1\": this.MainOption1,\r\n\t\t\t\t\"MQ3ColApp/MainOption2\": this.MainOption2,\r\n\t\t\t\t\"MQ3ColApp/MainOption3\": this.MainOption3,\r\n\t\t\t\t\"MQ3ColApp/LastOption1\": this.LastOption1,\r\n\t\t\t\t\"MQ3ColApp/LastOption2\": this.LastOption2,\r\n\t\t\t\t\"MQ3ColApp/LastOption3\": this.LastOption3,\r\n\t\t\t\t\"MQ3ColApp/BackFromMain\": this.BackFromMain,\r\n\t\t\t\t\"MQ3ColApp/BackFromTest\": this.BackFromTest,\r\n\t\t\t\t\"MQ3ColApp/BackFromLast\": this.BackFromLast\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// if we are using dojo mobile & we are hiding address bar we need to be bit smarter and listen to\r\n\t\t\t// dojo mobile events instead\r\n\t\t\tif(config.mblHideAddressBar){\r\n\t\t\t\ttopic.subscribe(\"/dojox/mobile/afterResizeAll\", lang.hitch(this, this.onResize));\r\n\t\t\t}else{\r\n\t\t\t\t// bind to browsers orientationchange event for ios otherwise bind to browsers resize\r\n\t\t\t\tthis.bind(win.global, has(\"ios\") ? \"orientationchange\" : \"resize\", lang.hitch(this, this.onResize));\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tTestOption1: function(e){\r\n\t\t\tthis.doTransition(e, \"navLeft\",\"TestInfo\",\"lastRight\", null, null);\r\n\t\t},\r\n\t\tMainOption1: function(e){\r\n\t\t\tvar params = {\"mainCenter\":{'mainSel':\"MainOption1\",\"tparam1\":\"tValue1\"}};\r\n\t\t\tconsole.log(\"in NavigationController MainOption1 called.\");\r\n\t\t\tthis.doTransition(e, \"navLeft\",\"mainCenter\",\"lastRight\", params, false);\r\n\t\t},\r\n\t\tMainOption2: function(e){\r\n\t\t\tvar params = {\"mainCenter2\":{'mainSel':\"MainOption2\"}};\r\n\t\t\tconsole.log(\"in NavigationController MainOption2 called.\");\r\n\t\t\tthis.doTransition(e, \"navLeft\",\"mainCenter2\",\"lastRight\", params, false);\r\n\t\t},\r\n\t\tMainOption3: function(e){\r\n\t\t\tvar params = {\"mainCenter3\":{'mainSel':\"MainOption3\"}};\r\n\t\t\tconsole.log(\"in NavigationController MainOption3 called.\");\r\n\t\t\tthis.doTransition(e, \"navLeft\",\"mainCenter3\",\"lastRight\", params, false);\r\n\t\t},\r\n\t\tLastOption1: function(e){\r\n\t\t\tvar params = lang.mixin(this.lastParams,{'lastSel':\"LastOption1\"});\r\n\t\t\tif(!this.isLarge()){\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption1 called with isMedium or isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"lastCenter\",\"lastRight\", params, false);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption1 called with isLarge.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\", this._getMainCenter(),\"lastRight\", params, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tLastOption2: function(e){\r\n\t\t\tvar params = lang.mixin(this.lastParams,{'lastSel':\"LastOption2\"});\r\n\t\t\tif(!this.isLarge()){\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption2 called with isMedium or isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"lastCenter\",\"lastRight\", params, false);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption2 called with isLarge.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\", this._getMainCenter(),\"lastRight\", params, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tLastOption3: function(e){\r\n\t\t\tvar params = lang.mixin(this.lastParams,{'lastSel':\"LastOption3\"});\r\n\t\t\tif(!this.isLarge()){\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption3 called with isMedium or isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"lastCenter\",\"lastRight\", params, false);\r\n\t\t\t}else{\t\r\n\t\t\t\tconsole.log(\"in NavigationController LastOption2 called with isLarge.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\", this._getMainCenter(),\"lastRight\", params, false);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Called to get the correct mainCenter\r\n\t\t_getMainCenter: function(){\r\n\t\t\tif(this.lastCenter == \"mainCenter\" || this.lastCenter == \"mainCenter2\" || this.lastCenter == \"mainCenter3\"){\r\n\t\t\t\treturn this.lastCenter;\r\n\t\t\t}\r\n\t\t\treturn \"mainCenter\";\r\n\r\n\t\t},\r\n\t\t// These BackFrom ones need work to really go back in the history.\r\n\t\tBackFromMain: function(e){\r\n\t\t\tif(this.isSmall()){\r\n\t\t\t\tconsole.log(\"in NavigationController BackFromMain called with isSmall.\");\r\n\t\t\t\t// not sure about using his.lastParams\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"navCenter\",\"lastRight\", this.lastParams, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"in NavigationController BackFromMain called with !isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"mainCenter\",\"navLeft\",\"lastRight\", this.lastParams, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tBackFromTest: function(e){\r\n\t\t\tif(this.isSmall()){\r\n\t\t\t\tconsole.log(\"in NavigationController BackFromTest called with isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"navCenter\",\"lastRight\", this.lastParams, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"in NavigationController BackFromTest called with !isSmall.\");\r\n\t\t\t\tthis.doTransition(e, \"navLeft\",\"mainCenter\",\"lastRight\", this.lastParams, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tBackFromLast: function(e){\r\n\t\t\tconsole.log(\"in NavigationController BackFromLast called.\");\r\n\t\t\tthis.doTransition(e, \"navLeft\",\"mainCenter\",\"lastRight\", this.lastParams, true);\r\n\t\t},\r\n\r\n\t\tdoTransition: function(e, left, center, right, params, back){\r\n\t\t\tthis.lastLeft = left;\r\n\t\t\tthis.lastCenter = center;\r\n\t\t\tthis.lastRight = right;\r\n\t\t\tthis.lastParams = params;\r\n\t\t\tvar views = this.lastTransition = left+\"+\"+center;\r\n\t\t\tif(right !== \"-lastRight\"){\r\n\t\t\t\tviews = this.lastTransition = views+\"+\"+right;\r\n\t\t\t}else{\r\n\t\t\t\tviews = this.lastTransition = views+right;\r\n\t\t\t}\r\n\t\t\tconsole.log(\"in NavigationController views = \"+views+\"  this.params=\"+this.params);\r\n\t\t\t\r\n\t\t\tthis.lastParams = params;\r\n\t\t\tthis.lastEvent = e;\r\n\t\t\tvar transOpts = {\r\n\t\t\t\ttitle: views,\r\n\t\t\t\ttarget: views,\r\n\t\t\t\turl: \"#\"+views,\r\n\t\t\t\treverse: back,\r\n\t\t\t//\t\"transition\": \"none\",\r\n\t\t\t\tparams:params\r\n\t\t\t};\r\n\t\t\tthis.app.transitionToView(e.target,transOpts,e);\r\n\t\t},\r\n\r\n\t\r\n\t\t\r\n\t\tonResize: function(){\r\n\t\t\t// this is called on a resize, normally we want to use css to adjust, but a resize or an orientation change\r\n\t\t\t// causes us to be showing duplicate views, then we need to update the views being shown.\r\n\t\t\t\r\n\t\t\tif(this.lastSize == this.getSize()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.lastSize = this.getSize();\r\n\t\t\t\r\n\t\t\t// for a large screen we should always be showing \"navLeft+mainCenter+lastRight\"\r\n\t\t\tif(this.isLarge() && this.lastEvent && \r\n\t\t\t\t(this.lastTransition !== \"navLeft+mainCenter+lastRight\" && this.lastTransition !== \"navLeft+TestInfo+lastRight\")){\r\n\t\t\t\tconsole.log(\"in NavigationController onResize isLarge calling transition with navLeft+mainCenter+lastRight\");\r\n\t\t\t\tthis.doTransition(this.lastEvent, \"navLeft\",\"mainCenter\",\"lastRight\", this.lastParams);\r\n\t\t\t}else if(this.isMedium() && this.lastEvent){\r\n\t\t\t\t// for a medium screen we need to check for \"navLeft+navCenter+lastRight\" and for \"navLeft+lastCenter+lastRight\"\r\n\t\t\t\tif(this.lastTransition == \"navLeft+navCenter+lastRight\"){\r\n\t\t\t\t\tconsole.log(\"in NavigationController onResize isMedium and navCenter calling transition with navLeft+mainCenter+lastRight\");\r\n\t\t\t\t\tthis.doTransition(this.lastEvent, \"navLeft\",\"mainCenter\",\"lastRight\", this.lastParams);\r\n\t\t\t\t}else if(this.lastTransition == \"navLeft+lastCenter+lastRight\"){\r\n\t\t\t\t\tconsole.log(\"in NavigationController onResize isMedium and lastCenter calling transition with navLeft+LastCenter+lastRight\");\r\n\t\t\t\t\tthis.doTransition(this.lastEvent, \"navLeft\",\"lastCenter\",\"lastRight\", this.lastParams);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tgetSize: function(){\r\n\t\t\tif(this.isLarge()){\r\n\t\t\t\treturn \"large\";\r\n\t\t\t}else if(this.isMedium()){\r\n\t\t\t\treturn \"medium\";\r\n\t\t\t}else{\r\n\t\t\t\treturn \"small\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// large > 860 medium <= 860  small <= 560 \r\n\t\tisLarge: function(){\r\n\t\t\tvar width = window.innerWidth || document.documentElement.clientWidth;\r\n\t\t\treturn width > this.medium;\r\n\r\n\t\t},\r\n\r\n\t\tisMedium: function(){\r\n\t\t\tvar width = window.innerWidth || document.documentElement.clientWidth;\r\n\t\t\treturn width <= this.medium && width > this.small;\r\n\r\n\t\t},\r\n\r\n\t\tisSmall: function(){\r\n\t\t\tvar width = window.innerWidth || document.documentElement.clientWidth;\r\n\t\t\treturn width <= this.small;\r\n\r\n\t\t}\r\n\t\t\r\n\t});\r\n});\r\n"]}