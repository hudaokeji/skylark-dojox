{"version":3,"sources":["app/utils/constraints.js"],"names":["define","arr","constraints","getSelectedChild","view","constraint","type","hash","__hash","selectedChildren","setSelectedChild","child","getAllSelectedChildren","selChildren","subChild","push","this","register","match","some","item","ok","prop","charAt"],"mappings":";;;;;;;AAAAA,QAAQ,oBAAqB,SAASC,GACrC,IAAIC,KACJ,OACCC,iBAAkB,SAASC,EAAMC,GAWhC,IAAIC,SAAa,EACbC,EAAgB,UAARD,GAA4B,UAARA,EAAoBD,EAAaA,EAAWG,OAC5E,OAAQJ,GAAQA,EAAKK,kBAAoBL,EAAKK,iBAAiBF,GAC9DH,EAAKK,iBAAiBF,GAAQ,MAGhCG,iBAAkB,SAASN,EAAMC,EAAYM,GAU5C,IAAIL,SAAa,EACbC,EAAgB,UAARD,GAA4B,UAARA,EAAoBD,EAAaA,EAAWG,OAC5EJ,EAAKK,iBAAiBF,GAAQI,GAI/BC,uBAAwB,SAASR,EAAMS,GActC,GADAA,EAAcA,MACXT,GAAQA,EAAKK,iBACf,IAAI,IAAIF,KAAQH,EAAKK,iBACpB,GAAGL,EAAKK,iBAAiBF,GAAM,CAC9B,IAAIO,EAAWV,EAAKK,iBAAiBF,GACrCM,EAAYE,KAAKD,GACjBE,KAAKJ,uBAAuBE,EAAUD,GAIzC,OAAOA,GAGRI,SAAU,SAASZ,GAElB,IAAIC,SAAa,EACjB,IAAID,EAAWG,QAAkB,UAARF,GAA4B,UAARA,EAAiB,CAC7D,IAAIY,EAAQ,KAgBZ,GAfAjB,EAAIkB,KAAKjB,EAAa,SAASkB,GAC9B,IAAIC,GAAK,EACT,IAAI,IAAIC,KAAQF,EACf,GAAsB,MAAnBE,EAAKC,OAAO,IACXH,EAAKE,IAASjB,EAAWiB,GAAM,CACjCD,GAAK,EACL,MAOH,OAHS,GAANA,IACFH,EAAQE,GAEFC,IAELH,EACFb,EAAWG,OAASU,EAAMV,WACtB,CAEJ,IAAID,EAAO,GACX,IAAI,IAAIe,KAAQjB,EACO,MAAnBiB,EAAKC,OAAO,KACdhB,GAAQF,EAAWiB,IAGrBjB,EAAWG,OAASD,EACpBL,EAAYa,KAAKV","file":"../../../app/utils/constraints.js","sourcesContent":["define([\"dojo/_base/array\"], function(arr){\r\n\tvar constraints = [];\r\n\treturn {\r\n\t\tgetSelectedChild: function(view, constraint){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tget current selected child according to the constraint\r\n\t\t\t//\r\n\t\t\t// view: View\r\n\t\t\t//\t\tthe View to get the child from\r\n\t\t\t// constraint: Object\r\n\t\t\t//\t\ttbe constraint object\r\n\t\t\t//\r\n\t\t\t// returns:\r\n\t\t\t//\t\tthe selected child view for this constraint\r\n\t\t\tvar type = typeof(constraint);\r\n\t\t\tvar hash = (type == \"string\" || type == \"number\") ? constraint : constraint.__hash;\r\n\t\t\treturn (view && view.selectedChildren && view.selectedChildren[hash]) ?\r\n\t\t\t\tview.selectedChildren[hash] : null;\r\n\t\t},\r\n\r\n\t\tsetSelectedChild: function(view, constraint, child){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tset current selected child according to the constraint\r\n\t\t\t//\r\n\t\t\t// view: View\r\n\t\t\t//\t\tthe View to set the selected child to\r\n\t\t\t// constraint: Object\r\n\t\t\t//\t\ttbe constraint object\r\n\t\t\t// child: View\r\n\t\t\t//\t\tthe child to select\r\n\t\t\tvar type = typeof(constraint);\r\n\t\t\tvar hash = (type == \"string\" || type == \"number\") ? constraint : constraint.__hash;\r\n\t\t\tview.selectedChildren[hash] = child;\r\n\t\t},\r\n\r\n\r\n\t\tgetAllSelectedChildren: function(view, selChildren){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tget current all selected children for this view and it's selected subviews\r\n\t\t\t//\r\n\t\t\t// view: View\r\n\t\t\t//\t\tthe View to get the child from\r\n\t\t\t//\r\n\t\t\t// selChildren: Array\r\n\t\t\t//\t\tthe Array of the subChildren found\r\n\t\t\t//\r\n\t\t\t// returns:\r\n\t\t\t//\t\tselChildren array of all of the selected child views\r\n\t\t\t//\r\n\t\t\tselChildren = selChildren || [];\r\n\t\t\tif(view && view.selectedChildren){\r\n\t\t\t\tfor(var hash in view.selectedChildren){\r\n\t\t\t\t\tif(view.selectedChildren[hash]){\r\n\t\t\t\t\t\tvar subChild = view.selectedChildren[hash];\r\n\t\t\t\t\t\tselChildren.push(subChild);\r\n\t\t\t\t\t\tthis.getAllSelectedChildren(subChild, selChildren);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selChildren;\r\n\t\t},\r\n\r\n\t\tregister: function(constraint){\r\n\t\t\t// if the constraint has already been registered we don't care about it...\r\n\t\t\tvar type = typeof(constraint);\r\n\t\t\tif(!constraint.__hash && type != \"string\" && type != \"number\"){\r\n\t\t\t\tvar match = null;\r\n\t\t\t\tarr.some(constraints, function(item){\r\n\t\t\t\t\tvar ok = true;\r\n\t\t\t\t\tfor(var prop in item){\r\n\t\t\t\t\t\tif(prop.charAt(0) !== \"_\"){//skip the private properties\r\n\t\t\t\t\t\t\tif(item[prop] != constraint[prop]){\r\n\t\t\t\t\t\t\t\tok = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(ok == true){\r\n\t\t\t\t\t\tmatch = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ok;\r\n\t\t\t\t});\r\n\t\t\t\tif(match){\r\n\t\t\t\t\tconstraint.__hash = match.__hash;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// create a new \"hash\"\r\n\t\t\t\t\tvar hash = \"\";\r\n\t\t\t\t\tfor(var prop in constraint){\r\n\t\t\t\t\t\tif(prop.charAt(0) !== \"_\"){\r\n\t\t\t\t\t\t\thash += constraint[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconstraint.__hash = hash;\r\n\t\t\t\t\tconstraints.push(constraint);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});"]}