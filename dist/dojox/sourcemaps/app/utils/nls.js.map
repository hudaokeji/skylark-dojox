{"version":3,"sources":["app/utils/nls.js"],"names":["define","require","Deferred","config","parent","path","nls","requireSignal","nlsDef","loadFile","index","indexOf","substring","on","error","isResolved","isRejected","info","resolve","remove","e","reject"],"mappings":";;;;;;;AAAAA,QAAQ,UAAW,iBAAmB,SAASC,EAASC,GACvD,OAAO,SAAoBC,EAAmBC,GAQ7C,IAAIC,EAAOF,EAAOG,IAClB,GAAGD,EAAK,CACP,IACIE,EADAC,EAAS,IAAIN,EAEjB,IACC,IAAIO,EAAWJ,EACXK,EAAQD,EAASE,QAAQ,MAC1BD,GAAS,IACXD,EAAWJ,EAAKO,UAAUF,EAAM,IAEjCH,EAAgBN,EAAQY,GAAKZ,EAAQY,GAAG,QAAS,SAASC,GACrDN,EAAOO,cAAgBP,EAAOQ,cAG/BF,EAAMG,KAAK,IAAOH,EAAMG,KAAK,GAAGN,QAAQF,IAAY,IACtDD,EAAOU,SAAQ,GACZX,GACFA,EAAcY,YAGZ,KAEoB,GAAtBd,EAAKM,QAAQ,QACfN,EAAO,OAAOA,GAGfJ,GAAS,aAAaI,GAAO,SAASC,GACrCE,EAAOU,QAAQZ,GACfC,EAAcY,WAEf,MAAMC,GACNZ,EAAOa,OAAOD,GACXb,GACFA,EAAcY,SAGhB,OAAOX,EAEP,OAAO","file":"../../../app/utils/nls.js","sourcesContent":["define([\"require\", \"dojo/Deferred\"],  function(require, Deferred){\r\n\treturn function(/*Object*/ config, /*Object*/ parent){\r\n\t\t// summary:\r\n\t\t//\t\tnsl is called to create to load the nls all for the app, or for a view.\r\n\t\t// config: Object\r\n\t\t//\t\tThe section of the config for this view or for the app.\r\n\t\t// parent: Object\r\n\t\t//\t\tThe parent of this view or the app itself, so that models from the parent will be\r\n\t\t//\t\tavailable to the view.\r\n\t\tvar path = config.nls;\r\n\t\tif(path){\r\n\t\t\tvar nlsDef = new Deferred();\r\n\t\t\tvar requireSignal;\r\n\t\t\ttry{\r\n\t\t\t\tvar loadFile = path;\r\n\t\t\t\tvar index = loadFile.indexOf(\"./\");\r\n\t\t\t\tif(index >= 0){\r\n\t\t\t\t\tloadFile = path.substring(index+2);\r\n\t\t\t\t}\r\n\t\t\t\trequireSignal = require.on ? require.on(\"error\", function(error){\r\n\t\t\t\t\tif (nlsDef.isResolved() || nlsDef.isRejected()) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(error.info[0] && (error.info[0].indexOf(loadFile)>= 0)){\r\n\t\t\t\t\t\tnlsDef.resolve(false);\r\n\t\t\t\t\t\tif(requireSignal){\r\n\t\t\t\t\t\t\trequireSignal.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : null;\r\n\r\n\t\t\t\tif(path.indexOf(\"./\") == 0){\r\n\t\t\t\t\tpath = \"app/\"+path;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trequire([\"dojo/i18n!\"+path], function(nls){\r\n\t\t\t\t\tnlsDef.resolve(nls);\r\n\t\t\t\t\trequireSignal.remove();\r\n\t\t\t\t});\r\n\t\t\t}catch(e){\r\n\t\t\t\tnlsDef.reject(e);\r\n\t\t\t\tif(requireSignal){\r\n\t\t\t\t\trequireSignal.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn nlsDef;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n});\r\n"]}