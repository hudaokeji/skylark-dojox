{"version":3,"sources":["rpc/tests/Wikipedia.js"],"names":["dojo","provide","require","dojox","rpc","tests","wikipediaService","Service","moduleUrl","TEST_METHOD_TIMEOUT","_query","q","m","d","doh","Deferred","parameters","action","expectedResult","query","addCallback","this","result","console","log","callback","errback","Error","register","name","timeout","runTest","page","list","srwhat","srsearch"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,6BACbD,KAAKE,QAAQ,kBACbF,KAAKE,QAAQ,qBAEbC,MAAMC,IAAIC,MAAMC,iBAAmB,IAAIH,MAAMC,IAAIG,QAAQP,KAAKQ,UAAU,uBAAwB,kBAEhGL,MAAMC,IAAIC,MAAMC,iBAAiBG,oBAAsB,IAEvDN,MAAMC,IAAIC,MAAMC,iBAAiBI,OAAS,SAASC,GAClD,OAAO,SAASC,GACf,IAAIC,EAAI,IAAIC,IAAIC,SAEZJ,EAAEK,YAAcL,EAAEK,WAAWC,QAAUN,EAAEO,gBACnCf,MAAMC,IAAIC,MAAMC,iBAAiBa,MAAMR,EAAEK,YAC/CI,YAAYC,KAAM,SAASC,GAC7BC,QAAQC,IAAIF,GACRA,EAAOX,EAAEO,gBACZL,EAAEY,UAAS,GAEXZ,EAAEa,QAAQ,IAAIC,MAAM,4BAA6BL,MAKpD,OAAOT,IAITC,IAAIc,SAAS,8BAGVC,KAAM,uBACNC,QAAS3B,MAAMC,IAAIC,MAAMC,iBAAiBG,oBAC1CsB,QAAS5B,MAAMC,IAAIC,MAAMC,iBAAiBI,QACzCM,YACCC,OAAQ,QACRe,KAAM,gBAEPd,eAAgB,YAIjBW,KAAM,wBACNC,QAAS3B,MAAMC,IAAIC,MAAMC,iBAAiBG,oBAC1CsB,QAAS5B,MAAMC,IAAIC,MAAMC,iBAAiBI,QACzCM,YACCC,OAAQ,QACRgB,KAAM,SACNC,OAAQ,OACRC,SAAU,gBAEXjB,eAAgB","file":"../../../rpc/tests/Wikipedia.js","sourcesContent":["dojo.provide(\"dojox.rpc.tests.Wikipedia\");\r\ndojo.require(\"dojo.io.script\");\r\ndojo.require(\"dojox.rpc.Service\");\r\n\r\ndojox.rpc.tests.wikipediaService = new dojox.rpc.Service(dojo.moduleUrl(\"dojox.rpc.SMDLibrary\", \"wikipedia.smd\"));\r\n\r\ndojox.rpc.tests.wikipediaService.TEST_METHOD_TIMEOUT = 8000;\r\n\r\ndojox.rpc.tests.wikipediaService._query = function(q){\r\n\treturn function(m){\r\n\t\tvar d = new doh.Deferred();\r\n\r\n\t\tif (q.parameters && q.parameters.action && q.expectedResult) {\r\n\t\t\tvar wp = dojox.rpc.tests.wikipediaService.query(q.parameters);\r\n\t\t\twp.addCallback(this, function(result){\r\n\t\t\t\tconsole.log(result);\r\n\t\t\t\tif (result[q.expectedResult]){\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\td.errback(new Error(\"Unexpected Return Value: \", result));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn d;\r\n\t}\r\n};\r\n\r\ndoh.register(\"dojox.rpc.tests.wikipedia\",\r\n\t[\r\n\t\t{\r\n\t\t\tname: \"#1, Wikipedia::parse\",\r\n\t\t\ttimeout: dojox.rpc.tests.wikipediaService.TEST_METHOD_TIMEOUT,\r\n\t\t\trunTest: dojox.rpc.tests.wikipediaService._query({\r\n\t\t\t\tparameters: {\r\n\t\t\t\t\taction: \"parse\",\r\n\t\t\t\t\tpage: \"Dojo Toolkit\"\r\n\t\t\t\t},\r\n\t\t\t\texpectedResult: \"parse\"\r\n\t\t\t})\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"#2, Wikipedia::search\",\r\n\t\t\ttimeout: dojox.rpc.tests.wikipediaService.TEST_METHOD_TIMEOUT,\r\n\t\t\trunTest: dojox.rpc.tests.wikipediaService._query({\r\n\t\t\t\tparameters: {\r\n\t\t\t\t\taction: \"query\",\r\n\t\t\t\t\tlist: \"search\",\r\n\t\t\t\t\tsrwhat: \"text\",\r\n\t\t\t\t\tsrsearch: \"Dojo Toolkit\"\r\n\t\t\t\t},\r\n\t\t\t\texpectedResult: \"query\"\r\n\t\t\t})\r\n\t\t}\r\n]);\r\n"]}