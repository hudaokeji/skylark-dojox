{"version":3,"sources":["rpc/Client.js"],"names":["define","dojo","dojox","getObject","_defaultXhr","xhr","method","args","headers","rpc","Client","clientId","_reqSeqId","apply","arguments","Math","random","substring","Date","getTime"],"mappings":";;;;;;;AAAAA,OAAO,oBAAqB,OAAQ,SAAU,SAASC,EAAMC,GAyB5D,OAvBAD,EAAKE,UAAU,cAAc,EAAMD,GAInCD,EAAKG,YAAcH,EAAKI,IACxBJ,EAAKI,IAAM,SAASC,EAAOC,GAC1B,IAAIC,EAAUD,EAAKC,QAAUD,EAAKC,YAWlC,OANAA,EAAQ,aAAeN,EAAMO,IAAIC,OAAOC,SAKxCH,EAAQ,UAAYN,EAAMU,WAAaV,EAAMU,WAAW,GAAG,EACpDX,EAAKG,YAAYS,MAAMZ,EAAKa,YAIpCZ,EAAMO,IAAIC,OAAOC,UAAYI,KAAKC,SAAW,IAAIC,UAAU,EAAE,MAAO,IAAIC,MAAOC,UAAY,IAAIF,UAAU,EAAE,IAEpGf,EAAMO,IAAIC","file":"../../rpc/Client.js","sourcesContent":["define(\"dojox/rpc/Client\", [\"dojo\", \"dojox\"], function(dojo, dojox) {\r\n\r\n\tdojo.getObject(\"rpc.Client\", true, dojox);\r\n\r\n\t// Provide extra headers for robust client and server communication\r\n\r\n\tdojo._defaultXhr = dojo.xhr;\r\n\tdojo.xhr = function(method,args){\r\n\t\tvar headers = args.headers = args.headers || {};\r\n\t\t// set the client id, this can be used by servers to maintain state information with the\r\n\t\t// a specific client. Many servers rely on sessions for this, but sessions are shared\r\n\t\t// between tabs/windows, so this is not appropriate for application state, it\r\n\t\t// really only useful for storing user authentication\r\n\t\theaders[\"Client-Id\"] = dojox.rpc.Client.clientId;\r\n\t\t// set the sequence id. HTTP is non-deterministic, message can arrive at the server\r\n\t\t// out of order. In complex Ajax applications, it may be more to ensure that messages\r\n\t\t// can be properly sequenced deterministically. This applies a sequency id to each\r\n\t\t// XHR request so that the server can order them.\r\n\t\theaders[\"Seq-Id\"] = dojox._reqSeqId = (dojox._reqSeqId||0)+1;\r\n\t\treturn dojo._defaultXhr.apply(dojo,arguments);\r\n\t}\r\n\r\n\t// initiate the client id to a good random number\r\n\tdojox.rpc.Client.clientId = (Math.random() + '').substring(2,14) + (new Date().getTime() + '').substring(8,13);\r\n\r\n\treturn dojox.rpc.Client;\r\n\r\n});\r\n"]}