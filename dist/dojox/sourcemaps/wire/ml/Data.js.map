{"version":3,"sources":["wire/ml/Data.js"],"names":["dojo","provide","require","declare","dijit","_Widget","_Container","startup","this","_initializeProperties","reset","_properties","children","getChildren","i","child","dojox","wire","ml","DataProperty","name","setPropertyValue","getValue","getPropertyValue","property","value","type","_getValueAttr","parseInt","push","XmlElement"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,sBAEbD,KAAKE,QAAQ,iBACbF,KAAKE,QAAQ,oBACbF,KAAKE,QAAQ,sBAEbF,KAAKG,QAAQ,sBAAuBC,MAAMC,QAASD,MAAME,aAQxDC,QAAS,WAKRC,KAAKC,yBAGNA,sBAAuB,SAAoBC,GAStCF,KAAKG,cAAeD,IACvBF,KAAKG,gBAEN,IAAIC,EAAWJ,KAAKK,cACpB,IAAI,IAAIC,KAAKF,EAAS,CACrB,IAAIG,EAAQH,EAASE,GACjBC,aAAiBC,MAAMC,KAAKC,GAAGC,cAAiBJ,EAAMK,MACzDZ,KAAKa,iBAAiBN,EAAMK,KAAML,EAAMO,cAK3CC,iBAAkB,SAAmBC,GAUpC,OAAOhB,KAAKG,YAAYa,IAGzBH,iBAAkB,SAAmBG,EAAsBC,GAU1DjB,KAAKG,YAAYa,GAAYC,KAI/BzB,KAAKG,QAAQ,8BAA+BC,MAAMC,QAASD,MAAME,aAiBhEc,KAAM,GACNM,KAAM,GACND,MAAO,GAEPE,cAAe,WACd,OAAOnB,KAAKc,YAGbA,SAAU,WAST,IAAIG,EAAQjB,KAAKiB,MACjB,GAAGjB,KAAKkB,KACP,GAAgB,UAAblB,KAAKkB,KACPD,EAAQG,SAASH,QACZ,GAAgB,WAAbjB,KAAKkB,KACbD,EAAkB,QAATA,OACJ,GAAgB,SAAbjB,KAAKkB,KAAgB,CAC7BD,KACA,IAAIb,EAAWJ,KAAKK,cACpB,IAAI,IAAIC,KAAKF,EAAS,EACjBG,EAAQH,EAASE,cACDE,MAAMC,KAAKC,GAAGC,cACjCM,EAAMI,KAAKd,EAAMO,kBAGd,GAAgB,UAAbd,KAAKkB,KAAiB,CAC9BD,KACIb,EAAWJ,KAAKK,cACpB,IAAI,IAAIC,KAAKF,EAAS,EACjBG,EAAQH,EAASE,cACAE,MAAMC,KAAKC,GAAGC,cAAiBJ,EAAMK,OACzDK,EAAMV,EAAMK,MAAQL,EAAMO,kBAGvB,GAAgB,WAAbd,KAAKkB,KAAkB,CAC/BD,EAAQ,IAAIT,MAAMC,KAAKC,GAAGY,WAAWL,GACjCb,EAAWJ,KAAKK,cACpB,IAAI,IAAIC,KAAKF,EAAS,CACrB,IAAIG,GAAAA,EAAQH,EAASE,cACAE,MAAMC,KAAKC,GAAGC,cAAiBJ,EAAMK,MACzDK,EAAMJ,iBAAiBN,EAAMK,KAAML,EAAMO,aAK7C,OAAOG","file":"../../../wire/ml/Data.js","sourcesContent":["dojo.provide(\"dojox.wire.ml.Data\");\r\n\r\ndojo.require(\"dijit._Widget\");\r\ndojo.require(\"dijit._Container\");\r\ndojo.require(\"dojox.wire.ml.util\");\r\n\r\ndojo.declare(\"dojox.wire.ml.Data\", [dijit._Widget, dijit._Container], {\r\n\t// summary:\r\n\t//\t\tA widget for a data object\r\n\t// description:\r\n\t//\t\tThis widget represents an object with '_properties' property.\r\n\t//\t\tIf child 'DataProperty' widgets exist, they are used to initialize\r\n\t//\t\tpropertiy values of '_properties' object.\r\n\r\n\tstartup: function(){\r\n\t\t// summary:\r\n\t\t//\t\tCall _initializeProperties()\r\n\t\t// description:\r\n\t\t//\t\tSee _initializeProperties().\r\n\t\tthis._initializeProperties();\r\n\t},\r\n\r\n\t_initializeProperties: function(/*Boolean*/reset){\r\n\t\t// summary:\r\n\t\t//\t\tInitialize a data object\r\n\t\t// description:\r\n\t\t//\t\tIf this widget has child DataProperty widgets, their getValue()\r\n\t\t//\t\tmethods are called and set the return value to a property\r\n\t\t//\t\tspecified by 'name' attribute of the child widgets.\r\n\t\t// reset:\r\n\t\t//\t\tA boolean to reset current properties\r\n\t\tif(!this._properties || reset){\r\n\t\t\tthis._properties = {};\r\n\t\t}\r\n\t\tvar children = this.getChildren();\r\n\t\tfor(var i in children){\r\n\t\t\tvar child = children[i];\r\n\t\t\tif((child instanceof dojox.wire.ml.DataProperty) && child.name){\r\n\t\t\t\tthis.setPropertyValue(child.name, child.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgetPropertyValue: function(/*String*/property){\r\n\t\t// summary:\r\n\t\t//\t\tReturn a property value\r\n\t\t// description:\r\n\t\t//\t\tThis method returns the value of a property, specified with\r\n\t\t//\t\t'property' argument, in '_properties' object.\r\n\t\t// property:\r\n\t\t//\t\tA property name\r\n\t\t// returns:\r\n\t\t//\t\tA property value\r\n\t\treturn this._properties[property]; //anything\r\n\t},\r\n\r\n\tsetPropertyValue: function(/*String*/property, /*anything*/value){\r\n\t\t// summary:\r\n\t\t//\t\tStore a property value\r\n\t\t// description:\r\n\t\t//\t\tThis method stores 'value' as a property, specified with\r\n\t\t//\t\t'property' argument, in '_properties' object.\r\n\t\t// property:\r\n\t\t//\t\tA property name\r\n\t\t// value:\r\n\t\t//\t\tA property value\r\n\t\tthis._properties[property] = value;\r\n\t}\r\n});\r\n\r\ndojo.declare(\"dojox.wire.ml.DataProperty\", [dijit._Widget, dijit._Container], {\r\n\t// summary:\r\n\t//\t\tA widget to define a data property\r\n\t// description:\r\n\t//\t\tAttributes of this widget are used to add a property to the parent\r\n\t//\t\tData widget.\r\n\t//\t\t'type' attribute specifies one of \"string\", \"number\", \"boolean\",\r\n\t//\t\t\"array\", \"object\" and \"element\" (DOM Element)\r\n\t//\t\t(default to \"string\").\r\n\t//\t\tIf 'type' is \"array\" or \"object\", child DataProperty widgets are\r\n\t//\t\tused to initialize the array elements or the object properties.\r\n\t// name:\r\n\t//\t\tA property name\r\n\t// type:\r\n\t//\t\tA property type name\r\n\t// value:\r\n\t//\t\tA property value\r\n\tname: \"\",\r\n\ttype: \"\",\r\n\tvalue: \"\",\r\n\r\n\t_getValueAttr: function(){\r\n\t\treturn this.getValue();\r\n\t},\r\n\r\n\tgetValue: function(){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a property value\r\n\t\t// description:\r\n\t\t//\t\tIf 'type' is specified, 'value' attribute is converted to\r\n\t\t//\t\tthe specified type and returned.\r\n\t\t//\t\tOtherwise, 'value' attribute is returned as is.\r\n\t\t// returns:\r\n\t\t//\t\tA property value\r\n\t\tvar value = this.value;\r\n\t\tif(this.type){\r\n\t\t\tif(this.type == \"number\"){\r\n\t\t\t\tvalue = parseInt(value);\r\n\t\t\t}else if(this.type == \"boolean\"){\r\n\t\t\t\tvalue = (value == \"true\");\r\n\t\t\t}else if(this.type == \"array\"){\r\n\t\t\t\tvalue = [];\r\n\t\t\t\tvar children = this.getChildren();\r\n\t\t\t\tfor(var i in children){\r\n\t\t\t\t\tvar child = children[i];\r\n\t\t\t\t\tif(child instanceof dojox.wire.ml.DataProperty){\r\n\t\t\t\t\t\tvalue.push(child.getValue());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(this.type == \"object\"){\r\n\t\t\t\tvalue = {};\r\n\t\t\t\tvar children = this.getChildren();\r\n\t\t\t\tfor(var i in children){\r\n\t\t\t\t\tvar child = children[i];\r\n\t\t\t\t\tif((child instanceof dojox.wire.ml.DataProperty) && child.name){\r\n\t\t\t\t\t\tvalue[child.name] = child.getValue();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(this.type == \"element\"){\r\n\t\t\t\tvalue = new dojox.wire.ml.XmlElement(value);\r\n\t\t\t\tvar children = this.getChildren();\r\n\t\t\t\tfor(var i in children){\r\n\t\t\t\t\tvar child = children[i];\r\n\t\t\t\t\tif((child instanceof dojox.wire.ml.DataProperty) && child.name){\r\n\t\t\t\t\t\tvalue.setPropertyValue(child.name, child.getValue());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value; //anything\r\n\t}\r\n});\r\n"]}