{"version":3,"sources":["wire/ml/XmlHandler.js"],"names":["dojo","provide","require","declare","dojox","wire","ml","RestHandler","contentType","handleAs","_getContent","method","parameters","content","p","isString","element","XmlElement","nodeType","documentElement","xml","parser","innerXML","_getResult","data"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,4BAEbD,KAAKE,QAAQ,6BACbF,KAAKE,QAAQ,oBACbF,KAAKE,QAAQ,oBACbF,KAAKE,QAAQ,sBAGbF,KAAKG,QAAQ,2BAA4BC,MAAMC,KAAKC,GAAGC,aAMtDC,YAAa,WACbC,SAAU,MAEVC,YAAa,SAAmBC,EAAiBC,GAUhD,IAAIC,EAAU,KACd,GAAa,QAAVF,GAA8B,OAAVA,EAAgB,CACtC,IAAIG,EAAIF,EAAW,GACnB,GAAGE,EACF,GAAGd,KAAKe,SAASD,GAChBD,EAAUC,MACN,CACJ,IAAIE,EAAUF,EACXE,aAAmBZ,MAAMC,KAAKC,GAAGW,WACnCD,EAAUA,EAAQA,QACW,IAArBA,EAAQE,WAChBF,EAAUA,EAAQG,iBAGnBN,EADkB,wBACMT,MAAMgB,IAAIC,OAAOC,SAASN,IAIrD,OAAOH,GAGRU,WAAY,SAAqBC,GAahC,OAHGA,IACFA,EAAO,IAAIpB,MAAMC,KAAKC,GAAGW,WAAWO,IAE9BA","file":"../../../wire/ml/XmlHandler.js","sourcesContent":["dojo.provide(\"dojox.wire.ml.XmlHandler\");\r\n\r\ndojo.require(\"dojox.wire.ml.RestHandler\");\r\ndojo.require(\"dojox.xml.parser\");\r\ndojo.require(\"dojox.wire._base\");\r\ndojo.require(\"dojox.wire.ml.util\");\r\n\r\n\r\ndojo.declare(\"dojox.wire.ml.XmlHandler\", dojox.wire.ml.RestHandler, {\r\n\t// summary:\r\n\t//\t\tA REST service handler for XML\r\n\t// description:\r\n\t//\t\tThis class provides XML handling for a REST service.\r\n\r\n\tcontentType: \"text/xml\",\r\n\thandleAs: \"xml\",\r\n\r\n\t_getContent: function(/*String*/method, /*Array*/parameters){\r\n\t\t// description:\r\n\t\t//\t\tIf 'method' is \"POST\" or \"PUT\", the first parameter in\r\n\t\t//\t\t'parameters' is used to generate an XML content.\r\n\t\t// method:\r\n\t\t//\t\tA method name\r\n\t\t// parameters:\r\n\t\t//\t\tAn array of parameters\r\n\t\t// returns:\r\n\t\t//\t\tA request content\r\n\t\tvar content = null;\r\n\t\tif(method == \"POST\" || method == \"PUT\"){\r\n\t\t\tvar p = parameters[0];\r\n\t\t\tif(p){\r\n\t\t\t\tif(dojo.isString(p)){\r\n\t\t\t\t\tcontent = p;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar element = p;\r\n\t\t\t\t\tif(element instanceof dojox.wire.ml.XmlElement){\r\n\t\t\t\t\t\telement = element.element;\r\n\t\t\t\t\t}else if(element.nodeType === 9 /* DOCUMENT_NODE */){\r\n\t\t\t\t\t\telement = element.documentElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar declaration = \"<?xml version=\\\"1.0\\\"?>\"; // TODO: encoding?\r\n\t\t\t\t\tcontent = declaration + dojox.xml.parser.innerXML(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn content;\r\n\t},\r\n\r\n\t_getResult: function(/*Document*/data){\r\n\t\t// summary:\r\n\t\t//\t\tExtract a result\r\n\t\t// description:\r\n\t\t//\t\tA response data (XML Document) is returned wrapped with\r\n\t\t//\t\tXmlElement.\r\n\t\t// data:\r\n\t\t//\t\tA response data returned by a service\r\n\t\t// returns:\r\n\t\t//\t\tA result object\r\n\t\tif(data){\r\n\t\t\tdata = new dojox.wire.ml.XmlElement(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n});\r\n"]}