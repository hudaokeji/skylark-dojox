{"version":3,"sources":["charting/plot2d/_PlotEvents.js"],"names":["define","lang","arr","declare","hub","constructor","this","_shapeEvents","_eventSeries","destroy","resetEvents","inherited","arguments","plotEvent","o","raiseEvent","t","delegate","originalEvent","type","originalPlot","plot","forEach","chart","stack","connect","object","method","dirty","events","after","length","item","shape","disconnect","handle","_connectSingleEvent","eventName","push","eventMask","e","event","_connectEvents","hAxis","vAxis","_reconnectEvents","seriesName","a","fireEvent","index","eventObject","s"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,mBAAoB,qBAAsB,sBACpE,SAASC,EAAMC,EAAKC,EAASC,GAE7B,OAAOD,EAAQ,oCAAqC,MACnDE,YAAa,WACZC,KAAKC,gBACLD,KAAKE,iBAENC,QAAS,WAGRH,KAAKI,cACLJ,KAAKK,UAAUC,YAEhBC,UAAW,SAASC,KAMpBC,WAAY,SAASD,GAKpBR,KAAKO,UAAUC,GACf,IAAIE,EAAIf,EAAKgB,SAASH,GACtBE,EAAEE,cAAgBJ,EAAEK,KACpBH,EAAEI,aAAgBN,EAAEO,KACpBL,EAAEG,KAAO,aACTjB,EAAIoB,QAAQhB,KAAKiB,MAAMC,MAAO,SAASH,GACnCA,IAASf,MAAQe,EAAKR,YACxBG,EAAEK,KAAOA,EACTA,EAAKR,UAAUG,KAEdV,OAEJmB,QAAS,SAASC,EAAQC,GAUzB,OADArB,KAAKsB,OAAQ,EACNxB,EAAIqB,QAAQnB,KAAM,YAAaoB,EAAQC,IAE/CE,OAAQ,WAKP,QAASvB,KAAKO,UAAUiB,OAEzBpB,YAAa,WAGTJ,KAAKC,aAAawB,SACpB7B,EAAIoB,QAAQhB,KAAKC,aAAc,SAASyB,GACvCA,EAAKC,MAAMC,WAAWF,EAAKG,UAE5B7B,KAAKC,iBAEND,KAAKS,YAAYI,KAAM,cAAeE,KAAMf,QAE7C8B,oBAAqB,SAAStB,EAAGuB,GAChC/B,KAAKC,aAAa+B,MACjBL,MAAQnB,EAAEyB,UACVJ,OAAQrB,EAAEyB,UAAUd,QAAQY,EAAW/B,KAAM,SAASkC,GACrD1B,EAAEK,KAAQkB,EACVvB,EAAE2B,MAAQD,EACVlC,KAAKS,WAAWD,GAChBA,EAAE2B,MAAQ,UAIbC,eAAgB,SAAS5B,GACrBA,IACFA,EAAES,MAAQjB,KAAKiB,MACfT,EAAEO,KAAQf,KACVQ,EAAE6B,MAAQrC,KAAKqC,OAAS,KACxB7B,EAAE8B,MAAQtC,KAAKsC,OAAS,KACxB9B,EAAEyB,UAAYzB,EAAEyB,WAAazB,EAAEmB,MAC/B3B,KAAK8B,oBAAoBtB,EAAG,eAC5BR,KAAK8B,oBAAoBtB,EAAG,cAC5BR,KAAK8B,oBAAoBtB,EAAG,aAG9B+B,iBAAkB,SAASC,GAC1B,IAAIC,EAAIzC,KAAKE,aAAasC,GACvBC,GACF7C,EAAIoB,QAAQyB,EAAGzC,KAAKoC,eAAgBpC,OAGtC0C,UAAW,SAASF,EAAYT,EAAWY,EAAOC,GAajD,IAAIC,EAAI7C,KAAKE,aAAasC,GAC1B,GAAGK,GAAKA,EAAEpB,QAAUkB,EAAQE,EAAEpB,OAAO,CACpC,IAAIjB,EAAIqC,EAAEF,GACVnC,EAAEK,KAAQkB,EACVvB,EAAE2B,MAAQS,GAAe,KACzB5C,KAAKS,WAAWD,GAChBA,EAAE2B,MAAQ","file":"../../../charting/plot2d/_PlotEvents.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/array\", \"dojo/_base/declare\", \"dojo/_base/connect\"], \r\n\tfunction(lang, arr, declare, hub){\r\n\r\n\treturn declare(\"dojox.charting.plot2d._PlotEvents\", null, {\r\n\t\tconstructor: function(){\r\n\t\t\tthis._shapeEvents = [];\r\n\t\t\tthis._eventSeries = {};\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDestroy any internal elements and event handlers.\r\n\t\t\tthis.resetEvents();\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\t\tplotEvent: function(o){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStub function for use by specific plots.\r\n\t\t\t// o: Object\r\n\t\t\t//\t\tAn object intended to represent event parameters.\r\n\t\t},\r\n\t\traiseEvent: function(o){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRaises events in predefined order\r\n\t\t\t// o: Object\r\n\t\t\t//\t\tAn object intended to represent event parameters.\r\n\t\t\tthis.plotEvent(o);\r\n\t\t\tvar t = lang.delegate(o);\r\n\t\t\tt.originalEvent = o.type;\r\n\t\t\tt.originalPlot  = o.plot;\r\n\t\t\tt.type = \"onindirect\";\r\n\t\t\tarr.forEach(this.chart.stack, function(plot){\r\n\t\t\t\tif(plot !== this && plot.plotEvent){\r\n\t\t\t\t\tt.plot = plot;\r\n\t\t\t\t\tplot.plotEvent(t);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\tconnect: function(object, method){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHelper function to connect any object's method to our plotEvent.\r\n\t\t\t// object: Object\r\n\t\t\t//\t\tThe object to connect to.\r\n\t\t\t// method: String|Function\r\n\t\t\t//\t\tThe method to fire when our plotEvent is fired.\r\n\t\t\t// returns: Array\r\n\t\t\t//\t\tThe handle as returned from dojo.connect (see dojo.connect).\r\n\t\t\tthis.dirty = true;\r\n\t\t\treturn hub.connect(this, \"plotEvent\", object, method);\t//\tArray\r\n\t\t},\r\n\t\tevents: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFind out if any event handlers have been connected to our plotEvent.\r\n\t\t\t// returns: Boolean\r\n\t\t\t//\t\tA flag indicating that there are handlers attached.\r\n\t\t\treturn !!this.plotEvent.after;\r\n\t\t},\r\n\t\tresetEvents: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReset all events attached to our plotEvent (i.e. disconnect).\r\n\t\t\tif(this._shapeEvents.length){\r\n\t\t\t\tarr.forEach(this._shapeEvents, function(item){\r\n\t\t\t\t\titem.shape.disconnect(item.handle);\r\n\t\t\t\t});\r\n\t\t\t\tthis._shapeEvents = [];\r\n\t\t\t}\r\n\t\t\tthis.raiseEvent({type: \"onplotreset\", plot: this});\r\n\t\t},\r\n\t\t_connectSingleEvent: function(o, eventName){\r\n\t\t\tthis._shapeEvents.push({\r\n\t\t\t\tshape:  o.eventMask,\r\n\t\t\t\thandle: o.eventMask.connect(eventName, this, function(e){\r\n\t\t\t\t\to.type  = eventName;\r\n\t\t\t\t\to.event = e;\r\n\t\t\t\t\tthis.raiseEvent(o);\r\n\t\t\t\t\to.event = null;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\t\t_connectEvents: function(o){\r\n\t\t\tif(o){\r\n\t\t\t\to.chart = this.chart;\r\n\t\t\t\to.plot  = this;\r\n\t\t\t\to.hAxis = this.hAxis || null;\r\n\t\t\t\to.vAxis = this.vAxis || null;\r\n\t\t\t\to.eventMask = o.eventMask || o.shape;\r\n\t\t\t\tthis._connectSingleEvent(o, \"onmouseover\");\r\n\t\t\t\tthis._connectSingleEvent(o, \"onmouseout\");\r\n\t\t\t\tthis._connectSingleEvent(o, \"onclick\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t_reconnectEvents: function(seriesName){\r\n\t\t\tvar a = this._eventSeries[seriesName];\r\n\t\t\tif(a){\r\n\t\t\t\tarr.forEach(a, this._connectEvents, this);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfireEvent: function(seriesName, eventName, index, eventObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEmulates firing an event for a given data value (specified by\r\n\t\t\t//\t\tan index) of a given series.\r\n\t\t\t// seriesName: String\r\n\t\t\t//\t\tSeries name.\r\n\t\t\t// eventName: String\r\n\t\t\t//\t\tEvent name to emulate.\r\n\t\t\t// index: Number\r\n\t\t\t//\t\tValid data value index used to raise an event.\r\n\t\t\t// eventObject: Object?\r\n\t\t\t//\t\tOptional event object. Especially useful for synthetic events.\r\n\t\t\t//\t\tDefault: null.\r\n\t\t\tvar s = this._eventSeries[seriesName];\r\n\t\t\tif(s && s.length && index < s.length){\r\n\t\t\t\tvar o = s[index];\r\n\t\t\t\to.type  = eventName;\r\n\t\t\t\to.event = eventObject || null;\r\n\t\t\t\tthis.raiseEvent(o);\r\n\t\t\t\to.event = null;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}