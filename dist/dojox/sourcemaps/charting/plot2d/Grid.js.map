{"version":3,"sources":["charting/plot2d/Grid.js"],"names":["define","lang","declare","arr","has","CartesianBase","dc","du","fx","sortTicks","a","b","value","defaultParams","hMajorLines","hMinorLines","vMajorLines","vMinorLines","hStripes","vStripes","animate","enableCache","renderOnAxis","optionalParams","majorHLine","minorHLine","majorVLine","minorVLine","hFill","vFill","hAlternateFill","vAlternateFill","constructor","chart","kwArgs","this","opt","clone","updateWithObject","updateWithPattern","_lineFreePool","_lineUsePool","_rectFreePool","_rectUsePool","addSeries","run","getSeriesStats","delegate","defaultStats","cleanGroup","inherited","arguments","concat","createLine","creator","params","line","length","pop","setShape","add","push","createRect","rect","render","dim","offsets","zoom","performZoom","dirty","isDirty","lineStroke","ticks","s","getGroup","ta","theme","w","Math","max","width","l","r","h","height","t","x","y","_vAxis","getTicks","vScaler","getScaler","vt","scaler","getTransformerFromModel","_renderHRect","grid","minorLine","axis","minorTick","_renderHLines","minor","majorLine","majorTick","major","_hAxis","hScaler","ht","_renderVRect","_renderVLines","forEach","tick","leftBottom","bounds","from","to","hLine","x1","y1","x2","y2","setStroke","_animateGrid","vLine","fill","hStripe","allTicks","sort","splice","j","alternateFill","setFill","vStripe","shape","type","offset","size","transStart","scaleStart","animateTransform","duration","transform","name","start","end","play"],"mappings":"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","file":"../../../charting/plot2d/Grid.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/declare\", \"dojo/_base/array\", \"dojo/sniff\",\r\n\t\t\"./CartesianBase\", \"./common\", \"dojox/lang/utils\", \"dojox/gfx/fx\"],\r\n\tfunction(lang, declare, arr, has, CartesianBase, dc, du, fx){\r\n\r\n\tvar sortTicks = function(a,b){return a.value - b.value};\r\n\r\n\t/*=====\r\n\tdeclare(\"dojox.charting.plot2d.__GridCtorArgs\", dojox.charting.plot2d.__CartesianCtorArgs, {\r\n\t\t// summary:\r\n\t\t//\t\tA special keyword arguments object that is specific to a grid \"plot\".\r\n\r\n\t\t// majorHLine: dojox.gfx.Stroke?\r\n\t\t//\t\tAn optional dojox.gfx.Stroke for a major horizontal line. By default major lines use major tick stroke.\r\n\t\tmajorHLine:undefined,\r\n\r\n\t\t// minorHLine: dojox.gfx.Stroke?\r\n\t\t//\t\tAn optional dojox.gfx.Stroke for a minor horizontal line. By default minor lines use minor tick stroke.\r\n\t\tminorHLine:undefined,\r\n\r\n\t\t// majorVLine: dojox.gfx.Stroke?\r\n\t\t//\t\tAn optional dojox.gfx.Stroke for a major vertical line. By default major lines use major tick stroke.\r\n\t\tmajorVLine:undefined,\r\n\r\n\t\t// minorVLine: dojox.gfx.Stroke?\r\n\t\t//\t\tAn optional dojox.gfx.Stroke for a minor vertical line. By default major lines use major tick stroke.\r\n\t\tminorVLine:undefined,\r\n\r\n\t\t// hFill: dojox.gfx.Fill?\r\n\t\t//\t\tAn optional dojox.gfx.Fill used to fill every other horizontal stripe created by grid lines.\r\n\t\thFill: undefined,\r\n\r\n\t\t// hAlternateFill: dojox.gfx.Fill?\r\n\t\t//\t\tAn optional dojox.gfx.Fill used to fill alternating horizontal stripe created by grid lines not filled by `hFill`.\r\n\t\thAlternateFill: undefined,\r\n\r\n\t\t// vFill: dojox.gfx.Fill?\r\n\t\t//\t\tAn optional dojox.gfx.Fill used to fill every other vertical stripe created by grid lines.\r\n\t\tvFill: undefined,\r\n\r\n\t\t// vAlternateFill: dojox.gfx.Fill?\r\n\t\t//\t\tAn optional dojox.gfx.Fill used to fill alternating vertical stripe created by grid lines not filled by `vFill`.\r\n\t\tvAlternateFill: undefined,\r\n\r\n\t\t// hMajorLines: Boolean?\r\n\t\t//\t\tWhether to show lines at the major ticks along the horizontal axis. Default is true.\r\n\t\thMajorLines: true,\r\n\r\n\t\t// hMinorLines: Boolean?\r\n\t\t//\t\tWhether to show lines at the minor ticks along the horizontal axis. Default is false.\r\n\t\thMinorLines: false,\r\n\r\n\t\t// vMajorLines: Boolean?\r\n\t\t//\t\tWhether to show lines at the major ticks along the vertical axis. Default is true.\r\n\t\tvMajorLines: true,\r\n\r\n\t\t// vMinorLines: Boolean?\r\n\t\t//\t\tWhether to show lines at the major ticks along the vertical axis. Default is false.\r\n\t\tvMinorLines: false,\r\n\r\n\t\t// hStripes: Boolean?\r\n\t\t//\t\tWhether to show horizontal stripes. Default is false.\r\n\t\thStripes: false,\r\n\r\n\t\t// vStripes: Boolean?\r\n\t\t//\t\tWhether to show vertical stripes. Default is false.\r\n\t\tvStripes: false,\r\n\r\n\t\t// enableCache: Boolean?\r\n\t\t//\t\tWhether the grid lines are cached from one rendering to another. This improves the rendering performance of\r\n\t\t//\t\tsuccessive rendering but penalize the first rendering.  Default false.\r\n\t\tenableCache: false,\r\n\r\n\t\t// renderOnAxis: Boolean?\r\n\t\t//\t\tWhether or not the grid is rendered when drawn at horizontal or vertical axis position. Default is true.\r\n\t\trenderOnAxis: true\r\n\t});\r\n\t=====*/\r\n\r\n\treturn declare(\"dojox.charting.plot2d.Grid\", CartesianBase, {\r\n\t\t// summary:\r\n\t\t//\t\tA \"faux\" plot that can be placed behind other plots to represent\r\n\t\t//\t\ta grid against which other plots can be easily measured.\r\n\t\tdefaultParams: {\r\n\t\t\thMajorLines: true,\t// draw horizontal major lines\r\n\t\t\thMinorLines: false,\t// draw horizontal minor lines\r\n\t\t\tvMajorLines: true,\t// draw vertical major lines\r\n\t\t\tvMinorLines: false,\t// draw vertical minor lines\r\n\t\t\thStripes: false,\t// draw vertical stripes\r\n\t\t\tvStripes: false,\t// draw vertical stripes\r\n\t\t\tanimate: null,   // animate bars into place\r\n\t\t\tenableCache: false,\r\n\t\t\trenderOnAxis: true\r\n\t\t},\r\n\r\n\t\toptionalParams: {\r\n\t\t\tmajorHLine: {},\r\n\t\t\tminorHLine: {},\r\n\t\t\tmajorVLine: {},\r\n\t\t\tminorVLine: {},\r\n\t\t\thFill: {},\r\n\t\t\tvFill: {},\r\n\t\t\thAlternateFill: {},\r\n\t\t\tvAlternateFill: {}\r\n\t\t},\r\n\r\n\t\tconstructor: function(chart, kwArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate the faux Grid plot.\r\n\t\t\t// chart: dojox/charting/Chart\r\n\t\t\t//\t\tThe chart this plot belongs to.\r\n\t\t\t// kwArgs: dojox.charting.plot2d.__GridCtorArgs?\r\n\t\t\t//\t\tAn optional keyword arguments object to help define the parameters of the underlying grid.\r\n\t\t\tthis.opt = lang.clone(this.defaultParams);\r\n\t\t\tdu.updateWithObject(this.opt, kwArgs);\r\n\t\t\tdu.updateWithPattern(this.opt, kwArgs, this.optionalParams);\r\n\t\t\tthis.animate = this.opt.animate;\r\n\t\t\tif(this.opt.enableCache){\r\n\t\t\t\tthis._lineFreePool = [];\r\n\t\t\t\tthis._lineUsePool = [];\r\n\t\t\t\tthis._rectFreePool = [];\r\n\t\t\t\tthis._rectUsePool = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\taddSeries: function(run){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tIgnored but included as a dummy method.\r\n\t\t\t// returns: dojox/charting/plot2d/Grid\r\n\t\t\t//\t\tThe reference to this plot for functional chaining.\r\n\t\t\treturn this;\t//\tdojox/charting/plot2d/Grid\r\n\t\t},\r\n\t\tgetSeriesStats: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns default stats (irrelevant for this type of plot).\r\n\t\t\t// returns: Object\r\n\t\t\t//\t\t{hmin, hmax, vmin, vmax} min/max in both directions.\r\n\t\t\treturn lang.delegate(dc.defaultStats); // Object\r\n\t\t},\r\n\t\tcleanGroup: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tif(this.opt.enableCache){\r\n\t\t\t\tthis._lineFreePool = this._lineFreePool.concat(this._lineUsePool);\r\n\t\t\t\tthis._lineUsePool = [];\r\n\t\t\t\tthis._rectFreePool = this._rectFreePool.concat(this._rectUsePool);\r\n\t\t\t\tthis._rectUsePool = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateLine: function(creator, params){\r\n\t\t\tvar line;\r\n\t\t\tif(this.opt.enableCache && this._lineFreePool.length > 0){\r\n\t\t\t\tline = this._lineFreePool.pop();\r\n\t\t\t\tline.setShape(params);\r\n\t\t\t\t// was cleared, add it back\r\n\t\t\t\tcreator.add(line);\r\n\t\t\t}else{\r\n\t\t\t\tline = creator.createLine(params);\r\n\t\t\t}\r\n\t\t\tif(this.opt.enableCache){\r\n\t\t\t\tthis._lineUsePool.push(line);\r\n\t\t\t}\r\n\t\t\treturn line;\r\n\t\t},\r\n\t\tcreateRect: function(creator, params){\r\n\t\t\tvar rect;\r\n\t\t\tif(this.opt.enableCache && this._rectFreePool.length > 0){\r\n\t\t\t\trect = this._rectFreePool.pop();\r\n\t\t\t\trect.setShape(params);\r\n\t\t\t\t// was cleared, add it back\r\n\t\t\t\tcreator.add(rect);\r\n\t\t\t}else{\r\n\t\t\t\trect = creator.createRect(params);\r\n\t\t\t}\r\n\t\t\tif(this.opt.enableCache){\r\n\t\t\t\tthis._rectUsePool.push(rect);\r\n\t\t\t}\r\n\t\t\treturn rect;\r\n\t\t},\r\n\t\t\r\n\t\trender: function(dim, offsets){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRender the plot on the chart.\r\n\t\t\t// dim: Object\r\n\t\t\t//\t\tAn object of the form { width, height }.\r\n\t\t\t// offsets: Object\r\n\t\t\t//\t\tAn object of the form { l, r, t, b }.\r\n\t\t\t// returns: dojox/charting/plot2d/Grid\r\n\t\t\t//\t\tA reference to this plot for functional chaining.\r\n\t\t\tif(this.zoom){\r\n\t\t\t\treturn this.performZoom(dim, offsets);\r\n\t\t\t}\r\n\t\t\tthis.dirty = this.isDirty();\r\n\t\t\tif(!this.dirty){ return this; }\r\n\t\t\tthis.cleanGroup();\r\n\t\t\tvar s = this.getGroup(), ta = this.chart.theme, lineStroke, ticks;\r\n\t\t\tif((has(\"ios\") && has(\"ios\") < 6) || has(\"android\") || (has(\"safari\") && !has(\"ios\"))){\r\n\t\t\t\t// clipping seems buggy in some mobile Webkit browser and Safari desktop\r\n\t\t\t\t// it does not clip correctly if only lines are present => create a invisible rectangle...\r\n\t\t\t\tvar w = Math.max(0, dim.width  - offsets.l - offsets.r),\r\n\t\t\t\t\th = Math.max(0, dim.height - offsets.t - offsets.b);\r\n\t\t\t\ts.createRect({ x: offsets.l, y: offsets.t, width: w, height: h});\r\n\t\t\t}\r\n\t\t\tif(this._vAxis){\r\n\t\t\t\t// draw horizontal stripes and lines\r\n\t\t\t\tticks = this._vAxis.getTicks();\r\n\t\t\t\tvar vScaler = this._vAxis.getScaler();\r\n\t\t\t\tif(ticks != null && vScaler != null){\r\n\t\t\t\t\tvar vt = vScaler.scaler.getTransformerFromModel(vScaler);\r\n\t\t\t\t\tif(this.opt.hStripes){\r\n\t\t\t\t\t\tthis._renderHRect(ticks, ta.grid, dim, offsets, vScaler, vt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.opt.hMinorLines){\r\n\t\t\t\t\t\tlineStroke = this.opt.minorHLine || (ta.grid && ta.grid.minorLine) || ta.axis.minorTick;\r\n\t\t\t\t\t\tthis._renderHLines(ticks.minor, lineStroke, dim, offsets, vScaler, vt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.opt.hMajorLines){\r\n\t\t\t\t\t\tlineStroke = this.opt.majorHLine || (ta.grid && ta.grid.majorLine) || ta.axis.majorTick;\r\n\t\t\t\t\t\tthis._renderHLines(ticks.major, lineStroke, dim, offsets, vScaler, vt);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(this._hAxis){\r\n\t\t\t\t// draw vertical stripes and lines\r\n\t\t\t\tticks = this._hAxis.getTicks();\r\n\t\t\t\tvar hScaler = this._hAxis.getScaler();\r\n\t\t\t\tif(ticks != null && hScaler != null){\r\n\t\t\t\t\tvar ht = hScaler.scaler.getTransformerFromModel(hScaler);\r\n\t\t\t\t\tif(this.opt.vStripes){\r\n\t\t\t\t\t\tthis._renderVRect(ticks, ta.grid, dim, offsets, hScaler, ht);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(ticks && this.opt.vMinorLines){\r\n\t\t\t\t\t\tlineStroke = this.opt.minorVLine || (ta.grid && ta.grid.minorLine) || ta.axis.minorTick;\r\n\t\t\t\t\t\tthis._renderVLines(ticks.minor, lineStroke, dim, offsets, hScaler, ht);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(ticks && this.opt.vMajorLines){\r\n\t\t\t\t\t\tlineStroke = this.opt.majorVLine || (ta.grid && ta.grid.majorLine) || ta.axis.majorTick;\r\n\t\t\t\t\t\tthis._renderVLines(ticks.major, lineStroke, dim, offsets, hScaler, ht);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dirty = false;\r\n\t\t\treturn this;\t//\tdojox/charting/plot2d/Grid\r\n\t\t},\r\n\t\t_renderHLines: function(ticks, lineStroke, dim, offsets, vScaler, vt){\r\n\t\t\tvar s = this.getGroup();\r\n\t\t\tarr.forEach(ticks, function(tick){\r\n\t\t\t\tif(!this.opt.renderOnAxis && tick.value == (this._vAxis.opt.leftBottom?vScaler.bounds.from:vScaler.bounds.to)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar y = dim.height - offsets.b - vt(tick.value);\r\n\t\t\t\tvar hLine = this.createLine(s, {\r\n\t\t\t\t\tx1: offsets.l,\r\n\t\t\t\t\ty1: y,\r\n\t\t\t\t\tx2: dim.width - offsets.r,\r\n\t\t\t\t\ty2: y\r\n\t\t\t\t}).setStroke(lineStroke);\r\n\t\t\t\tif(this.animate){\r\n\t\t\t\t\tthis._animateGrid(hLine, \"h\", offsets.l, offsets.r + offsets.l - dim.width);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\t_renderVLines: function(ticks, lineStroke, dim, offsets, hScaler, ht){\r\n\t\t\tvar s = this.getGroup();\r\n\t\t\tarr.forEach(ticks, function(tick){\r\n\t\t\t\tif(!this.opt.renderOnAxis && tick.value == (this._hAxis.opt.leftBottom?hScaler.bounds.from:hScaler.bounds.to)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar x = offsets.l + ht(tick.value);\r\n\t\t\t\tvar vLine = this.createLine(s, {\r\n\t\t\t\t\tx1: x,\r\n\t\t\t\t\ty1: offsets.t,\r\n\t\t\t\t\tx2: x,\r\n\t\t\t\t\ty2: dim.height - offsets.b\r\n\t\t\t\t}).setStroke(lineStroke);\r\n\t\t\t\tif(this.animate){\r\n\t\t\t\t\tthis._animateGrid(vLine, \"v\", dim.height - offsets.b, dim.height - offsets.b - offsets.t);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\t_renderHRect: function(ticks, theme, dim, offsets, vScaler, vt){\r\n\t\t\tvar fill, tick, y, y2, hStripe;\r\n\t\t\tvar allTicks = ticks.major.concat(ticks.minor);\r\n\t\t\tallTicks.sort(sortTicks);\r\n\t\t\tif(allTicks[0].value > vScaler.bounds.from){\r\n\t\t\t\tallTicks.splice(0, 0, {value: vScaler.bounds.from});\r\n\t\t\t}\r\n\t\t\tif(allTicks[allTicks.length - 1].value < vScaler.bounds.to){\r\n\t\t\t\tallTicks.push({value: vScaler.bounds.to});\r\n\t\t\t}\r\n\t\t\tvar s = this.getGroup();\r\n\t\t\tfor(var j = 0; j < allTicks.length - 1; j++){\r\n\t\t\t\ttick = allTicks[j];\r\n\t\t\t\ty = dim.height - offsets.b - vt(tick.value);\r\n\t\t\t\ty2 = dim.height - offsets.b - vt(allTicks[j+1].value);\r\n\r\n\t\t\t\tfill = (j%2 == 0)?(this.opt.hAlternateFill ||(theme && theme.alternateFill)):\r\n\t\t\t\t\t(this.opt.hFill || (theme && theme.fill));\r\n\t\t\t\tif(fill){\r\n\t\t\t\t\thStripe = this.createRect(s, {\r\n\t\t\t\t\t\tx: offsets.l,\r\n\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\twidth: dim.width - offsets.r,\r\n\t\t\t\t\t\theight: y - y2\r\n\t\t\t\t\t}).setFill(fill);\r\n\t\t\t\t\tif(this.animate){\r\n\t\t\t\t\t\tthis._animateGrid(hStripe, \"h\", offsets.l, offsets.r + offsets.l - dim.width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_renderVRect: function(ticks, theme, dim, offsets, hScaler, ht){\r\n\t\t\tvar fill, tick, x, x2, vStripe;\r\n\t\t\tvar allTicks = ticks.major.concat(ticks.minor);\r\n\t\t\tallTicks.sort(sortTicks);\r\n\t\t\tif(allTicks[0].value > hScaler.bounds.from){\r\n\t\t\t\tallTicks.splice(0, 0, {value: hScaler.bounds.from});\r\n\t\t\t}\r\n\t\t\tif(allTicks[allTicks.length - 1].value < hScaler.bounds.to){\r\n\t\t\t\tallTicks.push({value: hScaler.bounds.to});\r\n\t\t\t}\r\n\t\t\tvar s = this.getGroup();\r\n\t\t\tfor(var j = 0; j < allTicks.length - 1; j++){\r\n\t\t\t\ttick = allTicks[j];\r\n\t\t\t\tx = offsets.l + ht(tick.value);\r\n\t\t\t\tx2 = offsets.l + ht(allTicks[j+1].value);\r\n\r\n\t\t\t\tfill = (j%2 == 0)?(this.opt.vAlternateFill ||(theme && theme.alternateFill)):\r\n\t\t\t\t\t(this.opt.vFill || (theme && theme.fill));\r\n\t\t\t\tif(fill){\r\n\t\t\t\t\tvStripe = this.createRect(s, {\r\n\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\ty: offsets.t,\r\n\t\t\t\t\t\twidth: x2 - x,\r\n\t\t\t\t\t\theight: dim.width - offsets.r\r\n\t\t\t\t\t}).setFill(fill);\r\n\t\t\t\t\tif(this.animate){\r\n\t\t\t\t\t\tthis._animateGrid(vStripe, \"v\", dim.height - offsets.b, dim.height - offsets.b - offsets.t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_animateGrid: function(shape, type, offset, size){\r\n\t\t\tvar transStart = type == \"h\" ? [offset, 0] : [0, offset];\r\n\t\t\tvar scaleStart = type == \"h\" ? [1/size, 1] : [1, 1/size];\r\n\t\t\tfx.animateTransform(lang.delegate({\r\n\t\t\t\tshape: shape,\r\n\t\t\t\tduration: 1200,\r\n\t\t\t\ttransform: [\r\n\t\t\t\t\t{name: \"translate\", start: transStart, end: [0, 0]},\r\n\t\t\t\t\t{name: \"scale\", start: scaleStart, end: [1, 1]},\r\n\t\t\t\t\t{name: \"original\"}\r\n\t\t\t\t]\r\n\t\t\t}, this.animate)).play();\r\n\t\t}\r\n\t});\r\n});\r\n"]}