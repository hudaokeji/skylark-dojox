{"version":3,"sources":["charting/bidi/widget/Legend.js"],"names":["define","declare","dom","widgetManager","hub","arrayUtil","query","postMixInProperties","this","chart","textDir","connect","chartRef","byId","node","byNode","_setTextDirAttr","test","validateTextDir","_set","legendLabels","_tr","forEach","label","dir","getTextDir","innerHTML"],"mappings":";;;;;;;AAAAA,QAAQ,qBAAsB,WAAY,iBAAkB,qBAAsB,mBAAoB,cACrG,SAASC,EAASC,EAAKC,EAAeC,EAAKC,EAAWC,GAOtD,OAAOL,EAAQ,MACdM,oBAAqB,WASpB,GAAIC,KAAKC,MAeRD,KAAKE,QAAUF,KAAKC,MAAMC,QAC1BN,EAAIO,QAAQH,KAAKC,MAAO,aAAcD,KAAM,uBAhB9B,CACd,IAAIA,KAAKI,SAAW,OACpB,IAAIH,EAAQN,EAAcU,KAAKL,KAAKI,UACpC,IAAIH,EAAM,CACT,IAAIK,EAAOZ,EAAIW,KAAKL,KAAKI,UACzB,IAAGE,EAGF,OAFAL,EAAQN,EAAcY,OAAOD,GAK/BN,KAAKE,QAAUD,EAAMA,MAAMC,QAC3BN,EAAIO,QAAQF,EAAMA,MAAO,aAAcD,KAAM,qBAS/CQ,gBAAiB,SAAoBN,GAUpC,GAA+B,MA7CjC,SAAyBA,GACxB,MAAO,mBAAmBO,KAAKP,GAAWA,EAAU,KA4ChDQ,CAAgBR,IACfF,KAAKE,SAAWA,EAAQ,CAC1BF,KAAKW,KAAK,UAAWT,GAErB,IAAIU,EAAed,EAAM,mBAAoBE,KAAKa,KAEjDhB,EAAUiB,QAAQF,EAAc,SAASG,GACxCA,EAAMC,IAAMhB,KAAKiB,WAAWF,EAAMG,UAAWH,EAAMC,MAClDhB","file":"../../../../charting/bidi/widget/Legend.js","sourcesContent":["define([\"dojo/_base/declare\", \"dojo/dom\", \"dijit/registry\", \"dojo/_base/connect\", \"dojo/_base/array\", \"dojo/query\"],\r\n\tfunction(declare, dom, widgetManager, hub, arrayUtil, query){\r\n\t// module:\r\n\t//\t\tdojox/charting/bidi/widget/Legend\t\r\n\tfunction validateTextDir(textDir){\r\n\t\treturn /^(ltr|rtl|auto)$/.test(textDir) ? textDir : null;\r\n\t}\r\n\t\r\n\treturn declare(null, {\r\n\t\tpostMixInProperties: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConnect the setter of textDir legend to setTextDir of the chart,\r\n\t\t\t//\t\tso _setTextDirAttr of the legend will be called after setTextDir of the chart is called.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\t// find the chart that is the owner of this legend, use it's\r\n\t\t\t// textDir\r\n\t\t\tif(!this.chart){\r\n\t\t\t\tif(!this.chartRef){ return; }\r\n\t\t\t\tvar chart = widgetManager.byId(this.chartRef);\r\n\t\t\t\tif(!chart){\r\n\t\t\t\t\tvar node = dom.byId(this.chartRef);\r\n\t\t\t\t\tif(node){\r\n\t\t\t\t\t\tchart = widgetManager.byNode(node);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.textDir = chart.chart.textDir;\r\n\t\t\t\thub.connect(chart.chart, \"setTextDir\", this, \"_setTextDirAttr\");\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.textDir = this.chart.textDir;\r\n\t\t\t\thub.connect(this.chart, \"setTextDir\", this, \"_setTextDirAttr\");\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setTextDirAttr: function(/*String*/ textDir){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSetter for textDir.\r\n\t\t\t// description:\r\n\t\t\t//\t\tUsers shouldn't call this function; they should be calling\r\n\t\t\t//\t\tset('textDir', value)\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\t// only if new textDir is different from the old one\r\n\t\t\tif(validateTextDir(textDir) != null){\r\n\t\t\t\tif(this.textDir != textDir){\r\n\t\t\t\t\tthis._set(\"textDir\", textDir);\r\n\t\t\t\t\t// get array of all the labels\r\n\t\t\t\t\tvar legendLabels = query(\".dojoxLegendText\", this._tr);\r\n\t\t\t\t\t\t// for every label calculate it's new dir.\r\n\t\t\t\t\t\tarrayUtil.forEach(legendLabels, function(label){\r\n\t\t\t\t\t\t\tlabel.dir = this.getTextDir(label.innerHTML, label.dir);\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\t\r\n});\r\n"]}