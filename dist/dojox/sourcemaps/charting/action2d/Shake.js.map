{"version":3,"sources":["charting/action2d/Shake.js"],"names":["define","hub","declare","PlotAction","df","dfe","m","gf","defaultParams","duration","easing","backOut","shiftX","shiftY","optionalParams","constructor","chart","plot","kwArgs","this","connect","process","o","shape","type","overOutEvents","anim","runName","run","name","index","vector","action","stop","transform","start","end","identity","push","animateTransform","oultine","outline","shadow","length","combine","play"],"mappings":";;;;;;;AAAAA,QAAQ,qBAAsB,qBAAsB,eACnD,UAAW,iBAAkB,mBAAoB,gBACjD,SAASC,EAAKC,EAASC,EAAYC,EAAIC,EAAKC,EAAGC,GAkB/C,OAAOL,EAAQ,gCAAiCC,GAK/CK,eACCC,SAAU,IACVC,OAAUL,EAAIM,QACdC,OAVkB,EAWlBC,OAXkB,GAanBC,kBAEAC,YAAa,SAASC,EAAOC,EAAMC,GAS9BA,IAASA,MACbC,KAAKP,OAAiC,iBAAjBM,EAAON,OAAqBM,EAAON,OAzBtC,EA0BlBO,KAAKN,OAAiC,iBAAjBK,EAAOL,OAAqBK,EAAOL,OA1BtC,EA4BlBM,KAAKC,WAGNC,QAAS,SAASC,GAKjB,GAAIA,EAAEC,OAAWD,EAAEE,QAAQL,KAAKM,cAAhC,CAEA,IAAwDC,EAApDC,EAAUL,EAAEM,IAAIC,KAAMC,EAAQR,EAAEQ,MAAOC,KAExCJ,KAAWR,KAAKO,KAClBA,EAAOP,KAAKO,KAAKC,GAASG,GAE1BX,KAAKO,KAAKC,MAGRD,EACFA,EAAKM,OAAOC,MAAK,GAEjBd,KAAKO,KAAKC,GAASG,GAASJ,KAG7B,IAAIR,GACHK,MAAWD,EAAEC,MACbd,SAAWU,KAAKV,SAChBC,OAAWS,KAAKT,OAChBwB,YACEL,KAAM,YAAaM,OAAQhB,KAAKP,OAAQO,KAAKN,QAASuB,KAAM,EAAG,IAChE9B,EAAE+B,WAGDf,EAAEC,OACJQ,EAAOO,KAAK/B,EAAGgC,iBAAiBrB,IAE9BI,EAAEkB,UACJtB,EAAOK,MAAQD,EAAEmB,QACjBV,EAAOO,KAAK/B,EAAGgC,iBAAiBrB,KAE9BI,EAAEoB,SACJxB,EAAOK,MAAQD,EAAEoB,OACjBX,EAAOO,KAAK/B,EAAGgC,iBAAiBrB,KAG7Ba,EAAOY,QAKXjB,EAAKM,OAAS5B,EAAGwC,QAAQb,GACZ,cAAVT,EAAEE,MACJvB,EAAImB,QAAQM,EAAKM,OAAQ,QAASb,KAAM,WACpCA,KAAKO,KAAKC,WACLR,KAAKO,KAAKC,GAASG,KAI7BJ,EAAKM,OAAOa,eAZJ1B,KAAKO,KAAKC,GAASG","file":"../../../charting/action2d/Shake.js","sourcesContent":["define([\"dojo/_base/connect\", \"dojo/_base/declare\", \"./PlotAction\", \r\n\t\"dojo/fx\", \"dojo/fx/easing\", \"dojox/gfx/matrix\", \"dojox/gfx/fx\"], \r\n\tfunction(hub, declare, PlotAction, df, dfe, m, gf){\r\n\r\n\t/*=====\r\n\tvar __ShakeCtorArgs = {\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdditional arguments for shaking actions.\r\n\t\t\t// duration: Number?\r\n\t\t\t//\t\tThe amount of time in milliseconds for an animation to last.  Default is 400.\r\n\t\t\t// easing: dojo/fx/easing/*?\r\n\t\t\t//\t\tAn easing object (see dojo.fx.easing) for use in an animation.  The\r\n\t\t\t//\t\tdefault is dojo.fx.easing.backOut.\r\n\t\t\t// shift: Number?\r\n\t\t\t//\t\tThe amount in pixels to shift the pie slice.  Default is 3.\r\n\t};\r\n\t=====*/\r\n\r\n\tvar DEFAULT_SHIFT = 3;\r\n\r\n\treturn declare(\"dojox.charting.action2d.Shake\", PlotAction, {\r\n\t\t// summary:\r\n\t\t//\t\tCreate a shaking action for use on an element in a chart.\r\n\r\n\t\t// the data description block for the widget parser\r\n\t\tdefaultParams: {\r\n\t\t\tduration: 400,\t// duration of the action in ms\r\n\t\t\teasing:   dfe.backOut,\t// easing for the action\r\n\t\t\tshiftX:   DEFAULT_SHIFT,\t// shift of the element along the X axis\r\n\t\t\tshiftY:   DEFAULT_SHIFT\t\t// shift of the element along the Y axis\r\n\t\t},\r\n\t\toptionalParams: {},\t// no optional parameters\r\n\r\n\t\tconstructor: function(chart, plot, kwArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate the shaking action and connect it to the plot.\r\n\t\t\t// chart: dojox/charting/Chart\r\n\t\t\t//\t\tThe chart this action belongs to.\r\n\t\t\t// plot: String?\r\n\t\t\t//\t\tThe plot this action is attached to.  If not passed, \"default\" is assumed.\r\n\t\t\t// kwArgs: __ShakeCtorArgs?\r\n\t\t\t//\t\tOptional keyword arguments object for setting parameters.\r\n\t\t\tif(!kwArgs){ kwArgs = {}; }\r\n\t\t\tthis.shiftX = typeof kwArgs.shiftX == \"number\" ? kwArgs.shiftX : DEFAULT_SHIFT;\r\n\t\t\tthis.shiftY = typeof kwArgs.shiftY == \"number\" ? kwArgs.shiftY : DEFAULT_SHIFT;\r\n\r\n\t\t\tthis.connect();\r\n\t\t},\r\n\r\n\t\tprocess: function(o){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tProcess the action on the given object.\r\n\t\t\t// o: dojox/gfx/shape.Shape\r\n\t\t\t//\t\tThe object on which to process the slice moving action.\r\n\t\t\tif(!o.shape || !(o.type in this.overOutEvents)){ return; }\r\n\r\n\t\t\tvar runName = o.run.name, index = o.index, vector = [], anim;\r\n\r\n\t\t\tif(runName in this.anim){\r\n\t\t\t\tanim = this.anim[runName][index];\r\n\t\t\t}else{\r\n\t\t\t\tthis.anim[runName] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif(anim){\r\n\t\t\t\tanim.action.stop(true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.anim[runName][index] = anim = {};\r\n\t\t\t}\r\n\r\n\t\t\tvar kwArgs = {\r\n\t\t\t\tshape:     o.shape,\r\n\t\t\t\tduration:  this.duration,\r\n\t\t\t\teasing:    this.easing,\r\n\t\t\t\ttransform: [\r\n\t\t\t\t\t{name: \"translate\", start: [this.shiftX, this.shiftY], end: [0, 0]},\r\n\t\t\t\t\tm.identity\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t\tif(o.shape){\r\n\t\t\t\tvector.push(gf.animateTransform(kwArgs));\r\n\t\t\t}\r\n\t\t\tif(o.oultine){\r\n\t\t\t\tkwArgs.shape = o.outline;\r\n\t\t\t\tvector.push(gf.animateTransform(kwArgs));\r\n\t\t\t}\r\n\t\t\tif(o.shadow){\r\n\t\t\t\tkwArgs.shape = o.shadow;\r\n\t\t\t\tvector.push(gf.animateTransform(kwArgs));\r\n\t\t\t}\r\n\r\n\t\t\tif(!vector.length){\r\n\t\t\t\tdelete this.anim[runName][index];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tanim.action = df.combine(vector);\r\n\t\t\tif(o.type == \"onmouseout\"){\r\n\t\t\t\thub.connect(anim.action, \"onEnd\", this, function(){\r\n\t\t\t\t\tif(this.anim[runName]){\r\n\t\t\t\t\t\tdelete this.anim[runName][index];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tanim.action.play();\r\n\t\t}\r\n\t});\r\n});\r\n"]}