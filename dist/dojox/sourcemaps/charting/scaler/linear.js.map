{"version":3,"sources":["charting/scaler/linear.js"],"names":["define","lang","common","linear","getObject","getLabel","getNumericLabel","findString","val","text","toLowerCase","i","length","calcTicks","min","max","kwArgs","majorTick","minorTick","microTick","span","delegate","fixUpper","fixLower","lowerBound","Math","floor","upperBound","ceil","useMin","useMax","majorStart","minorStart","microStart","majorCount","round","minorCount","microCount","minorPerMajor","microPerMinor","majorPrecision","log","LN10","minorPrecision","scale","isFinite","bounds","lower","upper","from","to","major","tick","start","count","prec","minor","micro","scaler","mixin","buildScaler","delta","minorDelta","h","natural","String","Boolean","includeZero","ticks","mag","majorTickStep","pow","minorTickStep","microTickStep","buildTicks","step","next","nextMajor","nextMinor","nextMicro","microTicks","minorTicks","revScale","isNaN","majorTicks","abs","value","majorLabels","label","push","minorLabels","minMinorStep","getTransformerFromModel","offset","x","getTransformerFromPlot"],"mappings":"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","file":"../../../charting/scaler/linear.js","sourcesContent":["define([\"dojo/_base/lang\", \"./common\"], \r\n\tfunction(lang, common){\r\n\tvar linear = lang.getObject(\"dojox.charting.scaler.linear\", true);\r\n\t\r\n\tvar deltaLimit = 3,\t// pixels\r\n\t\tgetLabel = common.getNumericLabel;\r\n\r\n\t\tfunction findString(/*String*/ val, /*Array*/ text){\r\n\t\t\tval = val.toLowerCase();\r\n\t\t\tfor(var i = text.length - 1; i >= 0; --i){\r\n\t\t\t\tif(val === text[i]){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\tvar calcTicks = function(min, max, kwArgs, majorTick, minorTick, microTick, span){\r\n\t\tkwArgs = lang.delegate(kwArgs);\r\n\t\tif(!majorTick){\r\n\t\t\tif(kwArgs.fixUpper == \"major\"){ kwArgs.fixUpper = \"minor\"; }\r\n\t\t\tif(kwArgs.fixLower == \"major\"){ kwArgs.fixLower = \"minor\"; }\r\n\t\t}\r\n\t\tif(!minorTick){\r\n\t\t\tif(kwArgs.fixUpper == \"minor\"){ kwArgs.fixUpper = \"micro\"; }\r\n\t\t\tif(kwArgs.fixLower == \"minor\"){ kwArgs.fixLower = \"micro\"; }\r\n\t\t}\r\n\t\tif(!microTick){\r\n\t\t\tif(kwArgs.fixUpper == \"micro\"){ kwArgs.fixUpper = \"none\"; }\r\n\t\t\tif(kwArgs.fixLower == \"micro\"){ kwArgs.fixLower = \"none\"; }\r\n\t\t}\r\n\t\tvar lowerBound = findString(kwArgs.fixLower, [\"major\"]) ?\r\n\t\t\t\tMath.floor(kwArgs.min / majorTick) * majorTick :\r\n\t\t\t\t\tfindString(kwArgs.fixLower, [\"minor\"]) ?\r\n\t\t\t\t\t\tMath.floor(kwArgs.min / minorTick) * minorTick :\r\n\t\t\t\t\t\t\tfindString(kwArgs.fixLower, [\"micro\"]) ?\r\n\t\t\t\t\t\t\t\tMath.floor(kwArgs.min / microTick) * microTick : kwArgs.min,\r\n\t\t\tupperBound = findString(kwArgs.fixUpper, [\"major\"]) ?\r\n\t\t\t\tMath.ceil(kwArgs.max / majorTick) * majorTick :\r\n\t\t\t\t\tfindString(kwArgs.fixUpper, [\"minor\"]) ?\r\n\t\t\t\t\t\tMath.ceil(kwArgs.max / minorTick) * minorTick :\r\n\t\t\t\t\t\t\tfindString(kwArgs.fixUpper, [\"micro\"]) ?\r\n\t\t\t\t\t\t\t\tMath.ceil(kwArgs.max / microTick) * microTick : kwArgs.max;\r\n\t\t\t\t\t\t\t\t\r\n\t\tif(kwArgs.useMin){ min = lowerBound; }\r\n\t\tif(kwArgs.useMax){ max = upperBound; }\r\n\t\t\r\n\t\tvar majorStart = (!majorTick || kwArgs.useMin && findString(kwArgs.fixLower, [\"major\"])) ?\r\n\t\t\t\tmin : Math.ceil(min / majorTick) * majorTick,\r\n\t\t\tminorStart = (!minorTick || kwArgs.useMin && findString(kwArgs.fixLower, [\"major\", \"minor\"])) ?\r\n\t\t\t\tmin : Math.ceil(min / minorTick) * minorTick,\r\n\t\t\tmicroStart = (! microTick || kwArgs.useMin && findString(kwArgs.fixLower, [\"major\", \"minor\", \"micro\"])) ?\r\n\t\t\t\tmin : Math.ceil(min / microTick) * microTick,\r\n\t\t\tmajorCount = !majorTick ? 0 : (kwArgs.useMax && findString(kwArgs.fixUpper, [\"major\"]) ?\r\n\t\t\t\tMath.round((max - majorStart) / majorTick) :\r\n\t\t\t\tMath.floor((max - majorStart) / majorTick)) + 1,\r\n\t\t\tminorCount = !minorTick ? 0 : (kwArgs.useMax && findString(kwArgs.fixUpper, [\"major\", \"minor\"]) ?\r\n\t\t\t\tMath.round((max - minorStart) / minorTick) :\r\n\t\t\t\tMath.floor((max - minorStart) / minorTick)) + 1,\r\n\t\t\tmicroCount = !microTick ? 0 : (kwArgs.useMax && findString(kwArgs.fixUpper, [\"major\", \"minor\", \"micro\"]) ?\r\n\t\t\t\tMath.round((max - microStart) / microTick) :\r\n\t\t\t\tMath.floor((max - microStart) / microTick)) + 1,\r\n\t\t\tminorPerMajor  = minorTick ? Math.round(majorTick / minorTick) : 0,\r\n\t\t\tmicroPerMinor  = microTick ? Math.round(minorTick / microTick) : 0,\r\n\t\t\tmajorPrecision = majorTick ? Math.floor(Math.log(majorTick) / Math.LN10) : 0,\r\n\t\t\tminorPrecision = minorTick ? Math.floor(Math.log(minorTick) / Math.LN10) : 0,\r\n\t\t\tscale = span / (max - min);\r\n\t\tif(!isFinite(scale)){ scale = 1; }\r\n\t\t\r\n\t\treturn {\r\n\t\t\tbounds: {\r\n\t\t\t\tlower:\tlowerBound,\r\n\t\t\t\tupper:\tupperBound,\r\n\t\t\t\tfrom:\tmin,\r\n\t\t\t\tto:\t\tmax,\r\n\t\t\t\tscale:\tscale,\r\n\t\t\t\tspan:\tspan\r\n\t\t\t},\r\n\t\t\tmajor: {\r\n\t\t\t\ttick:\tmajorTick,\r\n\t\t\t\tstart:\tmajorStart,\r\n\t\t\t\tcount:\tmajorCount,\r\n\t\t\t\tprec:\tmajorPrecision\r\n\t\t\t},\r\n\t\t\tminor: {\r\n\t\t\t\ttick:\tminorTick,\r\n\t\t\t\tstart:\tminorStart,\r\n\t\t\t\tcount:\tminorCount,\r\n\t\t\t\tprec:\tminorPrecision\r\n\t\t\t},\r\n\t\t\tmicro: {\r\n\t\t\t\ttick:\tmicroTick,\r\n\t\t\t\tstart:\tmicroStart,\r\n\t\t\t\tcount:\tmicroCount,\r\n\t\t\t\tprec:\t0\r\n\t\t\t},\r\n\t\t\tminorPerMajor:\tminorPerMajor,\r\n\t\t\tmicroPerMinor:\tmicroPerMinor,\r\n\t\t\tscaler:\t\t\tlinear\r\n\t\t};\r\n\t};\r\n\t\r\n\treturn lang.mixin(linear, {\r\n\t\tbuildScaler: function(/*Number*/ min, /*Number*/ max, /*Number*/ span, /*Object*/ kwArgs, /*Number?*/ delta, /*Number?*/ minorDelta){\r\n\t\t\tvar h = {fixUpper: \"none\", fixLower: \"none\", natural: false};\r\n\t\t\tif(kwArgs){\r\n\t\t\t\tif(\"fixUpper\" in kwArgs){ h.fixUpper = String(kwArgs.fixUpper); }\r\n\t\t\t\tif(\"fixLower\" in kwArgs){ h.fixLower = String(kwArgs.fixLower); }\r\n\t\t\t\tif(\"natural\"  in kwArgs){ h.natural  = Boolean(kwArgs.natural); }\r\n\t\t\t}\r\n\t\t\tminorDelta = !minorDelta || minorDelta < deltaLimit ? deltaLimit : minorDelta;\r\n\t\t\t\r\n\t\t\t// update bounds\r\n\t\t\tif(\"min\" in kwArgs){ min = kwArgs.min; }\r\n\t\t\tif(\"max\" in kwArgs){ max = kwArgs.max; }\r\n\t\t\tif(kwArgs.includeZero){\r\n\t\t\t\tif(min > 0){ min = 0; }\r\n\t\t\t\tif(max < 0){ max = 0; }\r\n\t\t\t}\r\n\t\t\th.min = min;\r\n\t\t\th.useMin = true;\r\n\t\t\th.max = max;\r\n\t\t\th.useMax = true;\r\n\t\t\t\r\n\t\t\tif(\"from\" in kwArgs){\r\n\t\t\t\tmin = kwArgs.from;\r\n\t\t\t\th.useMin = false;\r\n\t\t\t}\r\n\t\t\tif(\"to\" in kwArgs){\r\n\t\t\t\tmax = kwArgs.to;\r\n\t\t\t\th.useMax = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// check for erroneous condition\r\n\t\t\tif(max <= min){\r\n\t\t\t\treturn calcTicks(min, max, h, 0, 0, 0, span);\t// Object\r\n\t\t\t}\r\n\t\t\tif(!delta){\r\n\t\t\t\tdelta = max - min;\r\n\t\t\t}\r\n\t\t\tvar mag = Math.floor(Math.log(delta) / Math.LN10),\r\n\t\t\t\tmajor = kwArgs && (\"majorTickStep\" in kwArgs) ? kwArgs.majorTickStep : Math.pow(10, mag),\r\n\t\t\t\tminor = 0, micro = 0, ticks;\r\n\t\t\t\t\r\n\t\t\t// calculate minor ticks\r\n\t\t\tif(kwArgs && (\"minorTickStep\" in kwArgs)){\r\n\t\t\t\tminor = kwArgs.minorTickStep;\r\n\t\t\t}else{\r\n\t\t\t\tdo{\r\n\t\t\t\t\tminor = major / 10;\r\n\t\t\t\t\tif(!h.natural || minor > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, 0, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.minor.tick > minorDelta){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tminor = major / 5;\r\n\t\t\t\t\tif(!h.natural || minor > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, 0, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.minor.tick > minorDelta){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tminor = major / 2;\r\n\t\t\t\t\tif(!h.natural || minor > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, 0, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.minor.tick > minorDelta){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn calcTicks(min, max, h, major, 0, 0, span);\t// Object\r\n\t\t\t\t}while(false);\r\n\t\t\t}\r\n\t\r\n\t\t\t// calculate micro ticks\r\n\t\t\tif(kwArgs && (\"microTickStep\" in kwArgs)){\r\n\t\t\t\tmicro = kwArgs.microTickStep;\r\n\t\t\t\tticks = calcTicks(min, max, h, major, minor, micro, span);\r\n\t\t\t}else{\r\n\t\t\t\tdo{\r\n\t\t\t\t\tmicro = minor / 10;\r\n\t\t\t\t\tif(!h.natural || micro > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, micro, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.micro.tick > deltaLimit){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmicro = minor / 5;\r\n\t\t\t\t\tif(!h.natural || micro > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, micro, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.micro.tick > deltaLimit){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmicro = minor / 2;\r\n\t\t\t\t\tif(!h.natural || micro > 0.9){\r\n\t\t\t\t\t\tticks = calcTicks(min, max, h, major, minor, micro, span);\r\n\t\t\t\t\t\tif(ticks.bounds.scale * ticks.micro.tick > deltaLimit){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmicro = 0;\r\n\t\t\t\t}while(false);\r\n\t\t\t}\r\n\t\r\n\t\t\treturn micro ? ticks : calcTicks(min, max, h, major, minor, 0, span);\t// Object\r\n\t\t},\r\n\t\tbuildTicks: function(/*Object*/ scaler, /*Object*/ kwArgs){\r\n\t\t\tvar step, next, tick,\r\n\t\t\t\tnextMajor = scaler.major.start,\r\n\t\t\t\tnextMinor = scaler.minor.start,\r\n\t\t\t\tnextMicro = scaler.micro.start;\r\n\t\t\tif(kwArgs.microTicks && scaler.micro.tick){\r\n\t\t\t\tstep = scaler.micro.tick, next = nextMicro;\r\n\t\t\t}else if(kwArgs.minorTicks && scaler.minor.tick){\r\n\t\t\t\tstep = scaler.minor.tick, next = nextMinor;\r\n\t\t\t}else if(scaler.major.tick){\r\n\t\t\t\tstep = scaler.major.tick, next = nextMajor;\r\n\t\t\t}else{\r\n\t\t\t\t// no ticks\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t// make sure that we have finite bounds\r\n\t\t\tvar revScale = 1 / scaler.bounds.scale;\r\n\t\t\tif(scaler.bounds.to <= scaler.bounds.from || isNaN(revScale) || !isFinite(revScale) ||\r\n\t\t\t\t\tstep <= 0 || isNaN(step) || !isFinite(step)){\r\n\t\t\t\t// no ticks\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t// loop over all ticks\r\n\t\t\tvar majorTicks = [], minorTicks = [], microTicks = [];\r\n\t\t\twhile(next <= scaler.bounds.to + revScale){\r\n\t\t\t\tif(Math.abs(nextMajor - next) < step / 2){\r\n\t\t\t\t\t// major tick\r\n\t\t\t\t\ttick = {value: nextMajor};\r\n\t\t\t\t\tif(kwArgs.majorLabels){\r\n\t\t\t\t\t\ttick.label = getLabel(nextMajor, scaler.major.prec, kwArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmajorTicks.push(tick);\r\n\t\t\t\t\tnextMajor += scaler.major.tick;\r\n\t\t\t\t\tnextMinor += scaler.minor.tick;\r\n\t\t\t\t\tnextMicro += scaler.micro.tick;\r\n\t\t\t\t}else if(Math.abs(nextMinor - next) < step / 2){\r\n\t\t\t\t\t// minor tick\r\n\t\t\t\t\tif(kwArgs.minorTicks){\r\n\t\t\t\t\t\ttick = {value: nextMinor};\r\n\t\t\t\t\t\tif(kwArgs.minorLabels && (scaler.minMinorStep <= scaler.minor.tick * scaler.bounds.scale)){\r\n\t\t\t\t\t\t\ttick.label = getLabel(nextMinor, scaler.minor.prec, kwArgs);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tminorTicks.push(tick);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextMinor += scaler.minor.tick;\r\n\t\t\t\t\tnextMicro += scaler.micro.tick;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// micro tick\r\n\t\t\t\t\tif(kwArgs.microTicks){\r\n\t\t\t\t\t\tmicroTicks.push({value: nextMicro});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextMicro += scaler.micro.tick;\r\n\t\t\t\t}\r\n\t\t\t\tnext += step;\r\n\t\t\t}\r\n\t\t\treturn {major: majorTicks, minor: minorTicks, micro: microTicks};\t// Object\r\n\t\t},\r\n\t\tgetTransformerFromModel: function(/*Object*/ scaler){\r\n\t\t\tvar offset = scaler.bounds.from, scale = scaler.bounds.scale;\r\n\t\t\treturn function(x){ return (x - offset) * scale; };\t// Function\r\n\t\t},\r\n\t\tgetTransformerFromPlot: function(/*Object*/ scaler){\r\n\t\t\tvar offset = scaler.bounds.from, scale = scaler.bounds.scale;\r\n\t\t\treturn function(x){ return x / scale + offset; };\t// Function\r\n\t\t}\r\n\t});\r\n});\r\n"]}