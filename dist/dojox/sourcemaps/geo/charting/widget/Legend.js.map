{"version":3,"sources":["geo/charting/widget/Legend.js"],"names":["define","dojo","lang","arr","declare","html","dom","domConstruct","domClass","win","Widget","horizontal","legendBody","swatchSize","map","postCreate","this","series","domNode","parentNode","byId","container","appendChild","refresh","buildRendering","create","role","class","inherited","arguments","lastChild","destroy","add","_tr","doc","createElement","s","length","forEach","x","_addLabel","color","name","label","icon","text","div","style","width","height","tr","background","innerHTML","String"],"mappings":";;;;;;;AAAAA,QACC,oBACA,kBACA,mBACA,qBACA,kBACA,WACA,qBACA,iBACA,oBACA,iBACE,SAASC,EAAMC,EAAMC,EAAKC,EAASC,EAAKC,EAAIC,EAAaC,EAAUC,EAAKC,GAE1E,OAAON,EAAQ,mCAAmCM,GAajDC,YAAW,EACXC,WAAW,KACXC,WAAW,GACXC,IAAI,KACJC,WAAY,WACPC,KAAKF,MACTE,KAAKC,OAASD,KAAKF,IAAIG,OACnBD,KAAKE,QAAQC,YAEhBb,EAAIc,KAAKJ,KAAKF,IAAIO,WAAWC,YAAYN,KAAKE,SAE/CF,KAAKO,YAENC,eAAgB,WACfR,KAAKE,QAAUX,EAAakB,OAAO,SAC/BC,KAAM,QAASC,MAAS,oBAC5BX,KAAKJ,WAAaL,EAAakB,OAAO,QAAS,KAAMT,KAAKE,SAC1DF,KAAKY,UAAUC,YAGhBN,QAAS,WAKR,KAAMP,KAAKJ,WAAWkB,WACrBvB,EAAawB,QAAQf,KAAKJ,WAAWkB,WAGnCd,KAAKL,aACPH,EAASwB,IAAIhB,KAAKE,QAAQ,yBAC1BF,KAAKiB,IAAMxB,EAAIyB,IAAIC,cAAc,MACjCnB,KAAKJ,WAAWU,YAAYN,KAAKiB,MAGlC,IAAIG,EAAIpB,KAAKC,OACE,GAAZmB,EAAEC,QAELlC,EAAImC,QAAQF,EAAE,SAASG,GACtBvB,KAAKwB,UAAUD,EAAEE,MAAOF,EAAEG,OACzB1B,OAEHwB,UAAU,SAASC,EAAME,GACxB,IAAIC,EAAOnC,EAAIyB,IAAIC,cAAc,MAC7BU,EAAOpC,EAAIyB,IAAIC,cAAc,MAC7BW,EAAMrC,EAAIyB,IAAIC,cAAc,OAOhC,GANA3B,EAASwB,IAAIY,EAAM,mBACnBpC,EAASwB,IAAIa,EAAM,mBACnBC,EAAIC,MAAMC,MAAShC,KAAKH,WAAa,KACrCiC,EAAIC,MAAME,OAASjC,KAAKH,WAAa,KACrC+B,EAAKtB,YAAYwB,GAEd9B,KAAKL,WACPK,KAAKiB,IAAIX,YAAYsB,GACrB5B,KAAKiB,IAAIX,YAAYuB,OACjB,CACJ,IAAIK,EAAKzC,EAAIyB,IAAIC,cAAc,MAC/BnB,KAAKJ,WAAWU,YAAY4B,GAC5BA,EAAG5B,YAAYsB,GACfM,EAAG5B,YAAYuB,GAGhBC,EAAIC,MAAMI,WAAaV,EACvBI,EAAKO,UAAYC,OAAOV","file":"../../../../geo/charting/widget/Legend.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/_base/window\",\r\n\t\"dijit/_Widget\"\r\n], function(dojo, lang, arr, declare, html,dom,domConstruct,domClass, win, Widget){\r\n\r\n\treturn declare(\"dojox.geo.charting.widget.Legend\",Widget, {\r\n\t\t// summary:\r\n\t\t//\t\tA legend widget displaying association between colors and Feature value ranges.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tThis widget basically is a table comprising (icon,string) pairs, describing the color scheme\r\n\t\t//\t\tused for the map and its associated text descriptions.\r\n\t\t//\r\n\r\n\t\t// example:\r\n\t\t// |\tvar legend = new dojox.geo.charting.widget.Legend({\r\n\t\t// |\t\tmap: map\r\n\t\t// |\t});\r\n\t\thorizontal:true,\r\n\t\tlegendBody:null,\r\n\t\tswatchSize:18,\r\n\t\tmap:null,\r\n\t\tpostCreate: function(){\r\n\t\t\tif(!this.map){return;}\r\n\t\t\tthis.series = this.map.series;\r\n\t\t\tif(!this.domNode.parentNode){\r\n\t\t\t\t// compatibility with older version : add to map domNode if not already attached to a parentNode.\r\n\t\t\t\tdom.byId(this.map.container).appendChild(this.domNode);\r\n\t\t\t}\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.domNode = domConstruct.create(\"table\",\r\n\t\t\t\t\t\t{role: \"group\", \"class\": \"dojoxLegendNode\"});\r\n\t\t\tthis.legendBody = domConstruct.create(\"tbody\", null, this.domNode);\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\trefresh: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRefreshes this legend contents when Map series has changed.\r\n\r\n\t\t\t// cleanup\r\n\t\t\twhile(this.legendBody.lastChild){\r\n\t\t\t\tdomConstruct.destroy(this.legendBody.lastChild);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.horizontal){\r\n\t\t\t\tdomClass.add(this.domNode,\"dojoxLegendHorizontal\");\r\n\t\t\t\tthis._tr = win.doc.createElement(\"tr\");\r\n\t\t\t\tthis.legendBody.appendChild(this._tr);\r\n\t\t\t}\r\n\r\n\t\t\tvar s = this.series;\r\n\t\t\tif(s.length == 0){return;}\r\n\r\n\t\t\tarr.forEach(s,function(x){\r\n\t\t\t\tthis._addLabel(x.color, x.name);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\t_addLabel:function(color,label){\r\n\t\t\tvar icon = win.doc.createElement(\"td\");\r\n\t\t\tvar text = win.doc.createElement(\"td\");\r\n\t\t\tvar div = win.doc.createElement(\"div\");\r\n\t\t\tdomClass.add(icon, \"dojoxLegendIcon\");\r\n\t\t\tdomClass.add(text, \"dojoxLegendText\");\r\n\t\t\tdiv.style.width  = this.swatchSize + \"px\";\r\n\t\t\tdiv.style.height = this.swatchSize + \"px\";\r\n\t\t\ticon.appendChild(div);\r\n\r\n\t\t\tif(this.horizontal){\r\n\t\t\t\tthis._tr.appendChild(icon);\r\n\t\t\t\tthis._tr.appendChild(text);\r\n\t\t\t}else{\r\n\t\t\t\tvar tr = win.doc.createElement(\"tr\");\r\n\t\t\t\tthis.legendBody.appendChild(tr);\r\n\t\t\t\ttr.appendChild(icon);\r\n\t\t\t\ttr.appendChild(text);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.style.background = color;\r\n\t\t\ttext.innerHTML = String(label);\r\n\t\t}\r\n\t});\r\n});\r\n"]}