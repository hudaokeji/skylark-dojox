{"version":3,"sources":["mdnd/AutoScroll.js"],"names":["define","dojo","declare","lang","connect","sniff","ready","as","interval","recursiveTimer","marginMouse","constructor","this","resizeHandler","global","getViewport","hitch","init","_html","body","parentNode","dd","doc","documentElement","w","window","b","isMozilla","_v","clientWidth","h","innerHeight","isOpera","innerWidth","clientHeight","setAutoScrollNode","node","_node","setAutoScrollMaxPage","_yMax","scrollHeight","_xMax","scrollWidth","checkAutoScroll","e","_autoScrollActive","stopAutoScroll","_y","pageY","_x","pageX","clientX","_autoScrollLeft","_autoScrollRight","clientY","_autoScrollUp","_autoScrollDown","_timer","clearTimeout","scrollTop","style","top","parseInt","setTimeout","scrollLeft","left","destroy","disconnect","dojox","mdnd","autoScroll","AutoScroll"],"mappings":"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","file":"../../mdnd/AutoScroll.js","sourcesContent":["define([\"dojo/_base/kernel\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/sniff\",\r\n\t\"dojo/ready\",\r\n\t\"dojo/_base/window\"\r\n],function(dojo, declare, lang, connect, sniff, ready){\r\n\tvar as = declare(\r\n\t\t\"dojox.mdnd.AutoScroll\",\r\n\t\tnull,\r\n\t{\r\n\t\t// summary:\r\n\t\t//\t\tActivate scrolling while dragging a widget.\r\n\t\r\n\t\t// interval: Integer\r\n\t\t//\t\tdefault mouse move offset\r\n\t\tinterval: 3,\r\n\t\r\n\t\t// recursiveTimer: Integer\r\n\t\trecursiveTimer: 10,\r\n\t\r\n\t\t// marginMouse: Integer\r\n\t\t//\t\tDefault mouse margin\r\n\t\tmarginMouse: 50,\r\n\t\r\n\t\tconstructor: function(){\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: constructor \");\r\n\t\t\tthis.resizeHandler = connect.connect(dojo.global,\"onresize\", this, function(){\r\n\t\t\t\tthis.getViewport();\r\n\t\t\t});\r\n\t\t\tready(lang.hitch(this, \"init\"));\r\n\t\t},\r\n\t\r\n\t\tinit: function(){\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: init \");\r\n\t\t\tthis._html = (sniff(\"webkit\"))? dojo.body() : dojo.body().parentNode;\r\n\t\t\tthis.getViewport();\r\n\t\t},\r\n\t\r\n\t\tgetViewport:function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSet the visible part of the window. Varies accordion to Navigator.\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: getViewport \");\r\n\t\t\tvar d = dojo.doc, dd = d.documentElement, w = window, b = dojo.body();\r\n\t\t\tif(dojo.isMozilla){\r\n\t\t\t\tthis._v = { 'w': dd.clientWidth, 'h': w.innerHeight };\t// Object\r\n\t\t\t}\r\n\t\t\telse if(!dojo.isOpera && w.innerWidth){\r\n\t\t\t\tthis._v = { 'w': w.innerWidth, 'h': w.innerHeight };\t\t// Object\r\n\t\t\t}\r\n\t\t\telse if(!dojo.isOpera && dd && dd.clientWidth){\r\n\t\t\t\tthis._v = { 'w': dd.clientWidth, 'h': dd.clientHeight };\t// Object\r\n\t\t\t}\r\n\t\t\telse if(b.clientWidth){\r\n\t\t\t\tthis._v = { 'w': b.clientWidth, 'h': b.clientHeight };\t// Object\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tsetAutoScrollNode: function(/*Node*/node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tset the node which is dragged\r\n\t\t\t// node:\r\n\t\t\t//\t\tnode to scroll\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: setAutoScrollNode \");\r\n\t\t\tthis._node = node;\r\n\t\t},\r\n\t\r\n\t\tsetAutoScrollMaxPage: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSet the hightest heigh and width authorized scroll.\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: setAutoScrollMaxPage \");\r\n\t\t\tthis._yMax = this._html.scrollHeight;\r\n\t\t\tthis._xMax = this._html.scrollWidth;\r\n\t\t},\r\n\t\r\n\t\tcheckAutoScroll: function(/*Event*/e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCheck if an autoScroll have to be launched.\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: checkAutoScroll\");\r\n\t\t\tif(this._autoScrollActive){\r\n\t\t\t\tthis.stopAutoScroll();\r\n\t\t\t}\r\n\t\t\tthis._y = e.pageY;\r\n\t\t\tthis._x = e.pageX;\r\n\t\t\tif(e.clientX < this.marginMouse){\r\n\t\t\t\tthis._autoScrollActive = true;\r\n\t\t\t\tthis._autoScrollLeft(e);\r\n\t\t\t}\r\n\t\t\telse if(e.clientX > this._v.w - this.marginMouse){\r\n\t\t\t\tthis._autoScrollActive = true;\r\n\t\t\t\tthis._autoScrollRight(e);\r\n\t\t\t}\r\n\t\t\tif(e.clientY < this.marginMouse){\r\n\t\t\t\tthis._autoScrollActive = true;\r\n\t\t\t\tthis._autoScrollUp(e);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse if(e.clientY > this._v.h - this.marginMouse){\r\n\t\t\t\tthis._autoScrollActive = true;\r\n\t\t\t\tthis._autoScrollDown();\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t_autoScrollDown: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tManage the down autoscroll.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: _autoScrollDown \");\r\n\t\t\tif(this._timer){\r\n\t\t\t\tclearTimeout(this._timer);\r\n\t\t\t}\r\n\t\t\tif(this._autoScrollActive && this._y + this.marginMouse < this._yMax){\r\n\t\t\t\tthis._html.scrollTop += this.interval;\r\n\t\t\t\tthis._node.style.top = (parseInt(this._node.style.top) + this.interval) + \"px\";\r\n\t\t\t\tthis._y += this.interval;\r\n\t\t\t\tthis._timer = setTimeout(lang.hitch(this, \"_autoScrollDown\"), this.recursiveTimer);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t_autoScrollUp: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tManage the up autoscroll.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: _autoScrollUp \");\r\n\t\t\tif(this._timer){\r\n\t\t\t\tclearTimeout(this._timer);\r\n\t\t\t}\r\n\t\t\tif(this._autoScrollActive && this._y - this.marginMouse > 0){\r\n\t\t\t\tthis._html.scrollTop -= this.interval;\r\n\t\t\t\tthis._node.style.top = (parseInt(this._node.style.top) - this.interval) + \"px\";\r\n\t\t\t\tthis._y -= this.interval;\r\n\t\t\t\tthis._timer = setTimeout(lang.hitch(this, \"_autoScrollUp\"),this.recursiveTimer);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t_autoScrollRight: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tManage the right autoscroll.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: _autoScrollRight \");\r\n\t\t\tif(this._timer){\r\n\t\t\t\tclearTimeout(this._timer);\r\n\t\t\t}\r\n\t\t\tif(this._autoScrollActive && this._x + this.marginMouse < this._xMax){\r\n\t\t\t\tthis._html.scrollLeft += this.interval;\r\n\t\t\t\tthis._node.style.left = (parseInt(this._node.style.left) + this.interval) + \"px\";\r\n\t\t\t\tthis._x += this.interval;\r\n\t\t\t\tthis._timer = setTimeout(lang.hitch(this, \"_autoScrollRight\"), this.recursiveTimer);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t_autoScrollLeft: function(/*Event*/e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tManage the left autoscroll.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: _autoScrollLeft \");\r\n\t\t\tif(this._timer){\r\n\t\t\t\tclearTimeout(this._timer);\r\n\t\t\t}\r\n\t\t\tif(this._autoScrollActive && this._x - this.marginMouse > 0){\r\n\t\t\t\tthis._html.scrollLeft -= this.interval;\r\n\t\t\t\tthis._node.style.left = (parseInt(this._node.style.left) - this.interval) + \"px\";\r\n\t\t\t\tthis._x -= this.interval;\r\n\t\t\t\tthis._timer = setTimeout(lang.hitch(this, \"_autoScrollLeft\"),this.recursiveTimer);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tstopAutoScroll: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStop the autoscroll.\r\n\t\t\t\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: stopAutoScroll \");\r\n\t\t\tif(this._timer){\r\n\t\t\t\tclearTimeout(this._timer);\r\n\t\t\t}\r\n\t\t\tthis._autoScrollActive = false;\r\n\t\t},\r\n\t\r\n\t\tdestroy: function(){\r\n\t\t\t//console.log(\"dojox.mdnd.AutoScroll ::: destroy \");\r\n\t\t\tconnect.disconnect(this.resizeHandler);\r\n\t\t}\r\n\t});\r\n\t\r\n\tdojox.mdnd.autoScroll = null;\r\n\t\r\n\tdojox.mdnd.autoScroll = new dojox.mdnd.AutoScroll();\r\n\treturn as;\r\n});\r\n"]}