{"version":3,"sources":["gantt/contextMenuTab.js"],"names":["define","GanttTaskControl","Menu","Dialog","NumberSpinner","Button","CheckBox","DateTextBox","TimeTextBox","TextBox","Form","registry","declare","arrayUtil","lang","html","locale","request","dom","domClass","constructor","id","description","type","showOInfo","tabMenu","withDefaultValue","this","arrItems","TabItemContainer","Description","object","showObjectInfo","preValueValidation","items","i","length","item","required","control","textbox","value","encodeDate","date","getFullYear","getMonth","getDate","decodeDate","dateStr","arr","split","Date","parseInt","renameTaskAction","name","trim","setName","hide","deleteAction","project","deleteTask","taskItem","ganttChart","resource","reConstruct","durationUpdateAction","d","setDuration","refresh","alert","cpUpdateAction","p","setPercentCompleted","ownerUpdateAction","to","setTaskOwner","ptUpdateAction","setPreviousTask","renameProjectAction","deleteProjectAction","deleteProject","cpProjectAction","addTaskAction","startTime","duration","pc","owner","parentTaskId","predTaskId","insertTask","addSuccessorTaskAction","pr","parentTask","addChildTaskAction","addProjectAction","namePr","startDatePr","insertProject","addAction","handler","actionFunc","addItem","key","inputControl","constraints","datePattern","strict","max","min","push","tab","show","tabPanelDlg","byId","tabPanelDlgId","title","e","console","log","message","titleNode","innerHTML","cell","cellValue","content","paneContentArea","firstChild","rows","cells","row","insertData","percentage","taskOwner","previousTaskId","startDate","insertRow","insertCell","colSpan","add","forEach","appendChild","domNode","placeholder","ok","onClick","hitch","cancel","destroy","parentNode","removeChild"],"mappings":"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","file":"../../gantt/contextMenuTab.js","sourcesContent":["define([\r\n\t\"./GanttTaskControl\",\r\n\t\"dijit/Menu\",\r\n\t\"dijit/Dialog\",\r\n\t\"dijit/form/NumberSpinner\",\r\n\t\"dijit/form/Button\",\r\n\t\"dijit/form/CheckBox\",\r\n\t\"dijit/form/DateTextBox\",\r\n\t\"dijit/form/TimeTextBox\",\r\n\t\"dijit/form/TextBox\",\r\n\t\"dijit/form/Form\",\r\n\t\"dijit/registry\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/html\",\r\n    \"dojo/date/locale\",\r\n\t\"dojo/request\",\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/domReady!\"\r\n], function(GanttTaskControl, Menu, Dialog, NumberSpinner, Button, CheckBox, DateTextBox, TimeTextBox, TextBox, Form,\r\n\t\tregistry, declare, arrayUtil, lang, html, locale, request, \r\n\t\tdom, domClass){\r\n\treturn declare(\"dojox.gantt.contextMenuTab\", [], {\r\n\t\tconstructor: function(id, description, type, showOInfo, tabMenu, withDefaultValue){\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.arrItems = [];\r\n\t\t\tthis.TabItemContainer = null;\r\n\t\t\tthis.Description = description;\r\n\t\t\tthis.tabMenu = tabMenu;\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.object = null;\r\n\t\t\tthis.showObjectInfo = showOInfo;\r\n\t\t\tthis.withDefaultValue = withDefaultValue;\r\n\t\t},\r\n\t\tpreValueValidation: function(items){\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\t//TODO add more validation for Id, Name, .....\r\n\t\t\t\tif(item.required && !item.control.textbox.value){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tencodeDate: function(date){\r\n\t\t\treturn date.getFullYear() + \".\" + (date.getMonth() + 1) + \".\" + date.getDate();\r\n\t\t},\r\n\t\tdecodeDate: function(dateStr){\r\n\t\t\tvar arr = dateStr.split(\".\");\r\n\t\t\treturn (arr.length < 3) ? \"\" : (new Date(arr[0], parseInt(arr[1]) - 1, arr[2]));\r\n\t\t},\r\n\t\trenameTaskAction: function(){\r\n\t\t\tvar name = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(lang.trim(name).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.object.setName(name);\r\n\t\t\tthis.hide();\r\n\t\t},\r\n\t\tdeleteAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.object.project.deleteTask(this.object.taskItem.id);\r\n\t\t\tthis.hide();\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\tdurationUpdateAction: function(){\r\n\t\t\tvar d = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.setDuration(d)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Duration out of Range\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.refresh();\r\n\t\t},\r\n\t\tcpUpdateAction: function(){\r\n\t\t\tvar p = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.setPercentCompleted(p)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Complete Percentage out of Range\");\r\n\t\t\t}\r\n\t\t},\r\n\t\townerUpdateAction: function(){\r\n\t\t\tvar to = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.setTaskOwner(to)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Task owner not Valid\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\tptUpdateAction: function(){\r\n\t\t\tvar p = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.setPreviousTask(p)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Please verify the Previous Task (\" + p + \")  and adjust its Time Range\");\r\n\t\t\t}\r\n\t\t},\r\n\t\trenameProjectAction: function(){\r\n\t\t\tvar name = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(lang.trim(name).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.object.setName(name);\r\n\t\t\tthis.hide();\r\n\t\t},\r\n\t\tdeleteProjectAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.object.ganttChart.deleteProject(this.object.project.id);\r\n\t\t\tthis.hide();\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\tcpProjectAction: function(){\r\n\t\t\tvar p = this.arrItems[0].control.textbox.value;\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.setPercentCompleted(p)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Percentage not Acceptable\");\r\n\t\t\t}\r\n\t\t},\r\n\t\taddTaskAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar id = this.arrItems[0].control.textbox.value,\r\n\t\t\t\tname = this.arrItems[1].control.textbox.value,\r\n\t\t\t\tstartTime = this.decodeDate(this.arrItems[2].control.textbox.value),\r\n\t\t\t\tduration = this.arrItems[3].control.textbox.value,\r\n\t\t\t\tpc = this.arrItems[4].control.textbox.value,\r\n\t\t\t\towner = this.arrItems[5].control.textbox.value,\r\n\t\t\t\tparentTaskId = this.arrItems[6].control.textbox.value,\r\n\t\t\t\tpredTaskId = this.arrItems[7].control.textbox.value;\r\n\t\t\tif(lang.trim(id).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.object.insertTask(id, name, startTime, duration, pc, predTaskId, owner, parentTaskId)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Please adjust your Customization\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\taddSuccessorTaskAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar pr = this.object.project,\r\n\t\t\t\tid = this.arrItems[0].control.textbox.value,\r\n\t\t\t\tname = this.arrItems[1].control.textbox.value,\r\n\t\t\t\tstartTime = this.decodeDate(this.arrItems[2].control.textbox.value),\r\n\t\t\t\tduration = this.arrItems[3].control.textbox.value,\r\n\t\t\t\tpc = this.arrItems[4].control.textbox.value,\r\n\t\t\t\towner = this.arrItems[5].control.textbox.value;\r\n\t\t\tif(lang.trim(id).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar parentTaskId = !this.object.parentTask ? \"\" : this.object.parentTask.taskItem.id;\r\n\t\t\tvar predTaskId = this.object.taskItem.id;\r\n\t\t\tif(pr.insertTask(id, name, startTime, duration, pc, predTaskId, owner, parentTaskId)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Please adjust your Customization\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\taddChildTaskAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar pr = this.object.project,\r\n\t\t\t\tid = this.arrItems[0].control.textbox.value,\r\n\t\t\t\tname = this.arrItems[1].control.textbox.value,\r\n\t\t\t\tstartTime = this.decodeDate(this.arrItems[2].control.textbox.value),\r\n\t\t\t\tduration = this.arrItems[3].control.textbox.value,\r\n\t\t\t\tpc = this.arrItems[4].control.textbox.value,\r\n\t\t\t\towner = this.arrItems[5].control.textbox.value,\r\n\t\t\t\tparentTaskId = this.object.taskItem.id,\r\n\t\t\t\tpredTaskId = \"\";\r\n\t\t\tif(lang.trim(id).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(pr.insertTask(id, name, startTime, duration, pc, predTaskId, owner, parentTaskId)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Please adjust your Customization\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\taddProjectAction: function(){\r\n\t\t\tif(!this.preValueValidation(this.arrItems)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar id = this.arrItems[0].control.textbox.value,\r\n\t\t\tnamePr = this.arrItems[1].control.textbox.value,\r\n\t\t\tstartDatePr = this.decodeDate(this.arrItems[2].control.textbox.value);\r\n\t\t\tif(lang.trim(id).length <= 0 || lang.trim(namePr).length <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.tabMenu.ganttChart.insertProject(id, namePr, startDatePr)){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}else{\r\n\t\t\t\talert(\"Please adjust your Customization\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.ganttChart.resource && this.tabMenu.ganttChart.resource.reConstruct();\r\n\t\t},\r\n\t\r\n\t\taddAction: function(handler){\r\n\t\t\tthis.actionFunc = this[handler];\r\n\t\t},\r\n\t\taddItem: function(id, name, key, required){\r\n\t\t\tvar inputControl;\r\n\t\t\tif(key == \"startTime\" || key == \"startDate\"){\r\n\t\t\t\tinputControl = new DateTextBox({type:\"text\", constraints:{datePattern:\"yyyy.M.d\", strict:true}});\r\n\t\t\t}else if(key == \"percentage\"){\r\n\t\t\t\tinputControl = new NumberSpinner({ constraints:{ max:100, min:0 }});\r\n\t\t\t}else if(key == \"duration\"){\r\n\t\t\t\tinputControl = new NumberSpinner({ constraints:{ min:0 }});\r\n\t\t\t}else{\r\n\t\t\t\tinputControl = new TextBox();\r\n\t\t\t}\r\n\t\t\tthis.arrItems.push({\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: name,\r\n\t\t\t\tcontrol: inputControl,\r\n\t\t\t\ttab: this,\r\n\t\t\t\tkey: key,\r\n\t\t\t\trequired: required\r\n\t\t\t});\r\n\t\t},\r\n\t\tshow: function(){\r\n\t\t\tthis.tabMenu.tabPanelDlg = this.tabMenu.tabPanelDlg || registry.byId(this.tabMenu.tabPanelDlgId) ||\r\n\t\t\t\tnew Dialog({\r\n\t\t\t\t\ttitle: \"Settings\"\r\n\t\t\t\t});\r\n\t\t\ttry{\r\n\t\t\t\tthis.tabMenu.tabPanelDlg.show();\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(\"dialog show exception: \" + e.message);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.tabMenu.tabPanelDlg.titleNode.innerHTML = this.Description;\r\n\t\t\tvar content = this.tabMenu.paneContentArea.firstChild.rows[1].cells[0].firstChild;\r\n\t\t\tvar cell, cellValue, row = null;\r\n\t\t\r\n\t\t\tif(this.showObjectInfo){\r\n\t\t\t\tif(this.object){\r\n\t\t\t\t\tif(this.object.constructor == GanttTaskControl){\r\n\t\t\t\t\t\tthis.insertData(content, \"Id\", this.object.taskItem.id);\r\n\t\t\t\t\t\tthis.insertData(content, \"Name\", this.object.taskItem.name);\r\n\t\t\t\t\t\tthis.insertData(content, \"Start Time\", this.encodeDate(this.object.taskItem.startTime));\r\n\t\t\t\t\t\tthis.insertData(content, \"Duration (hours)\", this.object.taskItem.duration + \" hours\");\r\n\t\t\t\t\t\tthis.insertData(content, \"Percent Complete (%)\", this.object.taskItem.percentage + \"%\");\r\n\t\t\t\t\t\tthis.insertData(content, \"Task Assignee\", this.object.taskItem.taskOwner);\r\n\t\t\t\t\t\tthis.insertData(content, \"Previous Task Id\", this.object.taskItem.previousTaskId);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.insertData(content, \"Id\", this.object.project.id);\r\n\t\t\t\t\t\tthis.insertData(content, \"Name\", this.object.project.name);\r\n\t\t\t\t\t\tthis.insertData(content, \"Start date\", this.encodeDate(this.object.project.startDate));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//separator\r\n\t\t\trow = content.insertRow(content.rows.length);\r\n\t\t\tcell = row.insertCell(row.cells.length);\r\n\t\t\tcell.colSpan = 2;\r\n\t\t\tcell.innerHTML = \"<hr/>\";\r\n\t\t\t//input section header\r\n\t\t\trow = content.insertRow(content.rows.length);\r\n\t\t\tcell = row.insertCell(row.cells.length);\r\n\t\t\tcell.colSpan = 2;\r\n\t\t\tdomClass.add(cell, \"ganttMenuDialogInputCellHeader\");\r\n\t\t\tcell.innerHTML = \"Customization: \" + this.Description;\r\n\t\t\t//input details\r\n\t\t\tarrayUtil.forEach(this.arrItems, function(item){\r\n\t\t\t\trow = content.insertRow(content.rows.length);\r\n\t\t\t\tcell = row.insertCell(row.cells.length);\r\n\t\t\t\tdomClass.add(cell, \"ganttMenuDialogInputCell\");\r\n\t\t\t\tcellValue = row.insertCell(row.cells.length);\r\n\t\t\t\tdomClass.add(cellValue, \"ganttMenuDialogInputCellValue\");\r\n\t\t\t\tcell.innerHTML = item.name;\r\n\t\t\t\tcellValue.appendChild(item.control.domNode);\r\n\t\t\t\t//initialize default value\r\n\t\t\t\tif(this.withDefaultValue && this.object){\r\n\t\t\t\t\tif(this.object.constructor == GanttTaskControl){\r\n\t\t\t\t\t\tif(item.key == \"startTime\"){\r\n\t\t\t\t\t\t\titem.control.textbox.value = this.encodeDate(this.object.taskItem.startTime);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\titem.control.textbox.value = item.key ? this.object.taskItem[item.key] : \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(item.key == \"startDate\"){\r\n\t\t\t\t\t\t\titem.control.textbox.value = this.encodeDate(this.object.project.startDate);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\titem.control.textbox.value = item.key ? (this.object.project[item.key] || this.object[item.key] || \"\") : \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//HTML5 placeholder property\r\n\t\t\t\t\titem.control.textbox.placeholder = item.required ? \"---required---\" : \"---optional---\";\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis.tabMenu.ok.onClick = lang.hitch(this, this.actionFunc);\r\n\t\t\tthis.tabMenu.cancel.onClick = lang.hitch(this, this.hide);\r\n\t\t},\r\n\t\thide: function(){\r\n\t\t\ttry{\r\n\t\t\t\tthis.tabMenu.tabPanelDlg.hide();\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(\"dialog show exception: \" + e.message);\r\n\t\t\t\tthis.tabMenu.tabPanelDlg.destroy();\r\n\t\t\t}\r\n\t\t\tvar cell = this.tabMenu.paneContentArea.firstChild.rows[1].cells[0];\r\n\t\t\tcell.firstChild.parentNode.removeChild(cell.firstChild);\r\n\t\t\tcell.innerHTML = \"<table></table>\";\r\n\t\t\tdomClass.add(cell.firstChild, \"ganttDialogContentCell\");\r\n\t\t},\r\n\t\tinsertData: function(content, name, value){\r\n\t\t\tvar cellValue,\r\n\t\t\t\trow = content.insertRow(content.rows.length),\r\n\t\t\t\tcell = row.insertCell(row.cells.length);\r\n\t\t\tdomClass.add(cell, \"ganttMenuDialogDescCell\");\r\n\t\t\tcell.innerHTML = name;\r\n\t\t\tcellValue = row.insertCell(row.cells.length);\r\n\t\t\tdomClass.add(cellValue, \"ganttMenuDialogDescCellValue\");\r\n\t\t\tcellValue.innerHTML = value;\r\n\t\t}\r\n\t});\r\n});\r\n"]}