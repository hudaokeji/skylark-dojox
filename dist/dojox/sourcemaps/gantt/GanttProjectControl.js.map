{"version":3,"sources":["gantt/GanttProjectControl.js"],"names":["define","GanttTaskItem","GanttTaskControl","focus","declare","arrayUtil","lang","locale","request","on","dom","domClass","domConstruct","domStyle","domAttr","domGeometry","keys","constructor","ganttChart","projectItem","this","project","descrProject","projectNameItem","posY","posX","nextProject","previousProject","arrTasks","percentage","duration","checkWidthProjectNameItem","offsetWidth","offsetLeft","maxWidthTaskNames","width","countChar","Math","round","firstChild","length","pName","name","substring","innerHTML","refreshProjectItem","getPercentCompleted","set","left","pixelsPerWorkHour","tblProjectItem","style","rowprojectItem","rows","cellprojectItem","imageProgress","height","heightTaskItem","lastChild","tblTaskInfo","parentTasks","display","refreshDescrProject","divDesc","visibility","postLoadData","refresh","startDate","pixelsPerHour","nextSibling","create","containerTasks","contentData","lastChildTask","getLastChildTask","parseInt","cTaskItem","top","heightTaskItemExtra","containerNames","panelNames","createProjectNameItem","appendChild","createProjectItem","createDescrProject","adjustPanelTime","getTaskById","id","i","aTask","task","searchTaskInTree","taskItem","childTask","cTask","shiftProjectItem","posItemL","posItemR","posProjectItemL","tmpPosItemL","tmpPosItemR","Date","setHours","getHours","resizeProjectItem","shiftDescrProject","panelTimeExpandDelta","pItem","firstRow","cells","getDescStr","showDescrProject","hideDescrProject","hsPerDay","className","getDuration","cellPadding","cellSpacing","insertRow","lineHeight","divTaskInfo","rowTaskInfo","align","vAlign","divName","title","isShowConMenu","_events","push","hitch","event","add","clearTimeout","menuTimer","tabMenu","clear","show","target","keyCode","ENTER","isShow","LEFT_ARROW","RIGHT_ARROW","menuPanel","ESCAPE","hide","remove","setTimeout","sum","forEach","ppTask","tmpDuration","startTime","deleteTask","deleteChildTask","checkPosition","setName","setPercentCompleted","isNaN","prow","rc0","rc1","parentNode","removeChild","tItem0","tNameItem0","cTaskNameItem","tItem1","tNameItem1","tNameItem2","openTree","parentTask","childPredTask","cpTask","t","predTask","rowHeight","shiftCurrentTasks","descrTask","j","taskIdentifier","previousChildTask","nextChildTask","splice","previousParentTask","nextParentTask","contentDataHeight","insertTask","previousTaskId","taskOwner","parentTaskId","_task","minWorkLength","checkPosParentTask","_parentTask","isHide","isExpanded","checkPosPreviousTask","correctPosPreviousTask","previousTask","cldTasks","createTreeImg","checkHeighPanelTasks","shiftNextProject","shiftProject","shiftNextParentTask","shiftTask","shiftChildTasks"],"mappings":"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","file":"../../gantt/GanttProjectControl.js","sourcesContent":["define([\r\n\t\"./GanttTaskItem\",\r\n\t\"./GanttTaskControl\",\r\n\t\"dijit/focus\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/date/locale\",\r\n\t\"dojo/request\",\r\n\t\"dojo/on\",\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/keys\",\r\n\t\"dojo/domReady!\"\r\n], function(GanttTaskItem, GanttTaskControl, focus,\r\n\t\tdeclare, arrayUtil, lang, locale, request, on,\r\n\t\tdom, domClass, domConstruct, domStyle, domAttr, domGeometry, keys){\r\n\treturn declare(\"dojox.gantt.GanttProjectControl\", [], {\r\n\t\tconstructor: function(ganttChart, projectItem){\r\n\t\t\tthis.project = projectItem;\r\n\t\t\tthis.ganttChart = ganttChart;\r\n\t\t\tthis.descrProject = null;\r\n\t\t\tthis.projectItem = null;\r\n\t\t\tthis.projectNameItem = null;\r\n\t\t\tthis.posY = 0;\r\n\t\t\tthis.posX = 0;\r\n\t\t\tthis.nextProject = null;\r\n\t\t\tthis.previousProject = null;\r\n\t\t\tthis.arrTasks = [];\r\n\t\t\tthis.percentage = 0;\r\n\t\t\tthis.duration = 0;\r\n\t\t},\r\n\t\tcheckWidthProjectNameItem: function(){\r\n\t\t\tif(this.projectNameItem.offsetWidth + this.projectNameItem.offsetLeft > this.ganttChart.maxWidthTaskNames){\r\n\t\t\t\tvar width = this.projectNameItem.offsetWidth + this.projectNameItem.offsetLeft - this.ganttChart.maxWidthTaskNames;\r\n\t\t\t\tvar countChar = Math.round(width / (this.projectNameItem.offsetWidth / this.projectNameItem.firstChild.length));\r\n\t\t\t\tvar pName = this.project.name.substring(0, this.projectNameItem.firstChild.length - countChar - 3);\r\n\t\t\t\tpName += \"...\";\r\n\t\t\t\tthis.projectNameItem.innerHTML = pName;\r\n\t\t\t}\r\n\t\t},\r\n\t\trefreshProjectItem: function(projectItem){\r\n\t\t\tthis.percentage = this.getPercentCompleted();\r\n\t\t\tdomStyle.set(projectItem, {\r\n\t\t\t\t\"left\": this.posX + \"px\",\r\n\t\t\t\t\"width\": this.duration * this.ganttChart.pixelsPerWorkHour + \"px\"\r\n\t\t\t});\r\n\t\t\tvar tblProjectItem = projectItem.firstChild;\r\n\t\t\tvar width = this.duration * this.ganttChart.pixelsPerWorkHour;\r\n\t\t\ttblProjectItem.width = ((width == 0) ? 1 : width) + \"px\";\r\n\t\t\ttblProjectItem.style.width = ((width == 0) ? 1 : width) + \"px\";\r\n\t\t\tvar rowprojectItem = tblProjectItem.rows[0];\r\n\t\t\tif(this.percentage != -1){\r\n\t\t\t\tif(this.percentage != 0){\r\n\t\t\t\t\tvar cellprojectItem = rowprojectItem.firstChild;\r\n\t\t\t\t\tcellprojectItem.width = this.percentage + \"%\";\r\n\t\t\t\t\tvar imageProgress = cellprojectItem.firstChild;\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: (!this.duration ? 1 : (this.percentage * this.duration * this.ganttChart.pixelsPerWorkHour / 100)) + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif(this.percentage != 100){\r\n\t\t\t\t\tvar cellprojectItem = rowprojectItem.lastChild;\r\n\t\t\t\t\tcellprojectItem.width = (100 - this.percentage) + \"%\";\r\n\t\t\t\t\tvar imageProgress = cellprojectItem.firstChild;\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: (!this.duration ? 1 : ((100 - this.percentage) * this.duration * this.ganttChart.pixelsPerWorkHour / 100)) + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar cellprojectItem = rowprojectItem.firstChild;\r\n\t\t\t\tcellprojectItem.width = \"1px\";\r\n\t\t\t\tvar imageProgress = cellprojectItem.firstChild;\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: \"1px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tvar divTaskInfo = projectItem.lastChild;\r\n\t\t\tvar tblTaskInfo = divTaskInfo.firstChild;\r\n\t\t\tdomStyle.set(tblTaskInfo, {\r\n\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\twidth: (!this.duration ? 1 : (this.duration * this.ganttChart.pixelsPerWorkHour)) + \"px\"\r\n\t\t\t});\r\n\t\t\tvar rowTaskInfo = tblTaskInfo.rows[0];\r\n\t\t\tvar cellTaskInfo = rowTaskInfo.firstChild;\r\n\t\t\tcellTaskInfo.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\tif(this.project.parentTasks.length == 0){\r\n\t\t\t\tprojectItem.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\treturn projectItem;\r\n\t\t},\r\n\t\trefreshDescrProject: function(divDesc){\r\n\t\t\tvar posX = (this.posX + this.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tdomStyle.set(divDesc, {\r\n\t\t\t\t\"left\": posX + \"px\"\r\n\t\t\t});\r\n\t\t\tif(this.project.parentTasks.length == 0){\r\n\t\t\t\tthis.descrProject.style.visibility = 'hidden';\r\n\t\t\t}\r\n\t\t\treturn divDesc;\r\n\t\t},\r\n\t\tpostLoadData: function(){\r\n\t\t\t//TODO e.g. project relative info...\r\n\t\t},\r\n\t\trefresh: function(){\r\n\t\t\tthis.posX = (this.project.startDate - this.ganttChart.startDate) / (60 * 60 * 1000) * this.ganttChart.pixelsPerHour;\r\n\t\t\tthis.refreshProjectItem(this.projectItem[0]);\r\n\t\t\tthis.refreshDescrProject(this.projectItem[0].nextSibling);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tcreate: function(){\r\n\t\t\tvar containerTasks = this.ganttChart.contentData.firstChild;\r\n\t\t\tthis.posX = (this.project.startDate - this.ganttChart.startDate) / (60 * 60 * 1000) * this.ganttChart.pixelsPerHour;\r\n\t\t\tif(this.previousProject){\r\n\t\t\t\tif(this.previousProject.arrTasks.length > 0){\r\n\t\t\t\t\tvar lastChildTask = this.ganttChart.getLastChildTask(this.previousProject.arrTasks[this.previousProject.arrTasks.length - 1]);\r\n\t\t\t\t\tthis.posY = parseInt(lastChildTask.cTaskItem[0].style.top) + this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.posY = parseInt(this.previousProject.projectItem[0].style.top) + this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.posY = 6;\r\n\t\t\t}\r\n\t\t\tvar containerNames = this.ganttChart.panelNames.firstChild;\r\n\t\t\tthis.projectNameItem = this.createProjectNameItem();\r\n\t\t\tcontainerNames.appendChild(this.projectNameItem);\r\n\t\t\tthis.checkWidthProjectNameItem();\r\n\t\t\tthis.projectItem = [this.createProjectItem(), []];\r\n\t\t\tcontainerTasks.appendChild(this.projectItem[0]);\r\n\t\t\tcontainerTasks.appendChild(this.createDescrProject());\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t},\r\n\t\tgetTaskById: function(id){\r\n\t\t\tfor(var i = 0; i < this.arrTasks.length; i++){\r\n\t\t\t\tvar aTask = this.arrTasks[i];\r\n\t\t\t\tvar task = this.searchTaskInTree(aTask, id);\r\n\t\t\t\tif(task){\r\n\t\t\t\t\treturn task;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tsearchTaskInTree: function(task, id){\r\n\t\t\tif(task.taskItem.id == id){\r\n\t\t\t\treturn task;\r\n\t\t\t}else{\r\n\t\t\t\tfor(var i = 0; i < task.childTask.length; i++){\r\n\t\t\t\t\tvar cTask = task.childTask[i];\r\n\t\t\t\t\tif(cTask.taskItem.id == id){\r\n\t\t\t\t\t\treturn cTask;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(cTask.childTask.length > 0){\r\n\t\t\t\t\t\t\tvar cTask = this.searchTaskInTree(cTask, id);\r\n\t\t\t\t\t\t\tif(cTask){\r\n\t\t\t\t\t\t\t\treturn cTask;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tshiftProjectItem: function(){\r\n\t\t\tvar posItemL = null;\r\n\t\t\tvar posItemR = null;\r\n\t\t\tvar posProjectItemL = parseInt(this.projectItem[0].style.left);\r\n\t\t\tfor(var i = 0; i < this.arrTasks.length; i++){\r\n\t\t\t\tvar aTask = this.arrTasks[i];\r\n\t\t\t\tvar tmpPosItemL = parseInt(aTask.cTaskItem[0].style.left);\r\n\t\t\t\tvar tmpPosItemR = parseInt(aTask.cTaskItem[0].style.left) + parseInt(aTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\t\tif(!posItemL){\r\n\t\t\t\t\tposItemL = tmpPosItemL;\r\n\t\t\t\t}\r\n\t\t\t\tif(!posItemR){\r\n\t\t\t\t\tposItemR = tmpPosItemR;\r\n\t\t\t\t}\r\n\t\t\t\tif(posItemL > tmpPosItemL){\r\n\t\t\t\t\tposItemL = tmpPosItemL;\r\n\t\t\t\t}\r\n\t\t\t\tif(posItemR < tmpPosItemR){\r\n\t\t\t\t\tposItemR = tmpPosItemR;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(posItemL != posProjectItemL){\r\n\t\t\t\tthis.project.startDate = new Date(this.ganttChart.startDate);\r\n\t\t\t\tthis.project.startDate.setHours(this.project.startDate.getHours() + (posItemL / this.ganttChart.pixelsPerHour));\r\n\t\t\t}\r\n\t\t\tthis.projectItem[0].style.left = posItemL + \"px\";\r\n\t\t\tthis.resizeProjectItem(posItemR - posItemL);\r\n\t\t\tthis.duration = Math.round(parseInt(this.projectItem[0].firstChild.width) / (this.ganttChart.pixelsPerWorkHour));\r\n\t\t\tthis.shiftDescrProject();\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t},\r\n\t\tadjustPanelTime: function(){\r\n\t\t\tvar projectItem = this.projectItem[0];\r\n\t\t\tvar width = parseInt(projectItem.style.left) + parseInt(projectItem.firstChild.style.width) + this.ganttChart.panelTimeExpandDelta;\r\n\t\t\twidth += this.descrProject.offsetWidth;\r\n\t\t\tthis.ganttChart.adjustPanelTime(width);\r\n\t\t},\r\n\t\tresizeProjectItem: function(width){\r\n\t\t\tvar percentage = this.percentage,\r\n\t\t\t\tpItem = this.projectItem[0];\r\n\t\t\tif(percentage > 0 && percentage < 100){\r\n\t\t\t\tpItem.firstChild.style.width = width + \"px\";\r\n\t\t\t\tpItem.firstChild.width = width + \"px\";\r\n\t\t\t\tpItem.style.width = width + \"px\";\r\n\t\t\t\tvar firstRow = pItem.firstChild.rows[0];\r\n\t\t\t\tfirstRow.cells[0].firstChild.style.width = Math.round(width * percentage / 100) + \"px\";\r\n\t\t\t\tfirstRow.cells[0].firstChild.style.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tfirstRow.cells[1].firstChild.style.width = Math.round(width * (100 - percentage) / 100) + \"px\";\r\n\t\t\t\tfirstRow.cells[1].firstChild.style.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tpItem.lastChild.firstChild.width = width + \"px\";\r\n\t\t\t}else if(percentage == 0 || percentage == 100){\r\n\t\t\t\tpItem.firstChild.style.width = width + \"px\";\r\n\t\t\t\tpItem.firstChild.width = width + \"px\";\r\n\t\t\t\tpItem.style.width = width + \"px\";\r\n\t\t\t\tvar firstRow = pItem.firstChild.rows[0];\r\n\t\t\t\tfirstRow.cells[0].firstChild.style.width = width + \"px\";\r\n\t\t\t\tfirstRow.cells[0].firstChild.style.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tpItem.lastChild.firstChild.width = width + \"px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftDescrProject: function(){\r\n\t\t\tvar posX = (parseInt(this.projectItem[0].style.left) + this.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tthis.descrProject.style.left = posX + \"px\";\r\n\t\t\tthis.descrProject.innerHTML = this.getDescStr();\r\n\t\t},\r\n\t\tshowDescrProject: function(){\r\n\t\t\tvar posX = (parseInt(this.projectItem[0].style.left) + this.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tthis.descrProject.style.left = posX + \"px\";\r\n\t\t\tthis.descrProject.style.visibility = 'visible';\r\n\t\t\tthis.descrProject.innerHTML = this.getDescStr();\r\n\t\t},\r\n\t\thideDescrProject: function(){\r\n\t\t\tthis.descrProject.style.visibility = 'hidden';\r\n\t\t},\r\n\t\tgetDescStr: function(){\r\n\t\t\treturn this.duration/this.ganttChart.hsPerDay + \" days,  \" + this.duration + \" hours\";\r\n\t\t},\r\n\t\tcreateDescrProject: function(){\r\n\t\t\tvar posX = (this.posX + this.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tvar divDesc = domConstruct.create(\"div\", {\r\n\t\t\t\tinnerHTML: this.getDescStr(),\r\n\t\t\t\tclassName: \"ganttDescProject\"\r\n\t\t\t});\r\n\t\t\tdomStyle.set(divDesc, {\r\n\t\t\t\tleft: posX + \"px\",\r\n\t\t\t\ttop: this.posY + \"px\"\r\n\t\t\t});\r\n\t\t\tthis.descrProject = divDesc;\r\n\t\t\tif(this.project.parentTasks.length == 0){\r\n\t\t\t\tthis.descrProject.style.visibility = 'hidden';\r\n\t\t\t}\r\n\t\t\treturn divDesc;\r\n\t\t},\r\n\t\tcreateProjectItem: function(){\r\n\t\t\tthis.percentage = this.getPercentCompleted();\r\n\t\t\tthis.duration = this.getDuration();\r\n\t\t\tvar projectItem = domConstruct.create(\"div\", {\r\n\t\t\t\tid: this.project.id,\r\n\t\t\t\tclassName: \"ganttProjectItem\"\r\n\t\t\t});\r\n\t\t\tdomStyle.set(projectItem, {\r\n\t\t\t\tleft: this.posX + \"px\",\r\n\t\t\t\ttop: this.posY + \"px\",\r\n\t\t\t\twidth: this.duration * this.ganttChart.pixelsPerWorkHour + \"px\"\r\n\t\t\t});\r\n\t\t\tvar tblProjectItem = domConstruct.create(\"table\", {\r\n\t\t\t\tcellPadding: \"0\",\r\n\t\t\t\tcellSpacing: \"0\",\r\n\t\t\t\tclassName: \"ganttTblProjectItem\"\r\n\t\t\t}, projectItem);\r\n\t\t\tvar width = this.duration * this.ganttChart.pixelsPerWorkHour;\r\n\t\t\ttblProjectItem.width = ((width == 0) ? 1 : width) + \"px\";\r\n\t\t\ttblProjectItem.style.width = ((width == 0) ? 1 : width) + \"px\";\r\n\t\t\r\n\t\t\tvar rowprojectItem = tblProjectItem.insertRow(tblProjectItem.rows.length);\r\n\t\t\tif(this.percentage != -1){\r\n\t\t\t\tif(this.percentage != 0){\r\n\t\t\t\t\tvar cellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\twidth: this.percentage + \"%\"\r\n\t\t\t\t\t}, rowprojectItem);\r\n\t\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\t\tvar imageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageProgressFilled\"\r\n\t\t\t\t\t}, cellprojectItem);\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: (this.percentage * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(this.percentage != 100){\r\n\t\t\t\t\tvar cellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\twidth: (100 - this.percentage) + \"%\"\r\n\t\t\t\t\t}, rowprojectItem);\r\n\t\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\t\tvar imageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageProgressBg\"\r\n\t\t\t\t\t}, cellprojectItem);\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: ((100 - this.percentage) * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar cellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\twidth: \"1px\"\r\n\t\t\t\t}, rowprojectItem);\r\n\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"ganttImageProgressBg\"\r\n\t\t\t\t}, cellprojectItem);\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: \"1px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar divTaskInfo = domConstruct.create(\"div\", {className: \"ganttDivTaskInfo\"});\r\n\t\t\tvar tblTaskInfo = domConstruct.create(\"table\", {\r\n\t\t\t\tcellPadding: \"0\",\r\n\t\t\t\tcellSpacing: \"0\",\r\n\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\twidth: ((this.duration * this.ganttChart.pixelsPerWorkHour == 0) ? 1 : this.duration * this.ganttChart.pixelsPerWorkHour) + \"px\"\r\n\t\t\t}, divTaskInfo);\r\n\t\t\tvar rowTaskInfo = tblTaskInfo.insertRow(0);\r\n\t\t\tdomConstruct.create(\"td\", {\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\tvAlign: \"top\",\r\n\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\tclassName: \"ganttMoveInfo\"\r\n\t\t\t}, rowTaskInfo);\r\n\t\t\tprojectItem.appendChild(divTaskInfo);\r\n\t\t\tif(this.project.parentTasks.length == 0){\r\n\t\t\t\tprojectItem.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\treturn projectItem;\r\n\t\t},\r\n\t\tcreateProjectNameItem: function(){\r\n\t\t\tvar divName = domConstruct.create(\"div\", {\r\n\t\t\t\tclassName: \"ganttProjectNameItem\",\r\n\t\t\t\tinnerHTML: this.project.name,\r\n\t\t\t\ttitle: this.project.name\r\n\t\t\t});\r\n\t\t\tdomStyle.set(divName, {\r\n\t\t\t\tleft: \"5px\",\r\n\t\t\t\ttop: this.posY + \"px\"\r\n\t\t\t});\r\n\t\t\tdomAttr.set(divName, \"tabIndex\", 0);\r\n\t\t\tif(this.ganttChart.isShowConMenu){\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"mouseover\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tdomClass.add(divName, \"ganttProjectNameItemHover\");\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.tabMenu.clear();\r\n\t\t\t\t\t\tthis.ganttChart.tabMenu.show(event.target, this);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"keydown\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tif(event.keyCode == keys.ENTER){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.clear();\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.show(event.target, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && (event.keyCode == keys.LEFT_ARROW || event.keyCode == keys.RIGHT_ARROW)){\r\n\t\t\t\t\t\t\tfocus(this.ganttChart.tabMenu.menuPanel.firstChild.rows[0].cells[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && event.keyCode == keys.ESCAPE){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"mouseout\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tdomClass.remove(divName, \"ganttProjectNameItemHover\");\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.menuTimer = setTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}), 200);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"mouseover\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"keydown\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && event.keyCode == keys.ESCAPE){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"mouseout\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.menuTimer = setTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}), 200);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn divName;\r\n\t\t},\r\n\t\tgetPercentCompleted: function(){\r\n\t\t\tvar sum = 0;\r\n\t\t\tarrayUtil.forEach(this.project.parentTasks, function(ppTask){\r\n\t\t\t\tsum += parseInt(ppTask.percentage);\r\n\t\t\t}, this);\r\n\t\t\tif(this.project.parentTasks.length != 0){\r\n\t\t\t\treturn Math.round(sum / this.project.parentTasks.length);\r\n\t\t\t}else{\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDuration: function(){\r\n\t\t\tvar duration = 0, tmpDuration = 0;\r\n\t\t\tif(this.project.parentTasks.length > 0){\r\n\t\t\t\tarrayUtil.forEach(this.project.parentTasks, function(ppTask){\r\n\t\t\t\t\ttmpDuration = ppTask.duration * 24 / this.ganttChart.hsPerDay + (ppTask.startTime - this.ganttChart.startDate) / (60 * 60 * 1000);\r\n\t\t\t\t\tif(tmpDuration > duration){\r\n\t\t\t\t\t\tduration = tmpDuration;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn ((duration - this.posX) / 24) * this.ganttChart.hsPerDay;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteTask: function(id){\r\n\t\t\tvar task = this.getTaskById(id);\r\n\t\t\tif(task){\r\n\t\t\t\tthis.deleteChildTask(task);\r\n\t\t\t\tthis.ganttChart.checkPosition();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetName: function(name){\r\n\t\t\tif(name){\r\n\t\t\t\tthis.project.name = name;\r\n\t\t\t\tthis.projectNameItem.innerHTML = name;\r\n\t\t\t\tthis.projectNameItem.title = name;\r\n\t\t\t\tthis.checkWidthProjectNameItem();\r\n\t\t\t\r\n\t\t\t\tthis.descrProject.innerHTML = this.getDescStr();\r\n\t\t\t\tthis.adjustPanelTime();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetPercentCompleted: function(percentage){\r\n\t\t\tpercentage = parseInt(percentage);\r\n\t\t\tif(isNaN(percentage) || percentage > 100 || percentage < 0){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar prow = this.projectItem[0].firstChild.rows[0],\r\n\t\t\t\trc0 = prow.cells[0], rc1 = prow.cells[1];\r\n\t\t\tif((percentage > 0) && (percentage < 100) && (this.percentage > 0) && (this.percentage < 100)){\r\n\t\t\t\trc0.width = parseInt(percentage) + \"%\";\r\n\t\t\t\trc0.firstChild.style.width = (percentage * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\";\r\n\t\t\t\trc1.width = (100 - parseInt(percentage)) + \"%\";\r\n\t\t\t\trc1.firstChild.style.width = ((100 - percentage) * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\";\r\n\t\t\t}else if(((percentage == 0) || (percentage == 100)) && (this.percentage > 0) && (this.percentage < 100)){\r\n\t\t\t\tif(percentage == 0){\r\n\t\t\t\t\trc0.parentNode.removeChild(rc0);\r\n\t\t\t\t\trc1.width = 100 + \"%\";\r\n\t\t\t\t\trc1.firstChild.style.width = this.duration * this.ganttChart.pixelsPerWorkHour + \"px\";\r\n\t\t\t\t}else if(percentage == 100){\r\n\t\t\t\t\trc1.parentNode.removeChild(rc1);\r\n\t\t\t\t\trc0.width = 100 + \"%\";\r\n\t\t\t\t\trc0.firstChild.style.width = this.duration * this.ganttChart.pixelsPerWorkHour + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}else if(((percentage == 0) || (percentage == 100)) && ((this.percentage == 0) || (this.percentage == 100))){\r\n\t\t\t\tif((percentage == 0) && (this.percentage == 100)){\r\n\t\t\t\t\tdomClass.remove(rc0.firstChild, \"ganttImageProgressFilled\");\r\n\t\t\t\t\tdomClass.add(rc0.firstChild, \"ganttImageProgressBg\");\r\n\t\t\t\t}else if((percentage == 100) && (this.percentage == 0)){\r\n\t\t\t\t\tdomClass.remove(rc0.firstChild, \"ganttImageProgressBg\");\r\n\t\t\t\t\tdomClass.add(rc0.firstChild, \"ganttImageProgressFilled\");\r\n\t\t\t\t}\r\n\t\t\t}else if(((percentage > 0) || (percentage < 100)) && ((this.percentage == 0) || (this.percentage == 100))){\r\n\t\t\t\trc0.parentNode.removeChild(rc0);\r\n\t\t\t\tvar cellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\twidth: percentage + \"%\"\r\n\t\t\t\t}, prow);\r\n\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"ganttImageProgressFilled\"\r\n\t\t\t\t}, cellprojectItem);\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: (percentage * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tcellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\twidth: (100 - percentage) + \"%\"\r\n\t\t\t\t}, prow);\r\n\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\timageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"ganttImageProgressBg\"\r\n\t\t\t\t}, cellprojectItem);\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: ((100 - percentage) * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}else if(this.percentage == -1){\r\n\t\t\t\tif(percentage == 100){\r\n\t\t\t\t\tdomClass.remove(rc0.firstChild, \"ganttImageProgressBg\");\r\n\t\t\t\t\tdomClass.add(rc0.firstChild, \"ganttImageProgressFilled\");\r\n\t\t\t\t}else if(percentage < 100 && percentage > 0){\r\n\t\t\t\t\trc0.parentNode.removeChild(rc0);\r\n\t\t\t\t\tvar cellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\twidth: percentage + \"%\"\r\n\t\t\t\t\t}, prow);\r\n\t\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\t\timageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageProgressFilled\"\r\n\t\t\t\t\t}, cellprojectItem);\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: (percentage * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcellprojectItem = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\twidth: (100 - percentage) + \"%\"\r\n\t\t\t\t\t}, prow);\r\n\t\t\t\t\tcellprojectItem.style.lineHeight = \"1px\";\r\n\t\t\t\t\timageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageProgressBg\"\r\n\t\t\t\t\t}, cellprojectItem);\r\n\t\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\t\twidth: ((100 - percentage) * this.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.percentage = percentage;\r\n\t\t\tthis.descrProject.innerHTML = this.getDescStr();\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tdeleteChildTask: function(task){\r\n\t\t\tif(task){\r\n\t\t\t\tvar tItem0 = task.cTaskItem[0], tNameItem0 = task.cTaskNameItem[0],\r\n\t\t\t\t\ttItem1 = task.cTaskItem[1], tNameItem1 = task.cTaskNameItem[1],\r\n\t\t\t\t\ttNameItem2 = task.cTaskNameItem[2];\r\n\t\t\t\tif(tItem0.style.display == \"none\"){\r\n\t\t\t\t\tthis.ganttChart.openTree(task.parentTask);\r\n\t\t\t\t}\r\n\t\t\t\t//delete of connecting lines\r\n\t\t\t\tif(task.childPredTask.length > 0){\r\n\t\t\t\t\tfor(var i = 0; i < task.childPredTask.length; i++){\r\n\t\t\t\t\t\tvar cpTask = task.childPredTask[i];\r\n\t\t\t\t\t\tfor(var t = 0; t < cpTask.cTaskItem[1].length; t++){\r\n\t\t\t\t\t\t\tcpTask.cTaskItem[1][t].parentNode.removeChild(cpTask.cTaskItem[1][t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcpTask.cTaskItem[1] = [];\r\n\t\t\t\t\t\tcpTask.predTask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//delete child task\r\n\t\t\t\tif(task.childTask.length > 0){\r\n\t\t\t\t\twhile(task.childTask.length > 0){\r\n\t\t\t\t\t\tthis.deleteChildTask(task.childTask[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//shift tasks\r\n\t\t\t\tvar rowHeight = this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\tif(tItem0.style.display != \"none\"){\r\n\t\t\t\t\ttask.shiftCurrentTasks(task, -rowHeight);\r\n\t\t\t\t}\r\n\t\t\t\t//delete object task\r\n\t\t\t\tthis.project.deleteTask(task.taskItem.id);\r\n\t\t\t\t//delete div and connecting lines from contentData\r\n\t\t\t\tif(tItem0){\r\n\t\t\t\t\ttItem0.parentNode.removeChild(tItem0);\r\n\t\t\t\t}\r\n\t\t\t\ttask.descrTask.parentNode.removeChild(task.descrTask);\r\n\t\t\t\tif(tItem1.length > 0){\r\n\t\t\t\t\tfor(var j = 0; j < tItem1.length; j++){\r\n\t\t\t\t\t\ttItem1[j].parentNode.removeChild(tItem1[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//delete div and connecting lines from panelName\r\n\t\t\t\tif(tNameItem0){\r\n\t\t\t\t\ttNameItem0.parentNode.removeChild(tNameItem0);\r\n\t\t\t\t}\r\n\t\t\t\tif(task.cTaskNameItem[1]){\r\n\t\t\t\t\tfor(var j = 0; j < tNameItem1.length; j++){\r\n\t\t\t\t\t\ttNameItem1[j].parentNode.removeChild(tNameItem1[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(tNameItem2 && tNameItem2.parentNode){\r\n\t\t\t\t\ttNameItem2.parentNode.removeChild(tNameItem2);\r\n\t\t\t\t}\r\n\t\t\t\tif(task.taskIdentifier){\r\n\t\t\t\t\ttask.taskIdentifier.parentNode.removeChild(task.taskIdentifier);\r\n\t\t\t\t\ttask.taskIdentifier = null;\r\n\t\t\t\t}\r\n\t\t\t\t//delete object task\r\n\t\t\t\tif(task.parentTask){\r\n\t\t\t\t\tif(task.previousChildTask){\r\n\t\t\t\t\t\tif(task.nextChildTask){\r\n\t\t\t\t\t\t\ttask.previousChildTask.nextChildTask = task.nextChildTask;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttask.previousChildTask.nextChildTask = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar parentTask = task.parentTask;\r\n\t\t\t\t\tfor(var i = 0; i < parentTask.childTask.length; i++){\r\n\t\t\t\t\t\tif(parentTask.childTask[i].taskItem.id == task.taskItem.id){\r\n\t\t\t\t\t\t\tparentTask.childTask[i] = null;\r\n\t\t\t\t\t\t\tparentTask.childTask.splice(i, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(parentTask.childTask.length == 0){\r\n\t\t\t\t\t\tif(parentTask.cTaskNameItem[2]){\r\n\t\t\t\t\t\t\tparentTask.cTaskNameItem[2].parentNode.removeChild(parentTask.cTaskNameItem[2]);\r\n\t\t\t\t\t\t\tparentTask.cTaskNameItem[2] = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(task.previousParentTask){\r\n\t\t\t\t\t\tif(task.nextParentTask){\r\n\t\t\t\t\t\t\ttask.previousParentTask.nextParentTask = task.nextParentTask;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttask.previousParentTask.nextParentTask = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar project = task.project;\r\n\t\t\t\t\tfor(var i = 0; i < project.arrTasks.length; i++){\r\n\t\t\t\t\t\tif(project.arrTasks[i].taskItem.id == task.taskItem.id){\r\n\t\t\t\t\t\t\tproject.arrTasks.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(task.predTask){\r\n\t\t\t\t\tvar predTask = task.predTask;\r\n\t\t\t\t\tfor(var i = 0; i < predTask.childPredTask.length; i++){\r\n\t\t\t\t\t\tif(predTask.childPredTask[i].taskItem.id == task.taskItem.id){\r\n\t\t\t\t\t\t\tpredTask.childPredTask[i] = null;\r\n\t\t\t\t\t\t\tpredTask.childPredTask.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(task.project.arrTasks.length != 0){\r\n\t\t\t\t\ttask.project.shiftProjectItem();\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttask.project.projectItem[0].style.display = \"none\";\r\n\t\t\t\t\tthis.hideDescrProject();\r\n\t\t\t\t}\r\n\t\t\t\tthis.ganttChart.contentDataHeight -= this.ganttChart.heightTaskItemExtra + this.ganttChart.heightTaskItem;\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tinsertTask: function(id, name, startTime, duration, percentage, previousTaskId, taskOwner, parentTaskId){\r\n\t\t\tvar task = null;\r\n\t\t\tvar _task = null;\r\n\t\t\tif(this.project.getTaskById(id)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif((!duration) || (duration < this.ganttChart.minWorkLength)){\r\n\t\t\t\tduration = this.ganttChart.minWorkLength;\r\n\t\t\t}\r\n\t\t\tif((!name) || (name == \"\")){\r\n\t\t\t\tname = id;\r\n\t\t\t}\r\n\t\t\tif((!percentage) || (percentage == \"\")){\r\n\t\t\t\tpercentage = 0;\r\n\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tpercentage = parseInt(percentage);\r\n\t\t\t\tif(percentage < 0 || percentage > 100){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sortRequired = false;\r\n\t\t\tif((parentTaskId) && (parentTaskId != \"\")){\r\n\t\t\t\tvar parentTask = this.project.getTaskById(parentTaskId);\r\n\t\t\t\tif(!parentTask){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tstartTime = startTime || parentTask.startTime;\r\n\t\t\t\tif(startTime < parentTask.startTime){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\ttask = new GanttTaskItem({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tstartTime: startTime,\r\n\t\t\t\t\tduration: duration,\r\n\t\t\t\t\tpercentage: percentage,\r\n\t\t\t\t\tpreviousTaskId: previousTaskId,\r\n\t\t\t\t\ttaskOwner: taskOwner\r\n\t\t\t\t});\r\n\t\t\t\tif(!this.ganttChart.checkPosParentTask(parentTask, task)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\ttask.parentTask = parentTask;\r\n\t\t\t\tvar _parentTask = this.getTaskById(parentTask.id);\r\n\t\t\t\tvar isHide = false;\r\n\t\t\t\tif(_parentTask.cTaskItem[0].style.display == \"none\"){\r\n\t\t\t\t\tisHide = true;\r\n\t\t\t\t}else if(_parentTask.cTaskNameItem[2]){\r\n\t\t\t\t\tif(!_parentTask.isExpanded){\r\n\t\t\t\t\t\tisHide = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(isHide){\r\n\t\t\t\t\tif(_parentTask.childTask.length == 0){\r\n\t\t\t\t\t\tthis.ganttChart.openTree(_parentTask.parentTask);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.ganttChart.openTree(_parentTask);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(previousTaskId != \"\"){\r\n\t\t\t\t\tvar predTask = this.project.getTaskById(previousTaskId);\r\n\t\t\t\t\tif(!predTask){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(predTask.parentTask){\r\n\t\t\t\t\t\tif(predTask.parentTask.id != task.parentTask.id){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.ganttChart.checkPosPreviousTask(predTask, task)){\r\n\t\t\t\t\t\tthis.ganttChart.correctPosPreviousTask(predTask, task);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttask.previousTask = predTask;\r\n\t\t\t\t}\r\n\t\t\t\tvar isAdd = false;\r\n\t\t\t\tif(sortRequired) for(var i = 0; i < parentTask.cldTasks.length; i++){\r\n\t\t\t\t\tif(task.startTime < parentTask.cldTasks[i].startTime){\r\n\t\t\t\t\t\tparentTask.cldTasks.splice(i, 0, task);\r\n\t\t\t\t\t\tif(i > 0){\r\n\t\t\t\t\t\t\tparentTask.cldTasks[i - 1].nextChildTask = parentTask.cldTasks[i];\r\n\t\t\t\t\t\t\tparentTask.cldTasks[i].previousChildTask = parentTask.cldTasks[i - 1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(parentTask.cldTasks[i + 1]){\r\n\t\t\t\t\t\t\tparentTask.cldTasks[i + 1].previousChildTask = parentTask.cldTasks[i];\r\n\t\t\t\t\t\t\tparentTask.cldTasks[i].nextChildTask = parentTask.cldTasks[i + 1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisAdd = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!isAdd){\r\n\t\t\t\t\tif(parentTask.cldTasks.length > 0){\r\n\t\t\t\t\t\tparentTask.cldTasks[parentTask.cldTasks.length - 1].nextChildTask = task;\r\n\t\t\t\t\t\ttask.previousChildTask = parentTask.cldTasks[parentTask.cldTasks.length - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparentTask.cldTasks.push(task);\r\n\t\t\t\t}\r\n\t\t\t\tif(parentTask.cldTasks.length == 1){\r\n\t\t\t\t\t_parentTask.cTaskNameItem[2] = _parentTask.createTreeImg();\r\n\t\t\t\t}\r\n\t\t\t\t_task = new GanttTaskControl(task, this, this.ganttChart);\r\n\t\t\t\t_task.create();\r\n\t\t\t\tif(task.nextChildTask) _task.nextChildTask = _task.project.getTaskById(task.nextChildTask.id);\r\n\t\t\t\t_task.adjustPanelTime();\r\n\t\t\t\tvar rowHeight = this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t_task.shiftCurrentTasks(_task, rowHeight);//23\r\n\t\t\t}else{\r\n\t\t\t\tstartTime = startTime || this.project.startDate;\r\n\t\t\t\ttask = new GanttTaskItem({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tstartTime: startTime,\r\n\t\t\t\t\tduration: duration,\r\n\t\t\t\t\tpercentage: percentage,\r\n\t\t\t\t\tpreviousTaskId: previousTaskId,\r\n\t\t\t\t\ttaskOwner: taskOwner\r\n\t\t\t\t});\r\n\t\t\t\tif(task.startTime <= this.ganttChart.startDate){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(previousTaskId != \"\"){\r\n\t\t\t\t\tvar predTask = this.project.getTaskById(previousTaskId);\r\n\t\t\t\t\tif(!predTask){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.ganttChart.checkPosPreviousTask(predTask, task)){\r\n\t\t\t\t\t\tthis.ganttChart.correctPosPreviousTask(predTask, task);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(predTask.parentTask){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttask.previousTask = predTask;\r\n\t\t\t\t}\r\n\t\t\t\tvar isAdd = false;\r\n\t\t\t\tif(sortRequired){\r\n\t\t\t\t\tfor(var i = 0; i < this.project.parentTasks.length; i++){\r\n\t\t\t\t\t\tvar ppTask = this.project.parentTasks[i];\r\n\t\t\t\t\t\tif(startTime < ppTask.startTime){\r\n\t\t\t\t\t\t\tthis.project.parentTasks.splice(i, 0, task);\r\n\t\t\t\t\t\t\tif(i > 0){\r\n\t\t\t\t\t\t\t\tthis.project.parentTasks[i - 1].nextParentTask = task;\r\n\t\t\t\t\t\t\t\ttask.previousParentTask = this.project.parentTasks[i - 1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.project.parentTasks[i + 1]){\r\n\t\t\t\t\t\t\t\tthis.project.parentTasks[i + 1].previousParentTask = task;\r\n\t\t\t\t\t\t\t\ttask.nextParentTask = this.project.parentTasks[i + 1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisAdd = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!isAdd){\r\n\t\t\t\t\tif(this.project.parentTasks.length > 0){\r\n\t\t\t\t\t\tthis.project.parentTasks[this.project.parentTasks.length - 1].nextParentTask = task;\r\n\t\t\t\t\t\ttask.previousParentTask = this.project.parentTasks[this.project.parentTasks.length - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.project.parentTasks.push(task);\r\n\t\t\t\t}\r\n\t\t\t\t_task = new GanttTaskControl(task, this, this.ganttChart);\r\n\t\t\t\t_task.create();\r\n\t\t\t\tif(task.nextParentTask) _task.nextParentTask = _task.project.getTaskById(task.nextParentTask.id);\r\n\t\t\t\t_task.adjustPanelTime();\r\n\t\t\t\tthis.arrTasks.push(_task);\r\n\t\t\t\tvar rowHeight = this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t_task.shiftCurrentTasks(_task, rowHeight);\r\n\t\t\t\tthis.projectItem[0].style.display = \"inline\";\r\n\t\t\t\tthis.setPercentCompleted(this.getPercentCompleted());\r\n\t\t\t\tthis.shiftProjectItem();\r\n\t\t\t\tthis.showDescrProject();\r\n\t\t\t}\r\n\t\t\tthis.ganttChart.checkHeighPanelTasks();\r\n\t\t\tthis.ganttChart.checkPosition();\r\n\t\t\treturn _task;\r\n\t\t},\r\n\t\tshiftNextProject: function(project, height){\r\n\t\t\tif(project.nextProject){\r\n\t\t\t\tproject.nextProject.shiftProject(height);\r\n\t\t\t\tthis.shiftNextProject(project.nextProject, height);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftProject: function(height){\r\n\t\t\tthis.posY = this.posY + height;\r\n\t\t\tthis.projectItem[0].style.top = parseInt(this.projectItem[0].style.top) + height + \"px\";\r\n\t\t\tthis.descrProject.style.top = parseInt(this.descrProject.style.top) + height + \"px\";\r\n\t\t\tthis.projectNameItem.style.top = parseInt(this.projectNameItem.style.top) + height + \"px\";\r\n\t\t\tif(this.arrTasks.length > 0){\r\n\t\t\t\tthis.shiftNextParentTask(this.arrTasks[0], height);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftTask: function(task, height){\r\n\t\t\ttask.posY = task.posY + height;\r\n\t\t\tvar tNameItem0 = task.cTaskNameItem[0], tNameItem1 = task.cTaskNameItem[1], tNameItem2 = task.cTaskNameItem[2],\r\n\t\t\t\ttItem1 = task.cTaskItem[1];\r\n\t\t\ttNameItem0.style.top = parseInt(tNameItem0.style.top) + height + \"px\";\r\n\t\t\tif(tNameItem2){\r\n\t\t\t\ttNameItem2.style.top = parseInt(tNameItem2.style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t\tif(task.parentTask){\r\n\t\t\t\ttNameItem1[0].style.top = parseInt(tNameItem1[0].style.top) + height + \"px\";\r\n\t\t\t\ttNameItem1[1].style.top = parseInt(tNameItem1[1].style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t\ttask.cTaskItem[0].style.top = parseInt(task.cTaskItem[0].style.top) + height + \"px\";\r\n\t\t\ttask.descrTask.style.top = parseInt(task.descrTask.style.top) + height + \"px\";\r\n\t\t\tif(tItem1[0]){\r\n\t\t\t\ttItem1[0].style.top = parseInt(tItem1[0].style.top) + height + \"px\";\r\n\t\t\t\ttItem1[1].style.top = parseInt(tItem1[1].style.top) + height + \"px\";\r\n\t\t\t\ttItem1[2].style.top = parseInt(tItem1[2].style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftNextParentTask: function(task, height){\r\n\t\t\tthis.shiftTask(task, height);\r\n\t\t\tthis.shiftChildTasks(task, height);\r\n\t\t\tif(task.nextParentTask){\r\n\t\t\t\tthis.shiftNextParentTask(task.nextParentTask, height);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftChildTasks: function(task, height){\r\n\t\t\tarrayUtil.forEach(task.childTask, function(cTask){\r\n\t\t\t\tthis.shiftTask(cTask, height);\r\n\t\t\t\tif(cTask.childTask.length > 0){\r\n\t\t\t\t\tthis.shiftChildTasks(cTask, height);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t}\r\n\t});\r\n});\r\n"]}