{"version":3,"sources":["gantt/GanttTaskControl.js"],"names":["define","focus","declare","arrayUtil","lang","locale","request","on","dom","domClass","domConstruct","domStyle","domAttr","domGeometry","keys","constructor","taskInfo","project","chart","this","ganttChart","taskItem","checkMove","checkResize","moveChild","maxPosXMove","minPosXMove","maxWidthResize","minWidthResize","posX","posY","mouseX","taskItemWidth","isHide","hideTasksHeight","isExpanded","descrTask","cTaskItem","cTaskNameItem","parentTask","predTask","childTask","childPredTask","nextChildTask","previousChildTask","nextParentTask","previousParentTask","createConnectingLinesPN","arrConnectingLinesNames","lineVerticalLeft","create","innerHTML","className","panelNames","firstChild","cTaskName","pcTaskName","set","height","offsetTop","top","left","offsetLeft","LineHorizontalLeft","noShade","color","width","push","createConnectingLinesDS","contentData","arrLines","arrowImg","lineVerticalRight","document","createElement","lineHorizontal","posXPreviousTask","get","posYPreviousTask","posXChildTask","posYChildTask","widthPreviousTask","parseInt","add","heightTaskItem","appendChild","showChildTasks","task","isOpen","i","length","cTask","cTaskItem0","cTaskName0","cTaskItem1","cTaskName1","cTaskName2","style","display","showDescTask","k","taskIdentifier","heightTaskItemExtra","hideChildTasks","hideDescTask","shiftCurrentTasks","shiftNextTask","shiftNextProject","shiftTask","taskItem0","taskName0","taskItem1","taskName1","taskName2","id","shiftChildTask","forEach","endMove","cTask0","startTime","getDateOnPosition","checkPos","getPosOnDate","moveCurrentTaskItem","shiftProjectItem","childNodes","rows","cells","adjustPanelTime","resource","refresh","h","getHours","setDate","getDate","setHours","getMaxPosPredChildTaskItem","posPredChildTaskItem","nextPosPredChildTaskItem","getMaxPosPredChildTaskItemInTree","currentPos","cpTask","Date","startDate","pixelsPerHour","cTask1","moveChildTaskItems","ctItem","item","item0","item2","moveDescTask","panelTimeExpandDelta","offsetWidth","position","date","moveItem","event","pageX","screenX","posTaskItem","posTaskItemR","moveTaskItem","getMonth","getUTCFullYear","resizeItem","widthTaskItem","resizeTaskItem","countHours","Math","round","pixelsPerWorkHour","trow","rc0","rc1","tcNode2","endResizeItem","posXL","posXR","duration","j","cpctItem","tcNode0","startMove","ctrlKey","getMoveInfo","objKeyToStr","getTaskOwner","visibility","buildResourceInfo","resourceInfo","trim","taskOwner","owners","split","o","obj","delm","returnStr","key","tOwner","ctask","mixin","posParentTaskItem","posPredTaskItem","widthParentTaskItem","childPredPosX","childParentPosX","childParentPosXR","posChildTaskItem","posChildTaskItemR","initialPos","startResize","getResizeInfo","pixelsPerDay","w1","w2","min","createTaskItem","itemControl","divTaskItem","tblTaskItem","cellPadding","cellSpacing","rowTblTask","insertRow","percentage","cellTblTask","lineHeight","imageProgress","imageProgressFill","isContentEditable","divTaskInfo","rowTaskInfo","divTaskName","align","vAlign","divMove","type","background","opacity","divResize","_events","hitch","moveMoveConn","e","moveUpConn","isMoving","body","releaseCapture","remove","setCapture","target","cursor","resizeMoveConn","resizeUpConn","isResizing","createTaskNameItem","divName","title","name","isShowConMenu","clearTimeout","menuTimer","tabMenu","clear","show","keyCode","ENTER","isShow","LEFT_ARROW","RIGHT_ARROW","menuPanel","ESCAPE","hide","setTimeout","createTaskDescItem","divDesc","checkWidthTaskNameItem","maxWidthTaskNames","countChar","tName","substring","refreshTaskItem","lastChild","tblTaskInfo","refreshTaskDesc","refreshConnectingLinesDS","postLoadData","nextSibling","previousTask","containerTasks","isCParentTask","cldTasks","getTaskById","lastChildTask","getLastChildTask","projectItem","arrConnectingLines","checkPosition","treeImg","createTreeImg","withTaskId","pos","getMarginBox","l","w","t","parentNode","evt","setPreviousTask","previousTaskId","clearPredTask","predTaskObj","a1","a2","getTime","hsPerDay","checkPosPreviousTask","correctPosPreviousTask","ch","splice","removeChild","setStartTime","shiftChild","setDuration","getWidthOnDuration","setTaskOwner","owner","undefined","setPercentCompleted","isNaN","setName"],"mappings":"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","file":"../../gantt/GanttTaskControl.js","sourcesContent":["define([\r\n    \"dijit/focus\",\r\n    \"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/lang\",\r\n    \"dojo/date/locale\",\r\n\t\"dojo/request\",\r\n\t\"dojo/on\",\t\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/keys\",\r\n\t\"dojo/domReady!\"\r\n], function(focus, declare, arrayUtil, lang, locale, request, on,\r\n\t\tdom, domClass, domConstruct, domStyle, domAttr, domGeometry, keys){\r\n\treturn declare(\"dojox.gantt.GanttTaskControl\", [], {\r\n\t\tconstructor: function(taskInfo, project, chart){\r\n\t\t\tthis.ganttChart = chart;\r\n\t\t\tthis.project = project;\r\n\t\t\tthis.taskItem = taskInfo;\r\n\t\t\t//control variables\r\n\t\t\tthis.checkMove = false;\r\n\t\t\tthis.checkResize = false;\r\n\t\t\tthis.moveChild = false;\r\n\t\t\tthis.maxPosXMove = -1;\r\n\t\t\tthis.minPosXMove = -1;\r\n\t\t\tthis.maxWidthResize = -1;\r\n\t\t\tthis.minWidthResize = -1;\r\n\t\t\tthis.posX = 0;\r\n\t\t\tthis.posY = 0;\r\n\t\t\tthis.mouseX = 0;\r\n\t\t\tthis.taskItemWidth = 0;\r\n\t\t\tthis.isHide = false;\r\n\t\t\tthis.hideTasksHeight = 0;\r\n\t\t\tthis.isExpanded = true;\r\n\t\t\tthis.descrTask = null;\r\n\t\t\tthis.cTaskItem = null;\r\n\t\t\tthis.cTaskNameItem = null;\r\n\t\t\tthis.parentTask = null;\r\n\t\t\tthis.predTask = null;\r\n\t\t\tthis.childTask = [];\r\n\t\t\tthis.childPredTask = [];\r\n\t\t\tthis.nextChildTask = null;\r\n\t\t\tthis.previousChildTask = null;\r\n\t\t\tthis.nextParentTask = null;\r\n\t\t\tthis.previousParentTask = null;\r\n\t\t},\r\n\t\tcreateConnectingLinesPN: function(){\r\n\t\t\tvar arrConnectingLinesNames = [];\r\n\t\t\tvar lineVerticalLeft = domConstruct.create(\"div\", {\r\n\t\t\t\tinnerHTML: \"&nbsp;\",\r\n\t\t\t\tclassName: \"ganttTaskLineVerticalLeft\"\r\n\t\t\t}, this.ganttChart.panelNames.firstChild);\r\n\t\t\tvar cTaskName = this.cTaskNameItem[0], pcTaskName = this.parentTask.cTaskNameItem[0];\r\n\t\t\tdomStyle.set(lineVerticalLeft, {\r\n\t\t\t\theight: (cTaskName.offsetTop - pcTaskName.offsetTop) + \"px\",\r\n\t\t\t\ttop: (pcTaskName.offsetTop + 5) + \"px\",\r\n\t\t\t\tleft: (pcTaskName.offsetLeft - 9) + \"px\"\r\n\t\t\t});\r\n\t\t\tvar LineHorizontalLeft = domConstruct.create(\"div\", {\r\n\t\t\t\tnoShade: true,\r\n\t\t\t\tcolor: \"#000000\",\r\n\t\t\t\tclassName: \"ganttTaskLineHorizontalLeft\"\r\n\t\t\t}, this.ganttChart.panelNames.firstChild);\r\n\t\t\tdomStyle.set(LineHorizontalLeft, {\r\n\t\t\t\tleft: (pcTaskName.offsetLeft - 9) + \"px\",\r\n\t\t\t\ttop: (cTaskName.offsetTop + 5) + \"px\",\r\n\t\t\t\theight: \"1px\",\r\n\t\t\t\twidth: (cTaskName.offsetLeft - pcTaskName.offsetLeft + 4) + \"px\"\r\n\t\t\t});\r\n\t\t\tarrConnectingLinesNames.push(lineVerticalLeft);\r\n\t\t\tarrConnectingLinesNames.push(LineHorizontalLeft);\r\n\t\t\treturn arrConnectingLinesNames;\r\n\t\t},\r\n\t\tcreateConnectingLinesDS: function(){\r\n\t\t\tvar contentData = this.ganttChart.contentData.firstChild;\r\n\t\t\tvar arrLines = [];\r\n\t\t\tvar arrowImg = domConstruct.create(\"div\", {\r\n\t\t\t\tclassName: \"ganttImageArrow\"\r\n\t\t\t});\r\n\t\t\t//vertical line\r\n\t\t\tvar lineVerticalRight = document.createElement(\"div\");\r\n\t\t\t//horizontal line\r\n\t\t\tvar lineHorizontal = document.createElement(\"div\");\r\n\t\t\tvar posXPreviousTask = domStyle.get(this.predTask.cTaskItem[0], \"left\");\r\n\t\t\tvar posYPreviousTask = domStyle.get(this.predTask.cTaskItem[0], \"top\");\r\n\t\t\tvar posXChildTask = domStyle.get(this.cTaskItem[0], \"left\");\r\n\t\t\tvar posYChildTask = this.posY + 2;\r\n\t\t\t//width task item\r\n\t\t\tvar widthPreviousTask = parseInt(this.predTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\tif(posYPreviousTask < posYChildTask){\r\n\t\t\t\tdomClass.add(lineVerticalRight, \"ganttTaskLineVerticalRight\");\r\n\t\t\t\tdomStyle.set(lineVerticalRight, {\r\n\t\t\t\t\theight: (posYChildTask - this.ganttChart.heightTaskItem / 2 - posYPreviousTask - 3) + \"px\",\r\n\t\t\t\t\twidth: \"1px\",\r\n\t\t\t\t\tleft: (posXPreviousTask + widthPreviousTask - 20) + \"px\",\r\n\t\t\t\t\ttop: (posYPreviousTask + this.ganttChart.heightTaskItem) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomClass.add(lineHorizontal, \"ganttTaskLineHorizontal\");\r\n\t\t\t\tdomStyle.set(lineHorizontal, {\r\n\t\t\t\t\twidth: (15 + (posXChildTask - (widthPreviousTask + posXPreviousTask))) + \"px\",\r\n\t\t\t\t\tleft: (posXPreviousTask + widthPreviousTask - 20) + \"px\",\r\n\t\t\t\t\ttop: (posYChildTask + 2) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomClass.add(arrowImg, \"ganttTaskArrowImg\");\r\n\t\t\t\tdomStyle.set(arrowImg, {\r\n\t\t\t\t\tleft: (posXChildTask - 7) + \"px\",\r\n\t\t\t\t\ttop: (posYChildTask - 1) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tdomClass.add(lineVerticalRight, \"ganttTaskLineVerticalRightPlus\");\r\n\t\t\t\tdomStyle.set(lineVerticalRight, {\r\n\t\t\t\t\theight: (posYPreviousTask + 2 - posYChildTask) + \"px\",\r\n\t\t\t\t\twidth: \"1px\",\r\n\t\t\t\t\tleft: (posXPreviousTask + widthPreviousTask - 20) + \"px\",\r\n\t\t\t\t\ttop: (posYChildTask + 2) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomClass.add(lineHorizontal, \"ganttTaskLineHorizontalPlus\");\r\n\t\t\t\tdomStyle.set(lineHorizontal, {\r\n\t\t\t\t\twidth: (15 + (posXChildTask - (widthPreviousTask + posXPreviousTask))) + \"px\",\r\n\t\t\t\t\tleft: (posXPreviousTask + widthPreviousTask - 20) + \"px\",\r\n\t\t\t\t\ttop: (posYChildTask + 2) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomClass.add(arrowImg, \"ganttTaskArrowImgPlus\");\r\n\t\t\t\tdomStyle.set(arrowImg, {\r\n\t\t\t\t\tleft: (posXChildTask - 7) + \"px\",\r\n\t\t\t\t\ttop: (posYChildTask - 1) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontentData.appendChild(lineVerticalRight);\r\n\t\t\tcontentData.appendChild(lineHorizontal);\r\n\t\t\tcontentData.appendChild(arrowImg);\r\n\t\t\tarrLines.push(lineVerticalRight);\r\n\t\t\tarrLines.push(arrowImg);\r\n\t\t\tarrLines.push(lineHorizontal);\r\n\t\t\treturn arrLines;\r\n\t\t},\r\n\t\tshowChildTasks: function(task, isOpen){\r\n\t\t\tif(isOpen){\r\n\t\t\t\tfor(var i = 0; i < task.childTask.length; i++){\r\n\t\t\t\t\tvar cTask = task.childTask[i],\r\n\t\t\t\t\t\tcTaskItem0 = cTask.cTaskItem[0], cTaskName0 = cTask.cTaskNameItem[0],\r\n\t\t\t\t\t\tcTaskItem1 = cTask.cTaskItem[1], cTaskName1 = cTask.cTaskNameItem[1],\r\n\t\t\t\t\t\tcTaskName2 = cTask.cTaskNameItem[2];\r\n\t\t\t\t\tif(cTaskItem0.style.display == \"none\"){\r\n\t\t\t\t\t\tcTaskItem0.style.display = \"inline\";\r\n\t\t\t\t\t\tcTaskName0.style.display = \"inline\";\r\n\t\t\t\t\t\tcTask.showDescTask();\r\n\t\t\t\t\t\ttask.isHide = false;\r\n\t\t\t\t\t\tif(cTaskName2){\r\n\t\t\t\t\t\t\tcTaskName2.style.display = \"inline\";\r\n\t\t\t\t\t\t\tisOpen = cTask.isExpanded;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(var k = 0; k < cTaskItem1.length; k++){\r\n\t\t\t\t\t\t\tcTaskItem1[k].style.display = \"inline\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(var k = 0; k < cTaskName1.length; k++){\r\n\t\t\t\t\t\t\tcTaskName1[k].style.display = \"inline\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(cTask.taskIdentifier) && (cTask.taskIdentifier.style.display = \"inline\");\r\n\t\t\t\t\t\tthis.hideTasksHeight += this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t\t\tif(cTask.childTask.length > 0){\r\n\t\t\t\t\t\t\tthis.showChildTasks(cTask, isOpen);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thideChildTasks: function(task){\r\n\t\t\tfor(var i = 0; i < task.childTask.length; i++){\r\n\t\t\t\tvar cTask = task.childTask[i],\r\n\t\t\t\t\tcTaskItem0 = cTask.cTaskItem[0], cTaskName0 = cTask.cTaskNameItem[0],\r\n\t\t\t\t\tcTaskItem1 = cTask.cTaskItem[1], cTaskName1 = cTask.cTaskNameItem[1],\r\n\t\t\t\t\tcTaskName2 = cTask.cTaskNameItem[2];\r\n\t\t\t\tif(cTaskItem0.style.display != \"none\"){\r\n\t\t\t\t\tcTaskItem0.style.display = \"none\";\r\n\t\t\t\t\tcTaskName0.style.display = \"none\";\r\n\t\t\t\t\tcTask.hideDescTask();\r\n\t\t\t\t\ttask.isHide = true;\r\n\t\t\t\t\tif(cTaskName2){\r\n\t\t\t\t\t\tcTaskName2.style.display = \"none\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var k = 0; k < cTaskItem1.length; k++){\r\n\t\t\t\t\t\tcTaskItem1[k].style.display = \"none\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var k = 0; k < cTaskName1.length; k++){\r\n\t\t\t\t\t\tcTaskName1[k].style.display = \"none\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t(cTask.taskIdentifier) && (cTask.taskIdentifier.style.display = \"none\");\r\n\t\t\t\t\tthis.hideTasksHeight += (this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra);\r\n\t\t\t\t\tif(cTask.childTask.length > 0){\r\n\t\t\t\t\t\tthis.hideChildTasks(cTask);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftCurrentTasks: function(task, height){\r\n\t\t\tthis.shiftNextTask(this, height);\r\n\t\t\ttask.project.shiftNextProject(task.project, height);\r\n\t\t},\r\n\t\tshiftTask: function(task, height){\r\n\t\t\ttask.posY = task.posY + height;\r\n\t\t\tvar taskItem0 = task.cTaskItem[0], taskName0 = task.cTaskNameItem[0],\r\n\t\t\t\ttaskItem1 = task.cTaskItem[1], taskName1 = task.cTaskNameItem[1],\r\n\t\t\t\ttaskName2 = task.cTaskNameItem[2];\r\n\t\t\ttaskName0.style.top = parseInt(taskName0.style.top) + height + \"px\";\r\n\t\t\tif(taskName2){\r\n\t\t\t\ttaskName2.style.top = parseInt(taskName2.style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t\tif(task.parentTask){\r\n\t\t\t\tif(parseInt(this.cTaskNameItem[0].style.top) > parseInt(task.parentTask.cTaskNameItem[0].style.top) &&\r\n\t\t\t\t(taskName1[0].style.display != \"none\")){\r\n\t\t\t\t\ttaskName1[0].style.height = parseInt(taskName1[0].style.height) + height + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttaskName1[0].style.top = parseInt(taskName1[0].style.top) + height + \"px\";\r\n\t\t\t\t}\r\n\t\t\t\ttaskName1[1].style.top = parseInt(taskName1[1].style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t\ttaskItem0.style.top = parseInt(taskItem0.style.top) + height + \"px\";\r\n\t\t\ttask.descrTask.style.top = parseInt(task.descrTask.style.top) + height + \"px\";\r\n\t\t\tif(task.predTask){\r\n\t\t\t\tif(((parseInt(this.cTaskItem[0].style.top) > parseInt(task.predTask.cTaskItem[0].style.top)) ||\r\n\t\t\t\t(this.cTaskItem[0].id == task.predTask.taskItem.id)) &&\r\n\t\t\t\ttaskItem1[0].style.display != \"none\"){\r\n\t\t\t\t\ttaskItem1[0].style.height = parseInt(taskItem1[0].style.height) + height + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttaskItem1[0].style.top = parseInt(taskItem1[0].style.top) + height + \"px\";\r\n\t\t\t\t}\r\n\t\t\t\ttaskItem1[1].style.top = parseInt(taskItem1[1].style.top) + height + \"px\";\r\n\t\t\t\ttaskItem1[2].style.top = parseInt(taskItem1[2].style.top) + height + \"px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftNextTask: function(task, height){\r\n\t\t\tif(task.nextChildTask){\r\n\t\t\t\tthis.shiftTask(task.nextChildTask, height);\r\n\t\t\t\tthis.shiftChildTask(task.nextChildTask, height);\r\n\t\t\t\tthis.shiftNextTask(task.nextChildTask, height);\r\n\t\t\t}else if(task.parentTask){\r\n\t\t\t\tthis.shiftNextTask(task.parentTask, height);\r\n\t\t\t}else if(task.nextParentTask){\r\n\t\t\t\tthis.shiftTask(task.nextParentTask, height);\r\n\t\t\t\tthis.shiftChildTask(task.nextParentTask, height);\r\n\t\t\t\tthis.shiftNextTask(task.nextParentTask, height);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshiftChildTask: function(task, height){\r\n\t\t\tarrayUtil.forEach(task.childTask, function(cTask){\r\n\t\t\t\tthis.shiftTask(cTask, height);\r\n\t\t\t\tif(cTask.childTask.length > 0){\r\n\t\t\t\t\tthis.shiftChildTask(cTask, height);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\tendMove: function(){\r\n\t\t\tvar cTask0 = this.cTaskItem[0];\r\n\t\t\tvar width = domStyle.get(cTask0, \"left\") - this.posX;\r\n\t\t\tvar startTime = this.getDateOnPosition(domStyle.get(cTask0, \"left\"));\r\n\t\t\tstartTime = this.checkPos(startTime);\r\n\t\t\tif(this.checkMove){\r\n\t\t\t\twidth = this.ganttChart.getPosOnDate(startTime) - this.posX;\r\n\t\t\t\tthis.moveCurrentTaskItem(width, this.moveChild);\r\n\t\t\t\tthis.project.shiftProjectItem();\r\n\t\t\t}\r\n\t\t\tthis.checkMove = false;\r\n\t\t\tthis.posX = 0;\r\n\t\t\tthis.maxPosXMove = -1;\r\n\t\t\tthis.minPosXMove = -1;\r\n\t\t\tcTask0.childNodes[1].firstChild.rows[0].cells[0].innerHTML = \"\";\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t\tif(this.ganttChart.resource){\r\n\t\t\t\tthis.ganttChart.resource.refresh();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckPos: function(startTime){\r\n\t\t\tvar cTask0 = this.cTaskItem[0];\r\n\t\t\tvar h = startTime.getHours();\r\n\t\t\tif(h >= 12){\r\n\t\t\t\tstartTime.setDate(startTime.getDate() + 1);\r\n\t\t\t\tstartTime.setHours(0);\r\n\t\t\t\tif((parseInt(cTask0.firstChild.firstChild.width) + this.ganttChart.getPosOnDate(startTime) > this.maxPosXMove) && (this.maxPosXMove != -1)){\r\n\t\t\t\t\tstartTime.setDate(startTime.getDate() - 1);\r\n\t\t\t\t\tstartTime.setHours(0);\r\n\t\t\t\t}\r\n\t\t\t}else if((h < 12) && (h != 0)){\r\n\t\t\t\tstartTime.setHours(0);\r\n\t\t\t\tif((this.ganttChart.getPosOnDate(startTime) < this.minPosXMove)){\r\n\t\t\t\t\tstartTime.setDate(startTime.getDate() + 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcTask0.style.left = this.ganttChart.getPosOnDate(startTime) + \"px\";\r\n\t\t\treturn startTime;\r\n\t\t},\r\n\t\tgetMaxPosPredChildTaskItem: function(){\r\n\t\t\tvar posPredChildTaskItem = 0;\r\n\t\t\tvar nextPosPredChildTaskItem = 0;\r\n\t\t\tfor(var i = 0; i < this.childPredTask.length; i++){\r\n\t\t\t\tnextPosPredChildTaskItem = this.getMaxPosPredChildTaskItemInTree(this.childPredTask[i]);\r\n\t\t\t\tif(nextPosPredChildTaskItem > posPredChildTaskItem){\r\n\t\t\t\t\tposPredChildTaskItem = nextPosPredChildTaskItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn posPredChildTaskItem;\r\n\t\t},\r\n\t\tgetMaxPosPredChildTaskItemInTree: function(task){\r\n\t\t\tvar cTask0 = task.cTaskItem[0];\r\n\t\t\tvar currentPos = parseInt(cTask0.firstChild.firstChild.width) + domStyle.get(cTask0, \"left\");\r\n\t\t\tvar posPredChildTaskItem = 0;\r\n\t\t\tvar nextPosPredChildTaskItem = 0;\r\n\t\t\tarrayUtil.forEach(task.childPredTask, function(cpTask){\r\n\t\t\t\tnextPosPredChildTaskItem = this.getMaxPosPredChildTaskItemInTree(cpTask);\r\n\t\t\t\tif(nextPosPredChildTaskItem > posPredChildTaskItem){\r\n\t\t\t\t\tposPredChildTaskItem = nextPosPredChildTaskItem;\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\treturn posPredChildTaskItem > currentPos ? posPredChildTaskItem : currentPos;\r\n\t\t},\r\n\t\tmoveCurrentTaskItem: function(width, moveChild){\r\n\t\t\tvar taskItem = this.cTaskItem[0];\r\n\t\t\tthis.taskItem.startTime = new Date(this.ganttChart.startDate);\r\n\t\t\tthis.taskItem.startTime.setHours(this.taskItem.startTime.getHours() + (parseInt(taskItem.style.left) / this.ganttChart.pixelsPerHour));\r\n\t\t\tthis.showDescTask();\r\n\t\t\tvar cTask1 = this.cTaskItem[1];\r\n\t\t\tif(cTask1.length > 0){\r\n\t\t\t\tcTask1[2].style.width = parseInt(cTask1[2].style.width) + width + \"px\";\r\n\t\t\t\tcTask1[1].style.left = parseInt(cTask1[1].style.left) + width + \"px\";\r\n\t\t\t}\r\n\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\tif(!cTask.predTask){\r\n\t\t\t\t\tthis.moveChildTaskItems(cTask, width, moveChild);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tarrayUtil.forEach(this.childPredTask, function(cpTask){\r\n\t\t\t\tthis.moveChildTaskItems(cpTask, width, moveChild);\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\tmoveChildTaskItems: function(task, width, moveChild){\r\n\t\t\tvar taskItem = task.cTaskItem[0];\r\n\t\t\tif(moveChild){\r\n\t\t\t\ttaskItem.style.left = parseInt(taskItem.style.left) + width + \"px\";\r\n\t\t\t\ttask.adjustPanelTime();\r\n\t\t\t\ttask.taskItem.startTime = new Date(this.ganttChart.startDate);\r\n\t\t\t\ttask.taskItem.startTime.setHours(task.taskItem.startTime.getHours() + (parseInt(taskItem.style.left) / this.ganttChart.pixelsPerHour));\r\n\t\t\t\tvar ctItem = task.cTaskItem[1];\r\n\t\t\t\tarrayUtil.forEach(ctItem, function(item){\r\n\t\t\t\t\titem.style.left = parseInt(item.style.left) + width + \"px\";\r\n\t\t\t\t}, this);\r\n\t\t\t\tarrayUtil.forEach(task.childTask, function(cTask){\r\n\t\t\t\t\tif(!cTask.predTask){\r\n\t\t\t\t\t\tthis.moveChildTaskItems(cTask, width, moveChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tarrayUtil.forEach(task.childPredTask, function(cpTask){\r\n\t\t\t\t\tthis.moveChildTaskItems(cpTask, width, moveChild);\r\n\t\t\t\t}, this);\r\n\t\t\t}else{\r\n\t\t\t\tvar ctItem = task.cTaskItem[1];\r\n\t\t\t\tif(ctItem.length > 0){\r\n\t\t\t\t\tvar item0 = ctItem[0], item2 = ctItem[2];\r\n\t\t\t\t\titem2.style.left = parseInt(item2.style.left) + width + \"px\";\r\n\t\t\t\t\titem2.style.width = parseInt(item2.style.width) - width + \"px\";\r\n\t\t\t\t\titem0.style.left = parseInt(item0.style.left) + width + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttask.moveDescTask();\r\n\t\t},\r\n\t\tadjustPanelTime: function(){\r\n\t\t\tvar taskItem = this.cTaskItem[0];\r\n\t\t\tvar width = parseInt(taskItem.style.left) + parseInt(taskItem.firstChild.firstChild.width) + this.ganttChart.panelTimeExpandDelta;\r\n\t\t\twidth += this.descrTask.offsetWidth;\r\n\t\t\tthis.ganttChart.adjustPanelTime(width);\r\n\t\t},\r\n\t\tgetDateOnPosition: function(position){\r\n\t\t\tvar date = new Date(this.ganttChart.startDate);\r\n\t\t\tdate.setHours(date.getHours() + (position / this.ganttChart.pixelsPerHour));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tmoveItem: function(event){\r\n\t\t\tvar pageX = event.screenX;\r\n\t\t\tvar posTaskItem = (this.posX + (pageX - this.mouseX));\r\n\t\t\tvar widthTaskItem = parseInt(this.cTaskItem[0].childNodes[0].firstChild.width);\r\n\t\t\tvar posTaskItemR = posTaskItem + widthTaskItem;\r\n\t\t\tif(this.checkMove){\r\n\t\t\t\tif(((this.minPosXMove <= posTaskItem)) &&\r\n\t\t\t\t((posTaskItemR <= this.maxPosXMove) || (this.maxPosXMove == -1))){\r\n\t\t\t\t\tthis.moveTaskItem(posTaskItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveTaskItem: function(posX){\r\n\t\t\tvar cTask = this.cTaskItem[0];\r\n\t\t\tcTask.style.left = posX + \"px\";\r\n\t\t\tcTask.childNodes[1].firstChild.rows[0].cells[0].innerHTML = this.getDateOnPosition(posX).getDate() + '.' + (this.getDateOnPosition(posX).getMonth() + 1) + '.' + this.getDateOnPosition(posX).getUTCFullYear();\r\n\t\t},\r\n\t\tresizeItem: function(event){\r\n\t\t\tif(this.checkResize){\r\n\t\t\t\tvar mouseX = event.screenX;\r\n\t\t\t\tvar widthTaskItem = this.taskItemWidth + (mouseX - this.mouseX);\r\n\t\t\t\tif(widthTaskItem >= this.taskItemWidth){\r\n\t\t\t\t\tif((widthTaskItem <= this.maxWidthResize) || (this.maxWidthResize == -1)){\r\n\t\t\t\t\t\tthis.resizeTaskItem(widthTaskItem);\r\n\t\t\t\t\t}else if((this.maxWidthResize != -1) && (widthTaskItem > this.maxWidthResize)){\r\n\t\t\t\t\t\tthis.resizeTaskItem(this.maxWidthResize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(widthTaskItem <= this.taskItemWidth){\r\n\t\t\t\t\tif(widthTaskItem >= this.minWidthResize){\r\n\t\t\t\t\t\tthis.resizeTaskItem(widthTaskItem);\r\n\t\t\t\t\t}else if(widthTaskItem < this.minWidthResize){\r\n\t\t\t\t\t\tthis.resizeTaskItem(this.minWidthResize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresizeTaskItem: function(width){\r\n\t\t\tvar taskItem = this.cTaskItem[0];\r\n\t\t\tvar countHours = Math.round(width / this.ganttChart.pixelsPerWorkHour);\r\n\t\t\tvar trow = taskItem.childNodes[0].firstChild.rows[0],\r\n\t\t\t\trc0 = trow.cells[0], rc1 = trow.cells[1];\r\n\t\t\trc0 && (rc0.firstChild.style.width = parseInt(rc0.width) * width / 100 + \"px\");\r\n\t\t\trc1 && (rc1.firstChild.style.width = parseInt(rc1.width) * width / 100 + \"px\");\r\n\t\t\ttaskItem.childNodes[0].firstChild.width = width + \"px\";\r\n\t\t\ttaskItem.childNodes[1].firstChild.width = width + \"px\";\r\n\t\t\t//resize info\r\n\t\t\tthis.cTaskItem[0].childNodes[1].firstChild.rows[0].cells[0].innerHTML = countHours;\r\n\t\t\tvar tcNode2 = taskItem.childNodes[2];\r\n\t\t\ttcNode2.childNodes[0].style.width = width + \"px\";\r\n\t\t\ttcNode2.childNodes[1].style.left = width - 10 + \"px\";\r\n\t\t},\r\n\t\tendResizeItem: function(){\r\n\t\t\tvar taskItem = this.cTaskItem[0];\r\n\t\t\tif((this.taskItemWidth != parseInt(taskItem.childNodes[0].firstChild.width))){\r\n\t\t\t\tvar posXL = taskItem.offsetLeft;\r\n\t\t\t\tvar posXR = taskItem.offsetLeft + parseInt(taskItem.childNodes[0].firstChild.width);\r\n\t\t\t\tthis.taskItem.duration = Math.round((posXR - posXL) / this.ganttChart.pixelsPerWorkHour);\r\n\t\t\t\tif(this.childPredTask.length > 0){\r\n\t\t\t\t\tfor(var j = 0; j < this.childPredTask.length; j++){\r\n\t\t\t\t\t\tvar cpctItem = this.childPredTask[j].cTaskItem[1],\r\n\t\t\t\t\t\t\titem0 = cpctItem[0], item2 = cpctItem[2], tcNode0 = taskItem.childNodes[0];\r\n\t\t\t\t\t\titem2.style.width = parseInt(item2.style.width) - (parseInt(tcNode0.firstChild.width) - this.taskItemWidth) + \"px\";\r\n\t\t\t\t\t\titem2.style.left = parseInt(item2.style.left) + (parseInt(tcNode0.firstChild.width) - this.taskItemWidth) + \"px\";\r\n\t\t\t\t\t\titem0.style.left = parseInt(item0.style.left) + (parseInt(tcNode0.firstChild.width) - this.taskItemWidth) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.cTaskItem[0].childNodes[1].firstChild.rows[0].cells[0].innerHTML = \"\";\r\n\t\t\tthis.checkResize = false;\r\n\t\t\tthis.taskItemWidth = 0;\r\n\t\t\tthis.mouseX = 0;\r\n\t\t\tthis.showDescTask();\r\n\t\t\tthis.project.shiftProjectItem();\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t\tif(this.ganttChart.resource){\r\n\t\t\t\tthis.ganttChart.resource.refresh();\r\n\t\t\t}\r\n\t\t},\r\n\t\tstartMove: function(event){\r\n\t\t\tthis.moveChild = event.ctrlKey;\r\n\t\t\tthis.mouseX = event.screenX;\r\n\t\t\tthis.getMoveInfo();\r\n\t\t\tthis.checkMove = true;\r\n\t\t\tthis.hideDescTask();\r\n\t\t},\r\n\t\tshowDescTask: function(){\r\n\t\t\tvar posX = (parseInt(this.cTaskItem[0].style.left) + this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tthis.descrTask.style.left = posX + \"px\";\r\n\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\tthis.descrTask.style.visibility = 'visible';\r\n\t\t},\r\n\t\thideDescTask: function(){\r\n\t\t\tdomStyle.set(this.descrTask, \"visibility\", \"hidden\");\r\n\t\t},\r\n\t\tbuildResourceInfo: function(resourceInfo){\r\n\t\t\tif(this.childTask && this.childTask.length > 0){\r\n\t\t\t\tfor(var i = 0; i < this.childTask.length; i++){\r\n\t\t\t\t\tvar cTask = this.childTask[i];\r\n\t\t\t\t\tcTask.buildResourceInfo(resourceInfo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(lang.trim(this.taskItem.taskOwner).length > 0){\r\n\t\t\t\tvar owners = this.taskItem.taskOwner.split(\";\");\r\n\t\t\t\tfor(var i = 0; i < owners.length; i++){\r\n\t\t\t\t\tvar o = owners[i];\r\n\t\t\t\t\tif(lang.trim(o).length <= 0){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresourceInfo[o] ? (resourceInfo[o].push(this)) : (resourceInfo[o] = [this]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tobjKeyToStr: function(obj, delm){\r\n\t\t\tvar returnStr = \"\";\r\n\t\t\tdelm = delm || \" \";\r\n\t\t\tif(obj){\r\n\t\t\t\tfor(var key in obj){\r\n\t\t\t\t\treturnStr += delm + key;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn returnStr;\r\n\t\t},\r\n\t\tgetTaskOwner: function(){\r\n\t\t\tvar tOwner = {};\r\n\t\t\tif(lang.trim(this.taskItem.taskOwner).length > 0){\r\n\t\t\t\tvar owners = this.taskItem.taskOwner.split(\";\");\r\n\t\t\t\tfor(var i = 0; i < owners.length; i++){\r\n\t\t\t\t\tvar o = owners[i];\r\n\t\t\t\t\ttOwner[o] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarrayUtil.forEach(this.childTask, function(ctask){\r\n\t\t\t\tlang.mixin(tOwner, ctask.getTaskOwner());\r\n\t\t\t}, this);\r\n\t\t\treturn tOwner;\r\n\t\t},\r\n\t\tmoveDescTask: function(){\r\n\t\t\tvar posX = (parseInt(this.cTaskItem[0].style.left) + this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tthis.descrTask.style.left = posX + \"px\";\r\n\t\t},\r\n\t\tgetMoveInfo: function(){\r\n\t\t\tthis.posX = parseInt(this.cTaskItem[0].style.left);\r\n\t\t\tvar widthTaskItem = parseInt(this.cTaskItem[0].childNodes[0].firstChild.width);\r\n\t\t\tvar posParentTaskItem = !this.parentTask ? 0 : parseInt(this.parentTask.cTaskItem[0].style.left);\r\n\t\t\tvar posPredTaskItem = !this.predTask ? 0 : parseInt(this.predTask.cTaskItem[0].style.left) + parseInt(this.predTask.cTaskItem[0].childNodes[0].firstChild.width);\r\n\t\t\tvar widthParentTaskItem = !this.parentTask ? 0 : parseInt(this.parentTask.cTaskItem[0].childNodes[0].firstChild.width);\r\n\t\t\r\n\t\t\tvar childPredPosX = 0;\r\n\t\t\tvar childParentPosX = 0;\r\n\t\t\tvar childParentPosXR = 0;\r\n\t\t\tif(this.childPredTask.length > 0){\r\n\t\t\t\tvar posChildTaskItem = null;\r\n\t\t\t\tarrayUtil.forEach(this.childPredTask, function(cpTask){\r\n\t\t\t\t\tif((!posChildTaskItem) || ((posChildTaskItem) && (posChildTaskItem > parseInt(cpTask.cTaskItem[0].style.left)))){\r\n\t\t\t\t\t\tposChildTaskItem = parseInt(cpTask.cTaskItem[0].style.left);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildPredPosX = posChildTaskItem;\r\n\t\t\t}\r\n\t\t\tif(this.childTask.length > 0){\r\n\t\t\t\tvar posChildTaskItemR = null;\r\n\t\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\t\tif((!posChildTaskItemR) || ((posChildTaskItemR) && (posChildTaskItemR > (parseInt(cTask.cTaskItem[0].style.left))))){\r\n\t\t\t\t\t\tposChildTaskItemR = parseInt(cTask.cTaskItem[0].style.left);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildParentPosXR = posChildTaskItemR;\r\n\t\t\t\tvar posChildTaskItem = null;\r\n\t\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\t\tif((!posChildTaskItem) || ((posChildTaskItem)\r\n\t\t\t\t\t&& (posChildTaskItem < (parseInt(cTask.cTaskItem[0].style.left) + parseInt(cTask.cTaskItem[0].firstChild.firstChild.width))))){\r\n\t\t\t\t\t\tposChildTaskItem = parseInt(cTask.cTaskItem[0].style.left) + parseInt(cTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildParentPosX = posChildTaskItem;\r\n\t\t\t}\r\n\t\t\tif(!this.moveChild){\r\n\t\t\t\tif(this.childPredTask.length > 0){\r\n\t\t\t\t\tif(this.maxPosXMove < childPredPosX) this.maxPosXMove = childPredPosX;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.childTask.length > 0){\r\n\t\t\t\t\tif((this.childPredTask.length > 0) && (this.maxPosXMove - widthTaskItem) > childParentPosXR){\r\n\t\t\t\t\t\tthis.maxPosXMove = this.maxPosXMove - ((this.maxPosXMove - widthTaskItem) - childParentPosXR);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!(this.childPredTask.length > 0)){\r\n\t\t\t\t\t\tthis.maxPosXMove = childParentPosXR + widthTaskItem;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.minPosXMove = (childParentPosX - widthTaskItem);\r\n\t\t\t\t}\r\n\t\t\t\tif(posParentTaskItem > 0){\r\n\t\t\t\t\tif((!(this.childPredTask.length > 0)) && (this.childTask.length > 0)){\r\n\t\t\t\t\t\tif(this.maxPosXMove > posParentTaskItem + widthParentTaskItem){\r\n\t\t\t\t\t\t\tthis.maxPosXMove = posParentTaskItem + widthParentTaskItem;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.minPosXMove <= posParentTaskItem){\r\n\t\t\t\t\t\tthis.minPosXMove = posParentTaskItem;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif((!(this.childTask.length > 0)) && (!(this.childPredTask.length > 0))){\r\n\t\t\t\t\t\tthis.maxPosXMove = posParentTaskItem + widthParentTaskItem;\r\n\t\t\t\t\t}else if((!(this.childTask.length > 0)) && (this.childPredTask.length > 0)){\r\n\t\t\t\t\t\tif((posParentTaskItem + widthParentTaskItem) > posPredTaskItem){\r\n\t\t\t\t\t\t\tthis.maxPosXMove = childPredPosX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(posPredTaskItem > 0){\r\n\t\t\t\t\tif(this.minPosXMove <= posPredTaskItem){\r\n\t\t\t\t\t\tthis.minPosXMove = posPredTaskItem;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif((posPredTaskItem == 0) && (posParentTaskItem == 0)){\r\n\t\t\t\t\tif(this.minPosXMove <= this.ganttChart.initialPos){\r\n\t\t\t\t\t\tthis.minPosXMove = this.ganttChart.initialPos;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif((posParentTaskItem > 0) && (posPredTaskItem == 0)){\r\n\t\t\t\t\tthis.minPosXMove = posParentTaskItem;\r\n\t\t\t\t\tthis.maxPosXMove = posParentTaskItem + widthParentTaskItem;\r\n\t\t\t\t}else if((posParentTaskItem == 0) && (posPredTaskItem == 0)){\r\n\t\t\t\t\tthis.minPosXMove = this.ganttChart.initialPos;\r\n\t\t\t\t\tthis.maxPosXMove = -1;\r\n\t\t\t\t}else if((posParentTaskItem > 0) && (posPredTaskItem > 0)){\r\n\t\t\t\t\tthis.minPosXMove = posPredTaskItem;\r\n\t\t\t\t\tthis.maxPosXMove = posParentTaskItem + widthParentTaskItem;\r\n\t\t\t\t}else if((posParentTaskItem == 0) && (posPredTaskItem > 0)){\r\n\t\t\t\t\tthis.minPosXMove = posPredTaskItem;\r\n\t\t\t\t\tthis.maxPosXMove = -1;\r\n\t\t\t\t}\r\n\t\t\t\tif((this.parentTask) && (this.childPredTask.length > 0)){\r\n\t\t\t\t\tvar posChildTaskItem = this.getMaxPosPredChildTaskItem(this);\r\n\t\t\t\t\tvar posParentTaskItem = parseInt(this.parentTask.cTaskItem[0].style.left) + parseInt(this.parentTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\t\t\tthis.maxPosXMove = this.posX + widthTaskItem + posParentTaskItem - posChildTaskItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tstartResize: function(event){\r\n\t\t\tthis.mouseX = event.screenX;\r\n\t\t\tthis.getResizeInfo();\r\n\t\t\tthis.hideDescTask();\r\n\t\t\tthis.checkResize = true;\r\n\t\t\tthis.taskItemWidth = parseInt(this.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t},\r\n\t\tgetResizeInfo: function(){\r\n\t\t\tvar cTask = this.cTaskItem[0];\r\n\t\t\tvar posParentTaskItem = !this.parentTask ? 0 : parseInt(this.parentTask.cTaskItem[0].style.left);\r\n\t\t\tvar widthParentTaskItem = !this.parentTask ? 0 : parseInt(this.parentTask.cTaskItem[0].childNodes[0].firstChild.width);\r\n\t\t\tvar posTaskItem = parseInt(cTask.style.left);\r\n\t\t\tvar childPredPosX = 0;\r\n\t\t\tvar childParentPosX = 0;\r\n\t\t\tif(this.childPredTask.length > 0){\r\n\t\t\t\tvar posChildTaskItem = null;\r\n\t\t\t\tarrayUtil.forEach(this.childPredTask, function(cpTask){\r\n\t\t\t\t\tif((!posChildTaskItem) || ((posChildTaskItem) && (posChildTaskItem > parseInt(cpTask.cTaskItem[0].style.left)))){\r\n\t\t\t\t\t\tposChildTaskItem = parseInt(cpTask.cTaskItem[0].style.left);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildPredPosX = posChildTaskItem;\r\n\t\t\t}\r\n\t\t\tif(this.childTask.length > 0){\r\n\t\t\t\tvar posChildTaskItem = null;\r\n\t\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\t\tif((!posChildTaskItem) || ((posChildTaskItem) && (posChildTaskItem < (parseInt(cTask.cTaskItem[0].style.left) + parseInt(cTask.cTaskItem[0].firstChild.firstChild.width))))){\r\n\t\t\t\t\t\tposChildTaskItem = parseInt(cTask.cTaskItem[0].style.left) + parseInt(cTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildParentPosX = posChildTaskItem;\r\n\t\t\t}\r\n\t\t\tthis.minWidthResize = this.ganttChart.pixelsPerDay;\r\n\t\t\tif(this.childTask.length > 0){\r\n\t\t\t\tthis.minWidthResize = childParentPosX - posTaskItem;\r\n\t\t\t}\r\n\t\t\tif((this.childPredTask.length > 0) && (!this.parentTask)){\r\n\t\t\t\tthis.maxWidthResize = childPredPosX - posTaskItem;\r\n\t\t\t}else if((this.childPredTask.length > 0) && (this.parentTask)){\r\n\t\t\t\tvar w1 = posParentTaskItem + widthParentTaskItem - posTaskItem;\r\n\t\t\t\tvar w2 = childPredPosX - posTaskItem;\r\n\t\t\t\tthis.maxWidthResize = Math.min(w1, w2);\r\n\t\t\t}else if((this.childPredTask.length == 0) && (this.parentTask)){\r\n\t\t\t\tthis.maxWidthResize = posParentTaskItem + widthParentTaskItem - posTaskItem;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateTaskItem: function(){\r\n\t\t\tthis.posX = this.ganttChart.getPosOnDate(this.taskItem.startTime);\r\n\t\t\tvar itemControl = domConstruct.create(\"div\", {\r\n\t\t\t\tid: this.taskItem.id,\r\n\t\t\t\tclassName: \"ganttTaskItemControl\"\r\n\t\t\t});\r\n\t\t\tdomStyle.set(itemControl, {\r\n\t\t\t\tleft: this.posX + \"px\",\r\n\t\t\t\ttop: this.posY + \"px\"\r\n\t\t\t});\r\n\t\t\tvar divTaskItem = domConstruct.create(\"div\", {className: \"ganttTaskDivTaskItem\"}, itemControl);\r\n\t\t\tvar tblTaskItem = domConstruct.create(\"table\", {\r\n\t\t\t\tcellPadding: \"0\",\r\n\t\t\t\tcellSpacing: \"0\",\r\n\t\t\t\twidth: this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + \"px\",\r\n\t\t\t\tclassName: \"ganttTaskTblTaskItem\"\r\n\t\t\t}, divTaskItem);\r\n\t\t\tvar rowTblTask = tblTaskItem.insertRow(tblTaskItem.rows.length);\r\n\t\t\tif(this.taskItem.percentage != 0){\r\n\t\t\t\tvar cellTblTask = domConstruct.create(\"td\", {\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\twidth: this.taskItem.percentage + \"%\"\r\n\t\t\t\t}, rowTblTask);\r\n\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgress = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"ganttImageTaskProgressFilled\"\r\n\t\t\t\t}, cellTblTask);\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: (this.taskItem.percentage * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(this.taskItem.percentage != 100){\r\n\t\t\t\tvar cellTblTask = domConstruct.create(\"td\", {\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\twidth: (100 - this.taskItem.percentage) + \"%\"\r\n\t\t\t\t}, rowTblTask);\r\n\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgressFill = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"ganttImageTaskProgressBg\"\r\n\t\t\t\t}, cellTblTask);\r\n\t\t\t\tdomStyle.set(imageProgressFill, {\r\n\t\t\t\t\twidth: ((100 - this.taskItem.percentage) * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(this.ganttChart.isContentEditable){\r\n\t\t\t\tvar divTaskInfo = domConstruct.create(\"div\", {className: \"ganttTaskDivTaskInfo\"}, itemControl);\r\n\t\t\t\tvar tblTaskInfo = domConstruct.create(\"table\", {\r\n\t\t\t\t\tcellPadding: \"0\",\r\n\t\t\t\t\tcellSpacing: \"0\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\twidth: this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + \"px\"\r\n\t\t\t\t}, divTaskInfo);\r\n\t\t\t\tvar rowTaskInfo = tblTaskInfo.insertRow(0);\r\n\t\t\t\tvar cellTaskInfo = domConstruct.create(\"td\", {\r\n\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\tvAlign: \"top\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\tclassName: \"ganttMoveInfo\"\r\n\t\t\t\t}, rowTaskInfo);\r\n\t\t\t\tvar divTaskName = domConstruct.create(\"div\", {className: \"ganttTaskDivTaskName\"}, itemControl);\r\n\t\t\t\tvar divMove = domConstruct.create(\"div\", {}, divTaskName);\r\n\t\t\t\tdomConstruct.create(\"input\", {\r\n\t\t\t\t\tclassName: \"ganttTaskDivMoveInput\",\r\n\t\t\t\t\ttype: \"text\"\r\n\t\t\t\t}, divMove);\r\n\t\t\t\tdomStyle.set(divMove, {\r\n\t\t\t\t\tbackground: \"#000000\",\r\n\t\t\t\t\topacity: 0\r\n\t\t\t\t});\r\n\t\t\t\tdomStyle.set(divMove, {\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\twidth: this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\t//Creation resize area\r\n\t\t\t\tvar divResize = domConstruct.create(\"div\", {className: \"ganttTaskDivResize\"}, divTaskName);\r\n\t\t\t\tdomConstruct.create(\"input\", {\r\n\t\t\t\t\tclassName: \"ganttTaskDivResizeInput\",\r\n\t\t\t\t\ttype: \"text\"\r\n\t\t\t\t}, divResize);\r\n\t\t\t\tdomStyle.set(divResize, {\r\n\t\t\t\t\tleft: (this.taskItem.duration * this.ganttChart.pixelsPerWorkHour - 10) + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\twidth: \"10px\"\r\n\t\t\t\t});\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divMove, \"mousedown\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\t//start move\r\n\t\t\t\t\t\tthis.moveMoveConn = on(document, \"mousemove\", lang.hitch(this, function(e){\r\n\t\t\t\t\t\t\tthis.checkMove && this.moveItem(e);\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\tthis.moveUpConn = on(document, \"mouseup\", lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tif(this.checkMove){\r\n\t\t\t\t\t\t\t\tthis.endMove();\r\n\t\t\t\t\t\t\t\tthis.ganttChart.isMoving = false;\r\n\t\t\t\t\t\t\t\tdocument.body.releaseCapture && document.body.releaseCapture();\r\n\t\t\t\t\t\t\t\tthis.moveMoveConn.remove();\r\n\t\t\t\t\t\t\t\tthis.moveUpConn.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\tthis.startMove(event);\r\n\t\t\t\t\t\tthis.ganttChart.isMoving = true;\r\n\t\t\t\t\t\tdocument.body.setCapture && document.body.setCapture(false);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divMove, \"mouseover\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tevent.target && (event.target.style.cursor = \"move\");\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divMove, \"mouseout\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tevent.target.style.cursor = \"\";\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divResize, \"mousedown\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\t//start resize\r\n\t\t\t\t\t\tthis.resizeMoveConn = on(document, \"mousemove\", lang.hitch(this, function(e){\r\n\t\t\t\t\t\t\tthis.checkResize && this.resizeItem(e);\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\tthis.resizeUpConn = on(document, \"mouseup\", lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tif(this.checkResize){\r\n\t\t\t\t\t\t\t\tthis.endResizeItem();\r\n\t\t\t\t\t\t\t\tthis.ganttChart.isResizing = false;\r\n\t\t\t\t\t\t\t\tdocument.body.releaseCapture && document.body.releaseCapture();\r\n\t\t\t\t\t\t\t\tthis.resizeMoveConn.remove();\r\n\t\t\t\t\t\t\t\tthis.resizeUpConn.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\tthis.startResize(event);\r\n\t\t\t\t\t\tthis.ganttChart.isResizing = true;\r\n\t\t\t\t\t\tdocument.body.setCapture && document.body.setCapture(false);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divResize, \"mouseover\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\t(!this.ganttChart.isMoving) && (!this.ganttChart.isResizing) && event.target && (event.target.style.cursor = \"e-resize\");\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divResize, \"mouseout\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\t!this.checkResize && event.target && (event.target.style.cursor = \"\");\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn itemControl;\r\n\t\t},\r\n\t\tcreateTaskNameItem: function(){\r\n\t\t\tvar divName = domConstruct.create(\"div\", {\r\n\t\t\t\tid: this.taskItem.id,\r\n\t\t\t\tclassName: \"ganttTaskTaskNameItem\",\r\n\t\t\t\ttitle: this.taskItem.name + \", id: \" + this.taskItem.id + \" \",\r\n\t\t\t\tinnerHTML: this.taskItem.name\r\n\t\t\t});\r\n\t\t\tdomStyle.set(divName, \"top\", this.posY + \"px\");\r\n\t\t\tdomAttr.set(divName, \"tabIndex\", 0);\r\n\t\t\tif(this.ganttChart.isShowConMenu){\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"mouseover\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tdomClass.add(divName, \"ganttTaskTaskNameItemHover\");\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.tabMenu.clear();\r\n\t\t\t\t\t\tthis.ganttChart.tabMenu.show(event.target, this);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"keydown\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tif(event.keyCode == keys.ENTER){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.clear();\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.show(event.target, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && (event.keyCode == keys.LEFT_ARROW || event.keyCode == keys.RIGHT_ARROW)){\r\n\t\t\t\t\t\t\tfocus(this.ganttChart.tabMenu.menuPanel.firstChild.rows[0].cells[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && event.keyCode == keys.ESCAPE){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(divName, \"mouseout\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tdomClass.remove(divName, \"ganttTaskTaskNameItemHover\");\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.menuTimer = setTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}), 200);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"mouseover\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"keydown\", lang.hitch(this, function(event){\r\n\t\t\t\t\t\tif(this.ganttChart.tabMenu.isShow && event.keyCode == keys.ESCAPE){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(this.ganttChart.tabMenu.menuPanel, \"mouseout\", lang.hitch(this, function(){\r\n\t\t\t\t\t\tclearTimeout(this.ganttChart.menuTimer);\r\n\t\t\t\t\t\tthis.ganttChart.menuTimer = setTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\t\t\tthis.ganttChart.tabMenu.hide();\r\n\t\t\t\t\t\t}), 200);\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn divName;\r\n\t\t},\r\n\t\tcreateTaskDescItem: function(){\r\n\t\t\tvar posX = (this.posX + this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tvar divDesc = domConstruct.create(\"div\", {\r\n\t\t\t\tinnerHTML: this.objKeyToStr(this.getTaskOwner()),\r\n\t\t\t\tclassName: \"ganttTaskDescTask\"\r\n\t\t\t});\r\n\t\t\tdomStyle.set(divDesc, {\r\n\t\t\t\tleft: posX + \"px\",\r\n\t\t\t\ttop: this.posY + \"px\"\r\n\t\t\t});\r\n\t\t\treturn this.descrTask = divDesc;\r\n\t\t},\r\n\t\tcheckWidthTaskNameItem: function(){\r\n\t\t\tif(this.cTaskNameItem[0].offsetWidth + this.cTaskNameItem[0].offsetLeft > this.ganttChart.maxWidthTaskNames){\r\n\t\t\t\tvar width = this.cTaskNameItem[0].offsetWidth + this.cTaskNameItem[0].offsetLeft - this.ganttChart.maxWidthTaskNames;\r\n\t\t\t\tvar countChar = Math.round(width / (this.cTaskNameItem[0].offsetWidth / this.cTaskNameItem[0].firstChild.length));\r\n\t\t\t\tvar tName = this.taskItem.name.substring(0, this.cTaskNameItem[0].firstChild.length - countChar - 3);\r\n\t\t\t\ttName += \"...\";\r\n\t\t\t\tthis.cTaskNameItem[0].innerHTML = tName;\r\n\t\t\t}\r\n\t\t},\r\n\t\trefreshTaskItem: function(itemControl){\r\n\t\t\tthis.posX = this.ganttChart.getPosOnDate(this.taskItem.startTime);\r\n\t\t\tdomStyle.set(itemControl, {\r\n\t\t\t\t\"left\": this.posX + \"px\"\r\n\t\t\t});\r\n\t\t\tvar divTaskItem = itemControl.childNodes[0];\r\n\t\t\tvar tblTaskItem = divTaskItem.firstChild;\r\n\t\t\ttblTaskItem.width = (!this.taskItem.duration ? 1 : this.taskItem.duration * this.ganttChart.pixelsPerWorkHour) + \"px\";\r\n\t\t\tvar rowTblTask = tblTaskItem.rows[0];\r\n\t\t\tif(this.taskItem.percentage != 0){\r\n\t\t\t\tvar cellTblTask = rowTblTask.firstChild;\r\n\t\t\t\tcellTblTask.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tcellTblTask.width = this.taskItem.percentage + \"%\";\r\n\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgress = cellTblTask.firstChild;\r\n\t\t\t\tdomStyle.set(imageProgress, {\r\n\t\t\t\t\twidth: (!this.taskItem.duration ? 1 : (this.taskItem.percentage * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour / 100)) + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(this.taskItem.percentage != 100){\r\n\t\t\t\tvar cellTblTask = rowTblTask.lastChild;\r\n\t\t\t\tcellTblTask.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tcellTblTask.width = (100 - this.taskItem.percentage) + \"%\";\r\n\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\tvar imageProgressFill = cellTblTask.firstChild;\r\n\t\t\t\tdomStyle.set(imageProgressFill, {\r\n\t\t\t\t\twidth: (!this.taskItem.duration ? 1 : ((100 - this.taskItem.percentage) * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour / 100)) + \"px\",\r\n\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(this.ganttChart.isContentEditable){\r\n\t\t\t\tvar divTaskInfo = itemControl.childNodes[1];\r\n\t\t\t\tvar tblTaskInfo = divTaskInfo.firstChild;\r\n\t\t\t\ttblTaskInfo.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\ttblTaskInfo.width = (!this.taskItem.duration ? 1 : (this.taskItem.duration * this.ganttChart.pixelsPerWorkHour)) + \"px\";\r\n\t\t\t\tvar rowTaskInfo = tblTaskInfo.rows[0];\r\n\t\t\t\tvar cellTaskInfo = rowTaskInfo.firstChild;\r\n\t\t\t\tcellTaskInfo.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tvar divTaskName = itemControl.childNodes[2];\r\n\t\t\t\tvar divMove = divTaskName.firstChild;\r\n\t\t\t\tdivMove.style.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tdivMove.style.width = (!this.taskItem.duration ? 1 : (this.taskItem.duration * this.ganttChart.pixelsPerWorkHour)) + \"px\";\r\n\t\t\t\t//Creation resize area\r\n\t\t\t\tvar divResize = divTaskName.lastChild;\r\n\t\t\t\tdomStyle.set(divResize, {\r\n\t\t\t\t\t\"left\": (this.taskItem.duration * this.ganttChart.pixelsPerWorkHour - 10) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdivResize.style.height = this.ganttChart.heightTaskItem + \"px\";\r\n\t\t\t\tdivResize.style.width = \"10px\";\r\n\t\t\t}\r\n\t\t\treturn itemControl;\r\n\t\t},\r\n\t\trefreshTaskDesc: function(divDesc){\r\n\t\t\tvar posX = (this.posX + this.taskItem.duration * this.ganttChart.pixelsPerWorkHour + 10);\r\n\t\t\tdomStyle.set(divDesc, {\r\n\t\t\t\t\"left\": posX + \"px\"\r\n\t\t\t});\r\n\t\t\treturn divDesc;\r\n\t\t},\r\n\t\trefreshConnectingLinesDS: function(arrLines){\r\n\t\t\tvar arrowImg = arrLines[1];\r\n\t\t\tvar lineVerticalRight = arrLines[0];\r\n\t\t\t//horizontal line\r\n\t\t\tvar lineHorizontal = arrLines[2];\r\n\t\t\tvar posXPreviousTask = domStyle.get(this.predTask.cTaskItem[0], \"left\");\r\n\t\t\tvar posYPreviousTask = domStyle.get(this.predTask.cTaskItem[0], \"top\");\r\n\t\t\tvar posXChildTask = domStyle.get(this.cTaskItem[0], \"left\");\r\n\t\t\tvar posYChildTask = this.posY + 2;\r\n\t\t\t//width task item\r\n\r\n\t\t\tvar widthPreviousTask = parseInt(this.predTask.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\tif(posYPreviousTask < posYChildTask){\r\n\t\t\t\tdomStyle.set(lineVerticalRight, {\r\n\t\t\t\t\t\"height\": (posYChildTask - this.ganttChart.heightTaskItem / 2 - posYPreviousTask - 3) + \"px\",\r\n\t\t\t\t\t\"left\": (posXPreviousTask + widthPreviousTask - 20) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomStyle.set(lineHorizontal, {\r\n\t\t\t\t\t\"width\": (15 + (posXChildTask - (widthPreviousTask + posXPreviousTask))) + \"px\",\r\n\t\t\t\t\t\"left\": (posXPreviousTask + widthPreviousTask - 20) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\tdomStyle.set(arrowImg, {\r\n\t\t\t\t\t\"left\": (posXChildTask - 7) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tdomStyle.set(lineVerticalRight, {\r\n\t\t\t\t\t\"height\": (posYPreviousTask + 2 - posYChildTask) + \"px\",\r\n\t\t\t\t\t\"left\": (posXPreviousTask + widthPreviousTask - 20) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomStyle.set(lineHorizontal, {\r\n\t\t\t\t\t\"width\": (15 + (posXChildTask - (widthPreviousTask + posXPreviousTask))) + \"px\",\r\n\t\t\t\t\t\"left\": (posXPreviousTask + widthPreviousTask - 20) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\tdomStyle.set(arrowImg, {\r\n\t\t\t\t\t\"left\": (posXChildTask - 7) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn arrLines;\r\n\t\t},\r\n\t\tpostLoadData: function(){\r\n\t\t\t//TODO e.g. task relative info...\r\n\t\t},\r\n\t\trefresh: function(){\r\n\t\t\tif(this.childTask && this.childTask.length > 0){\r\n\t\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\t\tcTask.refresh();\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t\t//creation task item\r\n\t\t\tthis.refreshTaskItem(this.cTaskItem[0]);\r\n\t\t\tthis.refreshTaskDesc(this.cTaskItem[0].nextSibling);\r\n\t\t\t//Create Connecting Lines\r\n\r\n\t\t\tif(this.taskItem.previousTask && this.predTask){\r\n\t\t\t\tthis.refreshConnectingLinesDS(this.cTaskItem[1]);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tcreate: function(){\r\n\t\t\tvar containerTasks = this.ganttChart.contentData.firstChild;\r\n\r\n\t\t\tvar previousTask = this.taskItem.previousTask;\r\n\t\t\tvar parentTask = this.taskItem.parentTask;\r\n\t\t\tvar isCParentTask = (this.taskItem.cldTasks.length > 0);\r\n\t\t\tthis.cTaskItem = [];\r\n\t\t\tthis.cTaskNameItem = [];\r\n\t\t\t//creation arrTasks\r\n\t\t\tif(!parentTask){\r\n\t\t\t\tif(this.taskItem.previousParentTask){\r\n\t\t\t\t\tthis.previousParentTask = this.project.getTaskById(this.taskItem.previousParentTask.id);\r\n\t\t\t\t\tvar lastChildTask = this.ganttChart.getLastChildTask(this.previousParentTask);\r\n\t\t\t\t\tthis.posY = parseInt(lastChildTask.cTaskItem[0].style.top)\r\n\t\t\t\t\t\t+ this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t\tthis.previousParentTask.nextParentTask = this;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.posY = parseInt(this.project.projectItem[0].style.top)\r\n\t\t\t\t\t\t+ this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(parentTask){\r\n\t\t\t\tvar task = this.project.getTaskById(this.taskItem.parentTask.id);\r\n\t\t\t\tthis.parentTask = task;\r\n\t\t\t\r\n\t\t\t\tif(this.taskItem.previousChildTask){\r\n\t\t\t\t\tthis.previousChildTask = this.project.getTaskById(this.taskItem.previousChildTask.id);\r\n\t\t\t\t\tvar lastChildTask = this.ganttChart.getLastChildTask(this.previousChildTask);\r\n\t\t\t\t\tthis.posY = domStyle.get(lastChildTask.cTaskItem[0], \"top\")\r\n\t\t\t\t\t\t+ this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t\tthis.previousChildTask.nextChildTask = this;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.posY = domStyle.get(task.cTaskItem[0], \"top\")\r\n\t\t\t\t\t\t+ this.ganttChart.heightTaskItem + this.ganttChart.heightTaskItemExtra;\r\n\t\t\t\t}\r\n\t\t\t\ttask.childTask.push(this);\r\n\t\t\t}\r\n\t\t\tif(previousTask){\r\n\t\t\t\tvar task = this.project.getTaskById(previousTask.id);\r\n\t\t\t\tthis.predTask = task;\r\n\t\t\t\ttask.childPredTask.push(this);\r\n\t\t\t}\r\n\t\t\t//creation task item\r\n\t\t\tthis.cTaskItem.push(this.createTaskItem());\r\n\t\t\tcontainerTasks.appendChild(this.cTaskItem[0]);\r\n\t\t\tif(this.ganttChart.panelNames){\r\n\t\t\t\tthis.cTaskNameItem.push(this.createTaskNameItem());\r\n\t\t\t\tthis.ganttChart.panelNames.firstChild.appendChild(this.cTaskNameItem[0]);\r\n\t\t\t}\r\n\t\t\tcontainerTasks.appendChild(this.createTaskDescItem());\r\n\t\t\t//Create Connecting Lines\r\n\t\t\tvar arrConnectingLines = [];\r\n\t\t\tif(previousTask){\r\n\t\t\t\tarrConnectingLines = this.createConnectingLinesDS();\r\n\t\t\t}\r\n\t\t\tthis.cTaskItem.push(arrConnectingLines);\r\n\t\t\tif(this.ganttChart.panelNames){\r\n\t\t\t\t//Create Connecting Lines\r\n\t\t\t\tvar arrConnectingLinesNames = [];\r\n\t\t\t\tif(parentTask){\r\n\t\t\t\t\tthis.cTaskNameItem[0].style.left = domStyle.get(this.parentTask.cTaskNameItem[0], \"left\") + 15 + \"px\";\r\n\t\t\t\t\tarrConnectingLinesNames = this.createConnectingLinesPN();\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkWidthTaskNameItem();\r\n\t\t\t\t//Identifier\r\n\t\t\t\tthis.checkPosition();\r\n\t\t\t\tvar treeImg = null;\r\n\t\t\t\tif(isCParentTask){\r\n\t\t\t\t\ttreeImg = this.createTreeImg();\r\n\t\t\t\t}\r\n\t\t\t\tthis.cTaskNameItem.push(arrConnectingLinesNames);\r\n\t\t\t\tthis.cTaskNameItem.push(treeImg);\r\n\t\t\t}\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tcheckPosition: function(){\r\n\t\t\t//task name position: check Task Identifier\r\n\t\t\tif(!this.ganttChart.withTaskId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar pos = domGeometry.getMarginBox(this.cTaskNameItem[0], true);\r\n\t\t\tif(this.taskIdentifier){\r\n\t\t\t\tif(this.childTask && this.childTask.length > 0){\r\n\t\t\t\t\tarrayUtil.forEach(this.childTask, function(cTask){\r\n\t\t\t\t\t\tcTask.checkPosition();\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\t\t\t\tdomStyle.set(this.taskIdentifier, {\r\n\t\t\t\t\t\"left\": (pos.l + pos.w + 4) + \"px\",\r\n\t\t\t\t\t\"top\": (pos.t - 1) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.taskIdentifier = domConstruct.create(\"div\", {\r\n\t\t\t\t\tid: \"TaskId_\" + this.taskItem.id,\r\n\t\t\t\t\tclassName: \"ganttTaskIdentifier\",\r\n\t\t\t\t\ttitle: this.taskItem.id,\r\n\t\t\t\t\tinnerHTML: this.taskItem.id\r\n\t\t\t\t}, this.cTaskNameItem[0].parentNode);\r\n\t\t\t\tdomStyle.set(this.taskIdentifier, {\r\n\t\t\t\t\tleft: (pos.l + pos.w + 4) + \"px\",\r\n\t\t\t\t\ttop: (pos.t - 1) + \"px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateTreeImg: function(){\r\n\t\t\tvar treeImg = domConstruct.create(\"div\", {\r\n\t\t\t\tid: this.taskItem.id,\r\n\t\t\t\tclassName: \"ganttImageTreeCollapse\"\r\n\t\t\t});\r\n\t\t\tdomAttr.set(treeImg, \"tabIndex\", 0);\r\n\t\t\tarrayUtil.forEach([\"click\", \"keydown\"], function(e){\r\n\t\t\t\tthis.ganttChart._events.push(\r\n\t\t\t\t\ton(treeImg, e, lang.hitch(this, function(evt){\r\n\t\t\t\t\t\tif(e == \"keydown\" && evt.keyCode != keys.ENTER){ return; }\r\n\t\t\t\t\t\tif(this.isExpanded){\r\n\t\t\t\t\t\t\tdomClass.remove(treeImg, \"ganttImageTreeCollapse\");\r\n\t\t\t\t\t\t\tdomClass.add(treeImg, \"ganttImageTreeExpand\");\r\n\t\t\t\t\t\t\tthis.isExpanded = false;\r\n\t\t\t\t\t\t\tthis.hideChildTasks(this);\r\n\t\t\t\t\t\t\tthis.shiftCurrentTasks(this, -this.hideTasksHeight);\r\n\t\t\t\t\t\t\tthis.ganttChart.checkPosition();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tdomClass.remove(treeImg, \"ganttImageTreeExpand\");\r\n\t\t\t\t\t\t\tdomClass.add(treeImg, \"ganttImageTreeCollapse\");\r\n\t\t\t\t\t\t\tthis.isExpanded = true;\r\n\t\t\t\t\t\t\tthis.shiftCurrentTasks(this, this.hideTasksHeight);\r\n\t\t\t\t\t\t\tthis.showChildTasks(this, true);\r\n\t\t\t\t\t\t\tthis.hideTasksHeight = 0;\r\n\t\t\t\t\t\t\tthis.ganttChart.checkPosition();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}, this);\r\n\t\t\tthis.ganttChart.panelNames.firstChild.appendChild(treeImg);\r\n\t\t\tdomClass.add(treeImg, \"ganttTaskTreeImage\");\r\n\t\t\tdomStyle.set(treeImg, {\r\n\t\t\t\tleft: (domStyle.get(this.cTaskNameItem[0], \"left\") - 12) + \"px\",\r\n\t\t\t\ttop: (domStyle.get(this.cTaskNameItem[0], \"top\") + 3) + \"px\"\r\n\t\t\t});\r\n\t\t\treturn treeImg;\r\n\t\t},\r\n\t\tsetPreviousTask: function(previousTaskId){\r\n\t\t\tif(previousTaskId == \"\"){\r\n\t\t\t\tthis.clearPredTask();\r\n\t\t\t}else{\r\n\t\t\t\tvar task = this.taskItem;\r\n\t\t\t\tif(task.id == previousTaskId){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar predTaskObj = this.project.getTaskById(previousTaskId);\r\n\t\t\t\tif(!predTaskObj){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar predTask = predTaskObj.taskItem;\r\n\t\t\t\tvar a1 = predTask.parentTask == null, a2 = task.parentTask == null;\r\n\t\t\t\tif(a1 && !a2 || !a1 && a2 || !a1 && !a2 && (predTask.parentTask.id != task.parentTask.id)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t//check time\r\n\t\t\t\tvar startTime = task.startTime.getTime(),\r\n\t\t\t\t\tpest = predTask.startTime.getTime(),\r\n\t\t\t\t\tpdur = predTask.duration * 24 * 60 * 60 * 1000 / predTaskObj.ganttChart.hsPerDay;\r\n\t\t\t\tif((pest+pdur) > startTime){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t// remove current connection\r\n\t\t\t\tthis.clearPredTask();\r\n\t\t\t\tif(!this.ganttChart.checkPosPreviousTask(predTask, task)){\r\n\t\t\t\t\tthis.ganttChart.correctPosPreviousTask(predTask, task, this);\r\n\t\t\t\t}\r\n\t\t\t\ttask.previousTaskId = previousTaskId;\r\n\t\t\t\ttask.previousTask = predTask;\r\n\t\t\t\tthis.predTask = predTaskObj;\r\n\t\t\t\tpredTaskObj.childPredTask.push(this);\r\n\t\t\t\tthis.cTaskItem[1] = this.createConnectingLinesDS();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tclearPredTask: function(){\r\n\t\t\tif(this.predTask){\r\n\t\t\t\tvar ch = this.predTask.childPredTask;\r\n\t\t\t\tfor(var i = 0; i < ch.length; i++){\r\n\t\t\t\t\tif(ch[i] == this){\r\n\t\t\t\t\t\tch.splice(i, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0; i < this.cTaskItem[1].length; i++){\r\n\t\t\t\t\tthis.cTaskItem[1][i].parentNode.removeChild(this.cTaskItem[1][i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.cTaskItem[1] = [];\r\n\t\t\t\tthis.taskItem.previousTaskId = null;\r\n\t\t\t\tthis.taskItem.previousTask = null;\r\n\t\t\t\tthis.predTask = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetStartTime: function(startTime, shiftChild){\r\n\t\t\tthis.moveChild = shiftChild;\r\n\t\t\tthis.getMoveInfo();\r\n\t\t\tvar pos = this.ganttChart.getPosOnDate(startTime);\r\n\t\t\tif((parseInt(this.cTaskItem[0].firstChild.firstChild.width) + pos > this.maxPosXMove) && (this.maxPosXMove != -1)){\r\n\t\t\t\tthis.maxPosXMove = -1;\r\n\t\t\t\tthis.minPosXMove = -1;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(pos < this.minPosXMove){\r\n\t\t\t\tthis.maxPosXMove = -1;\r\n\t\t\t\tthis.minPosXMove = -1;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.cTaskItem[0].style.left = pos;\r\n\t\t\tvar width = pos - this.posX;\r\n\t\t\tthis.moveCurrentTaskItem(width, shiftChild);\r\n\t\t\tthis.project.shiftProjectItem();\r\n\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\tthis.adjustPanelTime();\r\n\t\t\tthis.posX = 0;\r\n\t\t\tthis.maxPosXMove = -1;\r\n\t\t\tthis.minPosXMove = -1;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tsetDuration: function(duration){\r\n\t\t\tthis.getResizeInfo();\r\n\t\t\tvar width = this.ganttChart.getWidthOnDuration(duration);\r\n\t\t\tif((width > this.maxWidthResize) && (this.maxWidthResize != -1)){\r\n\t\t\t\treturn false;\r\n\t\t\t}else if(width < this.minWidthResize){\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\tthis.taskItemWidth = parseInt(this.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\t\tthis.resizeTaskItem(width);\r\n\t\t\t\tthis.endResizeItem();\r\n\t\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetTaskOwner: function(owner){\r\n\t\t\towner = (owner == null || owner == undefined) ? \"\" : owner;\r\n\t\t\tthis.taskItem.taskOwner = owner;\r\n\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tsetPercentCompleted: function(percentage){\r\n\t\t\tpercentage = parseInt(percentage);\r\n\t\t\tif(isNaN(percentage) || percentage > 100 || percentage < 0){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar trow = this.cTaskItem[0].childNodes[0].firstChild.rows[0],\r\n\t\t\t\trc0 = trow.cells[0], rc1 = trow.cells[1];\r\n\t\t\tif((percentage != 0) && (percentage != 100)){\r\n\t\t\t\tif((this.taskItem.percentage != 0) && (this.taskItem.percentage != 100)){\r\n\t\t\t\t\trc0.width = percentage + \"%\";\r\n\t\t\t\t\trc1.width = 100 - percentage + \"%\";\r\n\t\t\t\t}else if((this.taskItem.percentage == 0) || (this.taskItem.percentage == 100)){\r\n\t\t\t\t\trc0.parentNode.removeChild(rc0);\r\n\t\t\t\t\tvar cellTblTask = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\t\twidth: percentage + \"%\"\r\n\t\t\t\t\t}, trow);\r\n\t\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\t\tvar imageProgressFill = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageTaskProgressFilled\"\r\n\t\t\t\t\t}, cellTblTask);\r\n\t\t\t\t\tdomStyle.set(imageProgressFill, {\r\n\t\t\t\t\t\twidth: (percentage * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\tcellTblTask = domConstruct.create(\"td\", {\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\",\r\n\t\t\t\t\t\twidth: (100 - percentage) + \"%\"\r\n\t\t\t\t\t}, trow);\r\n\t\t\t\t\tcellTblTask.style.lineHeight = \"1px\";\r\n\t\t\t\t\timageProgressFill = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\tclassName: \"ganttImageTaskProgressBg\"\r\n\t\t\t\t\t}, cellTblTask);\r\n\t\t\t\t\tdomStyle.set(imageProgressFill, {\r\n\t\t\t\t\t\twidth: ((100 - percentage) * this.taskItem.duration * this.ganttChart.pixelsPerWorkHour) / 100 + \"px\",\r\n\t\t\t\t\t\theight: this.ganttChart.heightTaskItem + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else if(percentage == 0){\r\n\t\t\t\tif((this.taskItem.percentage != 0) && (this.taskItem.percentage != 100)){\r\n\t\t\t\t\trc0.parentNode.removeChild(rc0);\r\n\t\t\t\t\trc1.width = 100 + \"%\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdomClass.remove(rc0.firstChild, \"ganttImageTaskProgressFilled\");\r\n\t\t\t\t\tdomClass.add(rc0.firstChild, \"ganttImageTaskProgressBg\");\r\n\t\t\t\t}\r\n\t\t\t}else if(percentage == 100){\r\n\t\t\t\tif((this.taskItem.percentage != 0) && (this.taskItem.percentage != 100)){\r\n\t\t\t\t\trc1.parentNode.removeChild(rc1);\r\n\t\t\t\t\trc0.width = 100 + \"%\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdomClass.remove(rc0.firstChild, \"ganttImageTaskProgressBg\");\r\n\t\t\t\t\tdomClass.add(rc0.firstChild, \"ganttImageTaskProgressFilled\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.taskItem.percentage = percentage;\r\n\t\t\tthis.taskItemWidth = parseInt(this.cTaskItem[0].firstChild.firstChild.width);\r\n\t\t\tthis.resizeTaskItem(this.taskItemWidth);\r\n\t\t\tthis.endResizeItem();\r\n\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tsetName: function(name){\r\n\t\t\tif(name){\r\n\t\t\t\tthis.taskItem.name = name;\r\n\t\t\t\tthis.cTaskNameItem[0].innerHTML = name;\r\n\t\t\t\tthis.cTaskNameItem[0].title = name;\r\n\t\t\t\tthis.checkWidthTaskNameItem();\r\n\t\t\t\tthis.checkPosition();\r\n\t\t\t\tthis.descrTask.innerHTML = this.objKeyToStr(this.getTaskOwner());\r\n\t\t\t\tthis.adjustPanelTime();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});"]}