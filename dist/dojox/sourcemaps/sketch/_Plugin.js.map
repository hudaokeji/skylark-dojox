{"version":3,"sources":["sketch/_Plugin.js"],"names":["define","dojo","declare","constructor","args","mixin","this","_connects","figure","iconClassPrefix","itemGroup","button","queryCommand","shape","useDefaultCommand","buttonClass","dijit","form","ToggleButton","_initButton","length","className","charAt","toUpperCase","substr","props","label","showLabel","iconClass","dropDown","tabIndex","connect","attr","name","value","onActivate","activate","e","setTool","onMouseDown","onMouseMove","onMouseUp","destroy","f","forEach","disconnect","o","tf","push","setFigure","setToolbar","toolbar","addChild","addGroupItem"],"mappings":";;;;;;;AAAAA,QACC,oBACA,kBACA,mBACA,qBACA,qBACA,2BACE,SAASC,GACX,OAAOA,EAAKC,QAAQ,uBAAwB,MAI3CC,YAAa,SAAoBC,GAC7BA,GACFH,EAAKI,MAAMC,KAAMF,GAElBE,KAAKC,cAGNC,OAAQ,KACRC,gBAAiB,kBACjBC,UAAW,aACXC,OAAQ,KACRC,aAAc,KACdC,MAAO,GACPC,mBAAmB,EACnBC,YAAaC,MAAMC,KAAKC,aACxBC,YAAa,WACZ,GAAGb,KAAKO,MAAMO,OAAO,CAGpB,IAAIC,EAAYf,KAAKG,gBAAgB,IAAIH,KAAKG,gBAAkBH,KAAKO,MAAMS,OAAO,GAAGC,cAAgBjB,KAAKO,MAAMW,OAAO,GACvH,IAAIlB,KAAKK,OAAO,CACf,IAAIc,GACHC,MAAOpB,KAAKO,MACZc,WAAW,EACXC,UAAWP,EACXQ,SAAUvB,KAAKuB,SACfC,SAAU,MAEXxB,KAAKK,OAAS,IAAIL,KAAKS,YAAYU,GACnCnB,KAAKyB,QAAQzB,KAAKK,OAAO,UAAU,eAItCqB,KAAM,SAASC,EAAUC,GACxB,OAAO5B,KAAKK,OAAOqB,KAAKC,EAAKC,IAE9BC,WAAY,aACZC,SAAU,SAAcC,GACvB/B,KAAK6B,aACL7B,KAAKE,OAAO8B,QAAQhC,MACpBA,KAAK0B,KAAK,WAAU,IAErBO,YAAa,SAASF,KACtBG,YAAa,SAASH,KACtBI,UAAW,SAASJ,KACpBK,QAAS,SAASC,GACjB1C,EAAK2C,QAAQtC,KAAKC,UAAUN,EAAK4C,aAElCd,QAAS,SAASe,EAAEH,EAAEI,GACrBzC,KAAKC,UAAUyC,KAAK/C,EAAK8B,QAAQe,EAAEH,EAAErC,KAAKyC,KAE3CE,UAAW,SAA2BzC,GAErCF,KAAKE,OAASA,GAEf0C,WAAY,SAA2BC,GAEtC7C,KAAKa,cACFb,KAAKK,QACPwC,EAAQC,SAAS9C,KAAKK,QAEpBL,KAAKI,WACPyC,EAAQE,aAAa/C,KAAKA,KAAKI","file":"../../sketch/_Plugin.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dijit/form/ToggleButton\"\r\n], function(dojo){\r\n\treturn dojo.declare(\"dojox.sketch._Plugin\", null, {\r\n\t\t// summary:\r\n\t\t//\t\tThis represents a \"plugin\" to the dojox.sketch.Figure, which is basically\r\n\t\t//\t\ta single button on the Toolbar and some associated code\r\n\t\tconstructor: function(/*Object?*/args){\r\n\t\t\tif(args){\r\n\t\t\t\tdojo.mixin(this, args);\r\n\t\t\t}\r\n\t\t\tthis._connects=[];\r\n\t\t},\r\n\r\n\t\tfigure: null,\r\n\t\ticonClassPrefix: \"dojoxSketchIcon\",\r\n\t\titemGroup: 'toolsGroup',\r\n\t\tbutton: null,\r\n\t\tqueryCommand: null,\r\n\t\tshape: \"\",\r\n\t\tuseDefaultCommand: true,\r\n\t\tbuttonClass: dijit.form.ToggleButton,\r\n\t\t_initButton: function(){\r\n\t\t\tif(this.shape.length){\r\n\t\t\t\t//TODO: i18n\r\n\t//\t\t\tvar label = dojox.sketch.shapes[this.shape];\r\n\t\t\t\tvar className = this.iconClassPrefix+\" \"+this.iconClassPrefix + this.shape.charAt(0).toUpperCase() + this.shape.substr(1);\r\n\t\t\t\tif(!this.button){\r\n\t\t\t\t\tvar props = {\r\n\t\t\t\t\t\tlabel: this.shape, //I18N\r\n\t\t\t\t\t\tshowLabel: false,\r\n\t\t\t\t\t\ticonClass: className,\r\n\t\t\t\t\t\tdropDown: this.dropDown,\r\n\t\t\t\t\t\ttabIndex: \"-1\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.button = new this.buttonClass(props);\r\n\t\t\t\t\tthis.connect(this.button,'onClick','activate');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tattr: function(name,/*?*/value){\r\n\t\t\treturn this.button.attr(name,value);\r\n\t\t},\r\n\t\tonActivate: function(){},\r\n\t\tactivate: function(/*?*/e){\r\n\t\t\tthis.onActivate();\r\n\t\t\tthis.figure.setTool(this);\r\n\t\t\tthis.attr('checked',true);\r\n\t\t},\r\n\t\tonMouseDown: function(e){},\r\n\t\tonMouseMove: function(e){},\r\n\t\tonMouseUp: function(e){},\r\n\t\tdestroy: function(f){\r\n\t\t\tdojo.forEach(this._connects,dojo.disconnect);\r\n\t\t},\r\n\t\tconnect: function(o,f,tf){\r\n\t\t\tthis._connects.push(dojo.connect(o,f,this,tf));\r\n\t\t},\r\n\t\tsetFigure: function(/*dijit._Widget*/ figure){\r\n\t\t\t// FIXME: detatch from previous figure!!\r\n\t\t\tthis.figure = figure;\r\n\t\t},\r\n\t\tsetToolbar: function(/*dijit._Widget*/ toolbar){\r\n\t\t\t// FIXME: prevent creating this if we don't need to (i.e., figure can't handle our command)\r\n\t\t\tthis._initButton();\r\n\t\t\tif(this.button){\r\n\t\t\t\ttoolbar.addChild(this.button);\r\n\t\t\t}\r\n\t\t\tif(this.itemGroup){\r\n\t\t\t\ttoolbar.addGroupItem(this,this.itemGroup);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}