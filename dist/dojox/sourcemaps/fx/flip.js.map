{"version":3,"sources":["fx/flip.js"],"names":["define","kernel","htmlUtil","dom","domConstruct","domGeom","connectUtil","Color","has","lang","winUtil","baseFx","coreFx","fxExt","experimental","flip","args","hs","n","helperNode","create","node","byId","s","style","dims","pn","lightColor","darkColor","bgColor","endColor","staticProps","anims","duration","dir","pConst","transparentColor","whichAnim","axis","depth","convertColor","color","toHex","filter","ret","coords","top","y","left","x","width","w","height","h","position","zIndex","border","fontSize","visibility","props","right","bottom","Math","max","min","toLowerCase","p0","i","shift","p1","start","end","mixin","body","appendChild","push","animateProperty","properties","onEnd","destroy","backgroundColor","connect","chain","flipCube","mb","getMarginBox","shiftX","shiftY","p","pName","length","combine","flipPage","hn","shiftMultiplier","r","d","wa","startColor","clone","finalize","dojox","fx","flipGrid","rows","cols","nw","nh","cAnims","signum","cn","clip","j","l","adjustClip","xn","yCounter","xCounter","a","removeHelper","this"],"mappings":"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","file":"../../fx/flip.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/Color\",\r\n\t\"dojo/_base/sniff\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/_base/fx\",\r\n\t\"dojo/fx\",\r\n\t\"./_base\"\r\n], function(kernel, htmlUtil, dom, domConstruct, domGeom, connectUtil, Color, has, lang, winUtil, baseFx, coreFx, fxExt) {\r\n//kernel,lang->(sniff,array,has),sniff,unload,window\r\n\r\n\tkernel.experimental(\"dojox.fx.flip\");\r\n\t// because ShrinkSafe will eat this up:\r\n\tvar borderConst = \"border\",\r\n\t\twidthConst = \"Width\",\r\n\t\theightConst = \"Height\",\r\n\t\ttopConst = \"Top\",\r\n\t\trightConst = \"Right\",\r\n\t\tleftConst = \"Left\",\r\n\t\tbottomConst = \"Bottom\"\r\n\t;\r\n\r\n\tfxExt.flip = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tAnimate a node flipping following a specific direction\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will flip the\r\n\t\t//\t\tnode around a central axis:\r\n\t\t//\r\n\t\t//\t\tif args.dir is \"left\" or \"right\" --> y axis\r\n\t\t//\r\n\t\t//\t\tif args.dir is \"top\" or \"bottom\" --> x axis\r\n\t\t//\r\n\t\t//\t\tThis effect is obtained using a border distortion applied to a helper node.\r\n\t\t//\r\n\t\t//\t\tThe user can specify three background colors for the helper node:\r\n\t\t//\r\n\t\t//\t\t- darkColor: the darkest color reached during the animation\r\n\t\t//\t\t- lightColor: the brightest color\r\n\t\t//\t\t- endColor: the final backgroundColor for the node\r\n\t\t//\r\n\t\t//\t\tOther arguments:\r\n\t\t//\r\n\t\t//\t\t- depth: Float\r\n\t\t//\t\t\t - 0 <= depth <= 1 overrides the computed \"depth\"\r\n\t\t//\t\t\t- (0: min distortion, 1: max distortion)\r\n\t\t//\r\n\t\t//\t\t- whichAnim: String\r\n\t\t//\t\t\t- \"first\"\t\t\t : the first half animation\r\n\t\t//\t\t\t- \"last\"\t\t\t : the second one\r\n\t\t//\t\t\t- \"both\" (default) : both\r\n\t\t//\r\n\t\t//\t\t- axis: String\r\n\t\t//\t\t\t- \"center\" (default)\t  : the node is flipped around his center\r\n\t\t//\t\t\t- \"shortside\"\t\t\t  : the node is flipped around his \"short\" (in perspective) side\r\n\t\t//\t\t\t- \"longside\"\t\t\t  : the node is flipped around his \"long\" (in perspective) side\r\n\t\t//\t\t\t- \"cube\"\t\t\t\t  : the node flips around the central axis of the cube\r\n\t\t//\r\n\t\t//\t\t- shift: Integer:\r\n\t\t//\t\t\tnode translation, perpendicular to the rotation axis\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar anim = dojox.fx.flip({\r\n\t\t//\t|\t\tnode: dojo.byId(\"nodeId\"),\r\n\t\t//\t|\t\tdir: \"top\",\r\n\t\t//\t|\t\tdarkColor: \"#555555\",\r\n\t\t//\t|\t\tlightColor: \"#dddddd\",\r\n\t\t//\t|\t\tendColor: \"#666666\",\r\n\t\t//\t|\t\tdepth: .5,\r\n\t\t//\t|\t\tshift: 50,\r\n\t\t//\t|\t\tduration:300\r\n\t\t//\t|\t  });\r\n\r\n\t\tvar helperNode = domConstruct.create(\"div\"),\r\n\t\t\tnode = args.node = dom.byId(args.node),\r\n\t\t\ts = node.style,\r\n\t\t\tdims = null,\r\n\t\t\ths = null,\r\n\t\t\tpn = null,\r\n\t\t\tlightColor = args.lightColor || \"#dddddd\",\r\n\t\t\tdarkColor = args.darkColor || \"#555555\",\r\n\t\t\tbgColor = htmlUtil.style(node, \"backgroundColor\"),\r\n\t\t\tendColor = args.endColor || bgColor,\r\n\t\t\tstaticProps = {},\r\n\t\t\tanims = [],\r\n\t\t\tduration = args.duration ? args.duration / 2 : 250,\r\n\t\t\tdir = args.dir || \"left\",\r\n\t\t\tpConst = .9,\r\n\t\t\ttransparentColor = \"transparent\",\r\n\t\t\twhichAnim = args.whichAnim,\r\n\t\t\taxis = args.axis || \"center\",\r\n\t\t\tdepth = args.depth\r\n\t\t;\r\n\t\t// IE6 workaround: IE6 doesn't support transparent borders\r\n\t\tvar convertColor = function(color){\r\n\t\t\treturn ((new Color(color)).toHex() === \"#000000\") ? \"#000001\" : color;\r\n\t\t};\r\n\r\n\t\tif(has(\"ie\") < 7){\r\n\t\t\tendColor = convertColor(endColor);\r\n\t\t\tlightColor = convertColor(lightColor);\r\n\t\t\tdarkColor = convertColor(darkColor);\r\n\t\t\tbgColor = convertColor(bgColor);\r\n\t\t\ttransparentColor = \"black\";\r\n\t\t\thelperNode.style.filter = \"chroma(color='#000000')\";\r\n\t\t}\r\n\r\n\t\tvar init = (function(n){\r\n\t\t\treturn function(){\r\n\t\t\t\tvar ret = htmlUtil.coords(n, true);\r\n\t\t\t\tdims = {\r\n\t\t\t\t\ttop: ret.y,\r\n\t\t\t\t\tleft: ret.x,\r\n\t\t\t\t\twidth: ret.w,\r\n\t\t\t\t\theight: ret.h\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t})(node);\r\n\t\tinit();\r\n\t\t// helperNode initialization\r\n\t\ths = {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: dims[\"top\"] + \"px\",\r\n\t\t\tleft: dims[\"left\"] + \"px\",\r\n\t\t\theight: \"0\",\r\n\t\t\twidth: \"0\",\r\n\t\t\tzIndex: args.zIndex || (s.zIndex || 0),\r\n\t\t\tborder: \"0 solid \" + transparentColor,\r\n\t\t\tfontSize: \"0\",\r\n\t\t\tvisibility: \"hidden\"\r\n\t\t};\r\n\t\tvar props = [ {},\r\n\t\t\t{\r\n\t\t\t\ttop: dims[\"top\"],\r\n\t\t\t\tleft: dims[\"left\"]\r\n\t\t\t}\r\n\t\t];\r\n\t\tvar dynProperties = {\r\n\t\t\tleft: [leftConst, rightConst, topConst, bottomConst, widthConst, heightConst, \"end\" + heightConst + \"Min\", leftConst, \"end\" + heightConst + \"Max\"],\r\n\t\t\tright: [rightConst, leftConst, topConst, bottomConst, widthConst, heightConst, \"end\" + heightConst + \"Min\", leftConst, \"end\" + heightConst + \"Max\"],\r\n\t\t\ttop: [topConst, bottomConst, leftConst, rightConst, heightConst, widthConst, \"end\" + widthConst + \"Min\", topConst, \"end\" + widthConst + \"Max\"],\r\n\t\t\tbottom: [bottomConst, topConst, leftConst, rightConst, heightConst, widthConst, \"end\" + widthConst + \"Min\", topConst, \"end\" + widthConst + \"Max\"]\r\n\t\t};\r\n\t\t// property names\r\n\t\tpn = dynProperties[dir];\r\n\r\n\t\t// .4 <= pConst <= .9\r\n\t\tif(typeof depth != \"undefined\"){\r\n\t\t\tdepth = Math.max(0, Math.min(1, depth)) / 2;\r\n\t\t\tpConst = .4 + (.5 - depth);\r\n\t\t}else{\r\n\t\t\tpConst = Math.min(.9, Math.max(.4, dims[pn[5].toLowerCase()] / dims[pn[4].toLowerCase()]));\r\n\t\t}\r\n\t\tvar p0 = props[0];\r\n\t\tfor(var i = 4; i < 6; i++){\r\n\t\t\tif(axis == \"center\" || axis == \"cube\"){ // find a better name for \"cube\"\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Min\"] = dims[pn[i].toLowerCase()] * pConst;\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Max\"] = dims[pn[i].toLowerCase()] / pConst;\r\n\t\t\t}else if(axis == \"shortside\"){\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Min\"] = dims[pn[i].toLowerCase()];\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Max\"] = dims[pn[i].toLowerCase()] / pConst;\r\n\t\t\t}else if(axis == \"longside\"){\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Min\"] = dims[pn[i].toLowerCase()] * pConst;\r\n\t\t\t\tdims[\"end\" + pn[i] + \"Max\"] = dims[pn[i].toLowerCase()];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(axis == \"center\"){\r\n\t\t\tp0[pn[2].toLowerCase()] = dims[pn[2].toLowerCase()] - (dims[pn[8]] - dims[pn[6]]) / 4;\r\n\t\t}else if(axis == \"shortside\"){\r\n\t\t\tp0[pn[2].toLowerCase()] = dims[pn[2].toLowerCase()] - (dims[pn[8]] - dims[pn[6]]) / 2;\r\n\t\t}\r\n\r\n\t\tstaticProps[pn[5].toLowerCase()] = dims[pn[5].toLowerCase()] + \"px\";\r\n\t\tstaticProps[pn[4].toLowerCase()] = \"0\";\r\n\t\tstaticProps[borderConst + pn[1] + widthConst] = dims[pn[4].toLowerCase()] + \"px\";\r\n\t\tstaticProps[borderConst + pn[1] + \"Color\"] = bgColor;\r\n\r\n\t\tp0[borderConst + pn[1] + widthConst] = 0;\r\n\t\tp0[borderConst + pn[1] + \"Color\"] = darkColor;\r\n\t\tp0[borderConst + pn[2] + widthConst] = p0[borderConst + pn[3] + widthConst] = axis != \"cube\"\r\n\t\t\t? (dims[\"end\" + pn[5] +\t \"Max\"] - dims[\"end\" + pn[5] + \"Min\"]) / 2\r\n\t\t\t: dims[pn[6]] / 2\r\n\t\t;\r\n\t\tp0[pn[7].toLowerCase()] = dims[pn[7].toLowerCase()] + dims[pn[4].toLowerCase()] / 2 + (args.shift || 0);\r\n\t\tp0[pn[5].toLowerCase()] = dims[pn[6]];\r\n\r\n\t\tvar p1 = props[1];\r\n\t\tp1[borderConst + pn[0] + \"Color\"] = { start: lightColor, end: endColor };\r\n\t\tp1[borderConst + pn[0] + widthConst] = dims[pn[4].toLowerCase()];\r\n\t\tp1[borderConst + pn[2] + widthConst] = 0;\r\n\t\tp1[borderConst + pn[3] + widthConst] = 0;\r\n\t\tp1[pn[5].toLowerCase()] = { start: dims[pn[6]], end: dims[pn[5].toLowerCase()] };\r\n\r\n\t\tlang.mixin(hs, staticProps);\r\n\t\thtmlUtil.style(helperNode, hs);\r\n\t\twinUtil.body().appendChild(helperNode);\r\n\r\n\t\tvar finalize = function(){\r\n//\t\t\thelperNode.parentNode.removeChild(helperNode);\r\n\t\t\tdomConstruct.destroy(helperNode);\r\n\t\t\t// fixes a flicker when the animation ends\r\n\t\t\ts.backgroundColor = endColor;\r\n\t\t\ts.visibility = \"visible\";\r\n\t\t};\r\n\t\tif(whichAnim == \"last\"){\r\n\t\t\tfor(i in p0){\r\n\t\t\t\tp0[i] = { start: p0[i] };\r\n\t\t\t}\r\n\t\t\tp0[borderConst + pn[1] + \"Color\"] = { start: darkColor, end: endColor };\r\n\t\t\tp1 = p0;\r\n\t\t}\r\n\t\tif(!whichAnim || whichAnim == \"first\"){\r\n\t\t\tanims.push(baseFx.animateProperty({\r\n\t\t\t\tnode: helperNode,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tproperties: p0\r\n\t\t\t}));\r\n\t\t}\r\n\t\tif(!whichAnim || whichAnim == \"last\"){\r\n\t\t\tanims.push(baseFx.animateProperty({\r\n\t\t\t\tnode: helperNode,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tproperties: p1,\r\n\t\t\t\tonEnd: finalize\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// hide the original node\r\n\t\tconnectUtil.connect(anims[0], \"play\", function(){\r\n\t\t\thelperNode.style.visibility = \"visible\";\r\n\t\t\ts.visibility = \"hidden\";\r\n\t\t});\r\n\r\n\t\treturn coreFx.chain(anims); // dojo.Animation\r\n\r\n\t}\r\n\r\n\tfxExt.flipCube = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a more 3d-like rotation\r\n\t\t// description:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a more 3d-like rotation.\r\n\t\t//\t\tBehaves the same as `dojox.fx.flip`, using the same attributes and\r\n\t\t//\t\tother standard `dojo.Animation` properties.\r\n\t\t// example:\r\n\t\t//\t\tSee `dojox.fx.flip`\r\n\t\tvar anims = [],\r\n\t\t\tmb = domGeom.getMarginBox(args.node),\r\n\t\t\tshiftX = mb.w / 2,\r\n\t\t\tshiftY = mb.h / 2,\r\n\t\t\tdims = {\r\n\t\t\t\ttop: {\r\n\t\t\t\t\tpName: \"height\",\r\n\t\t\t\t\targs:[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"first\",\r\n\t\t\t\t\t\t\tdir: \"top\",\r\n\t\t\t\t\t\t\tshift: -shiftY\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"last\",\r\n\t\t\t\t\t\t\tdir: \"bottom\",\r\n\t\t\t\t\t\t\tshift: shiftY\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tright: {\r\n\t\t\t\t\tpName: \"width\",\r\n\t\t\t\t\targs:[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"first\",\r\n\t\t\t\t\t\t\tdir: \"right\",\r\n\t\t\t\t\t\t\tshift: shiftX\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"last\",\r\n\t\t\t\t\t\t\tdir: \"left\",\r\n\t\t\t\t\t\t\tshift: -shiftX\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tbottom: {\r\n\t\t\t\t\tpName: \"height\",\r\n\t\t\t\t\targs:[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"first\",\r\n\t\t\t\t\t\t\tdir: \"bottom\",\r\n\t\t\t\t\t\t\tshift: shiftY\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"last\",\r\n\t\t\t\t\t\t\tdir: \"top\",\r\n\t\t\t\t\t\t\tshift: -shiftY\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tleft: {\r\n\t\t\t\t\tpName: \"width\",\r\n\t\t\t\t\targs:[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"first\",\r\n\t\t\t\t\t\t\tdir: \"left\",\r\n\t\t\t\t\t\t\tshift: -shiftX\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twhichAnim: \"last\",\r\n\t\t\t\t\t\t\tdir: \"right\",\r\n\t\t\t\t\t\t\tshift: shiftX\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t;\r\n\t\tvar d = dims[args.dir || \"left\"],\r\n\t\t\tp = d.args\r\n\t\t;\r\n\t\targs.duration = args.duration ? args.duration * 2 : 500;\r\n\t\targs.depth = .8;\r\n\t\targs.axis = \"cube\";\r\n\t\tfor(var i = p.length - 1; i >= 0; i--){\r\n\t\t\tlang.mixin(args, p[i]);\r\n\t\t\tanims.push(fxExt.flip(args));\r\n\t\t}\r\n\t\treturn coreFx.combine(anims);\r\n\t};\r\n\t\r\n\tfxExt.flipPage = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a page flip like animation.\r\n\t\t// description:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a page flip effect.\r\n\t\t//\t\tBehaves the same as `dojox.fx.flip`, using the same attributes and\r\n\t\t//\t\tother standard `dojo.Animation` properties.\r\n\t\t// example:\r\n\t\t//\t\tSee `dojox.fx.flip`\r\n\t\tvar n = args.node,\r\n\t\t\tcoords = htmlUtil.coords(n, true),\r\n\t\t\tx = coords.x,\r\n\t\t\ty = coords.y,\r\n\t\t\tw = coords.w,\r\n\t\t\th = coords.h,\r\n\t\t\tbgColor = htmlUtil.style(n, \"backgroundColor\"),\r\n\t\t\tlightColor = args.lightColor || \"#dddddd\",\r\n\t\t\tdarkColor = args.darkColor,\r\n\t\t\thelperNode = domConstruct.create(\"div\"),\r\n\t\t\tanims = [],\r\n\t\t\thn = [],\r\n\t\t\tdir = args.dir || \"right\",\r\n\t\t\tpn = {\r\n\t\t\t\tleft: [\"left\", \"right\", \"x\", \"w\"],\r\n\t\t\t\ttop: [\"top\", \"bottom\", \"y\", \"h\"],\r\n\t\t\t\tright: [\"left\", \"left\", \"x\", \"w\"],\r\n\t\t\t\tbottom: [\"top\", \"top\", \"y\", \"h\"]\r\n\t\t\t},\r\n\t\t\tshiftMultiplier = {\r\n\t\t\t\tright: [1, -1],\r\n\t\t\t\tleft: [-1, 1],\r\n\t\t\t\ttop: [-1, 1],\r\n\t\t\t\tbottom: [1, -1]\r\n\t\t\t}\r\n\t\t;\r\n\t\thtmlUtil.style(helperNode, {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth  : w + \"px\",\r\n\t\t\theight : h + \"px\",\r\n\t\t\ttop\t   : y + \"px\",\r\n\t\t\tleft   : x + \"px\",\r\n\t\t\tvisibility: \"hidden\"\r\n\t\t});\r\n\t\tvar hs = [];\r\n\t\tfor(var i = 0; i < 2; i++){\r\n\t\t\tvar r = i % 2,\r\n\t\t\t\td = r ? pn[dir][1] : dir,\r\n\t\t\t\twa = r ? \"last\" : \"first\",\r\n\t\t\t\tendColor = r ? bgColor : lightColor,\r\n\t\t\t\tstartColor = r ? endColor : args.startColor || n.style.backgroundColor\r\n\t\t\t;\r\n\t\t\thn[i] = lang.clone(helperNode);\r\n\t\t\tvar finalize = function(x){\r\n\t\t\t\t\treturn function(){\r\n\t\t\t\t\t\tdomConstruct.destroy(hn[x]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}(i)\r\n\t\t\t;\r\n\t\t\twinUtil.body().appendChild(hn[i]);\r\n\t\t\ths[i] = {\r\n\t\t\t\tbackgroundColor: r ? startColor : bgColor\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\ths[i][pn[dir][0]] = coords[pn[dir][2]] + shiftMultiplier[dir][0] * i * coords[pn[dir][3]] + \"px\";\r\n\t\t\thtmlUtil.style(hn[i], hs[i]);\r\n\t\t\tanims.push(dojox.fx.flip({\r\n\t\t\t\tnode: hn[i],\r\n\t\t\t\tdir: d,\r\n\t\t\t\taxis: \"shortside\",\r\n\t\t\t\tdepth: args.depth,\r\n\t\t\t\tduration: args.duration / 2,\r\n\t\t\t\tshift: shiftMultiplier[dir][i] * coords[pn[dir][3]] / 2,\r\n\t\t\t\tdarkColor: darkColor,\r\n\t\t\t\tlightColor: lightColor,\r\n\t\t\t\twhichAnim: wa,\r\n\t\t\t\tendColor: endColor\r\n\t\t\t}));\r\n\t\t\tconnectUtil.connect(anims[i], \"onEnd\", finalize);\r\n\t\t}\r\n\t\treturn coreFx.chain(anims);\r\n\t};\r\n\t\r\n\t\r\n\tfxExt.flipGrid = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a decomposition in rows * cols flipping elements\r\n\t\t// description:\r\n\t\t//\t\tAn extension to `dojox.fx.flip` providing a page flip effect.\r\n\t\t//\t\tBehaves the same as `dojox.fx.flip`, using the same attributes and\r\n\t\t//\t\tother standard `dojo.Animation` properties and\r\n\t\t//\r\n\t\t//\t\t- cols: Integer columns\r\n\t\t//\t\t- rows: Integer rows\r\n\t\t//\t\t- duration: the single flip duration\r\n\t\t// example:\r\n\t\t//\t\tSee `dojox.fx.flip`\r\n\t\tvar rows = args.rows || 4,\r\n\t\t\tcols = args.cols || 4,\r\n\t\t\tanims = [],\r\n\t\t\thelperNode = domConstruct.create(\"div\"),\r\n\t\t\tn = args.node,\r\n\t\t\tcoords = htmlUtil.coords(n, true),\r\n\t\t\tx = coords.x,\r\n\t\t\ty = coords.y,\r\n\t\t\tnw = coords.w,\r\n\t\t\tnh = coords.h,\r\n\t\t\tw = coords.w / cols,\r\n\t\t\th = coords.h / rows,\r\n\t\t\tcAnims = []\r\n\t\t;\r\n\t\thtmlUtil.style(helperNode, {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: w + \"px\",\r\n\t\t\theight: h + \"px\",\r\n\t\t\tbackgroundColor: htmlUtil.style(n, \"backgroundColor\")\r\n\t\t});\r\n\t\tfor(var i = 0; i < rows; i++){\r\n\t\t\tvar r = i % 2,\r\n\t\t\t\td = r ? \"right\" : \"left\",\r\n\t\t\t\tsignum = r ? 1 : -1\r\n\t\t\t;\r\n\t\t\t// cloning\r\n\t\t\tvar cn = lang.clone(n);\r\n\t\t\thtmlUtil.style(cn, {\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\twidth: nw + \"px\",\r\n\t\t\t\theight: nh + \"px\",\r\n\t\t\t\ttop: y + \"px\",\r\n\t\t\t\tleft: x + \"px\",\r\n\t\t\t\tclip: \"rect(\" + i * h + \"px,\" + nw + \"px,\" + nh + \"px,0)\"\r\n\t\t\t});\r\n\t\t\twinUtil.body().appendChild(cn);\r\n\t\t\tanims[i] = [];\r\n\t\t\tfor(var j = 0; j < cols; j++){\r\n\t\t\t\tvar hn = lang.clone(helperNode),\r\n\t\t\t\t\tl = r ? j : cols - (j + 1)\r\n\t\t\t\t;\r\n\t\t\t\tvar adjustClip = function(xn, yCounter, xCounter){\r\n\t\t\t\t\treturn function(){\r\n\t\t\t\t\t\tif(!(yCounter % 2)){\r\n\t\t\t\t\t\t\thtmlUtil.style(xn, {\r\n\t\t\t\t\t\t\t\tclip: \"rect(\" + yCounter * h + \"px,\" + (nw - (xCounter + 1) * w ) + \"px,\" + ((yCounter + 1) * h) + \"px,0px)\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\thtmlUtil.style(xn, {\r\n\t\t\t\t\t\t\t\tclip: \"rect(\" + yCounter * h + \"px,\" + nw + \"px,\" + ((yCounter + 1) * h) + \"px,\" + ((xCounter + 1) * w) + \"px)\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}(cn, i, j);\r\n\t\t\t\twinUtil.body().appendChild(hn);\r\n\t\t\t\thtmlUtil.style(hn, {\r\n\t\t\t\t\tleft: x + l * w + \"px\",\r\n\t\t\t\t\ttop: y + i * h + \"px\",\r\n\t\t\t\t\tvisibility: \"hidden\"\r\n\t\t\t\t});\r\n\t\t\t\tvar a = dojox.fx.flipPage({\r\n\t\t\t\t   node: hn,\r\n\t\t\t\t   dir: d,\r\n\t\t\t\t   duration: args.duration || 900,\r\n\t\t\t\t   shift: signum * w/2,\r\n\t\t\t\t   depth: .2,\r\n\t\t\t\t   darkColor: args.darkColor,\r\n\t\t\t\t   lightColor: args.lightColor,\r\n\t\t\t\t   startColor: args.startColor || args.node.style.backgroundColor\r\n\t\t\t\t}),\r\n\t\t\t\tremoveHelper = function(xn){\r\n\t\t\t\t\treturn function(){\r\n\t\t\t\t\t\tdomConstruct.destroy(xn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}(hn)\r\n\t\t\t\t;\r\n\t\t\t\tconnectUtil.connect(a, \"play\", this, adjustClip);\r\n\t\t\t\tconnectUtil.connect(a, \"play\", this, removeHelper);\r\n\t\t\t\tanims[i].push(a);\r\n\t\t\t}\r\n\t\t\tcAnims.push(coreFx.chain(anims[i]));\r\n\t\t\t\r\n\t\t}\r\n\t\tconnectUtil.connect(cAnims[0], \"play\", function(){\r\n\t\t\thtmlUtil.style(n, {visibility: \"hidden\"});\r\n\t\t});\r\n\t\treturn coreFx.combine(cAnims);\r\n\t};\r\n\treturn fxExt;\r\n});\r\n"]}