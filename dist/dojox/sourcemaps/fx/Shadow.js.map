{"version":3,"sources":["fx/Shadow.js"],"names":["define","kernel","query","lang","declare","has","domConstruct","domClass","domGeom","baseFx","coreFx","Widget","NodeListFx","experimental","shadowPng","moduleUrl","shadowThickness","shadowOffset","opacity","animate","node","startup","this","inherited","arguments","style","position","pieces","x1","y0","y1","_makePiece","nodeList","setOpacity","resize","name","vertAttach","vertCoord","horzAttach","horzCoord","sizing","img","url","toUpperCase","create","filter","src","width","height","add","appendChild","n","animArgs","_anims","forEach","push","_fade","mixin","end","combine","play","setDisabled","disabled","fadeOut","fadeIn","args","x","y","co","w","h","sideHeight","l","r","b","bl","top","br","tr","left"],"mappings":";;;;;;;AAAAA,QAAQ,oBAAqB,mBAAoB,kBAAmB,qBAAsB,mBACxF,qBAAsB,iBAAkB,oBAAqB,gBAAiB,UAAW,gBACzF,oBACA,SAASC,OAAQC,MAAOC,KAAMC,QAASC,IAAKC,aAAcC,SAAUC,QAASC,OAAQC,OAAQC,OAAQC,YAItG,OAFAX,OAAOY,aAAa,mBAEbT,QAAQ,kBAAmBO,QAYjCG,UAAWb,OAAOc,UAAU,WAAY,oBAIxCC,gBAAiB,EAIjBC,aAAc,EAIdC,QAAS,IAITC,SAAS,EAITC,KAAM,KAENC,QAAS,WAIRC,KAAKC,UAAUC,WACfF,KAAKF,KAAKK,MAAMC,SAAW,WAG3BJ,KAAKK,UACL,IAAIC,GAAM,EAAIN,KAAKN,gBACfa,EAAKP,KAAKL,aACVa,EAAKR,KAAKL,aAAeK,KAAKN,gBAClCM,KAAKS,WAAW,KAAM,MAAOF,EAAI,OAAQD,GACzCN,KAAKS,WAAW,IAAK,MAAOD,EAAI,OAAQF,EAAI,SAC5CN,KAAKS,WAAW,KAAM,MAAOF,EAAI,OAAQ,GACzCP,KAAKS,WAAW,IAAK,MAAOD,EAAI,OAAQ,EAAG,SAC3CR,KAAKS,WAAW,KAAM,MAAO,EAAG,OAAQH,GACxCN,KAAKS,WAAW,IAAK,MAAO,EAAG,OAAQ,EAAG,QAC1CT,KAAKS,WAAW,KAAM,MAAO,EAAG,OAAQ,GAExCT,KAAKU,SAAW9B,MAAM,eAAeoB,KAAKF,MAE1CE,KAAKW,WAAWX,KAAKJ,SACrBI,KAAKY,UAGNH,WAAY,SAASI,EAAMC,EAAYC,EAAWC,EAAYC,EAAWC,GAGxE,IAAIC,EACAC,EAAMpB,KAAKR,UAAYqB,EAAKQ,cAAgB,OAC7CtC,IAAI,MAAQ,GACdoC,EAAMnC,aAAasC,OAAO,QACtBnB,MAAMoB,OAAO,2DAA2DH,EAAI,KAC9EF,EAAO,mBAAmBA,EAAO,IAAI,IAAM,IAE7CC,EAAMnC,aAAasC,OAAO,OAASE,IAAIJ,IAGxCD,EAAIhB,MAAMC,SAAS,WACnBe,EAAIhB,MAAMW,GAAYC,EAAU,KAChCI,EAAIhB,MAAMa,GAAYC,EAAU,KAChCE,EAAIhB,MAAMsB,MAAMzB,KAAKN,gBAAgB,KACrCyB,EAAIhB,MAAMuB,OAAO1B,KAAKN,gBAAgB,KACtCT,SAAS0C,IAAIR,EAAI,eACjBnB,KAAKK,OAAOQ,GAAMM,EAClBnB,KAAKF,KAAK8B,YAAYT,IAIvBR,WAAY,SAAoBkB,EAAeC,GAM9C,IAAG/C,IAAI,MAEP,GADI+C,IAAWA,MACZ9B,KAAKH,QAAQ,CACf,IAAIkC,KACJ/B,KAAKU,SAASsB,QAAQ,SAASlC,GAC9BiC,EAAOE,KAAK9C,OAAO+C,MAAMrD,KAAKsD,MAAML,GAAWhC,KAAMA,EAAMsC,IAAKP,QAEjEzC,OAAOiD,QAAQN,GAAQO,YAEvBtC,KAAKU,SAASP,MAAM,UAAU0B,IAKhCU,YAAa,SAAsBC,GAGlC,GAAGA,EAAS,CACX,GAAGxC,KAAKwC,SAAW,OAChBxC,KAAKH,QAAUG,KAAKU,SAAS+B,UAAUH,OACnCtC,KAAKU,SAASP,MAAM,aAAa,UACxCH,KAAKwC,UAAW,MACZ,CACJ,IAAIxC,KAAKwC,SAAW,OACjBxC,KAAKH,QAAUG,KAAKU,SAASgC,SAASJ,OAClCtC,KAAKU,SAASP,MAAM,aAAa,WACxCH,KAAKwC,UAAW,IAIlB5B,OAAQ,SAA6C+B,MAGpD,IAAIC,EAAOC,EACX,GAAGF,KAAOC,EAAID,KAAKC,EAAGC,EAAIF,KAAKE,MAC1B,CACJ,IAAIC,GAAK5D,QAAQkB,SAASJ,KAAKF,MAC/B8C,EAAIE,GAAGC,EAAGF,EAAIC,GAAGE,EAElB,IAAIC,WAAaJ,GAAK7C,KAAKL,aAAaK,KAAKN,iBAI7C,KAHIuD,WAAa,IAAKA,WAAa,GAC/BJ,EAAI,IAAKA,EAAI,GACbD,EAAI,IAAKA,EAAI,GACZ5C,KAAKK,OACT6C,EAAE/C,MAAMuB,OAASuB,WAAW,KAC5BE,EAAEhD,MAAMuB,OAASuB,WAAW,KAC5BG,EAAEjD,MAAMsB,MAAQmB,EAAE,KAClBS,GAAGlD,MAAMmD,IAAMT,EAAE,KACjBO,EAAEjD,MAAMmD,IAAMT,EAAE,KAChBU,GAAGpD,MAAMmD,IAAMT,EAAE,KACjBW,GAAGrD,MAAMsD,KAAOb,EAAE,KAClBO,EAAEhD,MAAMsD,KAAOb,EAAE,KACjBW,GAAGpD,MAAMsD,KAAOb,EAAE","file":"../../fx/Shadow.js","sourcesContent":["define([\"dojo/_base/kernel\", \"dojo/_base/query\" ,\"dojo/_base/lang\", \"dojo/_base/declare\", \"dojo/_base/sniff\",\r\n\t\t\"dojo/dom-construct\", \"dojo/dom-class\", \"dojo/dom-geometry\", \"dojo/_base/fx\", \"dojo/fx\", \"dijit/_Widget\",\r\n\t\t\"dojo/NodeList-fx\"], \r\n  function(kernel, query, lang, declare, has, domConstruct, domClass, domGeom, baseFx, coreFx, Widget, NodeListFx){\r\n\r\n\tkernel.experimental(\"dojox.fx.Shadow\");\r\n\r\n\treturn declare(\"dojox.fx.Shadow\", Widget,{\r\n\t\t// summary:\r\n\t\t//\t\tAdds a drop-shadow to a node.\r\n\t\t// example:\r\n\t\t// |\t// add drop shadows to all nodes with class=\"hasShadow\"\r\n\t\t// |\tdojo.query(\".hasShadow\").forEach(function(n){\r\n\t\t// |\t\tvar foo = new dojox.fx.Shadow({ node: n });\r\n\t\t// |\t\tfoo.startup();\r\n\t\t// |\t});\r\n\r\n\t\t// shadowPng: String\r\n\t\t//\t\tBase location for drop-shadow images\r\n\t\tshadowPng: kernel.moduleUrl(\"dojox.fx\", \"resources/shadow\"),\r\n\t\r\n\t\t// shadowThickness: Integer\r\n\t\t//\t\tHow wide (in px) to make the shadow\r\n\t\tshadowThickness: 7,\r\n\t\r\n\t\t// shadowOffset: Integer\r\n\t\t//\t\tHow deep to make the shadow appear to be\r\n\t\tshadowOffset: 3,\r\n\t\r\n\t\t// opacity: Float\r\n\t\t//\t\tOverall opacity of the shadow\r\n\t\topacity: 0.75,\r\n\t\r\n\t\t// animate: Boolean\r\n\t\t//\t\tA toggle to disable animated transitions\r\n\t\tanimate: false,\r\n\t\r\n\t\t// node: DomNode\r\n\t\t//\t\tThe node we will be applying this shadow to\r\n\t\tnode: null,\r\n\t\r\n\t\tstartup: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInitializes the shadow.\r\n\t\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.node.style.position = \"relative\";\r\n\t\t\t// make all the pieces of the shadow, and position/size them as much\r\n\t\t\t// as possible (but a lot of the coordinates are set in sizeShadow\r\n\t\t\tthis.pieces={};\r\n\t\t\tvar x1 = -1 * this.shadowThickness;\r\n\t\t\tvar y0 = this.shadowOffset;\r\n\t\t\tvar y1 = this.shadowOffset + this.shadowThickness;\r\n\t\t\tthis._makePiece(\"tl\", \"top\", y0, \"left\", x1);\r\n\t\t\tthis._makePiece(\"l\", \"top\", y1, \"left\", x1, \"scale\");\r\n\t\t\tthis._makePiece(\"tr\", \"top\", y0, \"left\", 0);\r\n\t\t\tthis._makePiece(\"r\", \"top\", y1, \"left\", 0, \"scale\");\r\n\t\t\tthis._makePiece(\"bl\", \"top\", 0, \"left\", x1);\r\n\t\t\tthis._makePiece(\"b\", \"top\", 0, \"left\", 0, \"crop\");\r\n\t\t\tthis._makePiece(\"br\", \"top\", 0, \"left\", 0);\r\n\t\r\n\t\t\tthis.nodeList = query(\".shadowPiece\",this.node);\r\n\t\r\n\t\t\tthis.setOpacity(this.opacity);\r\n\t\t\tthis.resize();\r\n\t\t},\r\n\t\r\n\t\t_makePiece: function(name, vertAttach, vertCoord, horzAttach, horzCoord, sizing){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tappend a shadow pieces to the node, and position it\r\n\t\t\tvar img;\r\n\t\t\tvar url = this.shadowPng + name.toUpperCase() + \".png\";\r\n\t\t\tif(has(\"ie\") < 7){\r\n\t\t\t\timg = domConstruct.create(\"div\");\r\n\t\t\t\timg.style.filter=\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\"+url+\"'\"+\r\n\t\t\t\t\t(sizing?\", sizingMethod='\"+sizing+\"'\":\"\") + \")\";\r\n\t\t\t}else{\r\n\t\t\t\timg = domConstruct.create(\"img\", { src:url });\r\n\t\t\t}\r\n\t\r\n\t\t\timg.style.position=\"absolute\";\r\n\t\t\timg.style[vertAttach]=vertCoord+\"px\";\r\n\t\t\timg.style[horzAttach]=horzCoord+\"px\";\r\n\t\t\timg.style.width=this.shadowThickness+\"px\";\r\n\t\t\timg.style.height=this.shadowThickness+\"px\";\r\n\t\t\tdomClass.add(img,\"shadowPiece\");\r\n\t\t\tthis.pieces[name]=img;\r\n\t\t\tthis.node.appendChild(img);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetOpacity: function(/* Float */n,/* Object? */animArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tset the opacity of the underlay\r\n\r\n\t\t\t// note: does not work in IE? FIXME.\r\n\r\n\t\t\tif(has(\"ie\")){ return; }\r\n\t\t\tif(!animArgs){ animArgs = {}; }\r\n\t\t\tif(this.animate){\r\n\t\t\t\tvar _anims = [];\r\n\t\t\t\tthis.nodeList.forEach(function(node){\r\n\t\t\t\t\t_anims.push(baseFx._fade(lang.mixin(animArgs,{ node: node, end: n })));\r\n\t\t\t\t});\r\n\t\t\t\tcoreFx.combine(_anims).play();\r\n\t\t\t}else{\r\n\t\t\t\tthis.nodeList.style(\"opacity\",n);\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDisabled: function(/* Boolean */disabled){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tenable / disable the shadow\r\n\t\t\tif(disabled){\r\n\t\t\t\tif(this.disabled){ return; }\r\n\t\t\t\tif(this.animate){ this.nodeList.fadeOut().play();\r\n\t\t\t\t}else{ this.nodeList.style(\"visibility\",\"hidden\"); }\r\n\t\t\t\tthis.disabled = true;\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.disabled){ return; }\r\n\t\t\t\tif(this.animate){ this.nodeList.fadeIn().play();\r\n\t\t\t\t}else{ this.nodeList.style(\"visibility\",\"visible\"); }\r\n\t\t\t\tthis.disabled = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tresize: function(/* dojox.fx._arg.ShadowResizeArgs */args){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResizes the shadow based on width and height.\r\n\t\t\tvar x; var y;\r\n\t\t\tif(args){ x = args.x; y = args.y;\r\n\t\t\t}else{\r\n\t\t\t\tvar co = domGeom.position(this.node);\r\n\t\t\t\tx = co.w; y = co.h;\r\n\t\t\t}\r\n\t\t\tvar sideHeight = y - (this.shadowOffset+this.shadowThickness);\r\n\t\t\tif (sideHeight < 0) { sideHeight = 0; }\r\n\t\t\tif (y < 1) { y = 1; }\r\n\t\t\tif (x < 1) { x = 1; }\r\n\t\t\twith(this.pieces){\r\n\t\t\t\tl.style.height = sideHeight+\"px\";\r\n\t\t\t\tr.style.height = sideHeight+\"px\";\r\n\t\t\t\tb.style.width = x+\"px\";\r\n\t\t\t\tbl.style.top = y+\"px\";\r\n\t\t\t\tb.style.top = y+\"px\";\r\n\t\t\t\tbr.style.top = y+\"px\";\r\n\t\t\t\ttr.style.left = x+\"px\";\r\n\t\t\t\tr.style.left = x+\"px\";\r\n\t\t\t\tbr.style.left = x+\"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}