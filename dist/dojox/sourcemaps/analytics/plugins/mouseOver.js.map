{"version":3,"sources":["analytics/plugins/mouseOver.js"],"names":["define","lang","dxa","config","window","on","plugins","mouseOver","this","watchMouse","mouseSampleDelay","addData","hitch","targetProps","textContentMaxChars","toggleWatchMouse","_watchingMouse","remove","doc","sampleMouse","e","_rateLimited","trimMouseEvent","setTimeout","_lastMouseEvent","t","i","props","j","length","substr","val"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,WAAY,oBAAqB,oBAAqB,WAC9E,SAASC,EAAMC,EAAKC,EAAQC,EAAQC,GAEtC,OAAQH,EAAII,QAAQC,UAAY,IAAI,WACnCC,KAAKC,WAAaN,EAAuB,iBAAK,EAC9CK,KAAKE,iBAAmBP,EAAoB,aAAK,KACjDK,KAAKG,QAAUV,EAAKW,MAAMV,EAAK,UAAW,aAC1CM,KAAKK,YAAcV,EAAoB,cAAM,KAAK,YAAY,YAAY,OAAQ,aAAc,OAAQ,cAAe,SACvHK,KAAKM,oBAAsBX,EAA4B,qBAAK,GAE5DK,KAAKO,iBAAmB,WACvB,GAAGP,KAAKQ,eAGP,OAFAR,KAAKQ,eAAeC,qBACbT,KAAKQ,eAGbX,EAAGD,EAAOc,IAAK,YAAajB,EAAKW,MAAMJ,KAAM,iBAG3CA,KAAKC,aACPJ,EAAGD,EAAOc,IAAK,YAAajB,EAAKW,MAAMJ,KAAM,qBAC7CH,EAAGD,EAAOc,IAAK,WAAYjB,EAAKW,MAAMJ,KAAM,sBAG7CA,KAAKW,YAAc,SAASC,GAc3B,OAbIZ,KAAKa,eACRb,KAAKG,QAAQ,SAASH,KAAKc,eAAeF,IAC1CZ,KAAKa,cAAe,EACpBE,WAAWtB,EAAKW,MAAMJ,KAAM,WACxBA,KAAKa,eAEPb,KAAKc,eAAed,KAAKgB,wBAClBhB,KAAKgB,uBACLhB,KAAKa,gBAEVb,KAAKE,mBAEVF,KAAKgB,gBAAkBJ,EAChBA,GAGRZ,KAAKc,eAAiB,SAASF,GAC9B,IAAIK,KACJ,IAAI,IAAIC,KAAKN,EACZ,OAAOM,GAEN,IAAK,SAGJ,IAAIC,EAAQnB,KAAKK,YACjBY,EAAEC,MAEF,IAAI,IAAIE,EAAI,EAAEA,EAAID,EAAME,OAAOD,KACX,iBAARR,EAAEM,IAAiC,mBAARN,EAAEM,KAAqBC,EAAMC,KAAMR,EAAEM,KAE3D,QAAZC,EAAMC,IAA4B,eAAZD,EAAMC,GAC3BR,EAAEM,GAAc,WAA2B,QAArBN,EAAEM,GAAc,WAAsC,QAArBN,EAAEM,GAAc,YACzED,EAAEC,GAAGC,EAAMC,IAAMR,EAAEM,GAAGC,EAAMC,IAAIE,OAAO,EAAEtB,KAAKM,sBAG/CW,EAAEC,GAAGC,EAAMC,IAAMR,EAAEM,GAAGC,EAAMC,KAI/B,MAMD,IAAK,UACL,IAAK,UACL,IAAK,IACL,IAAK,IACJ,GAAGR,EAAEM,GAAG,CAEP,IAAIK,EAAMX,EAAEM,GAEZD,EAAEC,GAAKK,EAAM,IAQjB,OAAON","file":"../../../analytics/plugins/mouseOver.js","sourcesContent":["define([\"dojo/_base/lang\", \"../_base\", \"dojo/_base/config\", \"dojo/_base/window\", \"dojo/on\"\r\n], function(lang, dxa, config, window, on){\r\n\r\n\treturn (dxa.plugins.mouseOver = new (function(){\r\n\t\tthis.watchMouse = config[\"watchMouseOver\"] || true;\r\n\t\tthis.mouseSampleDelay = config[\"sampleDelay\"] || 2500;\r\n\t\tthis.addData = lang.hitch(dxa, \"addData\", \"mouseOver\");\r\n\t\tthis.targetProps = config[\"targetProps\"] || [\"id\",\"className\",\"localName\",\"href\", \"spellcheck\", \"lang\", \"textContent\", \"value\" ];\r\n\t\tthis.textContentMaxChars = config[\"textContentMaxChars\"] || 50;\r\n\r\n\t\tthis.toggleWatchMouse = function(){\r\n\t\t\tif(this._watchingMouse){\r\n\t\t\t\tthis._watchingMouse.remove();\r\n\t\t\t\tdelete this._watchingMouse;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ton(window.doc, \"mousemove\", lang.hitch(this, \"sampleMouse\"));\r\n\t\t};\r\n\r\n\t\tif(this.watchMouse){\r\n\t\t\ton(window.doc, \"mouseover\", lang.hitch(this, \"toggleWatchMouse\"));\r\n\t\t\ton(window.doc, \"mouseout\", lang.hitch(this, \"toggleWatchMouse\"));\r\n\t\t}\r\n\r\n\t\tthis.sampleMouse = function(e){\r\n\t\t\tif(!this._rateLimited){\r\n\t\t\t\tthis.addData(\"sample\",this.trimMouseEvent(e));\r\n\t\t\t\tthis._rateLimited = true;\r\n\t\t\t\tsetTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\tif(this._rateLimited){\r\n\t\t\t\t\t\t//this.addData(\"sample\", this.trimMouseEvent(this._lastMouseEvent));\r\n\t\t\t\t\t\tthis.trimMouseEvent(this._lastMouseEvent);\r\n\t\t\t\t\t\tdelete this._lastMouseEvent;\r\n\t\t\t\t\t\tdelete this._rateLimited;\r\n\t\t\t\t\t}\r\n\t\t\t\t}), this.mouseSampleDelay);\r\n\t\t\t}\r\n\t\t\tthis._lastMouseEvent = e;\r\n\t\t\treturn e;\r\n\t\t};\r\n\r\n\t\tthis.trimMouseEvent = function(e){\r\n\t\t\tvar t = {};\r\n\t\t\tfor(var i in e){\r\n\t\t\t\tswitch(i){\r\n\t\t\t\t\t//case \"currentTarget\":  //currentTarget caused an error\r\n\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t//case \"originalTarget\":\r\n\t\t\t\t\t//case \"explicitOriginalTarget\":\r\n\t\t\t\t\t\tvar props = this.targetProps;\r\n\t\t\t\t\t\tt[i] = {};\r\n\t\t\t\t\t\t//console.log(e, i, e[i]);\r\n\t\t\t\t\t\tfor(var j = 0;j < props.length;j++){\r\n\t\t\t\t\t\t\tif((typeof e[i] == \"object\" || typeof e[i] == \"function\") && props[j] in e[i]){\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\tif(props[j] == \"text\" || props[j] == \"textContent\"){\r\n\t\t\t\t\t\t\t\t\tif(e[i][\"localName\"] && (e[i][\"localName\"] != \"HTML\") && (e[i][\"localName\"] != \"BODY\")){\r\n\t\t\t\t\t\t\t\t\t\tt[i][props[j]] = e[i][props[j]].substr(0,this.textContentMaxChars);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tt[i][props[j]] = e[i][props[j]];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// clientX, pageX and x are usually the same so no need to show all 3, same for y\r\n\t\t\t\t\t//case \"clientX\":\r\n\t\t\t\t\t//case \"clientY\":\r\n\t\t\t\t\t//case \"pageX\":\r\n\t\t\t\t\t//case \"pageY\":\r\n\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\tcase \"x\":\r\n\t\t\t\t\tcase \"y\":\r\n\t\t\t\t\t\tif(e[i]){\r\n\t\t\t\t\t\t\t//console.log(\"Attempting: \" + i);\r\n\t\t\t\t\t\t\tvar val = e[i];\r\n\t\t\t\t\t\t\t//console.log(\"val: \" +  val); console.log(i + \"e of i: \" + val);\r\n\t\t\t\t\t\t\tt[i] = val + '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t//console.log(\"Skipping: \", i);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t};\r\n\t})());\r\n});\r\n"]}