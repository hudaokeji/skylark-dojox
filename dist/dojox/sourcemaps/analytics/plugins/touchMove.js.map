{"version":3,"sources":["analytics/plugins/touchMove.js"],"names":["define","lang","dxa","config","window","on","touch","plugins","touchMove","undefined","this","watchTouch","showTouchesDetails","touchSampleDelay","targetProps","textContentMaxChars","addData","hitch","sampleTouchMove","e","_rateLimited","trimTouchEvent","setTimeout","_lastTouchEvent","doc","move","handleTarget","t","target","i","props","j","length","substr","val","s"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,WAAY,oBAAqB,oBAAqB,UAAW,cACzF,SAASC,EAAMC,EAAKC,EAAQC,EAAQC,EAAIC,GAG1C,OAAQJ,EAAIK,QAAQC,UAAY,IAAI,gBACPC,IAAzBN,EAAmB,YAAoBA,EAAmB,WAG5DO,KAAKC,YAAa,EAFlBD,KAAKC,YAAa,OAIiBF,IAAjCN,EAA2B,oBAAoBA,EAA2B,mBAG5EO,KAAKE,oBAAqB,EAF1BF,KAAKE,oBAAqB,EAI3BF,KAAKG,iBAAmBV,EAAyB,kBAAK,IACtDO,KAAKI,YAAcX,EAAoB,cAAM,KAAK,YAAY,YAAY,OAAQ,aAAc,OAAQ,cAAe,SACvHO,KAAKK,oBAAsBZ,EAA4B,qBAAK,GAC5DO,KAAKM,QAAUf,EAAKgB,MAAMf,EAAK,UAAW,cAE1CQ,KAAKQ,gBAAkB,SAASC,GAa/B,OAZIT,KAAKU,eACRV,KAAKM,QAAQ,SAASN,KAAKW,eAAeF,IAC1CT,KAAKU,cAAe,EACpBE,WAAWrB,EAAKgB,MAAMP,KAAM,WACxBA,KAAKU,eACPV,KAAKW,eAAeX,KAAKa,wBAClBb,KAAKa,uBACLb,KAAKU,gBAEVV,KAAKG,mBAEVH,KAAKa,gBAAkBJ,EAChBA,GAGRd,EAAGD,EAAOoB,IAAKlB,EAAMmB,KAAMxB,EAAKgB,MAAMP,KAAM,oBAE5CA,KAAKgB,aAAe,SAASC,EAAGC,EAAQC,GACvC,IAAIC,EAAQpB,KAAKI,YACjBa,EAAEE,MACF,IAAI,IAAIE,EAAI,EAAEA,EAAID,EAAME,OAAOD,KACT,iBAAVH,GAAuC,mBAAVA,IAAyBE,EAAMC,KAAMH,IAE7D,QAAZE,EAAMC,IAA4B,eAAZD,EAAMC,GAC3BH,EAAkB,WAA6B,QAAvBA,EAAkB,WAAwC,QAAvBA,EAAkB,YAC/ED,EAAEE,GAAGC,EAAMC,IAAMH,EAAOE,EAAMC,IAAIE,OAAO,EAAEvB,KAAKK,sBAGjDY,EAAEE,GAAGC,EAAMC,IAAMH,EAAOE,EAAMC,MAMlCrB,KAAKW,eAAiB,SAASF,GAC9B,IACIe,EADAP,KAEJ,IAAI,IAAIE,KAAKV,EACZ,OAAOU,GACN,IAAK,SACJnB,KAAKgB,aAAaC,EAAGR,EAAEU,GAAIA,GAC3B,MACA,IAAK,UAIJ,GAHmB,IAAhBV,EAAEU,GAAGG,SACPL,EAAE,kBAAoBR,EAAEU,GAAGG,QAEzBtB,KAAKE,mBACP,IAAI,IAAImB,EAAI,EAAEA,EAAIZ,EAAEU,GAAGG,OAAOD,IAC7B,IAAI,IAAII,KAAKhB,EAAEU,GAAGE,GACjB,OAAOI,GACN,IAAK,SACJzB,KAAKgB,aAAaC,EAAGR,EAAEU,GAAGE,GAAGH,OAAQ,WAAWG,EAAE,aACnD,MACA,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACDZ,EAAEU,GAAGE,KACPG,EAAMf,EAAEU,GAAGE,GAAGI,GACdR,EAAE,WAAWI,EAAE,KAAKI,EAAE,KAAOD,EAAM,IAU1C,MACD,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACDf,EAAEU,KACJK,EAAMf,EAAEU,GACRF,EAAEE,GAAKK,EAAM,IAQjB,OAAOP","file":"../../../analytics/plugins/touchMove.js","sourcesContent":["define([\"dojo/_base/lang\", \"../_base\", \"dojo/_base/config\", \"dojo/_base/window\", \"dojo/on\", \"dojo/touch\"\r\n], function(lang, dxa, config, window, on, touch){\r\n\r\n\r\n\treturn (dxa.plugins.touchMove = new (function(){\r\n\t\tif(config[\"watchTouch\"] !== undefined && !config[\"watchTouch\"]){\r\n\t\t\tthis.watchTouch = false;\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.watchTouch = true;\r\n\t\t}\r\n\t\tif(config[\"showTouchesDetails\"] !== undefined && !config[\"showTouchesDetails\"]){\r\n\t\t\tthis.showTouchesDetails = false;\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.showTouchesDetails = true;\r\n\t\t}\r\n\t\tthis.touchSampleDelay = config[\"touchSampleDelay\"] || 1000;\r\n\t\tthis.targetProps = config[\"targetProps\"] || [\"id\",\"className\",\"localName\",\"href\", \"spellcheck\", \"lang\", \"textContent\", \"value\" ];\r\n\t\tthis.textContentMaxChars = config[\"textContentMaxChars\"] || 50;\r\n\t\tthis.addData = lang.hitch(dxa, \"addData\", \"touch.move\");\r\n\t\t\r\n\t\tthis.sampleTouchMove = function(e){\r\n\t\t\tif(!this._rateLimited){\r\n\t\t\t\tthis.addData(\"sample\",this.trimTouchEvent(e));\r\n\t\t\t\tthis._rateLimited = true;\r\n\t\t\t\tsetTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\tif(this._rateLimited){\r\n\t\t\t\t\t\tthis.trimTouchEvent(this._lastTouchEvent);\r\n\t\t\t\t\t\tdelete this._lastTouchEvent;\r\n\t\t\t\t\t\tdelete this._rateLimited;\r\n\t\t\t\t\t}\r\n\t\t\t\t}), this.touchSampleDelay);\r\n\t\t\t}\r\n\t\t\tthis._lastTouchEvent = e;\r\n\t\t\treturn e;\r\n\t\t};\r\n\r\n\t\ton(window.doc, touch.move, lang.hitch(this, \"sampleTouchMove\"));\r\n\r\n\t\tthis.handleTarget = function(t, target, i){\r\n\t\t\tvar props = this.targetProps;\r\n\t\t\tt[i] = {};\r\n\t\t\tfor(var j = 0;j < props.length;j++){\r\n\t\t\t\tif((typeof target == \"object\" || typeof target == \"function\") && props[j] in target){\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\tif(props[j] == \"text\" || props[j] == \"textContent\"){\r\n\t\t\t\t\t\tif(target[\"localName\"] && (target[\"localName\"] != \"HTML\") && (target[\"localName\"] != \"BODY\")){\r\n\t\t\t\t\t\t\tt[i][props[j]] = target[props[j]].substr(0,this.textContentMaxChars);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tt[i][props[j]] = target[props[j]];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tthis.trimTouchEvent = function(e){\r\n\t\t\tvar t = {};\r\n\t\t\tvar val;\r\n\t\t\tfor(var i in e){\r\n\t\t\t\tswitch(i){\r\n\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t\tthis.handleTarget(t, e[i], i)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"touches\":\r\n\t\t\t\t\t\t\tif(e[i].length !== 0){\r\n\t\t\t\t\t\t\t\tt[\"touches.length\"] = e[i].length;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.showTouchesDetails){\r\n\t\t\t\t\t\t\t\tfor(var j = 0;j < e[i].length;j++){\r\n\t\t\t\t\t\t\t\t\tfor(var s in e[i][j]){\r\n\t\t\t\t\t\t\t\t\t\tswitch(s){\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.handleTarget(t, e[i][j].target, \"touches[\"+j+\"][target]\");\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"clientX\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"clientY\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(e[i][j]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval = e[i][j][s];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tt[\"touches[\"+j+\"][\"+s+\"]\"] = val + '';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(\"Skipping: \", i);\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"clientX\":\r\n\t\t\t\t\tcase \"clientY\":\r\n\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\t\tif(e[i]){\r\n\t\t\t\t\t\t\tval = e[i];\r\n\t\t\t\t\t\t\tt[i] = val + '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t//console.log(\"Skipping: \", i);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t};\r\n\t})());\r\n});\r\n"]}