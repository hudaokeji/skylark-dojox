{"version":3,"sources":["analytics/plugins/touchPress.js"],"names":["define","lang","dxa","config","window","on","touch","plugins","touchPress","undefined","this","showTouchesDetails","targetProps","textContentMaxChars","addData","hitch","onTouchPress","e","trimEvent","addDataRelease","onTouchRelease","doc","press","release","handleTarget","t","target","i","props","j","length","substr","s","val"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAkB,WAAY,oBAAqB,oBAAqB,UAAW,cACxF,SAASC,EAAMC,EAAKC,EAAQC,EAAQC,EAAIC,GAG1C,OAAQJ,EAAIK,QAAQC,WAAa,IAAI,gBACAC,IAAjCN,EAA2B,oBAAoBA,EAA2B,mBAG5EO,KAAKC,oBAAqB,EAF1BD,KAAKC,oBAAqB,EAI3BD,KAAKE,YAAcT,EAAoB,cAAM,KAAK,YAAY,WAAY,YAAY,OAAQ,aAAc,QAC5GO,KAAKG,oBAAsBV,EAA4B,qBAAK,GAE5DO,KAAKI,QAAUb,EAAKc,MAAMb,EAAK,UAAW,eAC1CQ,KAAKM,aAAe,SAASC,GAC5BP,KAAKI,QAAQJ,KAAKQ,UAAUD,KAG7BP,KAAKS,eAAiBlB,EAAKc,MAAMb,EAAK,UAAW,iBACjDQ,KAAKU,eAAiB,SAASH,GAC9BP,KAAKS,eAAeT,KAAKQ,UAAUD,KAGpCZ,EAAGD,EAAOiB,IAAKf,EAAMgB,MAAOrB,EAAKc,MAAML,KAAM,iBAC7CL,EAAGD,EAAOiB,IAAKf,EAAMiB,QAAStB,EAAKc,MAAML,KAAM,mBAE/CA,KAAKc,aAAe,SAASC,EAAGC,EAAQC,GACvC,IAAIC,EAAQlB,KAAKE,YACjBa,EAAEE,MACF,IAAI,IAAIE,EAAI,EAAEA,EAAID,EAAME,OAAOD,KACT,iBAAVH,GAAuC,mBAAVA,IAAyBE,EAAMC,KAAMH,IAE7D,QAAZE,EAAMC,IAA4B,eAAZD,EAAMC,GAC3BH,EAAkB,WAA6B,QAAvBA,EAAkB,WAAwC,QAAvBA,EAAkB,YAC/ED,EAAEE,GAAGC,EAAMC,IAAMH,EAAOE,EAAMC,IAAIE,OAAO,EAAErB,KAAKG,sBAGjDY,EAAEE,GAAGC,EAAMC,IAAMH,EAAOE,EAAMC,MAOlCnB,KAAKQ,UAAY,SAASD,GACzB,IAAIQ,KACJ,IAAI,IAAIE,KAAKV,EACZ,OAAOU,GACN,IAAK,SACJjB,KAAKc,aAAaC,EAAGR,EAAEU,GAAIA,GAC3B,MACA,IAAK,UAIJ,GAHmB,IAAhBV,EAAEU,GAAGG,SACPL,EAAE,kBAAoBR,EAAEU,GAAGG,QAEzBpB,KAAKC,mBACP,IAAI,IAAIkB,EAAI,EAAEA,EAAIZ,EAAEU,GAAGG,OAAOD,IAC7B,IAAI,IAAIG,KAAKf,EAAEU,GAAGE,GACjB,OAAOG,GACN,IAAK,SACJtB,KAAKc,aAAaC,EAAGR,EAAEU,GAAGE,GAAGH,OAAQ,WAAWG,EAAE,aACnD,MACA,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACJ,GAAGZ,EAAEU,GAAGE,GAAG,CACV,IAAII,EAAMhB,EAAEU,GAAGE,GAAGG,GAClBP,EAAE,WAAWI,EAAE,KAAKG,EAAE,KAAOC,EAAM,IAU1C,MACD,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACJR,EAAEE,GAAKV,EAAEU,GAIZ,OAAOF","file":"../../../analytics/plugins/touchPress.js","sourcesContent":["define([\"dojo/_base/lang\",\"../_base\", \"dojo/_base/config\", \"dojo/_base/window\", \"dojo/on\", \"dojo/touch\"\r\n], function(lang, dxa, config, window, on, touch){\r\n\r\n\t// window startup data\r\n\treturn (dxa.plugins.touchPress = new (function(){\r\n\t\tif(config[\"showTouchesDetails\"] !== undefined && !config[\"showTouchesDetails\"]){\r\n\t\t\tthis.showTouchesDetails = false;\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.showTouchesDetails = true;\r\n\t\t}\r\n\t\tthis.targetProps = config[\"targetProps\"] || [\"id\",\"className\",\"nodeName\", \"localName\",\"href\", \"spellcheck\", \"lang\"];\r\n\t\tthis.textContentMaxChars = config[\"textContentMaxChars\"] || 50;\r\n\r\n\t\tthis.addData = lang.hitch(dxa, \"addData\", \"touch.press\");\r\n\t\tthis.onTouchPress = function(e){\r\n\t\t\tthis.addData(this.trimEvent(e));\r\n\t\t};\r\n\r\n\t\tthis.addDataRelease = lang.hitch(dxa, \"addData\", \"touch.release\");\r\n\t\tthis.onTouchRelease = function(e){\r\n\t\t\tthis.addDataRelease(this.trimEvent(e));\r\n\t\t};\r\n\r\n\t\ton(window.doc, touch.press, lang.hitch(this, \"onTouchPress\"));\r\n\t\ton(window.doc, touch.release, lang.hitch(this, \"onTouchRelease\"));\r\n\r\n\t\tthis.handleTarget = function(t, target, i){\r\n\t\t\tvar props = this.targetProps;\r\n\t\t\tt[i] = {};\r\n\t\t\tfor(var j = 0;j < props.length;j++){\r\n\t\t\t\tif((typeof target == \"object\" || typeof target == \"function\") && props[j] in target){\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\tif(props[j] == \"text\" || props[j] == \"textContent\"){\r\n\t\t\t\t\t\tif(target[\"localName\"] && (target[\"localName\"] != \"HTML\") && (target[\"localName\"] != \"BODY\")){\r\n\t\t\t\t\t\t\tt[i][props[j]] = target[props[j]].substr(0,this.textContentMaxChars);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tt[i][props[j]] = target[props[j]];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\r\n\t\tthis.trimEvent = function(e){\r\n\t\t\tvar t = {};\r\n\t\t\tfor(var i in e){\r\n\t\t\t\tswitch(i){\r\n\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t\tthis.handleTarget(t, e[i], i)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"touches\":\r\n\t\t\t\t\t\t\tif(e[i].length !== 0){\r\n\t\t\t\t\t\t\t\tt[\"touches.length\"] = e[i].length;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.showTouchesDetails){\r\n\t\t\t\t\t\t\t\tfor(var j = 0;j < e[i].length;j++){\r\n\t\t\t\t\t\t\t\t\tfor(var s in e[i][j]){\r\n\t\t\t\t\t\t\t\t\t\tswitch(s){\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.handleTarget(t, e[i][j].target, \"touches[\"+j+\"][target]\");\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"clientX\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"clientY\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(e[i][j]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar val = e[i][j][s];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tt[\"touches[\"+j+\"][\"+s+\"]\"] = val + '';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(\"Skipping: \", i);\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"clientX\":\r\n\t\t\t\t\tcase \"clientY\":\r\n\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\t\tt[i] = e[i];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t};\r\n\t})());\r\n});\r\n"]}