{"version":3,"sources":["analytics/plugins/gestureEvents.js"],"names":["define","lang","dxa","window","on","config","touch","tap","swipe","plugins","gestureEvents","undefined","this","watchSwipe","swipeSampleDelay","targetProps","textContentMaxChars","addDataSwipe","hitch","sampleSwipe","e","_rateLimited","trimEvent","setTimeout","_lastSwipeEvent","doc","addData","onGestureTap","addDataDoubleTap","onGestureDoubleTap","doubletap","addDataTapHold","onGestureTapHold","hold","t","i","props","j","length","substr"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAkB,WAAY,oBAAqB,UAAW,oBAAqB,aACzF,oBAAqB,uBAEpB,SAASC,EAAMC,EAAKC,EAAQC,EAAIC,EAAQC,EAAOC,EAAKC,GAGtD,OAAQN,EAAIO,QAAQC,cAAgB,IAAI,gBAGXC,IAAzBN,EAAmB,YAAoBA,EAAmB,WAG5DO,KAAKC,YAAa,EAFlBD,KAAKC,YAAa,EAInBD,KAAKE,iBAAmBT,EAAyB,kBAAK,IACtDO,KAAKG,YAAcV,EAAoB,cAAM,KAAK,YAAY,YAAY,OAAQ,aAAc,OAAQ,cAAe,SACvHO,KAAKI,oBAAsBX,EAA4B,qBAAK,GAE5DO,KAAKK,aAAehB,EAAKiB,MAAMhB,EAAK,UAAW,iBAC/CU,KAAKO,YAAc,SAASC,GAa3B,OAZIR,KAAKS,eACRT,KAAKK,aAAaL,KAAKU,UAAUF,IACjCR,KAAKS,cAAe,EACpBE,WAAWtB,EAAKiB,MAAMN,KAAM,WACxBA,KAAKS,eACPT,KAAKU,UAAUV,KAAKY,wBACbZ,KAAKY,uBACLZ,KAAKS,gBAEVT,KAAKE,mBAEVF,KAAKY,gBAAkBJ,EAChBA,GAELR,KAAKC,YACPT,EAAGD,EAAOsB,IAAKjB,EAAOP,EAAKiB,MAAMN,KAAM,gBAKxCA,KAAKc,QAAUzB,EAAKiB,MAAMhB,EAAK,UAAW,eAC1CU,KAAKe,aAAe,SAASP,GAC5BR,KAAKc,QAAQd,KAAKU,UAAUF,KAE7BhB,EAAGD,EAAOsB,IAAKlB,EAAKN,EAAKiB,MAAMN,KAAM,iBAGrCA,KAAKgB,iBAAmB3B,EAAKiB,MAAMhB,EAAK,UAAW,yBACnDU,KAAKiB,mBAAqB,SAAST,GAClCR,KAAKgB,iBAAiBhB,KAAKU,UAAUF,KAEtChB,EAAGD,EAAOsB,IAAKlB,EAAIuB,UAAW7B,EAAKiB,MAAMN,KAAM,uBAG/CA,KAAKmB,eAAiB9B,EAAKiB,MAAMhB,EAAK,UAAW,uBACjDU,KAAKoB,iBAAmB,SAASZ,GAChCR,KAAKmB,eAAenB,KAAKU,UAAUF,KAEpChB,EAAGD,EAAOsB,IAAKlB,EAAI0B,KAAMhC,EAAKiB,MAAMN,KAAM,qBAG1CA,KAAKU,UAAY,SAASF,GACzB,IAAIc,KACJ,IAAI,IAAIC,KAAKf,EACZ,OAAOe,GACN,IAAK,SACJ,IAAIC,EAAQxB,KAAKG,YACjBmB,EAAEC,MACF,IAAI,IAAIE,EAAI,EAAEA,EAAID,EAAME,OAAOD,IAC3BjB,EAAEe,GAAGC,EAAMC,MACE,QAAZD,EAAMC,IAA4B,eAAZD,EAAMC,GACL,QAArBjB,EAAEe,GAAc,WAAsC,QAArBf,EAAEe,GAAc,YACpDD,EAAEC,GAAGC,EAAMC,IAAMjB,EAAEe,GAAGC,EAAMC,IAAIE,OAAO,EAAE3B,KAAKI,sBAG/CkB,EAAEC,GAAGC,EAAMC,IAAMjB,EAAEe,GAAGC,EAAMC,KAI/B,MACD,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,KACL,IAAK,KACL,IAAK,OACJH,EAAEC,GAAKf,EAAEe,GAIZ,OAAOD","file":"../../../analytics/plugins/gestureEvents.js","sourcesContent":["define([\"dojo/_base/lang\",\"../_base\", \"dojo/_base/window\", \"dojo/on\", \"dojo/_base/config\", \"dojo/touch\",\r\n\t\t\"dojox/gesture/tap\", \"dojox/gesture/swipe\"\r\n\r\n], function(lang, dxa, window, on, config, touch, tap, swipe){\r\n\r\n\t// window startup data\r\n\treturn (dxa.plugins.gestureEvents = new (function(){\r\n\r\n\t\t// watch for dojox.gesture.swipe, use delay to avoid getting too many\r\n\t\tif(config[\"watchSwipe\"] !== undefined && !config[\"watchSwipe\"]){\r\n\t\t\tthis.watchSwipe = false;\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.watchSwipe = true;\r\n\t\t}\r\n\t\tthis.swipeSampleDelay = config[\"swipeSampleDelay\"] || 1000;\r\n\t\tthis.targetProps = config[\"targetProps\"] || [\"id\",\"className\",\"localName\",\"href\", \"spellcheck\", \"lang\", \"textContent\", \"value\" ];\r\n\t\tthis.textContentMaxChars = config[\"textContentMaxChars\"] || 50;\r\n\r\n\t\tthis.addDataSwipe = lang.hitch(dxa, \"addData\", \"gesture.swipe\");\r\n\t\tthis.sampleSwipe = function(e){\r\n\t\t\tif(!this._rateLimited){\r\n\t\t\t\tthis.addDataSwipe(this.trimEvent(e));\r\n\t\t\t\tthis._rateLimited = true;\r\n\t\t\t\tsetTimeout(lang.hitch(this, function(){\r\n\t\t\t\t\tif(this._rateLimited){\r\n\t\t\t\t\t\tthis.trimEvent(this._lastSwipeEvent);\r\n\t\t\t\t\t\tdelete this._lastSwipeEvent;\r\n\t\t\t\t\t\tdelete this._rateLimited;\r\n\t\t\t\t\t}\r\n\t\t\t\t}), this.swipeSampleDelay);\r\n\t\t\t}\r\n\t\t\tthis._lastSwipeEvent = e;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\tif(this.watchSwipe){\r\n\t\t\ton(window.doc, swipe, lang.hitch(this, \"sampleSwipe\"));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// watch for dojox.gesture.tap\r\n\t\tthis.addData = lang.hitch(dxa, \"addData\", \"gesture.tap\");\r\n\t\tthis.onGestureTap = function(e){\r\n\t\t\tthis.addData(this.trimEvent(e));\r\n\t\t}\r\n\t\ton(window.doc, tap, lang.hitch(this, \"onGestureTap\"));\r\n\r\n\t\t// watch for dojox.gesture.tap.doubletap\r\n\t\tthis.addDataDoubleTap = lang.hitch(dxa, \"addData\", \"gesture.tap.doubletap\");\r\n\t\tthis.onGestureDoubleTap = function(e){\r\n\t\t\tthis.addDataDoubleTap(this.trimEvent(e));\r\n\t\t}\r\n\t\ton(window.doc, tap.doubletap, lang.hitch(this, \"onGestureDoubleTap\"));\r\n\r\n\t\t// watch for dojox.gesture.tap.taphold\r\n\t\tthis.addDataTapHold = lang.hitch(dxa, \"addData\", \"gesture.tap.taphold\");\r\n\t\tthis.onGestureTapHold = function(e){\r\n\t\t\tthis.addDataTapHold(this.trimEvent(e));\r\n\t\t}\r\n\t\ton(window.doc, tap.hold, lang.hitch(this, \"onGestureTapHold\"));\r\n\t\t\t\r\n\t\t\r\n\t\tthis.trimEvent = function(e){\r\n\t\t\tvar t = {};\r\n\t\t\tfor(var i in e){\r\n\t\t\t\tswitch(i){\r\n\t\t\t\t\tcase \"target\":\r\n\t\t\t\t\t\tvar props = this.targetProps;\t\t\t\t\t\t\r\n\t\t\t\t\t\tt[i] = {};\r\n\t\t\t\t\t\tfor(var j = 0;j < props.length;j++){\r\n\t\t\t\t\t\t\tif(e[i][props[j]]){\r\n\t\t\t\t\t\t\t\tif(props[j] == \"text\" || props[j] == \"textContent\"){\r\n\t\t\t\t\t\t\t\t\tif((e[i][\"localName\"] != \"HTML\") && (e[i][\"localName\"] != \"BODY\")){\r\n\t\t\t\t\t\t\t\t\t\tt[i][props[j]] = e[i][props[j]].substr(0,this.textContentMaxChars);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tt[i][props[j]] = e[i][props[j]];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"clientX\":\r\n\t\t\t\t\tcase \"clientY\":\r\n\t\t\t\t\tcase \"screenX\":\r\n\t\t\t\t\tcase \"screenY\":\r\n\t\t\t\t\tcase \"dx\":\r\n\t\t\t\t\tcase \"dy\":\r\n\t\t\t\t\tcase \"time\":\r\n\t\t\t\t\t\tt[i] = e[i];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t}\r\n\t})());\r\n});\r\n"]}