{"version":3,"sources":["io/xhrScriptPlugin.js"],"names":["define","dojo","window","script","xhrPlugins","scriptFrame","getObject","dojox","io","xhrScriptPlugin","url","callbackParamName","httpAdapter","register","method","args","sync","substring","length","hasBody","send","body","frameDoc","Math","random","get"],"mappings":";;;;;;;AAAAA,QAAQ,oBAAqB,oBAAqB,iBAAkB,sBAAuB,wBAAyB,SAASC,EAAMC,EAAQC,EAAQC,EAAYC,GAkC/J,OAjCAJ,EAAKK,UAAU,sBAAsB,EAAMC,OAE3CA,MAAMC,GAAGC,gBAAkB,SAAmBC,EAAeC,EAAgCC,GAW5FR,EAAWS,SACV,SACA,SAASC,EAAOC,GACd,OAAqB,IAAdA,EAAKC,OACD,OAAVF,GAAmBF,IACnBG,EAAKL,IAAIO,UAAU,EAAEP,EAAIQ,SAAWR,GAEvC,SAASI,EAAOC,EAAKI,GACpB,IAAIC,EAAO,WAKV,OAJAL,EAAKJ,kBAAoBA,EACtBV,EAAKoB,SACPN,EAAKO,SAAW,QAAUC,KAAKC,UAEzBrB,EAAOsB,IAAIV,IAEnB,OAAQH,EAAcA,EAAYQ,GAAM,GAAQA,GAAMN,EAAQC,EAAMI,MAKhEZ,MAAMC,GAAGC","file":"../../io/xhrScriptPlugin.js","sourcesContent":["define([\"dojo/_base/kernel\", \"dojo/_base/window\", \"dojo/io/script\", \"dojox/io/xhrPlugins\", \"dojox/io/scriptFrame\"], function(dojo, window, script, xhrPlugins, scriptFrame){\r\ndojo.getObject(\"io.xhrScriptPlugin\", true, dojox);\r\n\r\ndojox.io.xhrScriptPlugin = function(/*String*/url, /*String*/callbackParamName, /*Function?*/httpAdapter){\r\n\t// summary:\r\n\t//\t\tAdds the script transport (JSONP) as an XHR plugin for the given site. See\r\n\t//\t\tdojox.io.script for more information on the transport. Note, that JSONP\r\n\t//\t\tis *not* a secure transport, by loading data from a third-party site using JSONP\r\n\t//\t\tthe site has full access to your JavaScript environment.\r\n\t// url:\r\n\t//\t\tUrl prefix of the site which can handle JSONP requests.\r\n\t// httpAdapter:\r\n\t//\t\tThis allows for adapting HTTP requests that could not otherwise be\r\n\t//\t\tsent with JSONP, so you can use a convention for headers and PUT/DELETE methods.\r\n\txhrPlugins.register(\r\n\t\t\"script\",\r\n\t\tfunction(method,args){\r\n\t\t\t return args.sync !== true &&\r\n\t\t\t\t(method == \"GET\" || httpAdapter) &&\r\n\t\t\t\t(args.url.substring(0,url.length) == url);\r\n\t\t},\r\n\t\tfunction(method,args,hasBody){\r\n\t\t\tvar send = function(){\r\n\t\t\t\targs.callbackParamName = callbackParamName;\r\n\t\t\t\tif(dojo.body()){\r\n\t\t\t\t\targs.frameDoc = \"frame\" + Math.random();\r\n\t\t\t\t}\r\n\t\t\t\treturn script.get(args);\r\n\t\t\t};\r\n\t\t\treturn (httpAdapter ? httpAdapter(send, true) : send)(method, args, hasBody); // use the JSONP transport\r\n\t\t}\r\n\t);\r\n};\r\n\r\nreturn dojox.io.xhrScriptPlugin;\r\n});\r\n"]}