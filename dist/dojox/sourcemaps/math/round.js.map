{"version":3,"sources":["math/round.js"],"names":["define","dojo","dojox","getObject","experimental","math","round","value","places","increment","wholeFigs","Math","log","abs","factor","delta","pow","toFixed","v","p","m","d","a"],"mappings":";;;;;;;AACAA,QAAQ,OAAQ,SAAU,SAASC,EAAMC,GAiDxC,GA/CAD,EAAKE,UAAU,cAAc,EAAMD,GACnCD,EAAKG,aAAa,oBAElBF,EAAMG,KAAKC,MAAQ,SAAmBC,EAAkBC,EAAmBC,GAsC1E,IAAIC,EAAYC,KAAKC,IAAID,KAAKE,IAAIN,IAAQI,KAAKC,IAAI,IAC/CE,EAAS,IAAML,GAAa,IAC5BM,EAAQJ,KAAKK,IAAI,IAAK,GAAKN,GAC/B,OAAQI,IAAWP,GAASA,EAAQ,EAAIQ,GAASA,KAASE,QAAQT,GAAUM,GAGvD,GAAnB,GAAMG,UAAe,CAGvB,IAAIX,EAAQJ,EAAMG,KAAKC,MACvBJ,EAAMG,KAAKC,MAAQ,SAASY,EAAGC,EAAGC,GACjC,IAAIC,EAAIV,KAAKK,IAAI,IAAKG,GAAK,GAAIG,EAAIX,KAAKE,IAAIK,GAS5C,OARIA,GAAKI,GAAKD,EACbA,EAAI,IAEJC,GAAKD,GACE,IAAOC,GAAK,OAClBD,EAAI,GAGCf,EAAMY,EAAGC,EAAGC,IAAMF,EAAI,EAAIG,GAAKA,IAIxC,OAAOnB,EAAMG,KAAKC","file":"../../math/round.js","sourcesContent":["// AMD-ID \"dojox/math/round\"\r\ndefine([\"dojo\", \"dojox\"], function(dojo, dojox) {\r\n\r\n\tdojo.getObject(\"math.round\", true, dojox);\r\n\tdojo.experimental(\"dojox.math.round\");\r\n\r\n\tdojox.math.round = function(/*Number*/value, /*Number?*/places, /*Number?*/increment){\r\n\t\t// summary:\r\n\t\t//\t\tSimilar to dojo.number.round, but compensates for binary floating point artifacts\r\n\t\t// description:\r\n\t\t//\t\tRounds to the nearest value with the given number of decimal places, away from zero if equal,\r\n\t\t//\t\tsimilar to Number.toFixed().  Rounding can be done by fractional increments also.\r\n\t\t//\t\tMakes minor adjustments to accommodate for precision errors due to binary floating point representation\r\n\t\t//\t\tof Javascript Numbers.  See http://speleotrove.com/decimal/decifaq.html for more information.\r\n\t\t//\t\tBecause of this adjustment, the rounding may not be mathematically correct for full precision\r\n\t\t//\t\tfloating point values.  The calculations assume 14 significant figures, so the accuracy will\r\n\t\t//\t\tbe limited to a certain number of decimal places preserved will vary with the magnitude of\r\n\t\t//\t\tthe input.  This is not a substitute for decimal arithmetic.\r\n\t\t// value:\r\n\t\t//\t\tThe number to round\r\n\t\t// places:\r\n\t\t//\t\tThe number of decimal places where rounding takes place.  Defaults to 0 for whole rounding.\r\n\t\t//\t\tMust be non-negative.\r\n\t\t// increment:\r\n\t\t//\t\tRounds next place to nearest value of increment/10.  10 by default.\r\n\t\t// example:\r\n\t\t//\t|\t>>> 4.8-(1.1+2.2)\r\n\t\t//\t|\t1.4999999999999996\r\n\t\t//\t|\t>>> Math.round(4.8-(1.1+2.2))\r\n\t\t//\t|\t1\r\n\t\t//\t|\t>>> dojox.math.round(4.8-(1.1+2.2))\r\n\t\t//\t|\t2\r\n\t\t//\t|\t>>> ((4.8-(1.1+2.2))/100)\r\n\t\t//\t|\t0.014999999999999996\r\n\t\t//\t|\t>>> ((4.8-(1.1+2.2))/100).toFixed(2)\r\n\t\t//\t|\t\"0.01\"\r\n\t\t//\t|\t>>> dojox.math.round((4.8-(1.1+2.2))/100,2)\r\n\t\t//\t|\t0.02\r\n\t\t//\t|\t>>> dojox.math.round(10.71, 0, 2.5)\r\n\t\t//\t|\t10.75\r\n\t\t//\t|\t>>> dojo.number.round(162.295, 2)\r\n\t\t//\t|\t162.29\r\n\t\t//\t|\t>>> dojox.math.round(162.295, 2)\r\n\t\t//\t|\t162.3\r\n\t\tvar wholeFigs = Math.log(Math.abs(value))/Math.log(10);\r\n\t\tvar factor = 10 / (increment || 10);\r\n\t\tvar delta = Math.pow(10, -15 + wholeFigs);\r\n\t\treturn (factor * (+value + (value > 0 ? delta : -delta))).toFixed(places) / factor; // Number\r\n\t}\r\n\r\n\tif((0.9).toFixed() == 0){\r\n\t\t// (isIE) toFixed() bug workaround: Rounding fails on IE when most significant digit\r\n\t\t// is just after the rounding place and is >=5\r\n\t\tvar round = dojox.math.round;\r\n\t\tdojox.math.round = function(v, p, m){\r\n\t\t\tvar d = Math.pow(10, -p || 0), a = Math.abs(v);\r\n\t\t\tif(!v || a >= d){\r\n\t\t\t\td = 0;\r\n\t\t\t}else{\r\n\t\t\t\ta /= d;\r\n\t\t\t\tif(a < 0.5 || a >= 0.95){\r\n\t\t\t\t\td = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn round(v, p, m) + (v > 0 ? d : -d);\r\n\t\t}\r\n\t}\r\n\r\n\treturn dojox.math.round;\r\n});\r\n"]}