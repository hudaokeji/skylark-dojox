{"version":3,"sources":["xmpp/widget/ChatSession.js"],"names":["dojo","provide","require","declare","dijit","layout","LayoutContainer","_Templated","templateString","cache","enableSubWidgets","widgetsInTemplate","widgetType","chatWith","instance","postCreate","displayMessage","message","type","name","from","this","messages","domNode","innerHTML","body","goToLastMessage","scrollTop","scrollHeight","onKeyPress","e","keyCode","charCode","keys","ENTER","chatInput","value","sendMessage"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,iCAEbD,KAAKE,QAAQ,gCACbF,KAAKE,QAAQ,oBAEbF,KAAKG,QAAQ,iCACXC,MAAMC,OAAOC,gBAAiBF,MAAMG,aAEnCC,eAAgBR,KAAKS,MAAM,oBAAqB,8BAChDC,kBAAkB,EAClBC,mBAAmB,EAEnBC,WAAY,cACZC,SAAU,KACVC,SAAU,KACVC,WAAY,aAIZC,eAAgB,SAASC,EAASC,GAEjC,GAAGD,EAAS,CACX,IAAIE,EAAQF,EAAQG,KAAOC,KAAKR,SAAW,KAC3CQ,KAAKC,SAASC,QAAQC,WAAa,MAAQL,EAAO,SAAaF,EAAQQ,KAAO,QAC9EJ,KAAKK,oBAKPA,gBAAiB,WAChBL,KAAKC,SAASC,QAAQI,UAAYN,KAAKC,SAASC,QAAQK,cAGzDC,WAAY,SAASC,IACVA,EAAEC,SAAWD,EAAEE,WACbhC,KAAKiC,KAAKC,OAAmC,IAAxBb,KAAKc,UAAUC,QAC/Cf,KAAKP,SAASuB,aAAaZ,KAAMJ,KAAKc,UAAUC,QAChDf,KAAKL,gBAAiBS,KAAMJ,KAAKc,UAAUC,OAAQ,OACnDf,KAAKc,UAAUC,MAAQ","file":"../../../xmpp/widget/ChatSession.js","sourcesContent":["dojo.provide(\"dojox.xmpp.widget.ChatSession\");\r\n\r\ndojo.require(\"dijit.layout.LayoutContainer\");\r\ndojo.require(\"dijit._Templated\");\r\n\r\ndojo.declare(\"dojox.xmpp.widget.ChatSession\",\r\n\t[dijit.layout.LayoutContainer, dijit._Templated],\r\n\t{\r\n\t\t\ttemplateString: dojo.cache(\"dojox.xmpp.widget\", \"templates/ChatSession.html\"),\r\n\t\t\tenableSubWidgets: true,\r\n\t\t\twidgetsInTemplate: true,\r\n\t\t\t\r\n\t\t\twidgetType: \"ChatSession\",\r\n\t\t\tchatWith: null,\r\n\t\t\tinstance: null,\r\n\t\t\tpostCreate: function(){\r\n\t\t\t\t//console.log(\"Neato!\");\r\n\t\t\t},\r\n\t\r\n\t\t\tdisplayMessage: function(message, type) {\r\n\t\t\t\t//console.log(\"displayMessage\", this, message);\r\n\t\t\t\tif(message) {\r\n\t\t\t\t\tvar name =  message.from ? this.chatWith : \"me\";\r\n\t\t\t\t\tthis.messages.domNode.innerHTML += \"<b>\" + name + \":</b> \" +   message.body + \"<br/>\";\r\n\t\t\t\t\tthis.goToLastMessage();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgoToLastMessage: function() {\r\n\t\t\t\tthis.messages.domNode.scrollTop = this.messages.domNode.scrollHeight;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tonKeyPress: function(e){\r\n\t\t\t\tvar key = e.keyCode || e.charCode;\r\n\t\t\t\tif ((key == dojo.keys.ENTER) && (this.chatInput.value != \"\")){\r\n\t\t\t\t\tthis.instance.sendMessage({body: this.chatInput.value});\r\n\t\t\t\t\tthis.displayMessage( {body: this.chatInput.value}, \"out\");\r\n\t\t\t\t\tthis.chatInput.value = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n});"]}