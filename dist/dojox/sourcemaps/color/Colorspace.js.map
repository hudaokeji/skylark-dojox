{"version":3,"sources":["color/Colorspace.js"],"names":["define","dcolor","lang","dxm","Colorspace","self","this","wpMap","2","E","x","y","t","D50","D55","D65","D75","A","B","C","9300","F2","F7","F11","10","profiles","Adobe RGB 98","Apple RGB","Best RGB","Beta RGB","Bruce RGB","CIE RGB","ColorMatch RGB","DON RGB 4","ECI RGB","EktaSpace PS5","NTSC RGB","PAL/SECAM RGB","Pro Photo RGB","SMPTE/C RGB","sRGB","Wide Gamut RGB","adaptors","XYZ scaling","ma","mai","Bradford","Von Kries","cMaps","xyY","xyz","kwArgs","dojo","mixin","whitepoint","observer","useApproximation","wp","sum","X","Y","Z","Lab","kappa","epsilon","xr","yr","zr","z","fx","Math","pow","fy","L","a","b","Luv","ud","vd","udr","vdr","u","v","XYZ","lab","fz","fxcube","fzcube","LCHab","H","atan","PI","lch","hRad","tan","lchH","uz","vz","LCHuv","LCH","converters","CMY","CMYK","obj","fromCmy","toCmyk","HSL","toHsl","HSV","toHsv","toXYZ","RGB","fromCmyk","toCmy","fromHsl","fromHsv","fromXYZ","wpName","console","warn","convert","tempToWhitepoint","t2","t3","ten9","ten6","ten3","primaries","profile","adaptor","m","slice","primary","name","gamma","Yr","xg","yg","Yg","xb","yb","Yb","r","adapt","color","source","destination","g","zg","zb","error","swp","dwp","dSrc","multiply","dDest","center","matrix","to","p","Xr","Zr","Xg","Zg","Xb","Zb","m1","m2","sm","inverse","Sr","Sg","Sb","result","useApprox","from","rgb","dojox","math","R","G","Color","floor","extend","_r","_g","_b"],"mappings":"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","file":"../../color/Colorspace.js","sourcesContent":["define([\"./_base\", \"dojo/_base/lang\", \"dojox/math/matrix\"],\r\n\tfunction(dcolor, lang, dxm){\r\n\r\ndcolor.Colorspace = new (function(){\r\n\tvar self=this;\r\n\tvar wpMap={\r\n\t\t\"2\":{\r\n\t\t\t\"E\":\t{ x:1/3,     y:1/3,     t:5400 },\r\n\t\t\t\"D50\":\t{ x:0.34567, y:0.3585,  t:5000 },\r\n\t\t\t\"D55\":\t{ x:0.33242, y:0.34743, t:5500 },\r\n\t\t\t\"D65\":\t{ x:0.31271, y:0.32902, t:6500 },\r\n\t\t\t\"D75\":\t{ x:0.29902, y:0.31485, t:7500 },\r\n\t\t\t\"A\":\t{ x:0.44757, y:0.40745, t:2856 },\r\n\t\t\t\"B\":\t{ x:0.34842, y:0.35161, t:4874 },\r\n\t\t\t\"C\":\t{ x:0.31006, y:0.31616, t:6774 },\r\n\t\t\t\"9300\":\t{ x:0.2848,  y:0.2932,  t:9300 },\r\n\t\t\t\"F2\":\t{ x:0.37207, y:0.37512, t:4200 },\r\n\t\t\t\"F7\":\t{ x:0.31285, y:0.32918, t:6500 },\r\n\t\t\t\"F11\":\t{ x:0.38054, y:0.37691, t:4000 }\r\n\t\t},\r\n\t\t\"10\":{\r\n\t\t\t\"E\":\t{ x:1/3,     y:1/3,     t:5400 },\r\n\t\t\t\"D50\":\t{ x:0.34773, y:0.35952, t:5000 },\r\n\t\t\t\"D55\":\t{ x:0.33411, y:0.34877, t:5500 },\r\n\t\t\t\"D65\":\t{ x:0.31382, y:0.331,   t:6500 },\r\n\t\t\t\"D75\":\t{ x:0.29968, y:0.3174,  t:7500 },\r\n\t\t\t\"A\":\t{ x:0.45117, y:0.40594, t:2856 },\r\n\t\t\t\"B\":\t{ x:0.3498,  y:0.3527,  t:4874 },\r\n\t\t\t\"C\":\t{ x:0.31039, y:0.31905, t:6774 },\r\n\t\t\t\"F2\":\t{ x:0.37928, y:0.36723, t:4200 },\r\n\t\t\t\"F7\":\t{ x:0.31565, y:0.32951, t:6500 },\r\n\t\t\t\"F11\":\t{ x:0.38543, y:0.3711,  t:4000 }\r\n\t\t}\r\n\t};\r\n\r\n\tvar profiles={\r\n\t\t\"Adobe RGB 98\":[2.2, \"D65\", 0.64, 0.33, 0.297361, 0.21, 0.71, 0.627355, 0.15, 0.06, 0.075285],\r\n\t\t\"Apple RGB\":[1.8, \"D65\", 0.625, 0.34, 0.244634, 0.28, 0.595, 0.672034, 0.155, 0.07, 0.083332],\r\n\t\t\"Best RGB\":[2.2, \"D50\", 0.7347, 0.2653, 0.228457, 0.215, 0.775, 0.737352, 0.13, 0.035, 0.034191],\r\n\t\t\"Beta RGB\":[2.2, \"D50\", 0.6888, 0.3112, 0.303273, 0.1986, 0.7551, 0.663786, 0.1265, 0.0352, 0.032941],\r\n\t\t\"Bruce RGB\":[2.2, \"D65\", 0.64, 0.33, 0.240995, 0.28, 0.65, 0.683554, 0.15, 0.06, 0.075452],\r\n\t\t\"CIE RGB\":[2.2, \"E\", 0.735, 0.265, 0.176204, 0.274, 0.717, 0.812985, 0.167, 0.009, 0.010811],\r\n\t\t\"ColorMatch RGB\":[1.8, \"D50\", 0.63, 0.34, 0.274884, 0.295, 0.605, 0.658132, 0.15, 0.075, 0.066985],\r\n\t\t\"DON RGB 4\":[2.2, \"D50\", 0.696, 0.3, 0.27835, 0.215, 0.765, 0.68797, 0.13, 0.035, 0.03368],\r\n\t\t\"ECI RGB\":[1.8, \"D50\", 0.67, 0.33, 0.32025, 0.21, 0.71, 0.602071, 0.14, 0.08, 0.077679],\r\n\t\t\"EktaSpace PS5\":[2.2, \"D50\", 0.695, 0.305, 0.260629, 0.26, 0.7, 0.734946, 0.11, 0.005, 0.004425],\r\n\t\t\"NTSC RGB\":[2.2, \"C\", 0.67, 0.33, 0.298839, 0.21, 0.71, 0.586811, 0.14, 0.08, 0.11435],\r\n\t\t\"PAL/SECAM RGB\":[2.2, \"D65\", 0.64, 0.33, 0.222021, 0.29, 0.6, 0.706645, 0.15, 0.06, 0.071334],\r\n\t\t\"Pro Photo RGB\":[1.8, \"D50\", 0.7347, 0.2653, 0.28804, 0.1596, 0.8404, 0.711874, 0.0366, 0.0001, 0.000086],\r\n\t\t\"SMPTE/C RGB\":[2.2, \"D65\", 0.63, 0.34, 0.212395, 0.31, 0.595, 0.701049, 0.155, 0.07, 0.086556],\r\n\t\t\"sRGB\":[2.2, \"D65\", 0.64, 0.33, 0.212656, 0.3, 0.6, 0.715158, 0.15, 0.06, 0.072186],\r\n\t\t\"Wide Gamut RGB\":[2.2, \"D50\", 0.735, 0.265, 0.258187, 0.115, 0.826, 0.724938, 0.157, 0.018, 0.016875]\r\n\t};\r\n\r\n\tvar adaptors={\r\n\t\t\"XYZ scaling\":{\r\n\t\t\tma:  [[1,0,0], [0,1,0], [0,0,1]],\r\n\t\t\tmai: [[1,0,0], [0,1,0], [0,0,1]]\r\n\t\t},\r\n\t\t\"Bradford\":{\r\n\t\t\tma:  [[0.8951, -0.7502, 0.0389], [0.2664, 1.7135, -0.0685], [-0.1614, 0.0367, 1.0296]],\r\n\t\t\tmai: [[0.986993, 0.432305, -0.008529], [-0.147054, 0.51836, 0.040043], [0.159963, 0.049291, 0.968487]]\r\n\t\t},\r\n\t\t\"Von Kries\":{\r\n\t\t\tma:  [[0.40024, -0.2263, 0], [0.7076, 1.16532, 0], [-0.08081, 0.0457, 0.91822]],\r\n\t\t\tmai: [[1.859936, 0.361191, 0], [-1.129382, 0.638812, 0], [0.219897, -0.000006, 1.089064]]\r\n\t\t}\r\n\t};\r\n\r\n\tvar cMaps={\r\n\t\t\"XYZ\":{\r\n\t\t\t\"xyY\":function(xyz, kwArgs){\r\n\t\t\t\tkwArgs=dojo.mixin({\r\n\t\t\t\t\twhitepoint:\"D65\",\r\n\t\t\t\t\tobserver:\"10\",\r\n\t\t\t\t\tuseApproximation:true\r\n\t\t\t\t}, kwArgs||{});\r\n\t\t\t\tvar wp=self.whitepoint(kwArgs.whitepoint, kwArgs.observer);\r\n\t\t\t\tvar sum=xyz.X+xyz.Y+xyz.Z;\r\n\t\t\t\tif(sum==0){ var x=wp.x, y=wp.y; }\r\n\t\t\t\telse{ var x=xyz.X/sum, y=xyz.Y/sum; }\r\n\t\t\t\treturn { x:x, y:y, Y:xyz.Y };\r\n\t\t\t},\r\n\t\t\t\"Lab\":function(xyz, kwArgs){\r\n\t\t\t\tkwArgs=dojo.mixin({\r\n\t\t\t\t\twhitepoint:\"D65\",\r\n\t\t\t\t\tobserver:\"10\",\r\n\t\t\t\t\tuseApproximation:true\r\n\t\t\t\t}, kwArgs||{});\r\n\r\n\t\t\t\tvar kappa=self.kappa(kwArgs.useApproximation), epsilon=self.epsilon(kwArgs.useApproximation);\r\n\t\t\t\tvar wp=self.whitepoint(kwArgs.whitepoint, kwArgs.observer);\r\n\t\t\t\tvar xr=xyz.X/wp.x, yr=xyz.Y/wp.y, zr=xyz.z/wp.z;\r\n\t\t\t\tvar fx=(xr>epsilon)?Math.pow(xr,1/3):(kappa*xr+16)/116;\r\n\t\t\t\tvar fy=(yr>epsilon)?Math.pow(yr,1/3):(kappa*yr+16)/116;\r\n\t\t\t\tvar fz=(zr>epsilon)?Math.pow(zr,1/3):(kappa*zr+16)/116;\r\n\t\t\t\tvar L=116*fy-16, a=500*(fx-fy), b=200*(fy-fz);\r\n\t\t\t\treturn { L:L, a:a, b:b };\r\n\t\t\t},\r\n\t\t\t\"Luv\": function(xyz, kwArgs){\r\n\t\t\t\tkwArgs=dojo.mixin({\r\n\t\t\t\t\twhitepoint:\"D65\",\r\n\t\t\t\t\tobserver:\"10\",\r\n\t\t\t\t\tuseApproximation:true\r\n\t\t\t\t}, kwArgs||{});\r\n\r\n\t\t\t\tvar kappa=self.kappa(kwArgs.useApproximation), epsilon=self.epsilon(kwArgs.useApproximation);\r\n\t\t\t\tvar wp=self.whitepoint(kwArgs.whitepoint, kwArgs.observer);\r\n\t\t\t\tvar ud=(4*xyz.X)/(xyz.X+15*xyz.Y+3*xyz.Z);\r\n\t\t\t\tvar vd=(9*xyz.Y)/(xyz.X+15*xyz.Y+3*xyz.Z);\r\n\t\t\t\tvar udr=(4*wp.x)/(wp.x+15*wp.y+3*wp.z);\r\n\t\t\t\tvar vdr=(9*wp.y)/(wp.x+15*wp.y+3*wp.z);\r\n\t\t\t\tvar yr=xyz.Y/wp.y;\r\n\t\t\t\tvar L=(yr>epsilon)?116*Math.pow(yr, 1/3)-16:kappa*yr;\r\n\t\t\t\tvar u=13*L*(ud-udr);\r\n\t\t\t\tvar v=13*L*(vd-vdr);\r\n\t\t\t\treturn { L:L, u:u, v:v };\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"xyY\":{\r\n\t\t\t\"XYZ\":function(xyY){\r\n\t\t\t\tif(xyY.y==0){ var X=0, Y=0, Z=0; }\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar X=(xyY.x*xyY.Y)/xyY.y;\r\n\t\t\t\t\tvar Y=xyY.Y;\r\n\t\t\t\t\tvar Z=((1-xyY.x-xyY.y)*xyY.Y)/xyY.y;\r\n\t\t\t\t}\r\n\t\t\t\treturn { X:X, Y:Y, Z:Z };\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"Lab\":{\r\n\t\t\t\"XYZ\": function(lab, kwArgs){\r\n\t\t\t\tkwArgs=dojo.mixin({\r\n\t\t\t\t\twhitepoint:\"D65\",\r\n\t\t\t\t\tobserver:\"10\",\r\n\t\t\t\t\tuseApproximation:true\r\n\t\t\t\t}, kwArgs||{});\r\n\r\n\t\t\t\tvar b=kwArgs.useApproximation, kappa=self.kappa(b), epsilon=self.epsilon(b);\r\n\t\t\t\tvar wp=self.whitepoint(kwArgs.whitepoint, kwArgs.observer);\r\n\t\t\t\tvar yr=(lab.L>(kappa*epsilon))?Math.pow((lab.L+16)/116, 3):lab.L/kappa;\r\n\t\t\t\tvar fy=(yr>epsilon)?(lab.L+16)/116:(kappa*yr+16)/116;\r\n\t\t\t\tvar fx=(lab.a/500)+fy;\r\n\t\t\t\tvar fz=fy-(lab.b/200);\r\n\t\t\t\tvar fxcube=Math.pow(fx, 3), fzcube=Math.pow(fz, 3);\r\n\t\t\t\tvar xr=(fxcube>epsilon)?fxcube:(116*fx-16)/kappa;\r\n\t\t\t\tvar zr=(fzcube>epsilon)?fzcube:(116*fz-16)/kappa;\r\n\t\t\t\treturn { X: xr*wp.x, Y: yr*wp.y, Z: zr*wp.z };\r\n\t\t\t},\r\n\t\t\t\"LCHab\": function(lab){\r\n\t\t\t\tvar L=lab.L, C=Math.pow(lab.a*lab.a+lab.b*lab.b, 0.5), H=Math.atan(lab.b, lab.a)*(180/Math.PI);\r\n\t\t\t\tif(H<0){ H+=360; }\r\n\t\t\t\tif(H<360){ H-=360; }\r\n\t\t\t\treturn { L:L, C:C, H:H };\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"LCHab\":{\r\n\t\t\t\"Lab\":function(lch){\r\n\t\t\t\tvar hRad=lch.H*(Math.PI/180), L=lch.L, a=lch.C/Math.pow(Math.pow(Math.tan(hRad),2)+1, 0.5);\r\n\t\t\t\tif(90<lchH && lch.H<270){ a = -a; }\r\n\t\t\t\tvar b=Math.pow(Math.pow(lch.C,2)-Math.pow(a, 2), 0.5);\r\n\t\t\t\tif(lch.H>180){ b = -b; }\r\n\t\t\t\treturn { L: L, a:a, b:b };\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"Luv\":{\r\n\t\t\t\"XYZ\": function(Luv, kwArgs){\r\n\t\t\t\tkwArgs=dojo.mixin({\r\n\t\t\t\t\twhitepoint:\"D65\",\r\n\t\t\t\t\tobserver:\"10\",\r\n\t\t\t\t\tuseApproximation:true\r\n\t\t\t\t}, kwArgs||{});\r\n\r\n\t\t\t\tvar b=kwArgs.useApproximation, kappa=self.kappa(b), epsilon=self.epsilon(b);\r\n\t\t\t\tvar wp=self.whitepoint(kwArgs.whitepoint, kwArgs.observer);\r\n\t\t\t\tvar uz=(4*wp.x)/(wp.x+15*wp.y+3*wp.z);\r\n\t\t\t\tvar vz=(9*wp.y)/(wp.x+15*wp.y+3*wp.z);\r\n\t\t\t\tvar Y=(Luv.L>kappa*epsilon)?Math.pow((Luv.L+16)/116, 3):Luv.L/kappa;\r\n\t\t\t\tvar a=(1/3)*(((52*Luv.L)/(Luv.u+13*Luv.L*uz))-1);\r\n\t\t\t\tvar b=-5*Y, c=-(1/3), d=Y*(((39*Luv.L)/(Luv.v+13*Luv.L*vz))-5);\r\n\t\t\t\tvar X=(d-b)/(a-c), Z=X*a+b;\r\n\t\t\t\treturn { X:X, Y:Y, Z:Z };\r\n\t\t\t},\r\n\t\t\t\"LCHuv\": function(Luv){\r\n\t\t\t\tvar L=Luv.L, C=Math.pow(Luv.u*Luv.u+Luv.v*Luv*v, 0.5), H=Math.atan(Luv.v, Luv.u)*(180/Math.PI);\r\n\t\t\t\tif(H<0){ H+=360; }\r\n\t\t\t\tif(H>360){ H-=360; }\r\n\t\t\t\treturn { L:L, C:C, H:H };\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"LCHuv\":{\r\n\t\t\t\"Luv\": function(LCH){\r\n\t\t\t\tvar hRad=LCH.H*(Math.PI/180);\r\n\t\t\t\tvar L=LCH.L, u=LCH.C/Math.pow(Math.pow(Math.tan(hRad),2)+1, 0.5);\r\n\t\t\t\tvar v=Math.pow(LCH.C*LCH.C-u*u, 0.5);\r\n\t\t\t\tif(90<LCH.H && LCH.H>270){ u*=-1; }\r\n\t\t\t\tif(LCH.H>180){ v*=-1; }\r\n\t\t\t\treturn { L:L, u:u, v:v };\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar converters={\r\n\t\t\"CMY\":{\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromCmy(obj).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromCmy(obj).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromCmy(obj).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](dcolor.fromCmy(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](converters[\"CMY\"][\"Lab\"](obj)); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"Luv\"][\"XYZ\"](dcolor.fromCmy(obj).toXYZ(kwArgs))); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](dcolor.fromCmy(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromCmy(obj); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return dcolor.fromCmy(obj).toXYZ(kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](dcolor.fromCmy(obj).toXYZ(kwArgs)); }\r\n\t\t},\r\n\t\t\"CMYK\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromCmyk(obj).toCmy(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromCmyk(obj).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromCmyk(obj).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](dcolor.fromCmyk(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](converters[\"CMYK\"][\"Lab\"](obj)); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"Luv\"][\"XYZ\"](dcolor.fromCmyk(obj).toXYZ(kwArgs))); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](dcolor.fromCmyk(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromCmyk(obj); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return dcolor.fromCmyk(obj).toXYZ(kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](dcolor.fromCmyk(obj).toXYZ(kwArgs)); }\r\n\t\t},\r\n\t\t\"HSL\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromHsl(obj).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromHsl(obj).toCmyk(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromHsl(obj).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](dcolor.fromHsl(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](converters[\"CMYK\"][\"Lab\"](obj)); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"Luv\"][\"XYZ\"](dcolor.fromHsl(obj).toXYZ(kwArgs))); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](dcolor.fromHsl(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromHsl(obj); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return dcolor.fromHsl(obj).toXYZ(kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](dcolor.fromHsl(obj).toXYZ(kwArgs)); }\r\n\t\t},\r\n\t\t\"HSV\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromHsv(obj).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromHsv(obj).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromHsv(obj).toHsl(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](dcolor.fromHsv(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](converters[\"CMYK\"][\"Lab\"](obj)); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"Luv\"][\"XYZ\"](dcolor.fromHsv(obj).toXYZ(kwArgs))); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](dcolor.fromHsv(obj).toXYZ(kwArgs)); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromHsv(obj); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return dcolor.fromHsv(obj).toXYZ(kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](dcolor.fromHsv(obj).toXYZ(kwArgs)); }\r\n\t\t},\r\n\t\t\"Lab\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs)).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs)).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs)).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs)).toHsv(); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](obj, kwArgs); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"LCHuv\"](cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Luv\"](cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs)); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](cMaps[\"Lab\"][\"XYZ\"](obj, kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t\"LCHab\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](obj, kwArgs); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"LCHuv\"](cMaps[\"XYZ\"][\"Luv\"](cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs), kwArgs);},\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Luv\"](cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs);},\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](cMaps[\"Lab\"][\"XYZ\"](cMaps[\"LCHab\"][\"Lab\"](obj), kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t\"LCHuv\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](cMaps[\"XYZ\"][\"Lab\"](cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs), kwArgs); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](obj, kwArgs); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](cMaps[\"Luv\"][\"XYZ\"](cMaps[\"LCHuv\"][\"Luv\"](obj), kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t\"Luv\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](cMaps[\"XYZ\"][\"Lab\"](cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs), kwArgs); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"LCHuv\"](obj, kwArgs); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](cMaps[\"Luv\"][\"XYZ\"](obj, kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t\"RGB\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return obj.toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return obj.toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return obj.toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return obj.toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](obj.toXYZ(kwArgs), kwArgs); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"LCHab\"][\"Lab\"](cMaps[\"XYZ\"][\"Lab\"](obj.toXYZ(kwArgs), kwArgs), kwArgs);},\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"XYZ\"][\"Luv\"](obj.toXYZ(kwArgs), kwArgs), kwArgs);},\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Luv\"](obj.toXYZ(kwArgs), kwArgs); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return obj.toXYZ(kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](obj.toXYZ(kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t\"XYZ\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(obj, kwArgs).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(obj, kwArgs).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(obj, kwArgs).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(obj, kwArgs).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Lab\"](obj, kwArgs); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"LCHab\"](cMaps[\"XYZ\"][\"Lab\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"LCHuv\"](cMaps[\"XYZ\"][\"Luv\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"Luv\"](obj, kwArgs); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(obj, kwArgs); },\r\n\t\t\t\"xyY\":function(obj, kwArgs){ return cMaps[\"XYZ\"][\"xyY\"](dcolor.fromXYZ(obj, kwArgs), kwArgs); }\r\n\t\t},\r\n\t\t// TODO: revisit this. xyY represents a single color, not a spectrum of colors.\r\n\t\t\"xyY\":{\r\n\t\t\t\"CMY\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs).toCmy(); },\r\n\t\t\t\"CMYK\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs).toCmyk(); },\r\n\t\t\t\"HSL\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs).toHsl(); },\r\n\t\t\t\"HSV\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs).toHsv(); },\r\n\t\t\t\"Lab\":function(obj, kwArgs){ return cMaps[\"Lab\"][\"XYZ\"](cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"LCHab\":function(obj, kwArgs){ return cMaps[\"LCHab\"][\"Lab\"](cMaps[\"Lab\"][\"XYZ\"](cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs), kwArgs); },\r\n\t\t\t\"LCHuv\":function(obj, kwArgs){ return cMaps[\"LCHuv\"][\"Luv\"](cMaps[\"Luv\"][\"XYZ\"](cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs), kwArgs); },\r\n\t\t\t\"Luv\":function(obj, kwArgs){ return cMaps[\"Luv\"][\"XYZ\"](cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"RGB\":function(obj, kwArgs){ return dcolor.fromXYZ(cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs), kwArgs); },\r\n\t\t\t\"XYZ\":function(obj, kwArgs){ return cMaps[\"xyY\"][\"XYZ\"](obj, kwArgs); }\r\n\t\t}\r\n\t};\r\n\r\n\tthis.whitepoint=function(/* String */wpName, /* String? */observer){\r\n\t\tobserver=observer||\"10\";\r\n\t\tvar x=0, y=0, t=0;\r\n\t\tif(wpMap[observer] && wpMap[observer][wpName]){\r\n\t\t\tx=wpMap[observer][wpName].x;\r\n\t\t\ty=wpMap[observer][wpName].y;\r\n\t\t\tt=wpMap[observer][wpName].t;\r\n\t\t} else {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t\"dojox.color.Colorspace::whitepoint: either the observer or the whitepoint name was not found. \",\r\n\t\t\t\tobserver, wpName\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar wp={ x:x, y:y, z:(1-x-y), t:t, Y:1 };\r\n\t\treturn this.convert(wp, \"xyY\", \"XYZ\");\r\n\t};\r\n\r\n\tthis.tempToWhitepoint=function(/* Number */t){\r\n\t\tif(t<4000){\r\n\t\t\tconsole.warn(\"dojox.color.Colorspace::tempToWhitepoint: can't find a white point for temperatures less than 4000K. (Passed \", t, \").\");\r\n\t\t\treturn { x:0, y:0 };\r\n\t\t}\r\n\t\tif(t>25000){\r\n\t\t\tconsole.warn(\"dojox.color.Colorspace::tempToWhitepoint: can't find a white point for temperatures greater than 25000K. (Passed \", t, \").\");\r\n\t\t\treturn { x:0, y:0 };\r\n\t\t}\r\n\t\tvar t1=t, t2=t*t, t3=t2*t;\r\n\t\tvar ten9=Math.pow(10, 9), ten6=Math.pow(10, 6), ten3=Math.pow(10,3);\r\n\t\tif(t<=7000){\r\n\t\t\tvar x=(-4.607*ten9/t3)+(2.9678*ten6/t2)+(0.09911*ten3/t)+0.2444063;\r\n\t\t} else {\r\n\t\t\tvar x=(-2.0064*ten9/t3)+(1.9018*ten6/t2)+(0.24748*ten3/t)+0.23704;\r\n\t\t}\r\n\t\tvar y=-3*x*x+2.87*x-0.275;\r\n\t\treturn { x:x, y:y };\r\n\t};\r\n\r\n\tthis.primaries=function(/* Object */kwArgs){\r\n\t\t//\tmix in the defaults.\r\n\t\tkwArgs=dojo.mixin({\r\n\t\t\tprofile:\"sRGB\",\r\n\t\t\twhitepoint:\"D65\",\r\n\t\t\tobserver:\"10\",\r\n\t\t\tadaptor:\"Bradford\"\r\n\t\t}, kwArgs||{});\r\n\r\n\t\tvar m=[];\r\n\t\tif(profiles[kwArgs.profile]){\r\n\t\t\tm=profiles[kwArgs.profile].slice(0);\r\n\t\t} else {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t\"dojox.color.Colorspace::primaries: the passed profile was not found.  \",\r\n\t\t\t\t\"Available profiles include: \", profiles,\r\n\t\t\t\t\".  The profile passed was \", kwArgs.profile\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar primary={\r\n\t\t\tname:kwArgs.profile,\r\n\t\t\tgamma:m[0], whitepoint:m[1],\r\n\t\t\txr:m[2], yr:m[3], Yr:m[4],\r\n\t\t\txg:m[5], yg:m[6], Yg:m[7],\r\n\t\t\txb:m[8], yb:m[9], Yb:m[10]\r\n\t\t};\r\n\r\n\t\t//\tconvert for the whitepoint\r\n\t\tif(kwArgs.whitepoint!=primary.whitepoint){\r\n\t\t\tvar r=this.convert(\r\n\t\t\t\tthis.adapt({\r\n\t\t\t\t\tcolor:this.convert({ x:xr, y:yr, Y:Yr }, \"xyY\", \"XYZ\"),\r\n\t\t\t\t\tadaptor:kwArgs.adaptor,\r\n\t\t\t\t\tsource:primary.whitepoint,\r\n\t\t\t\t\tdestination:kwArgs.whitepoint\r\n\t\t\t\t}),\r\n\t\t\t\t\"XYZ\",\r\n\t\t\t\t\"xyY\"\r\n\t\t\t);\r\n\t\t\tvar g=this.convert(\r\n\t\t\t\tthis.adapt({\r\n\t\t\t\t\tcolor:this.convert({ x:xg, y:yg, Y:Yg }, \"xyY\", \"XYZ\"),\r\n\t\t\t\t\tadaptor:kwArgs.adaptor,\r\n\t\t\t\t\tsource:primary.whitepoint,\r\n\t\t\t\t\tdestination:kwArgs.whitepoint\r\n\t\t\t\t}),\r\n\t\t\t\t\"XYZ\",\r\n\t\t\t\t\"xyY\"\r\n\t\t\t);\r\n\t\t\tvar b=this.convert(\r\n\t\t\t\tthis.adapt({\r\n\t\t\t\t\tcolor:this.convert({ x:xb, y:yb, Y:Yb }, \"xyY\", \"XYZ\"),\r\n\t\t\t\t\tadaptor:kwArgs.adaptor,\r\n\t\t\t\t\tsource:primary.whitepoint,\r\n\t\t\t\t\tdestination:kwArgs.whitepoint\r\n\t\t\t\t}),\r\n\t\t\t\t\"XYZ\",\r\n\t\t\t\t\"xyY\"\r\n\t\t\t);\r\n\t\t\tprimary=dojo.mixin(primary, {\r\n\t\t\t\txr: r.x, yr: r.y, Yr: r.Y,\r\n\t\t\t\txg: g.x, yg: g.y, Yg: g.Y,\r\n\t\t\t\txb: b.x, yb: b.y, Yb: b.Y,\r\n\t\t\t\twhitepoint: kwArgs.whitepoint\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn dojo.mixin(primary, {\r\n\t\t\tzr: 1-primary.xr-primary.yr,\r\n\t\t\tzg: 1-primary.xg-primary.yg,\r\n\t\t\tzb: 1-primary.xb-primary.yb\r\n\t\t});\t\t//\tObject\r\n\t};\r\n\r\n\tthis.adapt=function(/* Object */kwArgs){\r\n\t\t//\tcolor is required in the form of XYZ, source whitepoint name is required.\r\n\t\tif(!kwArgs.color || !kwArgs.source){\r\n\t\t\tconsole.error(\"dojox.color.Colorspace::adapt: color and source arguments are required. \", kwArgs);\r\n\t\t}\r\n\r\n\t\t//\tdefaults\r\n\t\tkwArgs=dojo.mixin({\r\n\t\t\tadaptor:\"Bradford\",\r\n\t\t\tdestination:\"D65\"\r\n\t\t}, kwArgs);\r\n\r\n\t\t//\tadapt\r\n\t\tvar swp = this.whitepoint(kwArgs.source);\r\n\t\tvar dwp = this.whitepoint(kwArgs.destination);\r\n\t\tif(adaptors[kwArgs.adaptor]){\r\n\t\t\tvar ma=adaptors[kwArgs.adaptor].ma;\r\n\t\t\tvar mai=adaptors[kwArgs.adaptor].mai;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"dojox.color.Colorspace::adapt: the passed adaptor '\", kwArgs.adaptor, \"' was not found.\");\r\n\t\t}\r\n\t\tvar dSrc=dxm.multiply([[swp.x, swp.y, swp.z]], ma);\r\n\t\tvar dDest=dxm.multiply([[dwp.x, dwp.y, dwp.z]], ma);\r\n\t\tvar center=[\r\n\t\t\t[dDest[0][0]/dSrc[0][0], 0, 0],\r\n\t\t\t[0, dDest[0][1]/dSrc[0][1], 0],\r\n\t\t\t[0, 0, dDest[0][2]/dSrc[0][2]]\r\n\t\t];\r\n\t\tvar m=dxm.multiply(dxm.multiply(ma, center), mai);\r\n\t\tvar r=dxm.multiply([[ kwArgs.color.X, kwArgs.color.Y, kwArgs.color.Z ]], m)[0];\r\n\t\treturn { X:r[0], Y:r[1], Z:r[2] };\r\n\t};\r\n\r\n\tthis.matrix=function(/* String */to, /* Object */primary){\r\n\t\tvar p=primary, wp=this.whitepoint(p.whitepoint);\r\n\t\tvar Xr = p.xr/p.yr, Yr = 1, Zr = (1-p.xr-p.yr)/p.yr;\r\n\t\tvar Xg = p.xg/p.yg, Yg = 1, Zg = (1-p.xg-p.yg)/p.yg;\r\n\t\tvar Xb = p.xb/p.yb, Yb = 1, Zb = (1-p.xb-p.yb)/p.yb;\r\n\r\n\t\tvar m1 = [[ Xr, Yr, Zr ], [ Xg, Yg, Zg ], [ Xb, Yb, Zb ]];\r\n\t\tvar m2 = [[ wp.X, wp.Y, wp.Z ]];\r\n\t\tvar sm = dxm.multiply(m2, dxm.inverse(m1));\r\n\t\tvar Sr = sm[0][0], Sg = sm[0][1], Sb = sm[0][2];\r\n\t\tvar result=[\r\n\t\t\t[Sr*Xr, Sr*Yr, Sr*Zr],\r\n\t\t\t[Sg*Xg, Sg*Yg, Sg*Zg],\r\n\t\t\t[Sb*Xb, Sb*Yb, Sb*Zb]\r\n\t\t];\r\n\t\tif(to==\"RGB\"){ return dxm.inverse(result); }\r\n\t\treturn result;\r\n\t};\r\n\r\n\tthis.epsilon=function(/* bool? */useApprox){\r\n\t\treturn (useApprox || typeof(useApprox)==\"undefined\")? 0.008856: 216/24289;\r\n\t};\r\n\tthis.kappa=function(/* bool? */useApprox){\r\n\t\treturn (useApprox || typeof(useApprox)==\"undefined\")? 903.3: 24389/27;\r\n\t};\r\n\r\n\tthis.convert=function(/* Object */color, /* string */from, /* string */to, /* Object? */kwArgs){\r\n\t\tif(converters[from] && converters[from][to]){\r\n\t\t\treturn converters[from][to](color, kwArgs);\r\n\t\t}\r\n\t\tconsole.warn(\"dojox.color.Colorspace::convert: Can't convert \", color, \" from \", from, \" to \", to, \".\");\r\n\t};\r\n})();\r\n\r\n//\tMore dcolor and dojox.color.Color extensions\r\ndojo.mixin(dcolor, {\r\n\tfromXYZ: function(/* Object */xyz, /* Object?*/kwArgs){\r\n\t\tkwArgs=kwArgs||{};\r\n\t\tvar p=dcolor.Colorspace.primaries(kwArgs);\r\n\t\tvar m=dcolor.Colorspace.matrix(\"RGB\", p);\r\n\t\tvar rgb=dojox.math.matrix.multiply([[ xyz.X, xyz.Y, xyz.Z ]], m);\r\n\t\tvar r=rgb[0][0], g=rgb[0][1], b=rgb[0][2];\r\n\t\tif(p.profile==\"sRGB\"){\r\n\t\t\tvar R = (r>0.0031308)?(1.055*Math.pow(r, 1/2.4))-0.055: 12.92*r;\r\n\t\t\tvar G = (g>0.0031308)?(1.055*Math.pow(g, 1/2.4))-0.055: 12.92*g;\r\n\t\t\tvar B = (b>0.0031308)?(1.055*Math.pow(b, 1/2.4))-0.055: 12.92*b;\r\n\t\t}else{\r\n\t\t\tvar R=Math.pow(r, 1/p.gamma), G=Math.pow(g, 1/p.gamma), B=Math.pow(b, 1/p.gamma);\r\n\t\t}\r\n\t\treturn new dcolor.Color({ r:Math.floor(R*255), g:Math.floor(G*255), b:Math.floor(B*255) });\r\n\t}\r\n});\r\n\r\ndojo.extend(dcolor.Color, {\r\n\ttoXYZ: function(/* Object */kwArgs){\r\n\t\tkwArgs=kwArgs||{};\r\n\t\tvar p=dcolor.Colorspace.primaries(kwArgs);\r\n\t\tvar m=dcolor.Colorspace.matrix(\"XYZ\", p);\r\n\t\tvar _r=this.r/255, _g=this.g/255, _b=this.b/255;\r\n\t\tif(p.profile==\"sRGB\"){\r\n\t\t\tvar r=(_r>0.04045) ? Math.pow(((_r+0.055)/1.055), 2.4):_r/12.92;\r\n\t\t\tvar g=(_g>0.04045) ? Math.pow(((_g+0.055)/1.055), 2.4):_g/12.92;\r\n\t\t\tvar b=(_b>0.04045) ? Math.pow(((_b+0.055)/1.055), 2.4):_b/12.92;\r\n\t\t} else {\r\n\t\t\tvar r=Math.pow(_r, p.gamma), g=Math.pow(_g, p.gamma), b=Math.pow(_b, p.gamma);\r\n\t\t}\r\n\t\tvar xyz=dxm([[ r, g, b ]], m);\r\n\t\treturn { X: xyz[0][0], Y: xyz[0][1], Z: xyz[0][2] };\t//\tObject\r\n\t}\r\n});\r\n\r\nreturn dcolor.Colorspace;\r\n});\r\n"]}