{"version":3,"sources":["embed/flashVars.js"],"names":["define","dojo","deprecated","flashVars","serialize","n","o","esc","val","replace","df","dojox","embed","txt","isArray","i","length","isObject","nm","setObject"],"mappings":";;;;;;;AAAAA,QAAQ,QAAS,SAASC,GAE1BA,EAAKC,WAAW,wBAAyB,yBAA0B,OAEnE,IAAIC,GAkBHC,UAAW,SAAqBC,EAAaC,GAQ5C,IAAIC,EAAM,SAASC,GAQlB,MANe,iBAALA,IAGTA,GADAA,GADAA,EAAMA,EAAIC,QAAQ,KAAK,SACbA,QAAQ,MAAM,SACdA,QAAQ,MAAM,SAGlBD,GAEJE,EAAKC,MAAMC,MAAMT,UAAUC,UAC3BS,EAAM,GACV,GAAGZ,EAAKa,QAAQR,GAAG,CAClB,IAAI,IAAIS,EAAE,EAAEA,EAAET,EAAEU,OAAOD,IACtBF,GAAOH,EAAGL,EAAE,IAAIU,EAAGR,EAAID,EAAES,KAAK,IAE/B,OAAOF,EAAIJ,QAAQ,SAAS,KACvB,GAAGR,EAAKgB,SAASX,GAAG,CACzB,IAAI,IAAIY,KAAMZ,EACbO,GAAOH,EAAGL,EAAE,IAAIa,EAAIX,EAAID,EAAEY,KAAM,IAEjC,OAAOL,EAAIJ,QAAQ,SAAS,KAG7B,OAAOJ,EAAE,IAAIC,IAMf,OAFAL,EAAKkB,UAAU,wBAAyBhB,GAEjCA","file":"../../embed/flashVars.js","sourcesContent":["define([\"dojo\"], function(dojo){\r\n\r\ndojo.deprecated(\"dojox.embed.flashVars\", \"Will be removed in 2.0\", \"2.0\");\r\n\r\nvar flashVars = {\r\n\t// summary:\r\n\t//\t\tHandles flashvar serialization\r\n\t//\t\tConverting complex objects into a simple, clear string that can be appended\r\n\t//\t\tto the swf as a query: myMovie.swf?flashvars=foo.\r\n\t//\t\tNote this needs to work with the SWF, which must know what variables to expect.\r\n\t//\t\tTherefore this is something of an \"internal\" class - unless you know how to\r\n\t//\t\tmodify or create SWFs.\r\n\t//\r\n\t// description:\r\n\t//\t\tJSON could be done, but Deft does not yet have a JSON parser, and quotes are\r\n\t//\t\tvery problematic since Flash cannot use eval(); JSON parsing was successful\r\n\t//\t\twhen it was fully escaped, but that made it very large anyway. flashvar\r\n\t//\t\tserialization at most is 200% larger than JSON.\r\n\t//\r\n\t// See:\r\n\t//\t\tDeft/common/flashVars.as\r\n\t//\r\n\tserialize: function(/* String */n, /*Object*/o){\r\n\t\t// summary:\r\n\t\t//\t\tKey method. Serializes an object.\r\n\t\t// n: String\r\n\t\t//\t\tThe name for the object, such as: \"button\"\r\n\t\t// o: Object\r\n\t\t//\t\tThe object to serialize\r\n\r\n\t\tvar esc = function(val){\r\n\t\t\t//\thave to encode certain characters that indicate an object\r\n\t\t\tif(typeof val==\"string\"){\r\n\t\t\t\tval = val.replace(/;/g,\"_sc_\");\r\n\t\t\t\tval = val.replace(/\\./g,\"_pr_\");\r\n\t\t\t\tval = val.replace(/\\:/g,\"_cl_\");\r\n\t\t\t\t//val = escape(val);\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t};\r\n\t\tvar df = dojox.embed.flashVars.serialize;\r\n\t\tvar txt = \"\";\r\n\t\tif(dojo.isArray(o)){\r\n\t\t\tfor(var i=0;i<o.length;i++){\r\n\t\t\t\ttxt += df(n+\".\"+i, esc(o[i]))+\";\";\r\n\t\t\t}\r\n\t\t\treturn txt.replace(/;{2,}/g,\";\");\r\n\t\t}else if(dojo.isObject(o)){\r\n\t\t\tfor(var nm in o){\r\n\t\t\t\ttxt += df(n+\".\"+nm, esc(o[nm]))+\";\";\r\n\t\t\t}\r\n\t\t\treturn txt.replace(/;{2,}/g,\";\");\r\n\t\t}\r\n\t\t// Dev note: important that there is no double semi-colons\r\n\t\treturn n+\":\"+o; // String\r\n\t}\r\n};\r\n\r\ndojo.setObject(\"dojox.embed.flashVars\", flashVars);\r\n\r\nreturn flashVars;\r\n});\r\n"]}