{"version":3,"sources":["validate/isbn.js"],"names":["define","lang","validate","isValidIsbn","value","len","weight","sum","isString","String","replace","length","i","parseInt","charAt","t","toUpperCase"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,WAAY,SAASC,EAAMC,GAuCtD,OArCAA,EAASC,YAAc,SAAqBC,GAM3C,IAAIC,EAAcC,EAATC,EAAM,EAOf,OANIN,EAAKO,SAASJ,KACjBA,EAAQK,OAAOL,IAGhBC,GADAD,EAAQA,EAAMM,QAAQ,QAAQ,KAClBC,QAGX,KAAK,GACJL,EAASD,EAET,IAAI,IAAIO,EAAI,EAAGA,EAAI,EAAGA,IACrBL,GAAOM,SAAST,EAAMU,OAAOF,IAAMN,EACnCA,IAED,IAAIS,EAAIX,EAAMU,OAAO,GAAGE,cAExB,OADAT,GAAY,KAALQ,EAAW,GAAKF,SAASE,IACnB,IAAM,EAEpB,KAAK,GACJT,GAAU,EACV,IAAQM,EAAI,EAAGA,EAAGP,EAAKO,IACtBL,GAAOM,SAAST,EAAMU,OAAOF,KAAO,EAAIN,GACxCA,IAAW,EAEZ,OAAOC,EAAM,IAAM,EAGrB,OAAO,GAGDL,EAASC","file":"../../validate/isbn.js","sourcesContent":["define([\"dojo/_base/lang\", \"./_base\"], function(lang, validate){\r\n\r\nvalidate.isValidIsbn = function(/* String */value) {\r\n\t// summary:\r\n\t//\t\tValidate ISBN-10 or ISBN-13 based on the length of value\r\n\t// value: String\r\n\t//\t\tAn ISBN to validate\r\n\t// returns: Boolean\r\n\tvar len, sum = 0, weight;\r\n\tif(!lang.isString(value)){\r\n\t\tvalue = String(value);\r\n\t}\r\n\tvalue = value.replace(/[- ]/g,''); //ignore dashes and whitespaces\r\n\tlen = value.length;\r\n\r\n\tswitch(len){\r\n\t\tcase 10:\r\n\t\t\tweight = len;\r\n\t\t\t// ISBN-10 validation algorithm\r\n\t\t\tfor(var i = 0; i < 9; i++){\r\n\t\t\t\tsum += parseInt(value.charAt(i)) * weight;\r\n\t\t\t\tweight--;\r\n\t\t\t}\r\n\t\t\tvar t = value.charAt(9).toUpperCase();\r\n\t\t\tsum += t == 'X' ? 10 : parseInt(t);\r\n\t\t\treturn sum % 11 == 0; // Boolean\r\n\t\t\tbreak;\r\n\t\tcase 13:\r\n\t\t\tweight = -1;\r\n\t\t\tfor(var i = 0; i< len; i++){\r\n\t\t\t\tsum += parseInt(value.charAt(i)) * (2 + weight);\r\n\t\t\t\tweight *= -1;\r\n\t\t\t}\r\n\t\t\treturn sum % 10 == 0; // Boolean\r\n\t\t\tbreak;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nreturn validate.isValidIsbn;\r\n});\r\n"]}