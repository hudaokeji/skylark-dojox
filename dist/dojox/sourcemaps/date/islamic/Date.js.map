{"version":3,"sources":["date/islamic/Date.js"],"names":["define","lang","declare","dd","IDate","_date","_month","_year","_hours","_minutes","_seconds","_milliseconds","_day","_GREGORIAN_EPOCH","_ISLAMIC_EPOCH","constructor","len","arguments","length","arg0","Date","this","fromGregorian","getDate","getMonth","getFullYear","getDay","toGregorian","getHours","getMinutes","getSeconds","getMilliseconds","setDate","date","mdays","parseInt","getDaysInIslamicMonth","setFullYear","year","setMonth","month","Math","floor","setHours","hours_arg_no","hours","_addMinutes","minutes","setMinutes","_addSeconds","seconds","setSeconds","_addMilliseconds","milliseconds","setMilliseconds","toString","isNaN","x","toTimeString","hYear","hMonth","julianDay","ceil","wjd","depoch","quadricent","dqc","_mod","cent","dcent","quad","dquad","yindex","yearday","leapadj","isLeapYear","tjd2","gdate","gYear","gMonth","gDay","days","_yearStart","min","hDay","_monthStart","valueOf","_civilLeapYear","a","b"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,qBAAsB,aAAc,SAASC,EAAMC,EAASC,GAEtF,IAAIC,EAAQF,EAAQ,0BAA2B,MAU/CG,MAAO,EACPC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRC,SAAU,EACVC,SAAU,EACVC,cAAe,EACfC,KAAM,EACNC,iBAAmB,UACnBC,eAAiB,UAEjBC,YAAa,WAWZ,IAAIC,EAAMC,UAAUC,OACpB,GAAIF,EAEE,GAAU,GAAPA,EAAS,CACjB,IAAIG,EAAOF,UAAU,GACH,iBAARE,IACTA,EAAO,IAAIC,KAAKD,IAGdA,aAAgBC,KAClBC,KAAKC,cAAcH,GACH,IAARA,EAERE,KAAKhB,MAAQ,IAAIe,KAAK,KAEtBC,KAAKd,MAAQY,EAAKZ,MAClBc,KAAKf,OAAUa,EAAKb,OACpBe,KAAKhB,MAAQc,EAAKd,MAClBgB,KAAKb,OAASW,EAAKX,OACnBa,KAAKZ,SAAWU,EAAKV,SACrBY,KAAKX,SAAWS,EAAKT,SACrBW,KAAKV,cAAgBQ,EAAKR,oBAEnBK,GAAM,IAEdK,KAAKd,OAASU,UAAU,GACxBI,KAAKf,QAAUW,UAAU,GACzBI,KAAKhB,OAASY,UAAU,GACxBI,KAAKb,QAAUS,UAAU,IAAM,EAC/BI,KAAKZ,UAAYQ,UAAU,IAAM,EACjCI,KAAKX,UAAYO,UAAU,IAAM,EACjCI,KAAKV,eAAiBM,UAAU,IAAM,QA7BtCI,KAAKC,cAAc,IAAIF,OAiCzBG,QAAQ,WAMP,OAAOF,KAAKhB,OAGbmB,SAAS,WAOR,OAAOH,KAAKf,QAGbmB,YAAY,WAOX,OAAOJ,KAAKd,OAGbmB,OAAO,WAON,OAAOL,KAAKM,cAAcD,UAG3BE,SAAS,WAGR,OAAOP,KAAKb,QAGbqB,WAAW,WAGV,OAAOR,KAAKZ,UAGbqB,WAAW,WAGV,OAAOT,KAAKX,UAGbqB,gBAAgB,WAGf,OAAOV,KAAKV,eAGbqB,QAAS,SAAmBC,GAY1B,IAAIC,EAHL,IAFAD,EAAOE,SAASF,IAEN,GAAKA,GAAQZ,KAAKe,sBAAsBf,KAAKf,OAAQe,KAAKd,OACnEc,KAAKhB,MAAQ4B,OAGb,GAAGA,EAAK,EAAE,CACT,IAAIC,EAAQb,KAAKe,sBAAsBf,KAAKf,OAAQe,KAAKd,OACxD0B,EAAOC,EACND,GAAQC,EAAMA,EAAOb,KAAKe,sBAAsBf,KAAKf,OAAQe,KAAKd,OACnEc,KAAKf,SACFe,KAAKf,QAAU,KAAIe,KAAKd,QAASc,KAAKf,QAAU,IAGpDe,KAAKhB,MAAQ4B,MACT,CACJ,IAAIC,EAAQb,KAAKe,sBAAuBf,KAAKf,OAAO,GAAI,EAAIe,KAAKf,OAAO,EAAI,GAAMe,KAAKf,OAAO,GAAI,EAAIe,KAAKd,MAAOc,KAAKd,MAAM,GAC3H0B,GAAQ,EACPC,EAAQb,KAAKe,sBAAuBf,KAAKf,OAAO,GAAI,EAAKe,KAAKf,OAAO,EAAI,GAAKe,KAAKf,OAAO,GAAI,EAAIe,KAAKd,MAAOc,KAAKd,MAAM,GAC3Hc,KAAKf,SACFe,KAAKf,OAAS,IAAGe,KAAKd,QAASc,KAAKf,QAAU,IAEjD2B,GAAMC,EAEPb,KAAKhB,MAAQ4B,EAGf,OAAOZ,MAGRgB,YAAY,SAAmBC,GAO9BjB,KAAKd,OAAS+B,GAGfC,SAAU,SAAmBC,GAO5BnB,KAAKd,OAASkC,KAAKC,MAAMF,EAAQ,IAEhCnB,KAAKf,OADHkC,EAAQ,EACIC,KAAKC,MAAMF,EAAQ,IAEnBC,KAAKC,OAAQF,EAAQ,GAAM,IAAM,KAIjDG,SAAS,WAGR,IAAIC,EAAe3B,UAAUC,OACzB2B,EAAQ,EAiBZ,IAhBGD,GAAgB,IAClBC,EAAQV,SAASlB,UAAU,KAGzB2B,GAAgB,IAClBvB,KAAKZ,SAAW0B,SAASlB,UAAU,KAGjC2B,GAAgB,IAClBvB,KAAKX,SAAWyB,SAASlB,UAAU,KAGjB,GAAhB2B,IACFvB,KAAKV,cAAgBwB,SAASlB,UAAU,KAGnC4B,GAAS,IAAG,CACjBxB,KAAKhB,QACL,IAAI6B,EAAQb,KAAKe,sBAAsBf,KAAKf,OAAQe,KAAKd,OACtDc,KAAKhB,MAAQ6B,IACdb,KAAKf,SACFe,KAAKf,QAAU,KAAIe,KAAKd,QAASc,KAAKf,QAAU,IACnDe,KAAKhB,OAAS6B,GAEhBW,GAAS,GAEVxB,KAAKb,OAASqC,GAGfC,YAAa,SAAmBC,GAI/B,OAHAA,GAAW1B,KAAKZ,SAChBY,KAAK2B,WAAWD,GAChB1B,KAAKsB,SAAStB,KAAKb,OAAS2B,SAASY,EAAU,KACxC1B,MAGR4B,YAAa,SAAmBC,GAI/B,OAHAA,GAAW7B,KAAKX,SAChBW,KAAK8B,WAAWD,GAChB7B,KAAKyB,YAAYX,SAASe,EAAU,KAC7B7B,MAGR+B,iBAAkB,SAAmBC,GAIpC,OAHAA,GAAgBhC,KAAKV,cACrBU,KAAKiC,gBAAgBD,GACrBhC,KAAK4B,YAAYd,SAASkB,EAAe,MAClChC,MAGR2B,WAAY,SAAmBD,GAI9B,OADA1B,KAAKZ,SAAWsC,EAAU,GACnB1B,MAGR8B,WAAY,SAAmBD,GAI9B,OADA7B,KAAKX,SAAWwC,EAAU,GACnB7B,MAGRiC,gBAAiB,SAAmBD,GAEnC,OADAhC,KAAKV,cAAgB0C,EAAe,IAC7BhC,MAGRkC,SAAS,WAQR,GAAGC,MAAMnC,KAAKhB,OACb,MAAO,kBAEP,IAAIoD,EAAI,IAAIrC,KAKZ,OAJAqC,EAAEd,SAAStB,KAAKb,QAChBiD,EAAET,WAAW3B,KAAKZ,UAClBgD,EAAEN,WAAW9B,KAAKX,UAClB+C,EAAEH,gBAAgBjC,KAAKV,eAChBU,KAAKf,OAAO,IAAKe,KAAKhB,MAAQ,IAAMgB,KAAKd,MAAQ,IAAMkD,EAAEC,gBAKlE/B,YAAY,WAOX,IAAIgC,EAAQtC,KAAKd,MACbqD,EAASvC,KAAKf,OAEduD,EADQxC,KAAKhB,MACOoC,KAAKqB,KAAK,KAAOF,GAAwB,KAAbD,EAAQ,GACtDlB,KAAKC,OAAO,EAAK,GAAKiB,GAAU,IAAMtC,KAAKP,eAAiB,EAE9DiD,EAAMtB,KAAKC,MAAMmB,EAAY,IAAO,GACvCG,EAASD,EAAM1C,KAAKR,iBACpBoD,EAAaxB,KAAKC,MAAMsB,EAAS,QACjCE,EAAM7C,KAAK8C,KAAKH,EAAQ,QACxBI,EAAO3B,KAAKC,MAAMwB,EAAM,OACxBG,EAAQhD,KAAK8C,KAAKD,EAAK,OACvBI,EAAO7B,KAAKC,MAAM2B,EAAQ,MAC1BE,EAAQlD,KAAK8C,KAAKE,EAAO,MACzBG,EAAS/B,KAAKC,MAAM6B,EAAQ,KAC5BjC,EAAqB,IAAb2B,EAA4B,IAAPG,EAAsB,EAAPE,EAAYE,EAC5C,GAARJ,GAAuB,GAAVI,GACjBlC,IAGD,IAGImC,EAAUV,GAHG1C,KAAKR,iBAAoB,KAAOyB,EAAO,GAAMG,KAAKC,OAAOJ,EAAO,GAAK,GAC9EG,KAAKC,OAAOJ,EAAO,GAAK,KAAQG,KAAKC,OAAOJ,EAAO,GAAK,MAQ5DoC,EAAYX,EAJL1C,KAAKR,iBAAmB,EAAM,KAAOyB,EAAO,GAAMG,KAAKC,OAAOJ,EAAO,GAAK,GAChFG,KAAKC,OAAOJ,EAAO,GAAK,KAAQG,KAAKC,OAAOJ,EAAO,GAAK,KAAOG,KAAKC,MAAQ,IAAM,IAChFvC,EAAGwE,WAAW,IAAIvD,KAAKkB,EAAK,EAAE,KAAO,GAAK,GAAM,GAEzB,EAAKnC,EAAGwE,WAAW,IAAIvD,KAAKkB,EAAK,EAAE,IAAM,EAAI,EAEvEE,EAAQC,KAAKC,OAA8B,IAArB+B,EAAUC,GAAiB,KAAO,KACxDE,EAAQvD,KAAKR,iBAAmB,EAAM,KAAOyB,EAAO,GACnDG,KAAKC,OAAOJ,EAAO,GAAK,GAAMG,KAAKC,OAAOJ,EAAO,GAAK,KACtDG,KAAKC,OAAOJ,EAAO,GAAK,KAAOG,KAAKC,OAAS,IAAMF,EAAS,KAAO,IACjEA,GAAS,EAAK,EAAKrC,EAAGwE,WAAW,IAAIvD,KAAKkB,EAAME,EAAM,EAAG,KAAO,GAAK,GAAM,GAMlF,OAFY,IAAIpB,KAAKkB,EAAOE,EAAQ,EAFzBuB,EAAMa,EAAQ,EAEoBvD,KAAKb,OAAQa,KAAKZ,SAAUY,KAAKX,SAAUW,KAAKV,gBAO9FW,cAAc,SAAiBuD,GAQ9B,IAAI5C,EAAO,IAAIb,KAAKyD,GAChBC,EAAQ7C,EAAKR,cAChBsD,EAAS9C,EAAKT,WACdwD,EAAO/C,EAAKV,UAETsC,EAAaxC,KAAKR,iBAAmB,EAAM,KAAOiE,EAAQ,GAAMrC,KAAKC,OAAOoC,EAAQ,GAAK,IACtFrC,KAAKC,OAAOoC,EAAQ,GAAK,KAAQrC,KAAKC,OAAOoC,EAAQ,GAAK,KAC5DrC,KAAKC,OAAS,KAAOqC,EAAO,GAAM,KAAO,IACtCA,EAAO,GAAM,EAAK,EAAK5E,EAAGwE,WAAW1C,IAAS,GAAK,GAAM+C,GAG7DC,GAFJpB,EAAYpB,KAAKC,MAAMmB,GAAa,IAEbxC,KAAKP,eACxB6C,EAASlB,KAAKC,OAAQ,GAAKuC,EAAO,OAAS,OAC3CrB,EAASnB,KAAKqB,MAAMmB,EAAO,GAAK5D,KAAK6D,WAAWvB,IAAU,MAC9DC,EAASnB,KAAK0C,IAAIvB,EAAQ,IAC1B,IAAIwB,EAAO3C,KAAKqB,KAAKmB,EAAO5D,KAAKgE,YAAY1B,EAAOC,IAAW,EAU/D,OARAvC,KAAKhB,MAAQ+E,EACb/D,KAAKf,OAASsD,EACdvC,KAAKd,MAAQoD,EACbtC,KAAKb,OAASyB,EAAKL,WACnBP,KAAKZ,SAAWwB,EAAKJ,aACrBR,KAAKX,SAAWuB,EAAKH,aACrBT,KAAKV,cAAgBsB,EAAKF,kBAC1BV,KAAKT,KAAOqB,EAAKP,SACVL,MAGRiE,QAAQ,WAKP,OAAOjE,KAAKM,cAAc2D,WAI3BJ,WAAW,SAAmB5C,GAG7B,OAAgB,KAARA,EAAK,GAASG,KAAKC,OAAO,EAAE,GAAGJ,GAAM,KAI9C+C,YAAY,SAAmB/C,EAAgBE,GAG9C,OAAOC,KAAKqB,KAAK,KAAKtB,GACZ,KAARF,EAAK,GAASG,KAAKC,OAAO,EAAE,GAAGJ,GAAM,KAIxCiD,eAAe,SAAmBjD,GAGjC,OAAQ,GAAK,GAAKA,GAAQ,GAAK,IAIhCF,sBAAsB,SAAmBI,EAAkBF,GAG1D,IAAIpB,EAAS,EAKb,OAJAA,EAAS,IAAOsB,EAAM,GAAK,EACf,IAATA,GAAenB,KAAKkE,eAAejD,IACrCpB,IAEMA,GAGRiD,KAAK,SAASqB,EAAGC,GAChB,OAAOD,EAAKC,EAAIhD,KAAKC,MAAM8C,EAAIC,MAQjC,OAHArF,EAAMgC,sBAAwB,SAAoCI,GACjE,OAAO,IAAIpC,GAAQgC,sBAAsBI,EAAMhB,WAAWgB,EAAMf,gBAE1DrB","file":"../../../date/islamic/Date.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/declare\", \"dojo/date\"], function(lang, declare, dd){\r\n\r\n\tvar IDate = declare(\"dojox.date.islamic.Date\", null, {\r\n\t// summary:\r\n\t//\t\tThe component defines the Islamic (Hijri) Calendar Object\r\n\t// description:\r\n\t//\t\tThis module is similar to the Date() object provided by JavaScript\r\n\t// example:\r\n\t//\t|\tvar date = new dojox.date.islamic.Date();\r\n\t//\t|\tdocument.writeln(date.getFullYear()+'\\'+date.getMonth()+'\\'+date.getDate());\r\n\r\n\r\n\t_date: 0,\r\n\t_month: 0,\r\n\t_year: 0,\r\n\t_hours: 0,\r\n\t_minutes: 0,\r\n\t_seconds: 0,\r\n\t_milliseconds: 0,\r\n\t_day: 0,\r\n\t_GREGORIAN_EPOCH : 1721425.5,\r\n\t_ISLAMIC_EPOCH : 1948439.5,\r\n\r\n\tconstructor: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis is the constructor\r\n\t\t// description:\r\n\t\t//\t\tThis function initialize the date object values\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tvar date2 = new dojox.date.islamic.Date(\"12\\2\\1429\");\r\n\t\t//\t|\tvar date3 = new dojox.date.islamic.Date(date2);\r\n\t\t//\t|\tvar date4 = new dojox.date.islamic.Date(1429,2,12);\r\n\r\n\t\tvar len = arguments.length;\r\n\t\tif(!len){// use the current date value, added \"\" to the similarity to date\r\n\t\t\tthis.fromGregorian(new Date());\r\n\t\t}else if(len == 1){\r\n\t\t\tvar arg0 = arguments[0];\r\n\t\t\tif(typeof arg0 == \"number\"){ // this is time \"valueof\"\r\n\t\t\t\targ0 = new Date(arg0);\r\n\t\t\t}\r\n\r\n\t\t\tif(arg0 instanceof Date){\r\n\t\t\t\tthis.fromGregorian(arg0);\r\n\t\t\t}else if(arg0 == \"\"){\r\n\t\t\t\t// date should be invalid.  Dijit relies on this behavior.\r\n\t\t\t\tthis._date = new Date(\"\"); //TODO: should this be NaN?  _date is not a Date object\r\n\t\t\t}else{  // this is Islamic.Date object\r\n\t\t\t\tthis._year = arg0._year;\r\n\t\t\t\tthis._month =  arg0._month;\r\n\t\t\t\tthis._date = arg0._date;\r\n\t\t\t\tthis._hours = arg0._hours;\r\n\t\t\t\tthis._minutes = arg0._minutes;\r\n\t\t\t\tthis._seconds = arg0._seconds;\r\n\t\t\t\tthis._milliseconds = arg0._milliseconds;\r\n\t\t\t}\r\n\t\t}else if(len >=3){\r\n\t\t\t// YYYY MM DD arguments passed, month is from 0-12\r\n\t\t\tthis._year += arguments[0];\r\n\t\t\tthis._month += arguments[1];\r\n\t\t\tthis._date += arguments[2];\r\n\t\t\tthis._hours += arguments[3] || 0;\r\n\t\t\tthis._minutes += arguments[4] || 0;\r\n\t\t\tthis._seconds += arguments[5] || 0;\r\n\t\t\tthis._milliseconds += arguments[6] || 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetDate:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns the date value (1 - 30)\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getDate);\r\n\t\treturn this._date;\r\n\t},\r\n\t\r\n\tgetMonth:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return the month value ( 0 - 11 )\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getMonth()+1);\r\n\r\n\t\treturn this._month;\r\n\t},\r\n\r\n\tgetFullYear:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return the Year value\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getFullYear());\r\n\r\n\t\treturn this._year;\r\n\t},\r\n\t\t\r\n\tgetDay:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return Week Day value ( 0 - 6 )\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getDay());\r\n\r\n\t\treturn this.toGregorian().getDay();\r\n\t},\r\n\t\t\r\n\tgetHours:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Hour value\r\n\t\treturn this._hours;\r\n\t},\r\n\t\r\n\tgetMinutes:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Minutes value\r\n\t\treturn this._minutes;\r\n\t},\r\n\r\n\tgetSeconds:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the seconds value\r\n\t\treturn this._seconds;\r\n\t},\r\n\r\n\tgetMilliseconds:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Milliseconds value\r\n\t\treturn this._milliseconds;\r\n\t},\r\n\r\n\tsetDate: function(/*number*/date){\r\n\t\t// summary:\r\n\t\t//\t\tThis function sets the Date\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdate1.setDate(2);\r\n\r\n\t\tdate = parseInt(date);\r\n\r\n\t\tif(date > 0 && date <= this.getDaysInIslamicMonth(this._month, this._year)){\r\n\t\t\tthis._date = date;\r\n\t\t}else{\r\n\t\t\tvar mdays;\r\n\t\t\tif(date>0){\r\n\t\t\t\tfor(mdays = this.getDaysInIslamicMonth(this._month, this._year);\r\n\t\t\t\t\tdate > mdays;\r\n\t\t\t\t\t\tdate -= mdays,mdays =this.getDaysInIslamicMonth(this._month, this._year)){\r\n\t\t\t\t\tthis._month++;\r\n\t\t\t\t\tif(this._month >= 12){this._year++; this._month -= 12;}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._date = date;\r\n\t\t\t}else{\r\n\t\t\t\tfor(mdays = this.getDaysInIslamicMonth((this._month-1)>=0 ?(this._month-1) :11 ,((this._month-1)>=0)? this._year: this._year-1);\r\n\t\t\t\t\t\tdate <= 0;\r\n\t\t\t\t\t\t\tmdays = this.getDaysInIslamicMonth((this._month-1)>=0 ? (this._month-1) :11,((this._month-1)>=0)? this._year: this._year-1)){\r\n\t\t\t\t\tthis._month--;\r\n\t\t\t\t\tif(this._month < 0){this._year--; this._month += 12;}\r\n\r\n\t\t\t\t\tdate+=mdays;\r\n\t\t\t\t}\r\n\t\t\t\tthis._date = date;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFullYear:function(/*number*/year){\r\n\t\t// summary:\r\n\t\t//\t\tThis function set Year\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdate1.setYear(1429);\r\n\r\n\t\tthis._year = +year;\r\n\t},\r\n\r\n\tsetMonth: function(/*number*/month) {\r\n\t\t// summary:\r\n\t\t//\t\tThis function set Month\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdate1.setMonth(2);\r\n\r\n\t\tthis._year += Math.floor(month / 12);\r\n\t\tif(month > 0){\r\n\t\t\tthis._month = Math.floor(month % 12);\r\n\t\t}else{\r\n\t\t\tthis._month = Math.floor(((month % 12) + 12) % 12);\r\n\t\t}\r\n\t},\r\n\r\n\tsetHours:function(){\r\n\t\t// summary:\r\n\t\t//\t\tset the Hours\r\n\t\tvar hours_arg_no = arguments.length;\r\n\t\tvar hours = 0;\r\n\t\tif(hours_arg_no >= 1){\r\n\t\t\thours = parseInt(arguments[0]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no >= 2){\r\n\t\t\tthis._minutes = parseInt(arguments[1]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no >= 3){\r\n\t\t\tthis._seconds = parseInt(arguments[2]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no == 4){\r\n\t\t\tthis._milliseconds = parseInt(arguments[3]);\r\n\t\t}\r\n\r\n\t\twhile(hours >= 24){\r\n\t\t\tthis._date++;\r\n\t\t\tvar mdays = this.getDaysInIslamicMonth(this._month, this._year);\r\n\t\t\tif(this._date > mdays){\r\n\t\t\t\t\tthis._month ++;\r\n\t\t\t\t\tif(this._month >= 12){this._year++; this._month -= 12;}\r\n\t\t\t\t\tthis._date -= mdays;\r\n\t\t\t}\r\n\t\t\thours -= 24;\r\n\t\t}\r\n\t\tthis._hours = hours;\r\n\t},\r\n\r\n\t_addMinutes: function(/*Number*/minutes){\r\n\t\tminutes += this._minutes;\r\n\t\tthis.setMinutes(minutes);\r\n\t\tthis.setHours(this._hours + parseInt(minutes / 60));\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_addSeconds: function(/*Number*/seconds){\r\n\t\tseconds += this._seconds;\r\n\t\tthis.setSeconds(seconds);\r\n\t\tthis._addMinutes(parseInt(seconds / 60));\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_addMilliseconds: function(/*Number*/milliseconds){\r\n\t\tmilliseconds += this._milliseconds;\r\n\t\tthis.setMilliseconds(milliseconds);\r\n\t\tthis._addSeconds(parseInt(milliseconds / 1000));\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetMinutes: function(/*Number*/minutes){\r\n\t\t// summary:\r\n\t\t//\t\tsets the minutes (0-59) only.\r\n\t\tthis._minutes = minutes % 60;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetSeconds: function(/*Number*/seconds){\r\n\t\t// summary:\r\n\t\t//\t\tsets the seconds (0-59) only.\r\n\t\tthis._seconds = seconds % 60;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetMilliseconds: function(/*Number*/milliseconds){\r\n\t\tthis._milliseconds = milliseconds % 1000;\r\n\t\treturn this;\r\n\t},\r\n\t\t\r\n\ttoString:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis returns a string representation of the date in \"DDDD MMMM DD YYYY HH:MM:SS\" format\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.islamic.Date();\r\n\t\t//\t|\tdocument.writeln(date1.toString());\r\n\r\n\t\t//FIXME: TZ/DST issues?\r\n\t\tif(isNaN(this._date)){\r\n\t\t\treturn \"Invalidate Date\";\r\n\t\t}else{\r\n\t\t\tvar x = new Date();\r\n\t\t\tx.setHours(this._hours);\r\n\t\t\tx.setMinutes(this._minutes);\r\n\t\t\tx.setSeconds(this._seconds);\r\n\t\t\tx.setMilliseconds(this._milliseconds);\r\n\t\t\treturn this._month+\" \"+ this._date + \" \" + this._year + \" \" + x.toTimeString();\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t\t\r\n\ttoGregorian:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis returns the equevalent Grogorian date value in Date object\r\n\t\t// example:\r\n\t\t//\t|\tvar dateIslamic = new dojox.date.islamic.Date(1429,11,20);\r\n\t\t//\t|\tvar dateGregorian = dateIslamic.toGregorian();\r\n\r\n\t\tvar hYear = this._year;\r\n\t\tvar hMonth = this._month;\r\n\t\tvar hDate = this._date;\r\n\t\tvar julianDay = hDate + Math.ceil(29.5 * hMonth) + (hYear - 1) * 354\r\n\t\t\t\t\t\t+ Math.floor((3 + (11 * hYear)) / 30) + this._ISLAMIC_EPOCH - 1;\r\n\r\n\t\tvar wjd = Math.floor(julianDay - 0.5) + 0.5,\r\n\t\t\tdepoch = wjd - this._GREGORIAN_EPOCH,\r\n\t\t\tquadricent = Math.floor(depoch / 146097),\r\n\t\t\tdqc = this._mod(depoch, 146097),\r\n\t\t\tcent = Math.floor(dqc / 36524),\r\n\t\t\tdcent = this._mod(dqc, 36524),\r\n\t\t\tquad = Math.floor(dcent / 1461),\r\n\t\t\tdquad = this._mod(dcent, 1461),\r\n\t\t\tyindex = Math.floor(dquad / 365),\r\n\t\t\tyear = (quadricent * 400) + (cent * 100) + (quad * 4) + yindex;\r\n\t\tif(!(cent == 4 || yindex == 4)){\r\n\t\t\tyear++;\r\n\t\t}\r\n\t\t\r\n\t\tvar gYearStart = this._GREGORIAN_EPOCH + (365 * (year - 1)) + Math.floor((year - 1) / 4)\r\n\t\t\t\t\t\t- ( Math.floor((year - 1) / 100)) + Math.floor((year - 1) / 400);\r\n\t\t\t\t\t\t\r\n\t\tvar yearday = wjd - gYearStart;\r\n\t\t\r\n\t\tvar tjd = (this._GREGORIAN_EPOCH - 1) + (365 * (year - 1)) + Math.floor((year - 1) / 4)\r\n\t\t\t\t-( Math.floor((year - 1) / 100)) + Math.floor((year - 1) / 400) + Math.floor( (739 / 12)\r\n\t\t\t\t+ ( (dd.isLeapYear(new Date(year,3,1)) ? -1 : -2)) + 1);\r\n\t\t\t\r\n\t\tvar leapadj = ((wjd < tjd ) ? 0 : (dd.isLeapYear(new Date(year,3,1)) ? 1 : 2));\r\n\t\t\t\t\t\r\n\t\tvar month = Math.floor((((yearday + leapadj) * 12) + 373) / 367);\r\n\t\tvar tjd2 = (this._GREGORIAN_EPOCH - 1) + (365 * (year - 1))\r\n\t\t\t\t\t+ Math.floor((year - 1) / 4) - (Math.floor((year - 1) / 100))\r\n\t\t\t\t\t+ Math.floor((year - 1) / 400) + Math.floor((((367 * month) - 362) / 12)\r\n\t\t\t\t\t+ ((month <= 2) ? 0 : (dd.isLeapYear(new Date(year,(month-1),1)) ? -1 : -2)) + 1);\r\n\t\t\t\t\t\r\n\t\tvar day = (wjd - tjd2) + 1;\r\n\r\n\t\tvar gdate = new Date(year, (month - 1), day, this._hours, this._minutes, this._seconds, this._milliseconds);\r\n\r\n\t\treturn gdate;\r\n\t},\r\n\r\n\t//TODO: would it make more sense to make this a constructor option? or a static?\r\n\t// ported from the Java class com.ibm.icu.util.IslamicCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\tfromGregorian:function(/*Date*/gdate){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns the equivalent Islamic Date value for the Gregorian Date\r\n\t\t// example:\r\n\t\t//\t|\tvar dateIslamic = new dojox.date.islamic.Date();\r\n\t\t//\t|\tvar dateGregorian = new Date(2008,10,12);\r\n\t\t//\t|\tdateIslamic.fromGregorian(dateGregorian);\r\n\r\n\t\tvar date = new Date(gdate);\r\n\t\tvar gYear = date.getFullYear(),\r\n\t\t\tgMonth = date.getMonth(),\r\n\t\t\tgDay = date.getDate();\r\n\t\t\r\n\t\tvar julianDay = (this._GREGORIAN_EPOCH - 1) + (365 * (gYear - 1)) + Math.floor((gYear - 1) / 4)\r\n\t\t\t\t\t+ (-Math.floor((gYear - 1) / 100)) + Math.floor((gYear - 1) / 400)\r\n\t\t\t\t\t+ Math.floor((((367 * (gMonth+1)) - 362) / 12)\r\n\t\t\t\t\t+ (((gMonth+1) <= 2) ? 0 : (dd.isLeapYear(date) ? -1 : -2)) + gDay);\r\n\t\tjulianDay = Math.floor(julianDay) + 0.5;\r\n\r\n\t\tvar days = julianDay - this._ISLAMIC_EPOCH;\r\n\t\tvar hYear  = Math.floor( (30 * days + 10646) / 10631.0 );\r\n\t\tvar hMonth = Math.ceil((days - 29 - this._yearStart(hYear)) / 29.5 );\r\n\t\thMonth = Math.min(hMonth, 11);\r\n\t\tvar hDay = Math.ceil(days - this._monthStart(hYear, hMonth)) + 1;\r\n\r\n\t\tthis._date = hDay;\r\n\t\tthis._month = hMonth;\r\n\t\tthis._year = hYear;\r\n\t\tthis._hours = date.getHours();\r\n\t\tthis._minutes = date.getMinutes();\r\n\t\tthis._seconds = date.getSeconds();\r\n\t\tthis._milliseconds = date.getMilliseconds();\r\n\t\tthis._day = date.getDay();\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\tvalueOf:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns The stored time value in milliseconds\r\n\t\t//\t\tsince midnight, January 1, 1970 UTC\r\n\r\n\t\treturn this.toGregorian().valueOf();\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.IslamicCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\t_yearStart:function(/*Number*/year){\r\n\t\t// summary:\r\n\t\t//\t\treturn start of Islamic year\r\n\t\treturn (year-1)*354 + Math.floor((3+11*year)/30.0);\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.IslamicCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\t_monthStart:function(/*Number*/year, /*Number*/month){\r\n\t\t// summary:\r\n\t\t//\t\treturn the start of Islamic Month\r\n\t\treturn Math.ceil(29.5*month) +\r\n\t\t\t(year-1)*354 + Math.floor((3+11*year)/30.0);\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.IslamicCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\t_civilLeapYear:function(/*Number*/year){\r\n\t\t// summary:\r\n\t\t//\t\treturn Boolean value if Islamic leap year\r\n\t\treturn (14 + 11 * year) % 30 < 11;\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.IslamicCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\tgetDaysInIslamicMonth:function(/*Number*/month, /*Number*/ year){\r\n\t\t// summary:\r\n\t\t//\t\treturns the number of days in the given Islamic Month\r\n\t\tvar length = 0;\r\n\t\tlength = 29 + ((month+1) % 2);\r\n\t\tif(month == 11 && this._civilLeapYear(year)){\r\n\t\t\tlength++;\r\n\t\t}\r\n\t\treturn length;\r\n\t},\r\n\r\n\t_mod:function(a, b){\r\n\t\treturn a - (b * Math.floor(a / b));\r\n\t}\r\n});\r\n\r\n//TODOC\r\nIDate.getDaysInIslamicMonth = function(/*dojox/date/islamic.Date*/month){\r\n\treturn new IDate().getDaysInIslamicMonth(month.getMonth(),month.getFullYear()); // dojox.date.islamic.Date\r\n};\r\nreturn IDate;\r\n});\r\n"]}