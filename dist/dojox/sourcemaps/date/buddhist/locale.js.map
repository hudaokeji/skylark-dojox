{"version":3,"sources":["date/buddhist/locale.js"],"names":["define","dojox","lang","arr","dd","i18n","regexp","string","BDate","blocale","getObject","formatPattern","dateObject","bundle","locale","fullYear","pattern","replace","match","s","pad","c","charAt","l","length","widthList","String","getFullYear","m","getMonth","propM","join","getDate","d","getDay","propD","timePeriod","getHours","h","getMinutes","getSeconds","Math","round","getMilliseconds","pow","getTimezoneName","toGregorian","offset","getTimezoneOffset","tz","floor","abs","splice","Error","_processPattern","applyPattern","applyLiteral","applyAll","identity","x","chunks","literal","forEach","chunk","i","_buildDateTimeRE","tokens","options","escapeString","normalizeLocale","p2","strict","am","pm","toLowerCase","push","format","formatLength","_getBuddhistBundle","str","sauce","hitch","this","selector","datePattern","timePattern","_parseInfo","parse","value","info","RegExp","exec","result","amPm","hours","every","v","token","Number","months","concat","map","indexOf","period","_customFormats","addCustomFormats","packageName","bundleName","pkg","name","buddhist","desc","getLocalization","mixin","getNames","item","type","context","date","label","lookup","props","undefined"],"mappings":"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","file":"../../../date/buddhist/locale.js","sourcesContent":["define([\"../..\", \"dojo/_base/lang\", \"dojo/_base/array\", \"dojo/date\", \"dojo/i18n\", \"dojo/regexp\", \"dojo/string\", \"./Date\", \"dojo/i18n!dojo/cldr/nls/buddhist\"],\r\n\tfunction(dojox, lang, arr, dd, i18n, regexp, string, BDate){\r\n\r\n\tvar blocale = lang.getObject(\"date.buddhist.locale\", true, dojox);\r\n\r\n\t// Format a pattern without literals\r\n\tfunction formatPattern(dateObject, bundle, locale, fullYear,  pattern){\r\n\r\n\t\treturn pattern.replace(/([a-z])\\1*/ig, function(match){\r\n\t\t\tvar s, pad;\r\n\t\t\tvar c = match.charAt(0);\r\n\t\t\tvar l = match.length;\r\n\t\t\tvar widthList = [\"abbr\", \"wide\", \"narrow\"];\r\n\t\t\t\r\n\t\t\tswitch(c){\r\n\t\t\t\tcase 'G':\r\n\t\t\t\t\ts = bundle[\"eraAbbr\"][0];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'y':\r\n\t\t\t\t\ts = String(dateObject.getFullYear());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'M':\r\n\t\t\t\t\tvar m = dateObject.getMonth();\r\n\t\t\t\t\tif(l<3){\r\n\t\t\t\t\t\ts = m+1; pad = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar propM = [\"months\", \"format\", widthList[l-3]].join(\"-\");\r\n\t\t\t\t\t\ts = bundle[propM][m];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\ts = dateObject.getDate(true); pad = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'E':\r\n\t\t\t\t\tvar d = dateObject.getDay();\r\n\t\t\t\t\tif(l<3){\r\n\t\t\t\t\t\ts = d+1; pad = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar propD = [\"days\", \"format\", widthList[l-3]].join(\"-\");\r\n\t\t\t\t\t\ts = bundle[propD][d];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'a':\r\n\t\t\t\t\tvar timePeriod = (dateObject.getHours() < 12) ? 'am' : 'pm';\r\n\t\t\t\t\ts = bundle['dayPeriods-format-wide-' + timePeriod];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'h':\r\n\t\t\t\tcase 'H':\r\n\t\t\t\tcase 'K':\r\n\t\t\t\tcase 'k':\r\n\t\t\t\t\tvar h = dateObject.getHours();\r\n\t\t\t\t\tswitch (c){\r\n\t\t\t\t\t\tcase 'h': // 1-12\r\n\t\t\t\t\t\t\ts = (h % 12) || 12;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'H': // 0-23\r\n\t\t\t\t\t\t\ts = h;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'K': // 0-11\r\n\t\t\t\t\t\t\ts = (h % 12);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'k': // 1-24\r\n\t\t\t\t\t\t\ts = h || 24;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpad = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'm':\r\n\t\t\t\t\ts = dateObject.getMinutes(); pad = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\ts = dateObject.getSeconds(); pad = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'S':\r\n\t\t\t\t\ts = Math.round(dateObject.getMilliseconds() * Math.pow(10, l-3)); pad = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'z':\r\n\t\t\t\t\t// We only have one timezone to offer; the one from the browser\r\n\t\t\t\t\ts = dd.getTimezoneName(dateObject.toGregorian());\r\n\t\t\t\t\tif(s){ break; }\r\n\t\t\t\t\tl = 4;\r\n\t\t\t\t\t// fallthrough... use GMT if tz not available\r\n\t\t\t\tcase 'Z':\r\n\t\t\t\t\tvar offset = dateObject.toGregorian().getTimezoneOffset();\r\n\t\t\t\t\tvar tz = [\r\n\t\t\t\t\t\t(offset <= 0 ? \"+\" : \"-\"),\r\n\t\t\t\t\t\tstring.pad(Math.floor(Math.abs(offset) / 60), 2),\r\n\t\t\t\t\t\tstring.pad(Math.abs(offset) % 60, 2)\r\n\t\t\t\t\t];\r\n\t\t\t\t\tif(l == 4){\r\n\t\t\t\t\t\ttz.splice(0, 0, \"GMT\");\r\n\t\t\t\t\t\ttz.splice(3, 0, \":\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts = tz.join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(\"dojox.date.buddhist.locale.formatPattern: invalid pattern char: \"+pattern);\r\n\t\t\t}\r\n\t\t\tif(pad){ s = string.pad(s, l); }\r\n\t\t\treturn s;\r\n\t\t});\r\n\t}\r\n\t\r\n\tblocale.format = function(/*dojox/date/buddhist/Date*/dateObject, /*object?*/options){\r\n\t\t// summary:\r\n\t\t//\t\tFormat a Date object as a String, using  settings.\r\n\r\n\t\t// based on and similar to dojo.date.locale.format\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tvar locale = i18n.normalizeLocale(options.locale);\r\n\t\tvar formatLength = options.formatLength || 'short';\r\n\t\tvar bundle = blocale._getBuddhistBundle(locale);\r\n\t\tvar str = [];\r\n\r\n\t\tvar sauce = lang.hitch(this, formatPattern, dateObject, bundle, locale, options.fullYear);\r\n\t\tif(options.selector == \"year\"){\r\n\t\t\tvar year = dateObject.getFullYear();\r\n\t\t\treturn year;\r\n\t\t}\r\n\t\tif(options.selector != \"time\"){\r\n\t\t\tvar datePattern = options.datePattern || bundle[\"dateFormat-\"+formatLength];\r\n\t\t\tif(datePattern){str.push(_processPattern(datePattern, sauce));}\r\n\t\t}\r\n\t\tif(options.selector != \"date\"){\r\n\t\t\tvar timePattern = options.timePattern || bundle[\"timeFormat-\"+formatLength];\r\n\t\t\tif(timePattern){str.push(_processPattern(timePattern, sauce));}\r\n\t\t}\r\n\t\tvar result = str.join(\" \"); //TODO: use locale-specific pattern to assemble date + time\r\n\r\n\t\treturn result; // String\r\n\t};\r\n\r\n\tblocale.regexp = function(/*Object?*/options){\r\n\t\t// summary:\r\n\t\t//\t\tBuilds the regular needed to parse a buddhist.Date\r\n\r\n\t\t//\tbased on and similar to dojo.date.locale.regexp\r\n\r\n\t\treturn blocale._parseInfo(options).regexp; // String\r\n\t};\r\n\r\n\tblocale._parseInfo = function(/*Object?*/options){\r\n\t/* based on and similar to dojo.date.locale._parseInfo */\r\n\r\n\t\toptions = options || {};\r\n\t\tvar locale = i18n.normalizeLocale(options.locale);\r\n\t\tvar bundle = blocale._getBuddhistBundle(locale);\r\n\t\tvar formatLength = options.formatLength || 'short';\r\n\t\tvar datePattern = options.datePattern || bundle[\"dateFormat-\" + formatLength];\r\n\t\tvar timePattern = options.timePattern || bundle[\"timeFormat-\" + formatLength];\r\n\r\n\t\tvar pattern;\r\n\t\tif(options.selector == 'date'){\r\n\t\t\tpattern = datePattern;\r\n\t\t}else if(options.selector == 'time'){\r\n\t\t\tpattern = timePattern;\r\n\t\t}else{\r\n\t\t\tpattern = (typeof (timePattern) == \"undefined\") ? datePattern : datePattern + ' ' + timePattern;\r\n\t\t}\r\n\r\n\t\tvar tokens = [];\r\n\t\r\n\t\tvar re = _processPattern(pattern, lang.hitch(this, _buildDateTimeRE, tokens, bundle, options));\r\n\t\treturn {regexp: re, tokens: tokens, bundle: bundle};\r\n\t};\r\n\r\n\tblocale.parse = function(/*String*/value, /*Object?*/options){\r\n\t\t// summary:\r\n\t\t//\t\tThis function parses string date value according to options\r\n\r\n\t\t// based on and similar to dojo.date.locale.parse\r\n\r\n\t\tvalue =  value.replace(/[\\u200E\\u200F\\u202A-\\u202E]/g, \"\"); //remove special chars\r\n\t\r\n\t\tif(!options){options={};}\r\n\t\tvar info = blocale._parseInfo(options);\r\n\t\r\n\t\tvar tokens = info.tokens, bundle = info.bundle;\r\n\t\tvar re = new RegExp(\"^\" + info.regexp + \"$\");\r\n\t\r\n\t\tvar match = re.exec(value);\r\n\r\n\t\tvar locale = i18n.normalizeLocale(options.locale);\r\n\r\n\t\tif(!match){ return null; } // null\r\n\t\r\n\t\tvar date, date1;\r\n\t\r\n\t\tvar result = [2513,0,1,0,0,0,0];  // buddhist date for [1970,0,1,0,0,0,0] used in gregorian locale\r\n\t\tvar amPm = \"\";\r\n\t\tvar mLength = 0;\r\n\t\tvar widthList = [\"abbr\", \"wide\", \"narrow\"];\r\n\t\tvar valid = arr.every(match, function(v, i){\r\n\t\t\tif(!i){return true;}\r\n\t\t\tvar token=tokens[i-1];\r\n\t\t\tvar l=token.length;\r\n\t\t\tswitch(token.charAt(0)){\r\n\t\t\t\tcase 'y':\r\n\t\t\t\t\tresult[0] = Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'M':\r\n\t\t\t\t\tif(l>2){\r\n\t\t\t\t\t\tvar months = bundle['months-format-' + widthList[l-3]].concat();\r\n\t\t\t\t\t\tif(!options.strict){\r\n\t\t\t\t\t\t\t//Tolerate abbreviating period in month part\r\n\t\t\t\t\t\t\t//Case-insensitive comparison\r\n\t\t\t\t\t\t\tv = v.replace(\".\",\"\").toLowerCase();\r\n\t\t\t\t\t\t\tmonths = arr.map(months, function(s){ return s ? s.replace(\".\",\"\").toLowerCase() : s; } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tv = arr.indexOf(months, v);\r\n\t\t\t\t\t\tif(v == -1){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmLength = l;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tv--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult[1] = Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'D':\r\n\t\t\t\t\tresult[1] = 0;\r\n\t\t\t\t\t// fallthrough...\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\t\tresult[2] =  Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'a': //am/pm\r\n\t\t\t\t\tvar am = options.am || bundle['dayPeriods-format-wide-am'],\r\n\t\t\t\t\t\tpm = options.pm || bundle['dayPeriods-format-wide-pm'];\r\n\t\t\t\t\tif(!options.strict){\r\n\t\t\t\t\t\tvar period = /\\./g;\r\n\t\t\t\t\t\tv = v.replace(period,'').toLowerCase();\r\n\t\t\t\t\t\tam = am.replace(period,'').toLowerCase();\r\n\t\t\t\t\t\tpm = pm.replace(period,'').toLowerCase();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options.strict && v != am && v != pm){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// we might not have seen the hours field yet, so store the state and apply hour change later\r\n\t\t\t\t\tamPm = (v == pm) ? 'p' : (v == am) ? 'a' : '';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'K': //hour (1-24)\r\n\t\t\t\t\tif(v == 24){ v = 0; }\r\n\t\t\t\t\t// fallthrough...\r\n\t\t\t\tcase 'h': //hour (1-12)\r\n\t\t\t\tcase 'H': //hour (0-23)\r\n\t\t\t\tcase 'k': //hour (0-11)\r\n\t\t\t\t\t//in the 12-hour case, adjusting for am/pm requires the 'a' part\r\n\t\t\t\t\t//which could come before or after the hour, so we will adjust later\r\n\t\t\t\t\tresult[3] = Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'm': //minutes\r\n\t\t\t\t\tresult[4] = Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 's': //seconds\r\n\t\t\t\t\tresult[5] = Number(v);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'S': //milliseconds\r\n\t\t\t\t\tresult[6] = Number(v);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tvar hours = +result[3];\r\n\t\tif(amPm === 'p' && hours < 12){\r\n\t\t\tresult[3] = hours + 12; //e.g., 3pm -> 15\r\n\t\t}else if(amPm === 'a' && hours == 12){\r\n\t\t\tresult[3] = 0; //12am -> 0\r\n\t\t}\r\n\t\tvar dateObject = new BDate(result[0], result[1], result[2], result[3], result[4], result[5], result[6]);\r\n\t\treturn dateObject;\r\n\t};\r\n\r\n\r\n\tfunction _processPattern(pattern, applyPattern, applyLiteral, applyAll){\r\n\t\t// summary:\r\n\t\t//\t\tProcess a pattern with literals in it\r\n\r\n\t\t// Break up on single quotes, treat every other one as a literal, except '' which becomes '\r\n\t\tvar identity = function(x){return x;};\r\n\t\tapplyPattern = applyPattern || identity;\r\n\t\tapplyLiteral = applyLiteral || identity;\r\n\t\tapplyAll = applyAll || identity;\r\n\r\n\t\t//split on single quotes (which escape literals in date format strings)\r\n\t\t//but preserve escaped single quotes (e.g., o''clock)\r\n\t\tvar chunks = pattern.match(/(''|[^'])+/g);\r\n\t\tvar literal = pattern.charAt(0) == \"'\";\r\n\r\n\t\tarr.forEach(chunks, function(chunk, i){\r\n\t\t\tif(!chunk){\r\n\t\t\t\tchunks[i]='';\r\n\t\t\t}else{\r\n\t\t\t\tchunks[i]=(literal ? applyLiteral : applyPattern)(chunk);\r\n\t\t\t\tliteral = !literal;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn applyAll(chunks.join(''));\r\n\t}\r\n\r\n\tfunction _buildDateTimeRE  (tokens, bundle, options, pattern){\r\n\t\t\t// based on and similar to dojo.date.locale._buildDateTimeRE\r\n\t\t\t//\r\n\t\r\n\t\tpattern = regexp.escapeString(pattern);\r\n\t\tvar locale = i18n.normalizeLocale(options.locale);\r\n\t\r\n\t\treturn pattern.replace(/([a-z])\\1*/ig, function(match){\r\n\r\n\t\t\t\t// Build a simple regexp.  Avoid captures, which would ruin the tokens list\r\n\t\t\t\tvar s;\r\n\t\t\t\tvar c = match.charAt(0);\r\n\t\t\t\tvar l = match.length;\r\n\t\t\t\tvar p2 = '', p3 = '';\r\n\t\t\t\tif(options.strict){\r\n\t\t\t\t\tif(l > 1){ p2 = '0' + '{'+(l-1)+'}'; }\r\n\t\t\t\t\tif(l > 2){ p3 = '0' + '{'+(l-2)+'}'; }\r\n\t\t\t\t}else{\r\n\t\t\t\t\tp2 = '0?'; p3 = '0{0,2}';\r\n\t\t\t\t}\r\n\t\t\t\tswitch(c){\r\n\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\ts = '\\\\d+';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\ts = (l>2) ?  '\\\\S+' : p2+'[1-9]|1[0-2]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\ts = '[12]\\\\d|'+p2+'[1-9]|3[01]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'E':\r\n\t\t\t\t\t\ts = '\\\\S+';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'h': //hour (1-12)\r\n\t\t\t\t\t\ts = p2+'[1-9]|1[0-2]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'k': //hour (0-11)\r\n\t\t\t\t\t\ts = p2+'\\\\d|1[01]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'H': //hour (0-23)\r\n\t\t\t\t\t\ts = p2+'\\\\d|1\\\\d|2[0-3]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'K': //hour (1-24)\r\n\t\t\t\t\t\ts = p2+'[1-9]|1\\\\d|2[0-4]';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'm':\r\n\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\ts = p2+'\\\\d|[0-5]\\\\d';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'S':\r\n\t\t\t\t\t\ts = '\\\\d{'+l+'}';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'a':\r\n\t\t\t\t\t\tvar am = options.am || bundle['dayPeriods-format-wide-am'],\r\n\t\t\t\t\t\t\tpm = options.pm || bundle['dayPeriods-format-wide-pm'];\r\n\t\t\t\t\t\tif(options.strict){\r\n\t\t\t\t\t\t\ts = am + '|' + pm;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ts = am + '|' + pm;\r\n\t\t\t\t\t\t\tif(am != am.toLowerCase()){ s += '|' + am.toLowerCase(); }\r\n\t\t\t\t\t\t\tif(pm != pm.toLowerCase()){ s += '|' + pm.toLowerCase(); }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ts = \".*\";\r\n\t\t\t\t}\r\n\t\t\t\tif(tokens){ tokens.push(match); }\r\n\t\t\t\treturn \"(\" + s + \")\"; // add capture\r\n\t\t\t}).replace(/[\\xa0 ]/g, \"[\\\\s\\\\xa0]\"); // normalize whitespace.  Need explicit handling of \\xa0 for IE. */\r\n\t}\r\n\r\n\tvar _customFormats = [];\r\n\tblocale.addCustomFormats = function(/*String*/packageName, /*String*/bundleName){\r\n\t\t// summary:\r\n\t\t//\t\tAdd a reference to a bundle containing localized custom formats to be\r\n\t\t//\t\tused by date/time formatting and parsing routines.\r\n\t\t_customFormats.push({pkg:packageName,name:bundleName});\r\n\t};\r\n\r\n\tblocale._getBuddhistBundle = function(/*String*/locale){\r\n\t\tvar buddhist = {};\r\n\t\tarr.forEach(_customFormats, function(desc){\r\n\t\t\tvar bundle = i18n.getLocalization(desc.pkg, desc.name, locale);\r\n\t\t\tbuddhist = lang.mixin(buddhist, bundle);\r\n\t\t}, this);\r\n\t\treturn buddhist; /*Object*/\r\n\t};\r\n\r\n\tblocale.addCustomFormats(\"dojo.cldr\",\"buddhist\");\r\n\r\n\tblocale.getNames = function(/*String*/item, /*String*/type, /*String?*/context, /*String?*/locale, /*dojox/date/buddhist/Date?*/date){\r\n\t\t// summary:\r\n\t\t//\t\tUsed to get localized strings from dojo.cldr for day or month names.\r\n\t\tvar label;\r\n\t\tvar lookup = blocale._getBuddhistBundle(locale);\r\n\t\tvar props = [item, context, type];\r\n\t\tif(context == 'standAlone'){\r\n\t\t\tvar key = props.join('-');\r\n\t\t\tlabel = lookup[key];\r\n\t\t\t// Fall back to 'format' flavor of name\r\n\t\t\tif(label[0] == 1){ label = undefined; } // kludge, in the absence of real aliasing support in dojo.cldr\r\n\t\t}\r\n\t\tprops[1] = 'format';\r\n\t\r\n\t\t// return by copy so changes won't be made accidentally to the in-memory model\r\n\t\treturn (label || lookup[props.join('-')]).concat(); /*Array*/\r\n\t};\r\n\r\n\treturn blocale;\r\n});\r\n"]}