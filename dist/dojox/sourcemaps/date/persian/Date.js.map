{"version":3,"sources":["date/persian/Date.js"],"names":["define","lang","declare","dd","IDate","_date","_month","_year","_hours","_minutes","_seconds","_milliseconds","_day","_GREGORIAN_EPOCH","_PERSIAN_EPOCH","daysInMonth","constructor","len","arguments","length","arg0","Date","this","fromGregorian","getDate","getMonth","getFullYear","getDay","toGregorian","getHours","getMinutes","getSeconds","getMilliseconds","setDate","date","mdays","parseInt","getDaysInPersianMonth","setFullYear","year","setMonth","month","Math","floor","setHours","hours_arg_no","hours","_addMinutes","minutes","setMinutes","_addSeconds","seconds","setSeconds","_addMilliseconds","milliseconds","setMilliseconds","toString","isNaN","x","toTimeString","j","persian_to_jd","jd_to_gregorian","weekday","jwday","gdate","_23","_24","_25","_26","persian","calcGregorian","day","gregorian_to_jd","perscal","jd_to_persian","Array","jd","depoch","cycle","cyear","ycycle","aux1","aux2","yday","_mod","ceil","epbase","epyear","leap_gregorian","jmonth","wjd","quadricent","dqc","cent","dcent","quad","dquad","yindex","yearday","leapadj","valueOf","_yearStart","_monthStart","isLeapYear","j_y","j_m","j_d","days","a","b"],"mappings":"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","file":"../../../date/persian/Date.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/declare\", \"dojo/date\"], function(lang, declare, dd){\r\n\r\n\tvar IDate = declare(\"dojox.date.persian.Date\", null, {\r\n\t// summary:\r\n\t//\t\tThe component defines the Persian (Hijri) Calendar Object\r\n\t// description:\r\n\t//\t\tThis module is similar to the Date() object provided by JavaScript\r\n\t// example:\r\n\t//\t|\tvar date = new dojox.date.persian.Date();\r\n\t//\t|\tdocument.writeln(date.getFullYear()+'\\'+date.getMonth()+'\\'+date.getDate());\r\n\r\n\r\n\t_date: 0,\r\n\t_month: 0,\r\n\t_year: 0,\r\n\t_hours: 0,\r\n\t_minutes: 0,\r\n\t_seconds: 0,\r\n\t_milliseconds: 0,\r\n\t_day: 0,\r\n\t_GREGORIAN_EPOCH : 1721425.5,\r\n\t_PERSIAN_EPOCH : 1948320.5,\r\n\tdaysInMonth:[31,31,31,31,31,31,30,30,30,30,30,29 ],\r\n\tconstructor: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis is the constructor\r\n\t\t// description:\r\n\t\t//\t\tThis function initialize the date object values\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tvar date2 = new dojox.date.persian.Date(\"12\\2\\1429\");\r\n\t\t//\t|\tvar date3 = new dojox.date.persian.Date(date2);\r\n\t\t//\t|\tvar date4 = new dojox.date.persian.Date(1429,2,12);\r\n\r\n\t\tvar len = arguments.length;\r\n\t\tif(!len){// use the current date value, added \"\" to the similarity to date\r\n\t\t\tthis.fromGregorian(new Date());\r\n\t\t}else if(len == 1){\r\n\t\t\tvar arg0 = arguments[0];\r\n\t\t\tif(typeof arg0 == \"number\"){ // this is time \"valueof\"\r\n\t\t\t\targ0 = new Date(arg0);\r\n\t\t\t}\r\n\r\n\t\t\tif(arg0 instanceof Date){\r\n\t\t\t\tthis.fromGregorian(arg0);\r\n\t\t\t}else if(arg0 == \"\"){\r\n\t\t\t\t// date should be invalid.  Dijit relies on this behavior.\r\n\t\t\t\tthis._date = new Date(\"\"); //TODO: should this be NaN?  _date is not a Date object\r\n\t\t\t}else{  // this is Persian.Date object\r\n\t\t\t\tthis._year = arg0._year;\r\n\t\t\t\tthis._month =  arg0._month;\r\n\t\t\t\tthis._date = arg0._date;\r\n\t\t\t\tthis._hours = arg0._hours;\r\n\t\t\t\tthis._minutes = arg0._minutes;\r\n\t\t\t\tthis._seconds = arg0._seconds;\r\n\t\t\t\tthis._milliseconds = arg0._milliseconds;\r\n\t\t\t}\r\n\t\t}else if(len >=3){\r\n\t\t\t// YYYY MM DD arguments passed, month is from 0-12\r\n\t\t\tthis._year += arguments[0];\r\n\t\t\tthis._month += arguments[1];\r\n\t\t\tthis._date += arguments[2];\r\n\t\t\tthis._hours += arguments[3] || 0;\r\n\t\t\tthis._minutes += arguments[4] || 0;\r\n\t\t\tthis._seconds += arguments[5] || 0;\r\n\t\t\tthis._milliseconds += arguments[6] || 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetDate:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns the date value (1 - 30)\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getDate);\r\n\t\treturn this._date;\r\n\t},\r\n\t\r\n\tgetMonth:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return the month value ( 0 - 11 )\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getMonth()+1);\r\n\r\n\t\treturn this._month;\r\n\t},\r\n\r\n\tgetFullYear:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return the Year value\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getFullYear());\r\n\r\n\t\treturn this._year;\r\n\t},\r\n\t\t\r\n\tgetDay:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function return Week Day value ( 0 - 6 )\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdocument.writeln(date1.getDay());\r\n\r\n\t\treturn this.toGregorian().getDay();\r\n\t},\r\n\t\t\r\n\tgetHours:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Hour value\r\n\t\treturn this._hours;\r\n\t},\r\n\t\r\n\tgetMinutes:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Minutes value\r\n\t\treturn this._minutes;\r\n\t},\r\n\r\n\tgetSeconds:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the seconds value\r\n\t\treturn this._seconds;\r\n\t},\r\n\r\n\tgetMilliseconds:function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns the Milliseconds value\r\n\t\treturn this._milliseconds;\r\n\t},\r\n\r\n\tsetDate: function(/*number*/date){\r\n\t\t// summary:\r\n\t\t//\t\tThis function sets the Date\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdate1.setDate(2);\r\n\r\n\t\tdate = parseInt(date);\r\n\r\n\t\tif(date > 0 && date <= this.getDaysInPersianMonth(this._month, this._year)){\r\n\t\t\tthis._date = date;\r\n\t\t}else{\r\n\t\t\tvar mdays;\r\n\t\t\tif(date>0){\r\n\t\t\t\tfor(mdays = this.getDaysInPersianMonth(this._month, this._year);\r\n\t\t\t\t\tdate > mdays;\r\n\t\t\t\t\t\tdate -= mdays,mdays =this.getDaysInPersianMonth(this._month, this._year)){\r\n\t\t\t\t\tthis._month++;\r\n\t\t\t\t\tif(this._month >= 12){this._year++; this._month -= 12;}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._date = date;\r\n\t\t\t}else{\r\n\t\t\t\tfor(mdays = this.getDaysInPersianMonth((this._month-1)>=0 ?(this._month-1) :11 ,((this._month-1)>=0)? this._year: this._year-1);\r\n\t\t\t\t\t\tdate <= 0;\r\n\t\t\t\t\t\t\tmdays = this.getDaysInPersianMonth((this._month-1)>=0 ? (this._month-1) :11,((this._month-1)>=0)? this._year: this._year-1)){\r\n\t\t\t\t\tthis._month--;\r\n\t\t\t\t\tif(this._month < 0){this._year--; this._month += 12;}\r\n\r\n\t\t\t\t\tdate+=mdays;\r\n\t\t\t\t}\r\n\t\t\t\tthis._date = date;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFullYear:function(/*number*/year){\r\n\t\t// summary:\r\n\t\t//\t\tThis function set Year\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdate1.setYear(1429);\r\n\r\n\t\tthis._year = +year;\r\n\t},\r\n\r\n\tsetMonth: function(/*number*/month) {\r\n\t\t// summary:\r\n\t\t//\t\tThis function set Month\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdate1.setMonth(2);\r\n\r\n\t\tthis._year += Math.floor(month / 12);\r\n\t\tif(month > 0){\r\n\t\t\tthis._month = Math.floor(month % 12);\r\n\t\t}else{\r\n\t\t\tthis._month = Math.floor(((month % 12) + 12) % 12);\r\n\t\t}\r\n\t},\r\n\r\n\tsetHours:function(){\r\n\t\t// summary:\r\n\t\t//\t\tset the Hours\r\n\t\tvar hours_arg_no = arguments.length;\r\n\t\tvar hours = 0;\r\n\t\tif(hours_arg_no >= 1){\r\n\t\t\thours = parseInt(arguments[0]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no >= 2){\r\n\t\t\tthis._minutes = parseInt(arguments[1]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no >= 3){\r\n\t\t\tthis._seconds = parseInt(arguments[2]);\r\n\t\t}\r\n\r\n\t\tif(hours_arg_no == 4){\r\n\t\t\tthis._milliseconds = parseInt(arguments[3]);\r\n\t\t}\r\n\r\n\t\twhile(hours >= 24){\r\n\t\t\tthis._date++;\r\n\t\t\tvar mdays = this.getDaysInPersianMonth(this._month, this._year);\r\n\t\t\tif(this._date > mdays){\r\n\t\t\t\t\tthis._month ++;\r\n\t\t\t\t\tif(this._month >= 12){this._year++; this._month -= 12;}\r\n\t\t\t\t\tthis._date -= mdays;\r\n\t\t\t}\r\n\t\t\thours -= 24;\r\n\t\t}\r\n\t\tthis._hours = hours;\r\n\t},\r\n\r\n\t_addMinutes: function(/*Number*/minutes){\r\n\t\tminutes += this._minutes;\r\n\t\tthis.setMinutes(minutes);\r\n\t\tthis.setHours(this._hours + parseInt(minutes / 60));\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_addSeconds: function(/*Number*/seconds){\r\n\t\tseconds += this._seconds;\r\n\t\tthis.setSeconds(seconds);\r\n\t\tthis._addMinutes(parseInt(seconds / 60));\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_addMilliseconds: function(/*Number*/milliseconds){\r\n\t\tmilliseconds += this._milliseconds;\r\n\t\tthis.setMilliseconds(milliseconds);\r\n\t\tthis._addSeconds(parseInt(milliseconds / 1000));\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetMinutes: function(/*Number*/minutes){\r\n\t\t// summary:\r\n\t\t//\t\tsets the minutes (0-59) only.\r\n\t\tthis._minutes = minutes % 60;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetSeconds: function(/*Number*/seconds){\r\n\t\t// summary:\r\n\t\t//\t\tsets the seconds (0-59) only.\r\n\t\tthis._seconds = seconds % 60;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetMilliseconds: function(/*Number*/milliseconds){\r\n\t\tthis._milliseconds = milliseconds % 1000;\r\n\t\treturn this;\r\n\t},\r\n\t\t\r\n\ttoString:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis returns a string representation of the date in \"DDDD MMMM DD YYYY HH:MM:SS\" format\r\n\t\t// example:\r\n\t\t//\t|\tvar date1 = new dojox.date.persian.Date();\r\n\t\t//\t|\tdocument.writeln(date1.toString());\r\n\r\n\t\t//FIXME: TZ/DST issues?\r\n\t\tif(isNaN(this._date)){\r\n\t\t\treturn \"Invalidate Date\";\r\n\t\t}else{\r\n\t\t\tvar x = new Date();\r\n\t\t\tx.setHours(this._hours);\r\n\t\t\tx.setMinutes(this._minutes);\r\n\t\t\tx.setSeconds(this._seconds);\r\n\t\t\tx.setMilliseconds(this._milliseconds);\r\n\t\t\treturn this._month+\" \"+ this._date + \" \" + this._year + \" \" + x.toTimeString();\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t\t\r\n\ttoGregorian:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis returns the equevalent Grogorian date value in Date object\r\n\t\t// example:\r\n\t\t//\t|\tvar datePersian = new dojox.date.persian.Date(1429,11,20);\r\n\t\t//\t|\tvar dateGregorian = datePersian.toGregorian();\r\n\r\n\t\tvar hYear = this._year;\r\n\t\tvar date,j;\r\n\t\tj = this.persian_to_jd(this._year,this._month+1,this._date);\r\n\t\tdate = this.jd_to_gregorian(j,this._month+1);\r\n\t\tweekday = this.jwday(j);\r\n\t\tvar _21=new Date(date[0],date[1]-1,date[2],this._hours,this._minutes,this._seconds,this._milliseconds);\r\n\t\treturn _21;\r\n\t},\r\n\r\n\t\r\n\t// ported from the Java class com.ibm.icu.util.PersianCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\tfromGregorian:function(/*Date*/gdate){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns the equivalent Persian Date value for the Gregorian Date\r\n\t\t// example:\r\n\t\t//\t|\tvar datePersian = new dojox.date.persian.Date();\r\n\t\t//\t|\tvar dateGregorian = new Date(2008,10,12);\r\n\t\t//\t|\tdatePersian.fromGregorian(dateGregorian);\r\n\r\n\t\tvar _23=new Date(gdate);\r\n\t\tvar _24=_23.getFullYear(),_25=_23.getMonth(),_26=_23.getDate();\r\n\t\tvar persian = this.calcGregorian(_24,_25,_26);\r\n\t\tthis._date=persian[2];\r\n\t\tthis._month=persian[1];\r\n\t\tthis._year=persian[0];\r\n\t\tthis._hours=_23.getHours();\r\n\t\tthis._minutes=_23.getMinutes();\r\n\t\tthis._seconds=_23.getSeconds();\r\n\t\tthis._milliseconds=_23.getMilliseconds();\r\n\t\tthis._day=_23.getDay();\r\n\t\treturn this;\r\n\t},\r\n//  calcGregorian  --  Perform calculation starting with a Gregorian date\r\n\tcalcGregorian:function (year,month,day){\r\n\tvar j, weekday;\r\n\t\t    //  Update Julian day\r\n\t\tj = this.gregorian_to_jd(year, month + 1, day) +(Math.floor(0 + 60 * (0 + 60 * 0) + 0.5) / 86400.0);\r\n\t\t    //  Update Persian Calendar\r\n\t\tperscal = this.jd_to_persian(j);\r\n\t\tweekday = this.jwday(j);\r\n\t\treturn new Array(perscal[0], perscal[1], perscal[2],weekday);\r\n\t\t},\r\n\t//  JD_TO_PERSIAN  --  Calculate Persian date from Julian day\r\n\t\tjd_to_persian: function (jd){\r\n\t\tvar year, month, day, depoch, cycle, cyear, ycycle, aux1, aux2, yday;\r\n\t\tjd = Math.floor(jd) + 0.5;\r\n\t\tdepoch = jd - this.persian_to_jd(475, 1, 1);\r\n\t\tcycle = Math.floor(depoch / 1029983);\r\n\t\tcyear = this._mod(depoch, 1029983);\r\n\t\tif (cyear == 1029982) {\r\n\t\t   ycycle = 2820;\r\n\t\t} else {\r\n\t\t   aux1 = Math.floor(cyear / 366);\r\n\t\t   aux2 = this._mod(cyear, 366);\r\n\t\t   ycycle = Math.floor(((2134 * aux1) + (2816 * aux2) + 2815) / 1028522) + aux1 + 1;\r\n\t\t}\r\n\t\tyear = ycycle + (2820 * cycle) + 474;\r\n\t\tif (year <= 0) {\r\n\t\tyear--;\r\n\t\t}\r\n\t\tyday = (jd - this.persian_to_jd(year, 1, 1)) + 1;\r\n\t\tmonth = (yday <= 186) ? Math.ceil(yday / 31) : Math.ceil((yday - 6) / 30);\r\n\t\tday = (jd - this.persian_to_jd(year, month, 1)) + 1;\r\n\r\n\t\treturn new Array(year, month-1, day);\r\n\t\t},\r\n\t\t// PERSIAN_TO_JD  --  Determine Julian day from Persian date\r\n\t\tpersian_to_jd: function (year, month, day){\r\n\t\tvar epbase, epyear;\r\n\t\tepbase = year - ((year >= 0) ? 474 : 473);\r\n\t\tepyear = 474 + this._mod(epbase, 2820);\r\n\t\treturn day +((month <= 7) ?((month - 1) * 31) :(((month - 1) * 30) + 6)) + Math.floor(((epyear * 682) - 110) / 2816) +(epyear - 1) * 365 + Math.floor(epbase / 2820) * 1029983 +(this._PERSIAN_EPOCH - 1);\r\n\t\t},\r\n\t//  GREGORIAN_TO_JD  --  Determine Julian day number from Gregorian calendar date\r\n\t\tgregorian_to_jd: function (year, month, day){\r\n\t\t    return (this._GREGORIAN_EPOCH - 1) + (365 * (year - 1)) + Math.floor((year - 1) / 4) +(-Math.floor((year - 1) / 100)) + Math.floor((year - 1) / 400) + Math.floor((((367 * month) - 362) / 12) +\r\n\t\t           ((month <= 2) ? 0 :(this.leap_gregorian(year) ? -1 : -2)) +day);\r\n\t\t},\r\n\t\t\r\n\t//  JD_TO_GREGORIAN  --  Calculate Gregorian calendar date from Julian day\r\n\t\tjd_to_gregorian : function (jd,jmonth) {\r\n\t\tvar wjd, depoch, quadricent, dqc, cent, dcent, quad, dquad, yindex, dyindex, year, yearday, leapadj;\r\n\t\twjd = Math.floor(jd - 0.5) + 0.5;\r\n\t\tdepoch = wjd - this._GREGORIAN_EPOCH;\r\n\t\tquadricent = Math.floor(depoch / 146097);\r\n\t\tdqc = this._mod(depoch, 146097);\r\n\t\tcent = Math.floor(dqc / 36524);\r\n\t\tdcent = this._mod(dqc, 36524);\r\n\t\tquad = Math.floor(dcent / 1461);\r\n\t\tdquad = this._mod(dcent, 1461);\r\n\t\tyindex = Math.floor(dquad / 365);\r\n\t\tyear = (quadricent * 400) + (cent * 100) + (quad * 4) + yindex;\r\n\t\tif (!((cent == 4) || (yindex == 4))) {\r\n\t\t    year++;\r\n\t\t}\r\n\t\tyearday = wjd - this.gregorian_to_jd(year, 1, 1);\r\n\t\tleapadj = ((wjd < this.gregorian_to_jd(year, 3, 1)) ? 0:(this.leap_gregorian(year) ? 1 : 2));\r\n\t\tmonth = Math.floor((((yearday + leapadj) * 12) + 373) / 367);\r\n\t\tday = (wjd - this.gregorian_to_jd(year, month, 1)) + 1;\r\n\t\treturn new Array(year, month, day);\r\n\t\t},\tvalueOf:function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function returns The stored time value in milliseconds\r\n\t\t//\t\tsince midnight, January 1, 1970 UTC\r\n\r\n\t\treturn this.toGregorian().valueOf();\r\n\t},jwday: function (j)\r\n\t{\r\n\t\t return this._mod(Math.floor((j + 1.5)), 7);\r\n\t\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.PersianCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\t_yearStart:function(/*Number*/year){\r\n\t\t// summary:\r\n\t\t//\t\treturn start of Persian year\r\n\t\treturn (year-1)*354 + Math.floor((3+11*year)/30.0);\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.PersianCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\t_monthStart:function(/*Number*/year, /*Number*/month){\r\n\t\t// summary:\r\n\t\t//\t\treturn the start of Persian Month\r\n\t\treturn Math.ceil(29.5*month) +\r\n\t\t\t(year-1)*354 + Math.floor((3+11*year)/30.0);\r\n\t},\r\n//  LEAP_GREGORIAN  --  Is a given year in the Gregorian calendar a leap year ?\r\n\tleap_gregorian: function (year)\r\n\t{\r\n\t    return ((year % 4) == 0) &&\r\n\t            (!(((year % 100) == 0) && ((year % 400) != 0)));\r\n\t},\r\n\r\n//  LEAP_PERSIAN  --  Is a given year a leap year in the Persian calendar ?\r\n\tisLeapYear:function(j_y,j_m,j_d){\r\n\t\t// summary:\r\n\t\t//\t\treturn Boolean value if Persian leap year\r\n\t\treturn !(j_y < 0 || j_y > 32767 || j_m < 1 || j_m > 12 || j_d < 1 || j_d >(this.daysInMonth[j_m-1] + (j_m == 12 && !((j_y-979)%33%4))));\r\n\r\n\t},\r\n\r\n\t// ported from the Java class com.ibm.icu.util.PersianCalendar from ICU4J v3.6.1 at http://www.icu-project.org/\r\n\tgetDaysInPersianMonth:function(/*Number*/month, /*Number*/ year){\r\n\t\t// summary:\r\n\t\t//\t\treturns the number of days in the given Persian Month\r\n\t\tvar days=this.daysInMonth[month];\r\n\t\tif(month==11 && this.isLeapYear(year,month+1,30)){\r\n\t\t\tdays++;\r\n\t\t}\r\n\t\treturn days;\r\n\t},\r\n\r\n\t_mod:function(a, b){\r\n\t\treturn a - (b * Math.floor(a / b));\r\n\t}\r\n});\r\n\r\n\r\nIDate.getDaysInPersianMonth = function(/*dojox/date/persian.Date*/month){\r\n\treturn new IDate().getDaysInPersianMonth(month.getMonth(),month.getFullYear()); // dojox.date.persian.Date\r\n};\r\nreturn IDate;\r\n});\r\n"]}