{"version":3,"sources":["lang/tests/typed.js"],"names":["dojo","provide","config","typeCheckAllClasses","require","dojox","lang","typed","declare","constructor","makeDefaults","this","aString","self","add","a","b","withCallback","callback","param","TypedClass","tests","properties","String","anInt","type","maximum","optional","methods","parameters","returns","Number","hasGetters","__defineGetter__","mustThrow","testFunc","e","Error","console","warn","register","typedInstance","t","is","foo","subtract","AutoTypedClass"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,0BACbD,KAAKE,OAAOC,qBAAsB,EAClCH,KAAKI,QAAQ,oBACb,WAECC,MAAMC,KAAKC,MACVP,KAAKQ,QAAQ,8BAA+B,MAC3CC,YAAa,SAASC,GAClBA,IACFC,KAAKC,QAAU,QACfD,KAAKE,KAAOF,OAGdG,IAAK,SAASC,EAAGC,GAChB,OAAOD,EAAIC,GAEZC,aAAc,SAASC,EAAUC,GAChCD,EAASC,OAGZ,IAAIC,EAAaf,MAAMC,KAAKe,MAAMD,WAClCA,EAAWE,YACVV,QAAQW,OACRV,KAAMO,EACNI,OAAQC,KAAK,UAAWC,QAAS,IAAKC,UAAU,IAEjDP,EAAWQ,SACVd,KACCe,aACEJ,KAAK,WACLA,KAAK,WAEPK,SAAUL,KAAK,WAEhBR,cACCY,aACEJ,KAAK,WAAYI,YAAYE,YAIjC,IAAIC,KAAgBC,iBAIpB,SAASC,EAAUC,GAClB,IACCA,IACA,MAAMC,GACN,OAED,MAAM,IAAIC,MAAM,2DATbL,GACHM,QAAQC,KAAK,qFAUdlB,MAAMmB,SAAS,0BACd,WACCN,EAAU,WACTO,cAAgB,IAAIrB,KAGtB,SAAyBsB,GACxBD,cAAgB,IAAIrB,GAAW,GAC/BsB,EAAEC,GAAGF,cAAc7B,QAAS,SAC5B6B,cAAc7B,QAAU,KACrBoB,GACFE,EAAU,WACTO,cAAc7B,QAAU,KAG1B6B,cAAcjB,MAAQ,GACnBQ,GACFE,EAAU,WACTO,cAAcjB,MAAQ,UAGrBQ,GACFE,EAAU,WACTO,cAAcjB,MAAQ,QAGrBQ,GACFE,EAAU,WACTO,cAAcjB,MAAQ,MAGxBiB,cAAc5B,KAAO4B,cAClBT,GACFE,EAAU,WACTO,cAAc5B,WAIjB,WACC4B,cAAgB,IAAIrB,GAAW,GAC/Bc,EAAU,WACTO,cAAc3B,IAAI,KAAK,MAExBoB,EAAU,WACTO,cAAc3B,IAAI,GAAG,MAEtBoB,EAAU,WACTO,cAAcxB,aAAa,GAAG,MAE/BiB,EAAU,WACTO,cAAcxB,aAAa,aAAa,QAEzCG,EAAWQ,QAAQd,IAAIgB,QAAQL,KAAO,SACtCgB,cAAc3B,IAAI,GAAG,IACrB2B,cAAcxB,aAAa,aAAa,KAGzC,WACCjB,KAAKQ,QAAQ,kCAAmC,MAC/CC,YAAa,WACZE,KAAKiC,IAAM,OAEZC,SAAU,SAAS9B,EAAGC,GACrB,OAAOD,EAAIC,KAGb,IAAI8B,EAAiBzC,MAAMC,KAAKe,MAAMyB,eACtCA,EAAexB,YACdsB,KAAKnB,KAAK,WAEXqB,EAAelB,SACdiB,UACChB,aACEJ,KAAK,WACLA,KAAK,aAITgB,cAAgB,IAAIK,GAAe,GAChCd,GACFE,EAAU,WACTO,cAAcG,IAAM,KAGtBH,cAAcG,IAAM,MACpBV,EAAU,WACTO,cAAcI,SAAS,KAAK,MAE7BJ,cAAcI,SAAS,GAAG,OAzI7B","file":"../../../lang/tests/typed.js","sourcesContent":["dojo.provide(\"dojox.lang.tests.typed\");\r\ndojo.config.typeCheckAllClasses = true;\r\ndojo.require(\"dojox.lang.typed\");\r\n(function(){\r\n\t\r\n\tdojox.lang.typed(\r\n\t\tdojo.declare(\"dojox.lang.tests.TypedClass\", null, {\r\n\t\t\tconstructor: function(makeDefaults){\r\n\t\t\t\tif(makeDefaults){\r\n\t\t\t\t\tthis.aString = \"start\";\r\n\t\t\t\t\tthis.self = this;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tadd: function(a, b){\r\n\t\t\t\treturn a + b;\r\n\t\t\t},\r\n\t\t\twithCallback: function(callback, param){\r\n\t\t\t\tcallback(param);\r\n\t\t\t}\r\n\t}));\r\n\tvar TypedClass = dojox.lang.tests.TypedClass;\r\n\tTypedClass.properties = {\r\n\t\taString:String,\r\n\t\tself: TypedClass,\r\n\t\tanInt: {type:\"integer\", maximum: 100, optional: true}\r\n\t};\r\n\tTypedClass.methods = {\r\n\t\tadd: {\r\n\t\t\tparameters:[\r\n\t\t\t\t{type:\"number\"},\r\n\t\t\t\t{type:\"number\"}\r\n\t\t\t],\r\n\t\t\treturns: {type:\"string\"}\r\n\t\t},\r\n\t\twithCallback:{\r\n\t\t\tparameters:[\r\n\t\t\t\t{type:\"function\", parameters:[Number]}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\tvar hasGetters = {}.__defineGetter__;\r\n\tif(!hasGetters){\r\n\t\tconsole.warn(\"This platform does not support getters, property type checking will not be tested\");\r\n\t}\r\n\tfunction mustThrow(testFunc){\r\n\t\ttry{\r\n\t\t\ttestFunc();\r\n\t\t}catch(e){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthrow new Error(\"No exception was thrown where an exception was required\");\r\n\t}\r\n\ttests.register(\"dojox.lang.tests.typed\", [\r\n\t\tfunction typedConstructor(){\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance = new TypedClass();\r\n\t\t\t});\r\n\t\t},\r\n\t\tfunction typedProperties(t){\r\n\t\t\ttypedInstance = new TypedClass(true);\r\n\t\t\tt.is(typedInstance.aString, \"start\");\r\n\t\t\ttypedInstance.aString = \"hi\";\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.aString = 44;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\ttypedInstance.anInt = 22;\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.anInt = \"hello\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.anInt = 44.33;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.anInt = 144;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\ttypedInstance.self = typedInstance;\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.self = {};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction typedMethods(){\r\n\t\t\ttypedInstance = new TypedClass(true);\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance.add(\"hi\",33);\r\n\t\t\t});\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance.add(22,33);\r\n\t\t\t});\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance.withCallback(22,33);\r\n\t\t\t});\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance.withCallback(function(){},\"hi\");\r\n\t\t\t});\r\n\t\t\tTypedClass.methods.add.returns.type = \"number\";\r\n\t\t\ttypedInstance.add(22,33);\r\n\t\t\ttypedInstance.withCallback(function(){},44);\r\n\t\t\t\r\n\t\t},\r\n\t\tfunction typedDeclares(){\r\n\t\t\tdojo.declare(\"dojox.lang.tests.AutoTypedClass\", null, {\r\n\t\t\t\tconstructor: function(){\r\n\t\t\t\t\tthis.foo = \"bar\";\r\n\t\t\t\t},\r\n\t\t\t\tsubtract: function(a, b){\r\n\t\t\t\t\treturn a - b;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar AutoTypedClass = dojox.lang.tests.AutoTypedClass;\r\n\t\t\tAutoTypedClass.properties = {\r\n\t\t\t\tfoo:{type:\"string\"}\r\n\t\t\t};\r\n\t\t\tAutoTypedClass.methods = {\r\n\t\t\t\tsubtract: {\r\n\t\t\t\t\tparameters:[\r\n\t\t\t\t\t\t{type:\"number\"},\r\n\t\t\t\t\t\t{type:\"number\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttypedInstance = new AutoTypedClass(true);\r\n\t\t\tif(hasGetters){\r\n\t\t\t\tmustThrow(function(){\r\n\t\t\t\t\ttypedInstance.foo = 33;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\ttypedInstance.foo = \"baz\";\r\n\t\t\tmustThrow(function(){\r\n\t\t\t\ttypedInstance.subtract(\"hi\",33);\r\n\t\t\t});\r\n\t\t\ttypedInstance.subtract(22,33);\r\n\t\t}\r\n\t]);\r\n})();\r\n"]}