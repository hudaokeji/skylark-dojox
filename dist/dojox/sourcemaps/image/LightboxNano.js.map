{"version":3,"sources":["image/LightboxNano.js"],"names":["define","lang","declare","array","baseFx","dom","domConstruct","domGeometry","domStyle","domClass","on","query","fx","vis","getViewport","scrollRoot","document","compatMode","body","documentElement","scroll","docScroll","w","clientWidth","h","clientHeight","l","x","t","y","href","duration","preloadDelay","constructor","p","n","a","_this","this","mixin","_node","byId","test","tagName","create","class","className","appendChild","set","style","position","display","setSelectable","_onClickEvt","hitch","setTimeout","Image","src","_hideLoading","destroy","_connects","push","forEach","signal","remove","_load","e","preventDefault","_loading","_reset","i","_img","ln","_loadingNode","c","getContentBox","b","getBorderExtents","getMarginBox","left","parseInt","top","_start","_show","vp","width","height","vpw","vph","bg","_bg","opacity","concat","window","_end","_sizeBg","combine","_anim","_coords","play","dd","scrollWidth","scrollHeight","_key","_hide","s","start","end","focus","node","args","onEnd","animateProperty","properties","show","origin","hieght"],"mappings":"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","file":"../../image/LightboxNano.js","sourcesContent":["define([\"dojo/_base/lang\",\r\n\t\t\"dojo/_base/declare\",\r\n\t\t\"dojo/_base/array\",\r\n\t\t\"dojo/_base/fx\",\r\n\t\t\"dojo/dom\",\r\n\t\t\"dojo/dom-construct\",\r\n\t\t\"dojo/dom-geometry\",\r\n\t\t\"dojo/dom-style\",\r\n\t\t\"dojo/dom-class\",\r\n\t\t\"dojo/on\",\r\n\t\t\"dojo/query\",\r\n\t\t\"dojo/fx\"],\r\n\tfunction(lang, declare, array, baseFx, dom, domConstruct, domGeometry, domStyle, domClass, on, query, fx) {\r\n\r\n\tvar abs = \"absolute\",\r\n\t\tvis = \"visibility\";\r\n\t\tgetViewport = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns the dimensions and scroll position of the viewable area of a browser window\r\n\t\t\tvar scrollRoot = (document.compatMode == \"BackCompat\") ? document.body : document.documentElement,\r\n\t\t\t\tscroll = domGeometry.docScroll();\r\n\t\t\t\treturn { w: scrollRoot.clientWidth, h: scrollRoot.clientHeight, l: scroll.x, t: scroll.y };\r\n\t\t\t};\r\n\r\n\treturn declare(\"dojox.image.LightboxNano\", null, {\r\n\t\t// summary:\r\n\t\t//\t\tA simple \"nano\" version of the lightbox.\r\n\t\t// description:\r\n\t\t//\t\tVery lightweight lightbox which only displays a larger image. There is\r\n\t\t//\t\tno support for a caption or description. The lightbox can be closed by\r\n\t\t//\t\tclicking any where or pressing any key. This widget is intended to be\r\n\t\t//\t\tused on `<a>` and `<img>` tags.  Upon creation, if the domNode is `<img>` tag,\r\n\t\t//\t\tthen it is wrapped in an `<a>` tag, then a `<div class=\"enlarge\">` is placed\r\n\t\t//\t\tinside the `<a>` and can be styled to display an icon that the original\r\n\t\t//\t\tcan be enlarged.\r\n\t\t// example:\r\n\t\t//\t|\t<a dojoType=\"dojox.image.LightboxNano\" href=\"/path/to/largeimage.jpg\"><img src=\"/path/to/thumbnail.jpg\"></a>\r\n\t\t// example:\r\n\t\t//\t|\t<img dojoType=\"dojox.image.LightboxNano\" src=\"/path/to/thumbnail.jpg\" href=\"/path/to/largeimage.jpg\">\r\n\r\n\t\t// href: string\r\n\t\t//\t\tURL to the large image to show in the lightbox.\r\n\t\thref: \"\",\r\n\r\n\t\t// duration: int\r\n\t\t//\t\tThe delay in milliseconds of the LightboxNano open and close animation.\r\n\t\tduration: 500,\r\n\r\n\t\t// preloadDelay: int\r\n\t\t//\t\tThe delay in milliseconds after the LightboxNano is created before preloading the larger image.\r\n\t\tpreloadDelay: 5000,\r\n\r\n\t\tconstructor: function(/*Object?*/p, /*DomNode?*/n){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInitializes the DOM node and connect onload event\r\n\t\t\tvar _this = this, a;\r\n\r\n\t\t\tlang.mixin(_this, p);\r\n\t\t\tn = _this._node = dom.byId(n);\r\n\r\n\t\t\t// if we have a origin node, then prepare it to show the LightboxNano\r\n\t\t\tif(n){\r\n\t\t\t\tif(!/a/i.test(n.tagName)){\r\n\t\t\t\t\ta = domConstruct.create(\"a\", {\r\n\t\t\t\t\t\thref: _this.href,\r\n\t\t\t\t\t\t\"class\": n.className\r\n\t\t\t\t\t}, n, \"after\");\r\n\t\t\t\t\tn.className = \"\";\r\n\t\t\t\t\ta.appendChild(n);\r\n\t\t\t\t\tn = a;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdomStyle.set(n, \"position\", \"relative\");\r\n\t\t\t\tdomConstruct.create(\"div\", {\r\n\t\t\t\t\t\"class\": \"nano-enlarge\",\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\tdisplay: \"none\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, n);\r\n\t\t\t\tdom.setSelectable(n, false);\r\n\t\t\t\t\r\n\t\t\t\t_this._onClickEvt = on(n, \"click\", lang.hitch(_this, \"_load\"));\r\n\t\t\t}\r\n\r\n\t\t\tif(_this.href){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t(new Image()).src = _this.href;\r\n\t\t\t\t\t_this._hideLoading();\r\n\t\t\t\t}, _this.preloadDelay);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDestroys the LightboxNano and it's DOM node\r\n\t\t\tvar a = this._connects || [];\r\n\t\t\ta.push(this._onClickEvt);\r\n\t\t\tarray.forEach(a, function(signal) { signal.remove(); });\r\n\t\t\tdomConstruct.destroy(this._node);\r\n\t\t},\r\n\r\n\t\t_load: function(/*Event?*/e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreates the large image and begins to show it\r\n\t\t\tvar _this = this;\r\n\r\n\t\t\te && e.preventDefault();\r\n\r\n\t\t\tif(!_this._loading){\r\n\t\t\t\t_this._loading = true;\r\n\t\t\t\t_this._reset();\r\n\r\n\t\t\t\tvar i = _this._img = domConstruct.create(\"img\", { \"class\": \"nano-image nano-image-hidden\" }, document.body),\r\n\t\t\t\t\tl, ln = _this._loadingNode,\r\n\t\t\t\t\tn = query(\"img\", _this._node)[0] || _this._node,\r\n\t\t\t\t\ta = domGeometry.position(n, true),\r\n\t\t\t\t\tc = domGeometry.getContentBox(n),\r\n\t\t\t\t\tb = domGeometry.getBorderExtents(n);\r\n\r\n\t\t\t\tif(ln == null){\r\n\t\t\t\t\t_this._loadingNode = ln = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\t\"class\": \"nano-loading\",\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\tdisplay: \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, _this._node, \"after\");\r\n\t\t\t\t\tl = domGeometry.getMarginBox(ln);\r\n\t\t\t\t\tdomStyle.set(ln, {\r\n\t\t\t\t\t\tleft: parseInt((c.w - l.w) / 2) + \"px\",\r\n\t\t\t\t\t\ttop: parseInt((c.h - l.h) / 2) + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tc.x = a.x - 10 + b.l;\r\n\t\t\t\tc.y = a.y - 10 + b.t;\r\n\t\t\t\t_this._start = c;\r\n\r\n\t\t\t\t_this._connects = [on(i, \"load\", lang.hitch(_this, \"_show\"))];\r\n\r\n\t\t\t\ti.src = _this.href;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_hideLoading: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHides the animated loading indicator\r\n\t\t\tif(this._loadingNode){\r\n\t\t\t\tdomStyle.set(this._loadingNode, \"display\", \"none\");\r\n\t\t\t}\r\n\t\t\tthis._loadingNode = false;\r\n\t\t},\r\n\r\n\t\t_show: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tThe image is now loaded, calculate size and display according to viewport size.\r\n\t\t\tvar _this = this,\r\n\t\t\t\tvp = getViewport(),\r\n\t\t\t\tw = _this._img.width,\r\n\t\t\t\th = _this._img.height,\r\n\t\t\t\tvpw = parseInt((vp.w - 20) * 0.9),\r\n\t\t\t\tvph = parseInt((vp.h - 20) * 0.9),\r\n\t\t\t\tbg = _this._bg = domConstruct.create(\"div\", {\r\n\t\t\t\t\t\"class\": \"nano-background\",\r\n\t\t\t\t\tstyle: { opacity: 0}\r\n\t\t\t\t}, document.body);\r\n\r\n\t\t\tif(_this._loadingNode){\r\n\t\t\t\t_this._hideLoading();\r\n\t\t\t}\r\n\t\t\tdomClass.remove(_this._img, \"nano-image-hidden\");\r\n\t\t\tdomStyle.set(_this._node, vis, \"hidden\");\r\n\r\n\t\t\t_this._loading = false;\r\n\r\n\t\t\t_this._connects = _this._connects.concat([\r\n\t\t\t\ton(document, \"mousedown\", lang.hitch(_this, \"_hide\")),\r\n\t\t\t\ton(document, \"keypress\", lang.hitch(_this, \"_key\")),\r\n\t\t\t\ton(window, \"resize\", lang.hitch(_this, \"_sizeBg\"))\r\n\t\t\t]);\r\n\r\n\t\t\tif(w > vpw){\r\n\t\t\t\th = h * vpw / w;\r\n\t\t\t\tw = vpw;\r\n\t\t\t}\r\n\t\t\tif(h > vph){\r\n\t\t\t\tw = w * vph / h;\r\n\t\t\t\th = vph;\r\n\t\t\t}\r\n\r\n\t\t\t_this._end = {\r\n\t\t\t\tx: (vp.w - 20 - w) / 2 + vp.l,\r\n\t\t\t\ty: (vp.h - 20 - h) / 2 + vp.t,\r\n\t\t\t\tw: w,\r\n\t\t\t\th: h\r\n\t\t\t};\r\n\r\n\t\t\t_this._sizeBg();\r\n\r\n\t\t\tfx.combine([\r\n\t\t\t\t_this._anim(_this._img, _this._coords(_this._start, _this._end)),\r\n\t\t\t\t_this._anim(bg, { opacity: 0.5 })\r\n\t\t\t]).play();\r\n\t\t},\r\n\r\n\t\t_sizeBg: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResize the background to fill the page\r\n\t\t\tvar dd = document.documentElement;\r\n\t\t\tdomStyle.set(this._bg, {\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\twidth: dd.scrollWidth + \"px\",\r\n\t\t\t\theight: dd.scrollHeight + \"px\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_key: function(/*Event*/e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA key was pressed, so hide the lightbox\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._hide();\r\n\t\t},\r\n\r\n\t\t_coords: function(/*Object*/s, /*Object*/e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns animation parameters with the start and end coords\r\n\t\t\treturn { // Object\r\n\t\t\t\tleft:\t{ start: s.x, end: e.x },\r\n\t\t\t\ttop:\t{ start: s.y, end: e.y },\r\n\t\t\t\twidth:\t{ start: s.w, end: e.w },\r\n\t\t\t\theight:\t{ start: s.h, end: e.h }\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t_hide: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCloses the lightbox\r\n\t\t\tvar _this = this;\r\n\t\t\tarray.forEach(_this._connects, function(signal) { signal.remove(); });\r\n\t\t\t_this._connects = [];\r\n\t\t\tfx.combine([\r\n\t\t\t\t_this._anim(_this._img, _this._coords(_this._end, _this._start), \"_reset\"),\r\n\t\t\t\t_this._anim(_this._bg, {opacity:0})\r\n\t\t\t]).play();\r\n\t\t},\r\n\r\n\t\t_reset: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDestroys the lightbox\r\n\t\t\tdomStyle.set(this._node, vis, \"visible\");\r\n\t\t\tdomConstruct.destroy(this._img);\r\n\t\t\tdomConstruct.destroy(this._bg);\r\n\t\t\tthis._img = this._bg = null;\r\n\t\t\tthis._node.focus();\r\n\t\t},\r\n\r\n\t\t_anim: function(/*DomNode*/node, /*Object*/args, /*Function*/onEnd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreates the lightbox open/close and background fadein/out animations\r\n\t\t\treturn baseFx.animateProperty({ // dojo.Animation\r\n\t\t\t\tnode: node,\r\n\t\t\t\tduration: this.duration,\r\n\t\t\t\tproperties: args,\r\n\t\t\t\tonEnd: onEnd ? lang.hitch(this, onEnd) : null\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tshow: function(/*Object?*/args){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tShows this LightboxNano programatically. Allows passing a new href and\r\n\t\t\t//\t\ta programmatic origin.\r\n\t\t\t// args: Object?\r\n\t\t\t//\t\tAn object with optional members of `href` and `origin`.\r\n\t\t\t//\t\t`origin` can be be a String|Id of a DomNode to use when\r\n\t\t\t//\t\tanimating the opening of the image (the 'box' effect starts\r\n\t\t\t//\t\tfrom this origin point. eg: { origin: e.target })\r\n\t\t\t//\t\tIf there's no origin, it will use the center of the viewport.\r\n\t\t\t//\t\tThe `href` member is a string URL for the image to be\r\n\t\t\t//\t\tdisplayed. Omitting either of these members will revert to\r\n\t\t\t//\t\tthe default href (which could be absent in some cases) and\r\n\t\t\t//\t\tthe original srcNodeRef for the widget.\r\n\t\t\targs = args || {};\r\n\t\t\tthis.href = args.href || this.href;\r\n\r\n\t\t\tvar n = dom.byId(args.origin),\r\n\t\t\t\tvp = getViewport();\r\n\r\n\t\t\t// if we don't have a valid origin node, then create one as a reference\r\n\t\t\t// that is centered in the viewport\r\n\t\t\tthis._node = n || domConstruct.create(\"div\", {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tposition: abs,\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\thieght: 0,\r\n\t\t\t\t\t\tleft: (vp.l + (vp.w / 2)) + \"px\",\r\n\t\t\t\t\t\ttop: (vp.t + (vp.h / 2)) + \"px\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, document.body)\r\n\t\t\t;\r\n\r\n\t\t\tthis._load();\r\n\r\n\t\t\t// if we don't have a valid origin node, then destroy the centered reference\r\n\t\t\t// node since load() has already been called and it's not needed anymore.\r\n\t\t\tif(!n){\r\n\t\t\t\tdomConstruct.destroy(this._node);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}