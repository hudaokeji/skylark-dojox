{"version":3,"sources":["dgauges/CircularValueIndicator.js"],"names":["define","declare","gfx","ScaleIndicatorBase","eventUtil","indicatorShapeFunc","group","indicator","createLine","x1","y1","x2","y2","setStroke","color","width","refreshRendering","this","inherited","arguments","v","isNaN","_transitionValue","value","angle","scale","positionForValue","_gfxGroup","setTransform","dx","originX","dy","originY","matrix","rotateg","_onMouseDown","event","origin","_gauge","_gaugeToPage","Math","atan2","pageY","y","pageX","x","set","valueForPosition","stop","_onMouseMove"],"mappings":";;;;;;;AAAAA,QAAQ,qBAAsB,YAAa,uBAAwB,oBAAqB,SAASC,EAASC,EAAKC,EAAoBC,GAClI,OAAOH,EAAQ,uCAAwCE,GAItDE,mBAAoB,SAASC,EAAOC,GASnC,OAAOD,EAAME,YACZC,GAAI,EACJC,GAAI,EACJC,GAAI,GACJC,GAAI,IACFC,WACFC,MAAO,QACPC,MAAO,KAITC,iBAAkB,WACjBC,KAAKC,UAAUC,WACf,IAAIC,EAAIC,MAAMJ,KAAKK,kBAAoBL,KAAKM,MAAQN,KAAKK,iBACrDE,EAAQP,KAAKQ,MAAMC,iBAAiBN,GAExCH,KAAKU,UAAUC,eACdC,GAAIZ,KAAKQ,MAAMK,QACfC,GAAId,KAAKQ,MAAMO,SACb9B,EAAI+B,OAAOC,QAAQV,MAGvBW,aAAc,SAASC,GAKtBnB,KAAKC,UAAUC,WACf,IAAIkB,EAASpB,KAAKQ,MAAMa,OAAOC,aAAatB,KAAKQ,MAAMK,QAASb,KAAKQ,MAAMO,SACvER,EAAwE,IAA9DgB,KAAKC,MAAML,EAAMM,MAAQL,EAAOM,EAAGP,EAAMQ,MAAQP,EAAOQ,GAAcL,KAAO,GAC3FvB,KAAK6B,IAAI,QAAS7B,KAAKQ,MAAMsB,iBAAiBvB,IAG9CpB,EAAU4C,KAAKZ,IAGhBa,aAAc,SAASb,GAKtBnB,KAAKC,UAAUC,WACf,IAAIkB,EAASpB,KAAKQ,MAAMa,OAAOC,aAAatB,KAAKQ,MAAMK,QAASb,KAAKQ,MAAMO,SACvER,EAAwE,IAA9DgB,KAAKC,MAAML,EAAMM,MAAQL,EAAOM,EAAGP,EAAMQ,MAAQP,EAAOQ,GAAcL,KAAO,GAC3FvB,KAAK6B,IAAI,QAAS7B,KAAKQ,MAAMsB,iBAAiBvB","file":"../../dgauges/CircularValueIndicator.js","sourcesContent":["define([\"dojo/_base/declare\", \"dojox/gfx\", \"./ScaleIndicatorBase\", \"dojo/_base/event\"], function(declare, gfx, ScaleIndicatorBase, eventUtil){\r\n\treturn declare(\"dojox.dgauges.CircularValueIndicator\", ScaleIndicatorBase, {\r\n\t\t// summary:\r\n\t\t//\t\tThe circular value indicator, typically used for creating needles.\r\n\r\n\t\tindicatorShapeFunc: function(group, indicator){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDraws the indicator. The rotation center is at (0, 0).\r\n\t\t\t// group: dojox/gfx/Group\r\n\t\t\t//\t\tA GFX group for drawing. \r\n\t\t\t// indicator: dojox/dgauges/IndicatorBase\r\n\t\t\t//\t\tA reference to this indicator.\r\n\t\t\t// returns: dojox/gfx/shape.Shape\r\n\t\t\t//\t\tA GFX shape retrievable using the getIndicatorRenderer method of the associated scale. \r\n\t\t\treturn group.createLine({\r\n\t\t\t\tx1: 0,\r\n\t\t\t\ty1: 0,\r\n\t\t\t\tx2: 40,\r\n\t\t\t\ty2: 0\r\n\t\t\t}).setStroke({\r\n\t\t\t\tcolor: \"black\",\r\n\t\t\t\twidth: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\trefreshRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tvar v = isNaN(this._transitionValue) ? this.value : this._transitionValue;\r\n\t\t\tvar angle = this.scale.positionForValue(v);\r\n\t\t\t\r\n\t\t\tthis._gfxGroup.setTransform([{\r\n\t\t\t\tdx: this.scale.originX,\r\n\t\t\t\tdy: this.scale.originY\r\n\t\t\t}, gfx.matrix.rotateg(angle)]);\r\n\t\t},\r\n\t\t\r\n\t\t_onMouseDown: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal method.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tvar origin = this.scale._gauge._gaugeToPage(this.scale.originX, this.scale.originY);\r\n\t\t\tvar angle = ((Math.atan2(event.pageY - origin.y, event.pageX - origin.x)) * 180) / (Math.PI);\r\n\t\t\tthis.set(\"value\", this.scale.valueForPosition(angle));\r\n\r\n\t\t\t// prevent the browser from selecting text\r\n\t\t\teventUtil.stop(event);\r\n\t\t},\r\n\t\t\r\n\t\t_onMouseMove: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal method.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tvar origin = this.scale._gauge._gaugeToPage(this.scale.originX, this.scale.originY);\r\n\t\t\tvar angle = ((Math.atan2(event.pageY - origin.y, event.pageX - origin.x)) * 180) / (Math.PI);\r\n\t\t\tthis.set(\"value\", this.scale.valueForPosition(angle));\r\n\t\t}\r\n\t});\r\n});\r\n"]}