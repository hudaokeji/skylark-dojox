{"version":3,"sources":["dgauges/RectangularValueIndicator.js"],"names":["define","declare","ScaleIndicatorBase","gfx","eventUtil","domGeom","paddingLeft","paddingTop","paddingRight","paddingBottom","constructor","this","addInvalidatingProperties","indicatorShapeFunc","group","indicator","createPolyline","setStroke","color","width","refreshRendering","inherited","arguments","v","isNaN","_transitionValue","value","pos","scale","positionForValue","dx","dy","angle","_gauge","orientation","_gfxGroup","setTransform","matrix","rotateg","_onMouseDown","event","np","position","domNode","set","valueForPosition","x","pageX","y","pageY","stop","_onMouseMove"],"mappings":";;;;;;;AAAAA,QAAQ,qBAAsB,uBAAwB,YAAa,mBAAoB,qBACtF,SAASC,EAASC,EAAoBC,EAAKC,EAAWC,GACtD,OAAOJ,EAAQ,0CAA2CC,GAMzDI,YAAa,EAGbC,WAAY,EAGZC,aAAc,EAGdC,cAAe,EAGfC,YAAa,WACZC,KAAKC,2BAA2B,aAAc,cAAe,eAAgB,mBAG9EC,mBAAoB,SAASC,EAAOC,GAUnC,OAAOD,EAAME,gBAAgB,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,IAAIC,WAC9DC,MAAO,QACPC,MAAO,KAIVC,iBAAkB,WACjBT,KAAKU,UAAUC,WAGf,IAAIC,EAAIC,MAAMb,KAAKc,kBAAoBd,KAAKe,MAAQf,KAAKc,iBACrDE,EAAMhB,KAAKiB,MAAMC,iBAAiBN,GAGlCO,EAAK,EAAGC,EAAK,EACbC,EAAQ,EACwB,cAAjCrB,KAAKiB,MAAMK,OAAOC,aACpBJ,EAAKH,EACLI,EAAKpB,KAAKJ,aAEVuB,EAAKnB,KAAKL,YACVyB,EAAKJ,EACLK,EAAQ,IAKTrB,KAAKwB,UAAUC,eACdN,GAAIA,EACJC,GAAIA,GACF5B,EAAIkC,OAAOC,QAAQN,MAGvBO,aAAc,SAASC,GAKtB7B,KAAKU,UAAUC,WACf,IAAImB,EAAKpC,EAAQqC,SAAS/B,KAAKiB,MAAMK,OAAOU,SAAS,GACrDhC,KAAKiC,IAAI,QAASjC,KAAKiB,MAAMiB,kBAAkBC,EAAGN,EAAMO,MAAQN,EAAGK,EAAGE,EAAGR,EAAMS,MAAQR,EAAGO,KAG1F5C,EAAU8C,KAAKV,IAGhBW,aAAc,SAASX,GAKtB7B,KAAKU,UAAUC,WAEf,IAAImB,EAAKpC,EAAQqC,SAAS/B,KAAKiB,MAAMK,OAAOU,SAAS,GACrDhC,KAAKiC,IAAI,QAASjC,KAAKiB,MAAMiB,kBAAkBC,EAAGN,EAAMO,MAAQN,EAAGK,EAAGE,EAAGR,EAAMS,MAAQR,EAAGO","file":"../../dgauges/RectangularValueIndicator.js","sourcesContent":["define([\"dojo/_base/declare\", \"./ScaleIndicatorBase\", \"dojox/gfx\", \"dojo/_base/event\", \"dojo/dom-geometry\"],\r\n\tfunction(declare, ScaleIndicatorBase, gfx, eventUtil, domGeom){\r\n\treturn declare(\"dojox.dgauges.RectangularValueIndicator\", ScaleIndicatorBase, {\r\n\t\t// summary:\r\n\t\t//\t\tThe rectangular value indicator, typically used for creating markers or thumbs.\r\n\r\n\t\t// paddingLeft: Number\r\n\t\t//\t\tThe left padding.\r\n\t\tpaddingLeft: 0,\r\n\t\t// paddingTop: Number\r\n\t\t//\t\tThe top padding.\r\n\t\tpaddingTop: 0,\r\n\t\t// paddingRight: Number\r\n\t\t//\t\tThe right padding.\r\n\t\tpaddingRight: 0,\r\n\t\t// paddingBottom: Number\r\n\t\t//\t\tThe bottom padding.\r\n\t\tpaddingBottom: 0,\r\n\r\n\t\t\r\n\t\tconstructor: function(){\r\n\t\t\tthis.addInvalidatingProperties([\"paddingTop\", \"paddingLeft\", \"paddingRight\", \"paddingBottom\"]);\r\n\t\t},\r\n\t\t\r\n\t\tindicatorShapeFunc: function(group, indicator){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDraws the indicator.\r\n\t\t\t// group: dojox/gfx/Group\r\n\t\t\t//\t\tA GFX group for drawing. The indicator is always centered horizontally and is\r\n\t\t\t//\t\tautomatically rotated if the scale is vertical.\r\n\t\t\t// indicator: dojox/dgauges/IndicatorBase\r\n\t\t\t//\t\tA reference to this indicator.\r\n\t\t\t// returns: dojox/gfx/shape.Shape\r\n\t\t\t//\t\tA GFX shape retrievable using the getIndicatorRenderer method of the associated scale. \r\n\t\t\treturn group.createPolyline([0, 0, 10, 0, 0, 10, -10, 0, 0, 0]).setStroke({\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\twidth: 1\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t\t\t\r\n\t\trefreshRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t// get position corresponding to the value\r\n\t\t\tvar v = isNaN(this._transitionValue) ? this.value : this._transitionValue;\r\n\t\t\tvar pos = this.scale.positionForValue(v);\r\n\t\t\t\r\n\t\t\t// computes offsets to move the indicator\r\n\t\t\tvar dx = 0, dy = 0;\r\n\t\t\tvar angle = 0;\r\n\t\t\tif(this.scale._gauge.orientation == \"horizontal\"){\r\n\t\t\t\tdx = pos;\r\n\t\t\t\tdy = this.paddingTop;\r\n\t\t\t}else{\r\n\t\t\t\tdx = this.paddingLeft;\r\n\t\t\t\tdy = pos;\r\n\t\t\t\tangle = 90;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// translate the indicator\r\n\t\t\t\r\n\t\t\tthis._gfxGroup.setTransform([{\r\n\t\t\t\tdx: dx,\r\n\t\t\t\tdy: dy\r\n\t\t\t}, gfx.matrix.rotateg(angle)]);\r\n\t\t},\r\n\t\t\r\n\t\t_onMouseDown: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal method.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tvar np = domGeom.position(this.scale._gauge.domNode, true);\r\n\t\t\tthis.set(\"value\", this.scale.valueForPosition({x: event.pageX - np.x, y: event.pageY - np.y}));\r\n\r\n\t\t\t// prevent the browser from selecting text\r\n\t\t\teventUtil.stop(event);\r\n\t\t},\r\n\t\t\r\n\t\t_onMouseMove: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal method.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\t\r\n\t\t\tvar np = domGeom.position(this.scale._gauge.domNode, true);\r\n\t\t\tthis.set(\"value\", this.scale.valueForPosition({x: event.pageX - np.x, y: event.pageY - np.y}));\r\n\t\t}\r\n\t})\r\n});\r\n"]}