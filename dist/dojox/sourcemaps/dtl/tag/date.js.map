{"version":3,"sources":["dtl/tag/date.js"],"names":["define","lang","dd","ddud","date","getObject","NowNode","format","node","this","_format","DateFormat","contents","extend","render","context","buffer","set","Date","unrender","clone","constructor","now","parser","token","parts","split_contents","length","Error","slice","create_text_node"],"mappings":";;;;;;;AAAAA,QACC,kBACA,WACA,iBACE,SAASC,EAAKC,EAAGC,GAEnB,IAAIC,EAAOH,EAAKI,UAAU,YAAY,EAAMH,GAkC5C,OA3BAE,EAAKE,QAAU,SAASC,EAAQC,GAC/BC,KAAKC,QAAUH,EACfE,KAAKF,OAAS,IAAIJ,EAAKQ,WAAWJ,GAClCE,KAAKG,SAAWJ,GAEjBP,EAAKY,OAAOT,EAAKE,SAChBQ,OAAQ,SAASC,EAASC,GAEzB,OADAP,KAAKG,SAASK,IAAIR,KAAKF,OAAOA,OAAO,IAAIW,OAClCT,KAAKG,SAASE,OAAOC,EAASC,IAEtCG,SAAU,SAASJ,EAASC,GAC3B,OAAOP,KAAKG,SAASO,SAASJ,EAASC,IAExCI,MAAO,SAASJ,GACf,OAAO,IAAIP,KAAKY,YAAYZ,KAAKC,QAASD,KAAKG,SAASQ,MAAMJ,OAIhEZ,EAAKkB,IAAM,SAASC,EAAQC,GAE3B,IAAIC,EAAQD,EAAME,iBAClB,GAAmB,GAAhBD,EAAME,OACR,MAAM,IAAIC,MAAM,sCAEjB,OAAO,IAAIxB,EAAKE,QAAQmB,EAAM,GAAGI,MAAM,GAAI,GAAIN,EAAOO,qBAGhD1B","file":"../../../dtl/tag/date.js","sourcesContent":["define([\r\n\t\"dojo/_base/lang\",\r\n\t\"../_base\",\r\n\t\"../utils/date\"\r\n], function(lang,dd,ddud){\r\n\r\n\tvar date = lang.getObject(\"tag.date\", true, dd);\r\n\t/*=====\r\n\t date = {\r\n\t \t// TODO: summary\r\n\t };\r\n\t =====*/\r\n\r\n\tdate.NowNode = function(format, node){\r\n\t\tthis._format = format;\r\n\t\tthis.format = new ddud.DateFormat(format);\r\n\t\tthis.contents = node;\r\n\t};\r\n\tlang.extend(date.NowNode, {\r\n\t\trender: function(context, buffer){\r\n\t\t\tthis.contents.set(this.format.format(new Date()));\r\n\t\t\treturn this.contents.render(context, buffer);\r\n\t\t},\r\n\t\tunrender: function(context, buffer){\r\n\t\t\treturn this.contents.unrender(context, buffer);\r\n\t\t},\r\n\t\tclone: function(buffer){\r\n\t\t\treturn new this.constructor(this._format, this.contents.clone(buffer));\r\n\t\t}\r\n\t});\r\n\r\n\tdate.now = function(parser, token){\r\n\t\t// Split by either :\" or :'\r\n\t\tvar parts = token.split_contents();\r\n\t\tif(parts.length != 2){\r\n\t\t\tthrow new Error(\"'now' statement takes one argument\");\r\n\t\t}\r\n\t\treturn new date.NowNode(parts[1].slice(1, -1), parser.create_text_node());\r\n\t};\r\n\r\n\treturn date;\r\n});\r\n"]}