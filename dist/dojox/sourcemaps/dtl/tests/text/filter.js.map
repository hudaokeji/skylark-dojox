{"version":3,"sources":["dtl/tests/text/filter.js"],"names":["dojo","provide","require","doh","register","t","dd","dojox","dtl","context","Context","four","tpl","Template","is","render","unslashed","uncapped","narrow","uncut","now","Date","then","utils","date","format","setDate","empty","fruit","name","toString","this","number","unescaped","num1","num2","pi","items","unbroken","lines","mixed","word","arr","obj","first","second","animals","fairies","pop","result","different","i","tagged","unslugged","body","size","states","decodeURIComponent","food","width","test","headers","action","type"],"mappings":"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","file":"../../../../dtl/tests/text/filter.js","sourcesContent":["dojo.provide(\"dojox.dtl.tests.text.filter\");\r\n\r\ndojo.require(\"dojox.dtl\");\r\ndojo.require(\"dojox.dtl.Context\");\r\ndojo.require(\"dojox.dtl.utils.date\");\r\ndojo.require(\"dojox.date.php\");\r\ndojo.require(\"dojox.string.sprintf\");\r\n\r\n// If you update something here, update it in the HTML tests\r\ndoh.register(\"dojox.dtl.text.filter\",\r\n\t[\r\n\t\tfunction test_filter_add(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ four: 4 });\r\n\t\t\ttpl = new dd.Template('{{ four|add:\"6\" }}');\r\n\t\t\tt.is(\"10\", tpl.render(context));\r\n\t\t\tcontext.four = \"4\";\r\n\t\t\tt.is(\"10\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ four|add:\"six\" }}');\r\n\t\t\tt.is(\"4\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ four|add:\"6.6\" }}');\r\n\t\t\tt.is(\"10\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_addslashes(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ unslashed: \"Test back slashes \\\\, double quotes \\\" and single quotes '\" })\r\n\t\t\tvar tpl = new dd.Template('{{ unslashed|addslashes|safe }}');\r\n\t\t\tt.is(\"Test back slashes \\\\\\\\, double quotes \\\\\\\" and single quotes \\\\'\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_capfirst(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ uncapped|capfirst }}');\r\n\t\t\tt.is(\"Cap\", tpl.render(new dd.Context({ uncapped: \"cap\" })));\r\n\t\t},\r\n\t\tfunction test_filter_center(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar tpl = new dd.Template('{{ narrow|center }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|center:\"5\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\" odd \", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|center:\"6\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\" even \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\" odd  \", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|center:\"12\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"    even    \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"    odd     \", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_cut(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ uncut: \"Apples and oranges\" });\r\n\t\t\tvar tpl = new dd.Template('{{ uncut|cut }}');\r\n\t\t\tt.is(\"Apples and oranges\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ uncut|cut:\"A\" }}');\r\n\t\t\tt.is(\"pples and oranges\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ uncut|cut:\" \" }}');\r\n\t\t\tt.is(\"Applesandoranges\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ uncut|cut:\"e\" }}');\r\n\t\t\tt.is(\"Appls and orangs\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_date(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\t\t\tvar context = new dd.Context({ now: new Date(2007, 0, 1), then: new Date(2007, 1, 1) });\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ now|date }}');\r\n\t\t\tt.is(dojox.dtl.utils.date.format(context.now, \"N j, Y\"), tpl.render(context));\r\n\r\n\t\t\tcontext.then = new Date(2007, 0, 1);\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"d\" }}');\r\n\t\t\tt.is(\"01\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"D\" }}');\r\n\t\t\tt.is(\"Mon\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"j\" }}');\r\n\t\t\tt.is(\"1\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"l\" }}');\r\n\t\t\tt.is(\"Monday\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"N\" }}');\r\n\t\t\tt.is(\"Jan.\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"S\" }}');\r\n\t\t\tt.is(\"st\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(2);\r\n\t\t\tt.is(\"nd\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(3);\r\n\t\t\tt.is(\"rd\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(4);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(5);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(6);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(7);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(8);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(9);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(10);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(11);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(12);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(13);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(14);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(15);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(16);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(17);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(18);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(19);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(20);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(21);\r\n\t\t\tt.is(\"st\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(22);\r\n\t\t\tt.is(\"nd\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(23);\r\n\t\t\tt.is(\"rd\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(24);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(25);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(26);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(27);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(28);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(29);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(30);\r\n\t\t\tt.is(\"th\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(31);\r\n\t\t\tt.is(\"st\", tpl.render(context));\r\n\t\t\tcontext.now.setDate(1);\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"w\" }}');\r\n\t\t\tt.is(\"1\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"z\" }}');\r\n\t\t\tt.is(\"0\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|date:\"W\" }}');\r\n\t\t\tt.is(\"1\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_default(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\ttpl = new dd.Template('{{ empty|default }}');\r\n\t\t\tt.is(\"\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ empty|default:\"full\" }}');\r\n\t\t\tt.is(\"full\", tpl.render(context));\r\n\t\t\tcontext.empty = \"not empty\";\r\n\t\t\tt.is(\"not empty\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_default_if_none(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\ttpl = new dd.Template('{{ empty|default_if_none }}');\r\n\t\t\tt.is(\"\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ empty|default_if_none:\"full\" }}');\r\n\t\t\tt.is(\"\", tpl.render(context));\r\n\t\t\tcontext.empty = null;\r\n\t\t\tt.is(\"full\", tpl.render(context));\r\n\t\t\tcontext.empty = \"not empty\";\r\n\t\t\tt.is(\"not empty\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_dictsort(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n \t\t\ttpl = new dd.Template('{{ fruit|dictsort|join:\"|\" }}');\r\n\t\t\tt.is(\"lemons|apples|grapes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|dictsort:\"name\"|join:\"|\" }}');\r\n\t\t\tt.is(\"apples|grapes|lemons\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_dictsort_reversed(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tcontext = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|dictsortreversed:\"name\"|join:\"|\" }}');\r\n\t\t\tt.is(\"lemons|grapes|apples\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_divisibleby(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tcontext = new dd.Context();\r\n\t\t\ttpl = new dd.Template('{{ 4|divisibleby:\"2\" }}');\r\n\t\t\tt.is(\"true\", tpl.render(context));\r\n\t\t\tcontext = new dd.Context({ number: 4 });\r\n\t\t\ttpl = new dd.Template('{{ number|divisibleby:3 }}');\r\n\t\t\tt.is(\"false\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_escape(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ unescaped: \"Try & cover <all> the \\\"major\\\" 'situations' at once\" });\r\n\t\t\ttpl = new dd.Template('{{ unescaped|escape }}');\r\n\t\t\tt.is(\"Try &amp; cover &lt;all&gt; the &quot;major&quot; &#39;situations&#39; at once\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_filesizeformat(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ 1|filesizeformat }}');\r\n\t\t\tt.is(\"1 byte\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ 512|filesizeformat }}');\r\n\t\t\tt.is(\"512 bytes\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ 1024|filesizeformat }}');\r\n\t\t\tt.is(\"1.0 KB\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ 2048|filesizeformat }}');\r\n\t\t\tt.is(\"2.0 KB\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ 1048576|filesizeformat }}');\r\n\t\t\tt.is(\"1.0 MB\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ 1073741824|filesizeformat }}');\r\n\t\t\tt.is(\"1.0 GB\", tpl.render());\r\n\t\t},\r\n\t\tfunction test_filter_first(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|first }}');\r\n\t\t\tt.is(\"lemons\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_fix_ampersands(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ \"One & Two\"|fix_ampersands|safe }}');\r\n\t\t\tt.is(\"One &amp; Two\", tpl.render());\r\n\t\t},\r\n\t\tfunction test_filter_floatformat(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ num1: 34.23234, num2: 34.00000 });\r\n\t\t\tvar tpl = new dd.Template('{{ num1|floatformat }}');\r\n\t\t\tt.is(\"34.2\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ num2|floatformat }}');\r\n\t\t\tt.is(\"34\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ num1|floatformat:3 }}');\r\n\t\t\tt.is(\"34.232\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ num2|floatformat:3 }}');\r\n\t\t\tt.is(\"34.000\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ num1|floatformat:-3 }}');\r\n\t\t\tt.is(\"34.2\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ num2|floatformat:-3 }}');\r\n\t\t\tt.is(\"34\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_get_digit(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ pi: 314159265 });\r\n\t\t\tvar tpl = new dd.Template('{{ pi|get_digit:1 }}');\r\n\t\t\tt.is(\"3\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ pi|get_digit:\"2\" }}');\r\n\t\t\tt.is(\"1\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ pi|get_digit:0 }}');\r\n\t\t\tt.is(\"314159265\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ \"nada\"|get_digit:1 }}');\r\n\t\t\tt.is(\"0\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_iriencode(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ \"http://homepage.com/~user\"|urlencode|iriencode }}');\r\n\t\t\tt.is(\"http%3A//homepage.com/%7Euser\", tpl.render());\r\n\t\t\ttpl = new dd.Template('{{ \"pottedmeat@dojotoolkit.org\"|iriencode }}');\r\n\t\t\tt.is(\"pottedmeat%40dojotoolkit.org\", tpl.render());\r\n\t\t},\r\n\t\tfunction test_filter_join(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ items: [\"foo\", \"bar\", \"baz\" ]});\r\n\t\t\tvar tpl = new dd.Template(\"{{ items|join }}\");\r\n\t\t\tt.is(\"foo,bar,baz\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ items|join:\"mustard\" }}');\r\n\t\t\tt.is(\"foomustardbarmustardbaz\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_length(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|length }}');\r\n\t\t\tt.is(\"3\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|first|length }}');\r\n\t\t\tt.is(\"6\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_length_is(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|length_is:\"3\" }}');\r\n\t\t\tt.is(\"true\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|length_is:\"4\" }}');\r\n\t\t\tt.is(\"false\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_linebreaks(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ unbroken: \"This is just\\r\\n\\n\\ra bunch\\nof text\\n\\n\\nand such\" });\r\n\t\t\ttpl = new dd.Template('{{ unbroken|linebreaks|safe }}');\r\n\t\t\tt.is(\"<p>This is just</p>\\n\\n<p>a bunch<br />of text</p>\\n\\n<p>and such</p>\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_linebreaksbr(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ unbroken: \"This is just\\r\\n\\n\\ra bunch\\nof text\\n\\n\\nand such\" });\r\n\t\t\ttpl = new dd.Template('{{ unbroken|linebreaksbr|safe }}');\r\n\t\t\tt.is(\"This is just<br /><br />a bunch<br />of text<br /><br /><br />and such\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_linenumbers(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ lines: \"One\\nTwo\\nThree\\nFour\\n\" });\r\n\t\t\tvar tpl = new dd.Template('{{ lines|linenumbers }}');\r\n\t\t\tt.is(\"1. One\\n2. Two\\n3. Three\\n4. Four\\n5. \", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_ljust(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar tpl = new dd.Template('{{ narrow|ljust }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|ljust:\"5\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd  \", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|ljust:\"6\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even  \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd   \", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|ljust:\"12\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even        \", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd         \", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_lower(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ mixed: \"MiXeD\" });\r\n\t\t\tvar tpl  = new dd.Template('{{ mixed|lower }}');\r\n\t\t\tt.is(\"mixed\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_make_list(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ word: \"foo\", number: 314159265, arr: [\"first\", \"second\"], obj: {first: \"first\", second: \"second\"} });\r\n\t\t\tvar tpl = new dd.Template('{{ word|make_list|join:\"|\" }} {{ number|make_list|join:\"|\" }} {{ arr|make_list|join:\"|\" }} {{ obj|make_list|join:\"|\" }}');\r\n\t\t\tt.is(\"f|o|o 3|1|4|1|5|9|2|6|5 first|second first|second\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_phone2numeric(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\ttpl = new dd.Template('{{ \"1-800-pottedmeat\"|phone2numeric }}');\r\n\t\t\tt.is(\"1-800-7688336328\", tpl.render());\r\n\t\t},\r\n\t\tfunction test_filter_pluralize(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ animals: [\"bear\", \"cougar\", \"aardvark\"] });\r\n\t\t\tvar tpl = new dd.Template('{{ animals|length }} animal{{ animals|length|pluralize }}');\r\n\t\t\tt.is(\"3 animals\", tpl.render(context));\r\n\t\t\tcontext.animals = [\"bear\"];\r\n\t\t\tt.is(\"1 animal\", tpl.render(context));\r\n\t\t\tcontext = new dd.Context({ fairies: [\"tinkerbell\", \"Andy Dick\" ]});\r\n\t\t\ttpl = new dd.Template('{{ fairies|length }} fair{{ fairies|length|pluralize:\"y,ies\" }}');\r\n\t\t\tt.is(\"2 fairies\", tpl.render(context));\r\n\t\t\tcontext.fairies.pop();\r\n\t\t\tt.is(\"1 fairy\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_pprint(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ animals: [\"bear\", \"cougar\", \"aardvark\"] });\r\n\t\t\ttpl = new dd.Template(\"{{ animals|pprint|safe }}\");\r\n\t\t\tt.is('[\"bear\",\"cougar\",\"aardvark\"]', tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_random(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|random }}');\r\n\t\t\tresult = tpl.render(context);\r\n\t\t\tt.t(result == \"lemons\" || result == \"apples\" || result == \"grapes\");\r\n\t\t\tvar different = false;\r\n\t\t\tfor(var i = 0; i < 10; i++){\r\n\t\t\t\t// Check to see if it changes\r\n\t\t\t\tif(result != tpl.render(context) && result == \"lemons\" || result == \"apples\" || result == \"grapes\"){\r\n\t\t\t\t\tdifferent = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tt.t(different);\r\n\t\t},\r\n\t\tfunction test_filter_removetags(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ tagged: \"I'm gonna do something <script>evil</script> with the <html>filter\" });\r\n\t\t\ttpl = new dd.Template('{{ tagged|removetags:\"script <html>\"|safe }}');\r\n\t\t\tt.is(\"I'm gonna do something evil with the filter\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_rjust(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar tpl = new dd.Template('{{ narrow|rjust }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"odd\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|rjust:\"5\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\" even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"  odd\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|rjust:\"6\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"  even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"   odd\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ narrow|rjust:\"12\" }}');\r\n\t\t\tcontext.narrow = \"even\";\r\n\t\t\tt.is(\"        even\", tpl.render(context));\r\n\t\t\tcontext.narrow = \"odd\";\r\n\t\t\tt.is(\"         odd\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_slice(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfruit: [\r\n\t\t\t\t\t{ name: \"lemons\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"apples\", toString: function(){ return this.name; } },\r\n\t\t\t\t\t{ name: \"grapes\", toString: function(){ return this.name; } }\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\":1\"|join:\"|\" }}');\r\n\t\t\tt.is(\"lemons\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\"1\"|join:\"|\" }}');\r\n\t\t\tt.is(\"apples|grapes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\"1:3\"|join:\"|\" }}');\r\n\t\t\tt.is(\"apples|grapes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\"\"|join:\"|\" }}');\r\n\t\t\tt.is(\"lemons|apples|grapes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\"-1\"|join:\"|\" }}');\r\n\t\t\tt.is(\"grapes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\":-1\"|join:\"|\" }}');\r\n\t\t\tt.is(\"lemons|apples\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ fruit|slice:\"-2:-1\"|join:\"|\" }}');\r\n\t\t\tt.is(\"apples\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_slugify(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ unslugged: \"Apples and oranges()\"});\r\n\t\t\ttpl = new dd.Template('{{ unslugged|slugify }}');\r\n\t\t\tt.is(\"apples-and-oranges\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_stringformat(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ 42|stringformat:\"7.3f\" }}');\r\n\t\t\tt.is(\" 42.000\", tpl.render());\r\n\t\t},\r\n\t\tfunction test_filter_striptags(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ tagged: \"I'm gonna do something <script>evil</script> with the <html>filter\" });\r\n\t\t\ttpl = new dd.Template('{{ tagged|striptags|safe }}');\r\n\t\t\tt.is(\"I'm gonna do something evil with the filter\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_time(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\t\t\tvar context = new dd.Context({ now: new Date(2007, 0, 1) });\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|time }}');\r\n\t\t\tt.is(dojox.dtl.utils.date.format(context.now, \"P\"), tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ now|time:\"g\" }}');\r\n\t\t\tt.is('12', tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_timesince(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\t\t\tvar context = new dd.Context({ now: new Date(2007, 0, 1), then: new Date(2007, 1, 1) });\r\n\r\n\t\t\ttpl = new dd.Template('{{ now|timesince:then }}');\r\n\t\t\tt.is(\"1 month\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2007, 0, 5);\r\n\t\t\tt.is(\"4 days\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2007, 0, 17);\r\n\t\t\tt.is(\"2 weeks\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2008, 1, 1);\r\n\t\t\tt.is(\"1 year\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_timeuntil(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ now: new Date(2007, 0, 1), then: new Date(2007, 1, 1) });\r\n\t\t\tvar tpl = new dd.Template('{{ now|timeuntil:then }}');\r\n\t\t\tt.is(\"1 month\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2007, 0, 5);\r\n\t\t\tt.is(\"4 days\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2007, 0, 17);\r\n\t\t\tt.is(\"2 weeks\", tpl.render(context));\r\n\t\t\tcontext.then = new Date(2008, 1, 1);\r\n\t\t\tt.is(\"1 year\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_title(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ name: \"potted meat\" });\r\n\t\t\tvar tpl = new dd.Template(\"{{ name|title|safe }}\");\r\n\t\t\tt.is(\"Potted Meat\", tpl.render(context));\r\n\r\n\t\t\tcontext.name = \"What's going on?\";\r\n\t\t\tt.is(\"What's Going On?\", tpl.render(context));\r\n\r\n\t\t\tcontext.name = \"use\\nline\\nbREAKs\\tand tabs\";\r\n\t\t\tt.is(\"Use\\nLine\\nBreaks\\tAnd Tabs\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_truncatewords(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ word: \"potted meat writes a lot of tests\" });\r\n\t\t\tvar tpl = new dd.Template(\"{{ word|truncatewords }}\");\r\n\t\t\tt.is(context.word, tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ word|truncatewords:\"1\" }}');\r\n\t\t\tt.is(\"potted ...\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ word|truncatewords:\"2\" }}');\r\n\t\t\tt.is(\"potted meat ...\", tpl.render(context));\r\n\r\n\t\t\ttpl = new dd.Template('{{ word|truncatewords:20\" }}');\r\n\t\t\tt.is(context.word, tpl.render(context));\r\n\r\n\t\t\tcontext.word = \"potted \\nmeat   \\nwrites  a lot of tests\";\r\n\t\t\ttpl = new dd.Template('{{ word|truncatewords:\"3\" }}');\r\n\t\t\tt.is(\"potted \\nmeat   \\nwrites ...\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_truncatewords_html(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tbody: \"Test a string <em>that ends <i>inside a</i> tag</em> with different args\",\r\n\t\t\t\tsize: 2\r\n\t\t\t})\r\n\t\t\tvar tpl = new dd.Template('{{ body|truncatewords_html:size|safe }}');\r\n\t\t\tt.is(\"Test a ...\", tpl.render(context));\r\n\t\t\tcontext.size = 4;\r\n\t\t\tt.is(\"Test a string <em>that ...</em>\", tpl.render(context));\r\n\t\t\tcontext.size = 6;\r\n\t\t\tt.is(\"Test a string <em>that ends <i>inside ...</i></em>\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_unordered_list(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ states: [\"States\", [[\"Kansas\", [[\"Lawrence\", []], [\"Topeka\", []]]], [\"Illinois\", []]]] });\r\n\t\t\ttpl = new dd.Template('{{ states|unordered_list|safe }}');\r\n\t\t\tt.is(\"\\t<li>States\\n\\t<ul>\\n\\t\\t<li>Kansas\\n\\t\\t<ul>\\n\\t\\t\\t<li>Lawrence</li>\\n\\t\\t\\t<li>Topeka</li>\\n\\t\\t</ul>\\n\\t\\t</li>\\n\\t\\t<li>Illinois</li>\\n\\t</ul>\\n\\t</li>\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_upper(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({ mixed: \"MiXeD\" });\r\n\t\t\tvar tpl  = new dd.Template('{{ mixed|upper }}');\r\n\t\t\tt.is(\"MIXED\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_urlencode(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar tpl = new dd.Template('{{ \"http://homepage.com/~user\"|urlencode }}');\r\n\t\t\tt.is(\"http%3A//homepage.com/%7Euser\", tpl.render());\r\n\r\n\t\t\t// see http://bugs.dojotoolkit.org/ticket/12932\r\n\t\t\ttpl = new dd.Template('{{ \"\\t\"|urlencode }}');\r\n\t\t\tt.is(\"\\t\", decodeURIComponent(tpl.render()));\r\n\t\t},\r\n\t\tfunction test_filter_urlize(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tbody: \"My favorite websites are www.televisionwithoutpity.com, http://daringfireball.net and you can email me at pottedmeat@sitepen.com\"\r\n\t\t\t});\r\n\t\t\tvar tpl = new dd.Template(\"{{ body|urlize|safe }}\");\r\n\t\t\tt.is('My favorite websites are <a href=\"http://www.televisionwithoutpity.com\" rel=\"nofollow\">www.televisionwithoutpity.com</a> <a href=\"http://daringfireball.net\" rel=\"nofollow\">http://daringfireball.net</a> and you can email me at <a href=\"mailto:pottedmeat@sitepen.com\">pottedmeat@sitepen.com</a>', tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_urlizetrunc(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tbody: \"My favorite websites are www.televisionwithoutpity.com, http://daringfireball.net and you can email me at pottedmeat@sitepen.com\"\r\n\t\t\t});\r\n\t\t\tvar tpl = new dd.Template(\"{{ body|urlizetrunc|safe }}\");\r\n\t\t\tt.is('My favorite websites are <a href=\"http://www.televisionwithoutpity.com\" rel=\"nofollow\">www.televisionwithoutpity.com</a> <a href=\"http://daringfireball.net\" rel=\"nofollow\">http://daringfireball.net</a> and you can email me at <a href=\"mailto:pottedmeat@sitepen.com\">pottedmeat@sitepen.com</a>', tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ body|urlizetrunc:\"2\"|safe }}');\r\n\t\t\tt.is('My favorite websites are <a href=\"http://www.televisionwithoutpity.com\" rel=\"nofollow\">www.televisionwithoutpity.com</a> <a href=\"http://daringfireball.net\" rel=\"nofollow\">http://daringfireball.net</a> and you can email me at <a href=\"mailto:pottedmeat@sitepen.com\">pottedmeat@sitepen.com</a>', tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ body|urlizetrunc:\"10\"|safe }}');\r\n\t\t\tt.is('My favorite websites are <a href=\"http://www.televisionwithoutpity.com\" rel=\"nofollow\">www.tel...</a> <a href=\"http://daringfireball.net\" rel=\"nofollow\">http://...</a> and you can email me at <a href=\"mailto:pottedmeat@sitepen.com\">pottedmeat@sitepen.com</a>', tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_wordcount(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tfood: \"Hot Pocket\"\r\n\t\t\t});\r\n\t\t\tvar tpl = new dd.Template(\"{{ food|wordcount }}\");\r\n\t\t\tt.is(\"2\", tpl.render(context));\r\n\t\t\tcontext.food = \"\";\r\n\t\t\tt.is(\"0\", tpl.render(context));\r\n\t\t\tcontext.food = \"A nice barbecue, maybe a little grilled veggies, some cole slaw.\";\r\n\t\t\tt.is(\"11\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_wordwrap(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tbody: \"shrimp gumbo, shrimp pie, shrimp scampi, shrimp stew, fried shrimp, baked shrimp, shrimp o grotten, grilled shrimp, shrimp on a stick, shrimp salad, shrimp pop overs, shrimp cake, shrimp legs, shrimp stuffed eggs, shrimp cre oll, shrimp soup, creamed shrimp on toast, shrimp crapes, shrimply good crescent rolls, shrimp pizza, scalloped shrimp, boiled shrimp, shrimp cocktail\"\r\n\t\t\t});\r\n\t\t\tvar tpl = new dd.Template(\"{{ body|wordwrap }}\");\r\n\t\t\tt.is(context.body, tpl.render(context));\r\n\t\t\ttpl = new dd.Template(\"{{ body|wordwrap:width }}\");\r\n\t\t\tcontext.width = 10;\r\n\t\t\tt.is(\"shrimp\\ngumbo,\\nshrimp\\npie,\\nshrimp\\nscampi,\\nshrimp\\nstew,\\nfried\\nshrimp,\\nbaked\\nshrimp,\\nshrimp o\\ngrotten,\\ngrilled\\nshrimp,\\nshrimp on\\na stick,\\nshrimp\\nsalad,\\nshrimp pop\\novers,\\nshrimp\\ncake,\\nshrimp\\nlegs,\\nshrimp\\nstuffed\\neggs,\\nshrimp cre\\noll,\\nshrimp\\nsoup,\\ncreamed\\nshrimp on\\ntoast,\\nshrimp\\ncrapes,\\nshrimply\\ngood\\ncrescent\\nrolls,\\nshrimp\\npizza,\\nscalloped\\nshrimp,\\nboiled\\nshrimp,\\nshrimp\\ncocktail\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ body|wordwrap:\"80\" }}');\r\n\t\t\tt.is(\"shrimp gumbo, shrimp pie, shrimp scampi, shrimp stew, fried shrimp, baked\\nshrimp, shrimp o grotten, grilled shrimp, shrimp on a stick, shrimp salad,\\nshrimp pop overs, shrimp cake, shrimp legs, shrimp stuffed eggs, shrimp cre oll,\\nshrimp soup, creamed shrimp on toast, shrimp crapes, shrimply good crescent\\nrolls, shrimp pizza, scalloped shrimp, boiled shrimp, shrimp cocktail\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_yesno(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\ttpl = new dd.Template('{{ true|yesno }}');\r\n\t\t\tt.is(\"yes\", tpl.render(context));\r\n\t\t\tcontext = new dd.Context({ test: \"value\" });\r\n\t\t\ttpl = new dd.Template('{{ test|yesno }}');\r\n\t\t\tt.is(\"yes\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ false|yesno }}');\r\n\t\t\tt.is(\"no\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ null|yesno }}');\r\n\t\t\tt.is(\"maybe\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ true|yesno:\"bling,whack,soso\" }}');\r\n\t\t\tt.is(\"bling\", tpl.render(context));\r\n\t\t\tcontext = new dd.Context({ test: \"value\" });\r\n\t\t\ttpl = new dd.Template('{{ test|yesno:\"bling,whack,soso\" }}');\r\n\t\t\tt.is(\"bling\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ false|yesno:\"bling,whack,soso\" }}');\r\n\t\t\tt.is(\"whack\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ null|yesno:\"bling,whack,soso\" }}');\r\n\t\t\tt.is(\"soso\", tpl.render(context));\r\n\t\t\ttpl = new dd.Template('{{ null|yesno:\"bling,whack\" }}');\r\n\t\t\tt.is(\"whack\", tpl.render(context));\r\n\t\t},\r\n\t\tfunction test_filter_contrib_key(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\theaders: [\"action\", \"type\"],\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taction: \"eat\",\r\n\t\t\t\t\t\ttype: \"apple\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taction: \"mash\",\r\n\t\t\t\t\t\ttype: \"banana\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\r\n\t\t\tvar tpl = new dd.Template(\"{% load dojox.dtl.contrib.objects %}<ul>{% for item in items %}<li><ul>{% for header in headers %}<li>{{ header }}: {{ item|key:header }}</li>{% endfor %}</ul></li>{% endfor %}</ul>\");\r\n\t\t\tt.is('<ul><li><ul><li>action: eat</li><li>type: apple</li></ul></li><li><ul><li>action: mash</li><li>type: banana</li></ul></li></ul>', tpl.render(context));\r\n\t\t}\r\n\t]\r\n);"]}