{"version":3,"sources":["dtl/tests/dom/tag.js"],"names":["dojo","provide","require","doh","register","t","template","dd","dojox","dtl","found","DomTemplate","tests","dom","util","render","e","is","message","context","Context","test","items","name","param","base","moduleUrl","key","year","days","Date","color","edit_item","hello","person","people","old","isWebKit","frag","start","stop","data","checked"],"mappings":"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","file":"../../../../dtl/tests/dom/tag.js","sourcesContent":["dojo.provide(\"dojox.dtl.tests.dom.tag\");\r\n\r\ndojo.require(\"dojox.dtl.dom\");\r\ndojo.require(\"dojox.dtl.Context\");\r\ndojo.require(\"dojox.dtl.tests.dom.util\");\r\ndojo.require(\"dojo._base.sniff\");\r\n\r\ndoh.register(\"dojox.dtl.dom.tag\",\r\n\t[\r\n\t\tfunction test_errors(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\t\t\tvar template;\r\n\r\n\t\t\t// No root node after rendering\r\n\t\t\tvar found = false;\r\n\t\t\ttry {\r\n\t\t\t\ttemplate = new dd.DomTemplate('No div');\r\n\t\t\t\tdd.tests.dom.util.render(template);\r\n\t\t\t}catch(e){\r\n\t\t\t\tt.is(\"Text should not exist outside of the root node in template\", e.message);\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\tt.t(found);\r\n\r\n\t\t\tvar context = new dojox.dtl.Context({test: \"Pocket\"});\r\n\t\t\tfound = false;\r\n\t\t\ttry {\r\n\t\t\t\ttemplate = new dd.DomTemplate('{{ test }}');\r\n\t\t\t\tdd.tests.dom.util.render(template, context);\r\n\t\t\t}catch(e){\r\n\t\t\t\tt.is(\"Text should not exist outside of the root node in template\", e.message);\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\tt.t(found);\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div></div>extra content');\r\n\t\t\tfound = false;\r\n\t\t\ttry {\r\n\t\t\t\tdd.tests.dom.util.render(template);\r\n\t\t\t}catch(e){\r\n\t\t\t\tt.is(\"Content should not exist outside of the root node in template\", e.message);\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\tt.t(found);\r\n\r\n\t\t\t// More than one top-level node (except for blocks)\r\n\t\t\ttemplate = new dd.DomTemplate('<div></div><div></div>');\r\n\t\t\tfound = false;\r\n\t\t\ttry {\r\n\t\t\t\tdd.tests.dom.util.render(template);\r\n\t\t\t}catch(e){\r\n\t\t\t\tt.is(\"Content should not exist outside of the root node in template\", e.message);\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\tt.t(found);\r\n\r\n\t\t\t// Logic block rules out any root node\r\n\t\t\ttemplate = new dd.DomTemplate('{% if missing %}<div></div>{% endif %}');\r\n\t\t\tfound = false;\r\n\t\t\ttry {\r\n\t\t\t\tdd.tests.dom.util.render(template);\r\n\t\t\t}catch(e){\r\n\t\t\t\tt.is(\"Rendered template does not have a root node\", e.message);\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\tt.t(found);\r\n\t\t},\r\n\t\tfunction test_tag_attributes(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar template = new dd.DomTemplate('<div>{% for item in items %}<a index=\"{{forloop.counter0}}\" id=\"id_{{item.param}}\">{{item.param}}</a>{% endfor %}</div>');\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"apple\",\r\n\t\t\t\t\t\tparam: \"appleparam\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"banana\",\r\n\t\t\t\t\t\tparam: \"bananaparam\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"orange\",\r\n\t\t\t\t\t\tparam: \"orangeparam\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\tdoh.is('<div><a index=\"0\" id=\"id_appleparam\">appleparam</a><a index=\"1\" id=\"id_bananaparam\">bananaparam</a><a index=\"2\" id=\"id_orangeparam\">orangeparam</a></div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_extend(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tbase: dojo.moduleUrl(\"dojox.dtl.tests.templates\", \"base.html\")\r\n\t\t\t});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"{% extends base %}{% block base %}<p>1</p><p>2</p><ul><li>2a</li><li>2b</li><li>2c</li></ul><p>3</p><ul><li>3a</li><li>3b</li><li>3c</li></ul><p>4</p><ul><li>4a</li><li>4b</li><li>4c</li></ul><p>5</p>{% endblock %}\");\r\n\t\t\tt.is(\"<div>BaseBefore<p>1</p><p>2</p><ul><li>2a</li><li>2b</li><li>2c</li></ul><p>3</p><ul><li>3a</li><li>3b</li><li>3c</li></ul><p>4</p><ul><li>4a</li><li>4b</li><li>4c</li></ul><p>5</p>BaseAfter</div>\", dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_for(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\titems: [\"apple\", \"banana\", \"lemon\"]\r\n\t\t\t});\r\n\t\t\tvar template = new dd.DomTemplate('<div><ul>{% for item in items %}<li class=\"{{ item|length }}\">{{ item }}</li>{% endfor %}</ul></div>');\r\n\r\n\t\t\tt.is('<div><ul><li class=\"5\">apple</li><li class=\"6\">banana</li><li class=\"5\">lemon</li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\t// The line break is there to make sure our regex works\r\n\t\t\ttemplate = new dd.DomTemplate('<div><select>{% for item in items %}<option>{{ item }}</option>\\n{% endfor %}</select></div>');\r\n\r\n\t\t\tt.is('<div><select><option>apple</option><option>banana</option><option>lemon</option></select></div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_if(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({key: true});\r\n\t\t\tvar template = new dd.DomTemplate('{% if key %}<div>has key</div>{% else %}<div>no key</div>{% endif %}');\r\n\t\t\tt.is(\"<div>has key</div>\", dd.tests.dom.util.render(template, context));\r\n\t\t\tcontext.key = false;\r\n\t\t\tt.is(\"<div>no key</div>\", dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_ifchanged(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\tyear: 2008,\r\n\t\t\t\tdays: [\r\n\t\t\t\t\tnew Date(2008, 0, 12),\r\n\t\t\t\t\tnew Date(2008, 0, 28),\r\n\t\t\t\t\tnew Date(2008, 1, 1),\r\n\t\t\t\t\tnew Date(2008, 1, 1),\r\n\t\t\t\t\tnew Date(2008, 1, 1)\r\n\t\t\t\t]\r\n\t\t\t});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"<div><h1>Archive for {{ year }}</h1>\"+\r\n\"{% for date in days %}\"+\r\n'{% ifchanged %}<h3>Month: </h3><h3>{{ date|date:\"F\" }}</h3>{% endifchanged %}'+\r\n'<a href=\"{{ date|date:\\'M/d\\'|lower }}/\">{{ date|date:\\'j\\' }}</a>'+\r\n\"{% endfor %}</div>\");\r\n\r\n\t\t\tt.is('<div><h1>Archive for 2008</h1>'+\r\n'<h3>Month: </h3><h3>January</h3>'+\r\n'<a href=\"jan/12/\">12</a>'+\r\n'<a href=\"jan/28/\">28</a>'+\r\n'<h3>Month: </h3><h3>February</h3>'+\r\n'<a href=\"feb/01/\">1</a>'+\r\n'<a href=\"feb/01/\">1</a>'+\r\n'<a href=\"feb/01/\">1</a></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div>{% for date in days %}'+\r\n'{% ifchanged date.date %} {{ date.date }} {% endifchanged %}'+\r\n'{% ifchanged date.hour date.date %}'+\r\n'{{ date.hour }}'+\r\n'{% endifchanged %}'+\r\n'{% endfor %}</div>');\r\n\t\t\tt.is('<div> 2008-01-12 0 2008-01-28 0 2008-02-01 0</div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_ifequal(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{ name: \"apple\", color: \"red\" },\r\n\t\t\t\t\t{ name: \"banana\", color: \"yellow\" },\r\n\t\t\t\t\t{ name: \"pear\", color: \"green\" },\r\n\t\t\t\t\t{ name: \"kiwi\", color: \"brown\" }\r\n\t\t\t\t],\r\n\t\t\t\tedit_item: \"banana\"\r\n\t\t\t});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"<div><ul>{% for item in items %}<li>{{ item.name }}</li>{% endfor %}</ul></div>\");\r\n\t\t\tt.is('<div><ul><li>apple</li><li>banana</li><li>pear</li><li>kiwi</li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><ul>{% for item in items %}<li><span>{{ item.name }}</span><br/><p>{{ item.color }}</p></li>{% endfor %}</ul></div>\");\r\n\t\t\tt.is('<div><ul><li><span>apple</span><br/><p>red</p></li><li><span>banana</span><br/><p>yellow</p></li><li><span>pear</span><br/><p>green</p></li><li><span>kiwi</span><br/><p>brown</p></li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><ul>{% for item in items %}<li>{% ifequal item.name edit_item %}<label>Name: <input type='text' name='name' value=\\\"{{ item.name }}\\\"/></label><br/><label>Color: <textarea name='color'>{{ item.color }}</textarea></label>{% else %}<span>{{ item.name }}</span><br/><p>{{ item.color }}</p>{% endifequal %}</li>{% endfor %}</ul></div>\");\r\n\t\t\tt.is('<div><ul><li><span>apple</span><br/><p>red</p></li><li><label>Name: <input name=\"name\" value=\"banana\"/></label><br/><label>Color: <textarea name=\"color\">yellow</textarea></label></li><li><span>pear</span><br/><p>green</p></li><li><span>kiwi</span><br/><p>brown</p></li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><ul>{% for item in items %}<li>{% ifequal item.name edit_item %}<div><label>Name: <input type='text' name='name' value=\\\"{{ item.name }}\\\"/></label><br/><label>Color: <textarea name='color'>{{ item.color }}</textarea></label></div>{% else %}<div><span>{{ item.name }}</span><br/><p>{{ item.color }}</p></div>{% endifequal %}</li>{% endfor %}</ul></div>\");\r\n\t\t\tt.is('<div><ul><li><div><span>apple</span><br/><p>red</p></div></li><li><div><label>Name: <input name=\"name\" value=\"banana\"/></label><br/><label>Color: <textarea name=\"color\">yellow</textarea></label></div></li><li><div><span>pear</span><br/><p>green</p></div></li><li><div><span>kiwi</span><br/><p>brown</p></div></li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><ul>{% for item in items %}{% ifequal item.name edit_item %}<li><label>Name: <input type='text' name='name' value=\\\"{{ item.name }}\\\"/></label><br/><label>Color: <textarea name='color'>{{ item.color }}</textarea></label></li>{% else %}<li><span>{{ item.name }}</span><br/><p>{{ item.color }}</p></li>{% endifequal %}{% endfor %}</ul></div>\");\r\n\t\t\tt.is('<div><ul><li><span>apple</span><br/><p>red</p></li><li><label>Name: <input name=\"name\" value=\"banana\"/></label><br/><label>Color: <textarea name=\"color\">yellow</textarea></label></li><li><span>pear</span><br/><p>green</p></li><li><span>kiwi</span><br/><p>brown</p></li></ul></div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_include(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\thello: dojo.moduleUrl(\"dojox.dtl.tests.templates\", \"hello.html\"),\r\n\t\t\t\tperson: \"Bob\",\r\n\t\t\t\tpeople: [\"Charles\", \"Ralph\", \"Julia\"]\r\n\t\t\t});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"<div>{% include hello %}</div>\");\r\n\t\t\tt.is(\"<div>Hello, <span>Bob</span></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div>{% include \"../../dojox/dtl/tests/templates/hello.html\" %}</div>');\r\n\t\t\tt.is(\"<div>Hello, <span>Bob</span></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div>{% for person in people %}<div class=\"include\">{% include hello %} </div>{% endfor %}</div>');\r\n\t\t\tt.is('<div><div class=\"include\">Hello, <span>Charles</span> </div><div class=\"include\">Hello, <span>Ralph</span> </div><div class=\"include\">Hello, <span>Julia</span> </div></div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_spaceless(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"{% spaceless %}<ul> \\n <li>Hot</li> \\n\\n<li>Pocket </li>\\n </ul>{% endspaceless %}\");\r\n\t\t\tt.is(\"<ul><li>Hot</li><li>Pocket </li></ul>\", dd.tests.dom.util.render(template));\r\n\t\t},\r\n\t\tfunction test_tag_ssi(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({\r\n\t\t\t\thello: dojo.moduleUrl(\"dojox.dtl.tests.templates\", \"hello.html\"),\r\n\t\t\t\tperson: \"Bob\",\r\n\t\t\t\tpeople: [\"Charles\", \"Ralph\", \"Julia\"]\r\n\t\t\t});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"<div>{% ssi hello parsed %}</div>\");\r\n\t\t\tt.is(\"<div>Hello, <span>Bob</span></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div>{% ssi hello %}</div>\");\r\n\t\t\tt.is(\"<div>Hello, <span>{{ person }}</span></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div>{% ssi \"../../dojox/dtl/tests/templates/hello.html\" parsed %}</div>');\r\n\t\t\tt.is(\"<div>Hello, <span>Bob</span></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\ttemplate = new dd.DomTemplate('<div>{% for person in people %}{% ssi hello parsed %} {% endfor %}</div>');\r\n\t\t\tt.is(\"<div>Hello, <span>Charles</span> Hello, <span>Ralph</span> Hello, <span>Julia</span> </div>\", dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tag_comment(t){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({});\r\n\r\n\t\t\tvar template = new dd.DomTemplate(\"<div>abc{% comment %}{% endif %}<div>{% ssi hello parsed %}</div>{% for item in items %}{% endcomment %}xyz</div>\");\r\n\t\t\tt.is(\"<div>abcxyz</div>\", dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_annoying_nesting(){\r\n\t\t\t// In Safari:  table/tr, tr/th, tr/td, thead/tr, tbody/tr\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({items: [\"apple\", \"banana\", \"orange\"]});\r\n\r\n\t\t\t// All: select/option\r\n\t\t\tvar template = new dd.DomTemplate(\"<div><select>{% for item in items %}{% ifequal item 'apple' %}<option>=====</option>{% endifequal %}<option>{{ item }}</option>{% endfor %}</select></div>\");\r\n\t\t\tdoh.is(\"<div><select><option>=====</option><option>apple</option><option>banana</option><option>orange</option></select></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\t// Safari: table/tr\r\n\t\t\ttemplate = new dd.DomTemplate('<div><table><tr><td>Fruit</td></tr>{% for fruit in items %}<tr><td>{{ fruit }}</td></tr>{% endfor %}</table></div>');\r\n\t\t\tdoh.is('<div><table><tbody><tr><td>Fruit</td></tr><tr><td>apple</td></tr><tr><td>banana</td></tr><tr><td>orange</td></tr></tbody></table></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\t// Safari: tbody/tr\r\n\t\t\ttemplate = new dd.DomTemplate('<div><table><tbody><tr><td>Fruit</td></tr>{% for fruit in items %}<tr><td>{{ fruit }}</td></tr>{% endfor %}</tbody></table></div>');\r\n\t\t\tdoh.is('<div><table><tbody><tr><td>Fruit</td></tr><tr><td>apple</td></tr><tr><td>banana</td></tr><tr><td>orange</td></tr></tbody></table></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\t// Safari: tr/th\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><table><tr>{% for item in items %}{% ifequal item 'apple' %}<th>=====</th>{% endifequal %}<th>{{ item }}</th>{% endfor %}</tr></table></div>\");\r\n\t\t\tdoh.is(\"<div><table><tbody><tr><th>=====</th><th>apple</th><th>banana</th><th>orange</th></tr></tbody></table></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\t// Safari: tr/th\r\n\t\t\ttemplate = new dd.DomTemplate(\"<div><table><tr>{% for item in items %}{% ifequal item 'apple' %}<td>=====</td>{% endifequal %}<td>{{ item }}</td>{% endfor %}</tr></table></div>\");\r\n\t\t\tdoh.is(\"<div><table><tbody><tr><td>=====</td><td>apple</td><td>banana</td><td>orange</td></tr></tbody></table></div>\", dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\tvar old = dojo.isWebKit;\r\n\t\t\tdojo.isWebKit = true;\r\n\t\t\t// Force WebKit because linebreaks work differently when nesting is parsed\r\n\t\t\ttemplate = new dd.DomTemplate('<div><table>\\n<thead><tr><th>Name</th><th>Count</th></tr></thead>\\n<tbody>\\n{% for fruit in items %}\\n<tr><td>{{ fruit }}</td><td>{{ fruit }}</td></tr>\\n{% endfor %}\\n</tbody></table></div>');\r\n\t\t\tdoh.is('<div><table><thead><tr><th>Name</th><th>Count</th></tr></thead><tbody><tr><td>apple</td><td>apple</td></tr><tr><td>banana</td><td>banana</td></tr><tr><td>orange</td><td>orange</td></tr></tbody></table></div>', dd.tests.dom.util.render(template, context));\r\n\t\t\tdojo.isWebKit = old;\r\n\t\t},\r\n\t\tfunction test_custom_attributes(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({frag: {start: 10, stop: 20}});\r\n\r\n\t\t\tvar template = new dd.DomTemplate('<div startLine=\"{{ frag.start }}\" stopLine=\"{{ frag.stop }}\">abc</div>');\r\n\t\t\tdoh.is('<div startline=\"10\" stopline=\"20\">abc</div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_emptiness(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({});\r\n\t\t\tvar template = new dd.DomTemplate('<div>{% if data %}{% else %}<p>Please select a file using the left panel.</p>{% endif %}</div>');\r\n\t\t\tdoh.is('<div><p>Please select a file using the left panel.</p></div>', dd.tests.dom.util.render(template, context));\r\n\r\n\t\t\tcontext.data = true;\r\n\t\t\tdoh.is('<div/>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_bools(){\r\n\t\t\t// checked, disabled, readonly\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context({checked: false});\r\n\t\t\tvar template = new dd.DomTemplate('<div><input checked=\"{{ checked }}\"></div>');\r\n\t\t\tdoh.is('<div><input checked=\"false\"/></div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_mixedCase(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar template = new dd.DomTemplate('<div simplecase=\"simple\" mixedCase=\"mixed\">content</div>');\r\n\t\t\tdoh.is('<div simplecase=\"simple\" mixedcase=\"mixed\">content</div>', dd.tests.dom.util.render(template, context));\r\n\t\t},\r\n\t\tfunction test_tabindex_lowercase(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar template = new dd.DomTemplate('<div tabindex=\"-1\"></div>');\r\n\t\t\t//the following should not throw errors\r\n\t\t\tdd.tests.dom.util.render(template, context);\r\n\t\t},\r\n\t\tfunction test_tabIndex(){\r\n\t\t\tvar dd = dojox.dtl;\r\n\r\n\t\t\tvar context = new dd.Context();\r\n\t\t\tvar template = new dd.DomTemplate('<div tabIndex=\"-1\"></div>');\r\n\t\t\t//the following should not throw errors in IE\r\n\t\t\tdd.tests.dom.util.render(template, context);\r\n\t\t}\r\n\t]\r\n);"]}