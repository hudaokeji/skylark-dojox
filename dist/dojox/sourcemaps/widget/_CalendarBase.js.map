{"version":3,"sources":["widget/_CalendarBase.js"],"names":["define","_WidgetBase","_TemplatedMixin","_Container","_WidgetsInTemplateMixin","dijitTypematic","declare","dojoDate","stamp","dojoDateLocale","domStyle","domClass","fx","on","array","lang","template","templateString","_views","useFx","value","Date","constraints","footerFormat","constructor","this","_setConstraintsAttr","c","min","fromISOString","max","postMixInProperties","inherited","arguments","parseInitialValue","getFullYear","isNaN","parseInt","_makeDate","postCreate","displayMonth","get","_isInvalidDate","mixin","parent","_getValueAttr","hitch","_internalValue","_getDisplayMonthAttr","_getConstraintsAttr","getLang","isDisabledDate","getClassForDate","addFx","forEach","widgetType","widget","placeAt","header","getHeader","appendChild","set","domNode","length","_children","getChildren","_currentChild","today","footer","innerHTML","format","formatLength","selector","locale","first","toggle","container","useHeader","onDisplay","_this","typematic","nodeProp","dateProp","adj","addMouseListener","count","_adjustDisplay","_updateTitleStyle","query","fromNode","toString","_invalidDate","_setValueAttr","compare","onChange","date","onValueSelected","_onDateSelected","formattedValue","force","_transitionVert","onHeaderClick","e","goToToday","direction","curWidget","nextWidget","height","containerNode","height1","anim1","animateProperty","node","properties","top","onEnd","anim2","play","onBeforeUnDisplay","onBeforeDisplay","_slideTable","callback","table","newTable","cloneNode","left","parentNode","duration","removeChild","_addView","view","push","dateObject","part","amount","noSlide","child","month","adjustDate"],"mappings":"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","file":"../../widget/_CalendarBase.js","sourcesContent":["define([\r\n\t\"dijit/_WidgetBase\",\r\n\t\"dijit/_TemplatedMixin\",\r\n\t\"dijit/_Container\",\r\n\t\"dijit/_WidgetsInTemplateMixin\",\r\n\t\"dijit/typematic\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/date\",\r\n\t\"dojo/date/stamp\",\r\n\t\"dojo/date/locale\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/_base/fx\",\r\n\t\"dojo/on\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/text!./Calendar/Calendar.html\"\r\n], function(_WidgetBase, _TemplatedMixin, _Container, _WidgetsInTemplateMixin, dijitTypematic,\r\n\t\tdeclare, dojoDate, stamp, dojoDateLocale, domStyle, domClass, fx, on, array, lang, template){\r\n\treturn declare(\"dojox.widget._CalendarBase\", [_WidgetBase, _TemplatedMixin, _Container, _WidgetsInTemplateMixin], {\r\n\t\t// summary:\r\n\t\t//\t\tThe Root class for all _Calendar extensions\r\n\r\n\t\t// templateString: String\r\n\t\t//\t\tThe template to be used to construct the widget.\r\n\t\ttemplateString: template,\r\n\r\n\t\t// _views: Array\r\n\t\t//\t\tThe list of mixin views available on this calendar.\r\n\t\t_views: null,\r\n\r\n\t\t// useFx: Boolean\r\n\t\t//\t\tSpecifies if visual effects should be applied to the widget.\r\n\t\t//\t\tThe default behavior of the widget does not contain any effects.\r\n\t\t//\t\tThe dojox.widget.CalendarFx package is needed for these.\r\n\t\tuseFx: true,\r\n\r\n\t\t// value: Date\r\n\t\t//\t\tThe currently selected Date\r\n\t\tvalue: new Date(),\r\n\r\n\t\tconstraints: null,\r\n\r\n\t\t// footerFormat: String\r\n\t\t//\t\tThe date format of the date displayed in the footer.\tCan be\r\n\t\t//\t\t'short', 'medium', and 'long'\r\n\t\tfooterFormat: \"medium\",\r\n\r\n\t\tconstructor: function(){\r\n\t\t\tthis._views = [];\r\n\t\t\tthis.value = new Date();\r\n\t\t},\r\n\r\n\t\t_setConstraintsAttr: function(constraints){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets minimum and maximum constraints\r\n\t\t\tvar c = this.constraints = constraints;\r\n\t\t\tif(c){\r\n\t\t\t\tif(typeof c.min == \"string\"){\r\n\t\t\t\t\tc.min = stamp.fromISOString(c.min);\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof c.max == \"string\"){\r\n\t\t\t\t\tc.max = stamp.fromISOString(c.max);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpostMixInProperties: function () {\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.value = this.parseInitialValue(this.value);\r\n\t\t},\r\n\r\n\t\tparseInitialValue: function(value){\r\n\t\t\tif (!value || value === -1){\r\n\t\t\t\treturn new Date();\r\n\t\t\t}else if(value.getFullYear){\r\n\t\t\t\treturn value;\r\n\t\t\t}else if (!isNaN(value)) {\r\n\t\t\t\tif (typeof this.value == \"string\") {\r\n\t\t\t\t\tvalue = parseInt(value);\r\n\t\t\t\t}\r\n\t\t\t\tvalue = this._makeDate(value);\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\r\n\t\t_makeDate: function(value){\r\n\t\t\treturn value;//new Date(value);\r\n\t\t},\r\n\r\n\t\tpostCreate: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInstantiates the mixin views\r\n\r\n\t\t\tthis.displayMonth = new Date(this.get('value'));\r\n\r\n\t\t\tif(this._isInvalidDate(this.displayMonth)){\r\n\t\t\t\tthis.displayMonth = new Date();\r\n\t\t\t}\r\n\r\n\t\t\tvar mixin = {\r\n\t\t\t\tparent: this,\r\n\t\t\t\t_getValueAttr: lang.hitch(this, function(){return new Date(this._internalValue || this.value);}),\r\n\t\t\t\t_getDisplayMonthAttr: lang.hitch(this, function(){return new Date(this.displayMonth);}),\r\n\t\t\t\t_getConstraintsAttr: lang.hitch(this, function(){return this.constraints;}),\r\n\t\t\t\tgetLang: lang.hitch(this, function(){return this.lang;}),\r\n\t\t\t\tisDisabledDate: lang.hitch(this, this.isDisabledDate),\r\n\t\t\t\tgetClassForDate: lang.hitch(this, this.getClassForDate),\r\n\t\t\t\taddFx: this.useFx ? lang.hitch(this, this.addFx) : function(){}\r\n\t\t\t};\r\n\r\n\t\t\t//Add the mixed in views.\r\n\t\t\tarray.forEach(this._views, function(widgetType){\r\n\t\t\t\tvar widget = new widgetType(mixin).placeAt(this);\r\n\r\n\t\t\t\tvar header = widget.getHeader();\r\n\t\t\t\tif(header){\r\n\t\t\t\t//place the views's header node in the header of the main widget\r\n\t\t\t\t\tthis.header.appendChild(header);\r\n\r\n\t\t\t\t\t//hide the header node of the widget\r\n\t\t\t\t\tdomStyle.set(header, \"display\", \"none\");\r\n\t\t\t\t}\r\n\t\t\t\t//Hide all views\r\n\t\t\t\tdomStyle.set(widget.domNode, \"visibility\", \"hidden\");\r\n\r\n\t\t\t\t//Listen for the values in a view to be selected\r\n\t\t\t\twidget.on(\"valueSelected\", lang.hitch(this, \"_onDateSelected\"));\r\n\t\t\t\twidget.set(\"value\", this.get('value'));\r\n\t\t\t}, this);\r\n\r\n\t\t\tif(this._views.length < 2){\r\n\t\t\t\tdomStyle.set(this.header, \"cursor\", \"auto\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t// Cache the list of children widgets.\r\n\t\t\tthis._children = this.getChildren();\r\n\r\n\t\t\tthis._currentChild = 0;\r\n\r\n\t\t\t//Populate the footer with today's date.\r\n\t\t\tvar today = new Date();\r\n\r\n\t\t\tthis.footer.innerHTML = \"Today: \"\r\n\t\t\t\t+ dojoDateLocale.format(today, {\r\n\t\t\t\t\tformatLength:this.footerFormat,\r\n\t\t\t\t\tselector:'date',\r\n\t\t\t\t\tlocale:this.lang});\r\n\r\n\t\t\ton(this.footer, \"click\", lang.hitch(this, \"goToToday\"));\r\n\r\n\t\t\tvar first = this._children[0];\r\n\r\n\t\t\tdomStyle.set(first.domNode, \"top\", \"0px\");\r\n\t\t\tdomStyle.set(first.domNode, \"visibility\", \"visible\");\r\n\r\n\t\t\tvar header = first.getHeader();\r\n\t\t\tif(header){\r\n\t\t\t\tdomStyle.set(first.getHeader(), \"display\", \"\");\r\n\t\t\t}\r\n\r\n\t\t\tdomClass.toggle(this.container, \"no-header\", !first.useHeader);\r\n\r\n\t\t\tfirst.onDisplay();\r\n\r\n\t\t\tvar _this = this;\r\n\r\n\t\t\tvar typematic = function(nodeProp, dateProp, adj){\r\n\t\t\t\tdijitTypematic.addMouseListener(_this[nodeProp], _this, function(count){\r\n\t\t\t\t\tif(count >= 0){\t_this._adjustDisplay(dateProp, adj);}\r\n\t\t\t\t}, 0.8, 500);\r\n\t\t\t};\r\n\t\t\ttypematic(\"incrementMonth\", \"month\", 1);\r\n\t\t\ttypematic(\"decrementMonth\", \"month\", -1);\r\n\t\t\tthis._updateTitleStyle();\r\n\t\t},\r\n\r\n\t\taddFx: function(query, fromNode){\r\n\t\t\t// Stub function than can be overridden to add effects.\r\n\t\t},\r\n\r\n\t\t_isInvalidDate: function(/*Date*/ value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRuns various tests on the value, checking for invalid conditions\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\treturn !value || isNaN(value) || typeof value != \"object\" || value.toString() == this._invalidDate;\r\n\t\t},\r\n\r\n\t\t_setValueAttr: function(/*Date*/ value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSet the current date and update the UI.\tIf the date is disabled, the selection will\r\n\t\t\t//\t\tnot change, but the display will change to the corresponding month.\r\n\t\t\tif(!value){\r\n\t\t\t\tvalue = new Date();\r\n\t\t\t}\r\n\t\t\tif(!value[\"getFullYear\"]){\r\n\t\t\t\tvalue = stamp.fromISOString(value + \"\");\r\n\t\t\t}\r\n\t\t\tif(this._isInvalidDate(value)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!this.value || dojoDate.compare(value, this.value)){\r\n\t\t\t\tvalue = new Date(value);\r\n\t\t\t\tthis.displayMonth = new Date(value);\r\n\t\t\t\tthis._internalValue = value;\r\n\t\t\t\tif(!this.isDisabledDate(value, this.lang) && this._currentChild == 0){\r\n\t\t\t\t\tthis.value = value;\r\n\t\t\t\t\tthis.onChange(value);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._children && this._children.length > 0) {\r\n\t\t\t\t\tthis._children[this._currentChild].set(\"value\", this.value);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tisDisabledDate: function(/*Date*/date, /*String?*/locale){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tMay be overridden to disable certain dates in the calendar e.g. `isDisabledDate=dojo.date.locale.isWeekend`\r\n\t\t\tvar c = this.constraints;\r\n\t\t\tvar compare = dojoDate.compare;\r\n\t\t\treturn c && (c.min && (compare(c.min, date, \"date\") > 0) ||\r\n\t\t\t\t\t\t\t\t(c.max && compare(c.max, date, \"date\") < 0));\r\n\t\t},\r\n\r\n\t\tonValueSelected: function(/*Date*/date){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA date cell was selected. It may be the same as the previous value.\r\n\t\t},\r\n\r\n\t\t_onDateSelected: function(date, formattedValue, force){\r\n\t\t\tthis.displayMonth = date;\r\n\r\n\t\t\tthis.set(\"value\", date);\r\n\t\t\t//Only change the selected value if it was chosen from the\r\n\t\t\t//first child.\r\n\t\t\tif(!this._transitionVert(-1)){\r\n\t\t\t\tif(!formattedValue && formattedValue !== 0){\r\n\t\t\t\t\tformattedValue = this.get('value');\r\n\t\t\t\t}\r\n\t\t\t\tthis.onValueSelected(formattedValue);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tonChange: function(/*Date*/date){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled only when the selected date has changed\r\n\t\t},\r\n\r\n\t\tonHeaderClick: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTransitions to the next view.\r\n\t\t\tthis._transitionVert(1);\r\n\t\t},\r\n\r\n\t\tgoToToday: function(){\r\n\t\t\tthis.set(\"value\", new Date());\r\n\t\t\tthis.onValueSelected(this.get('value'));\r\n\t\t},\r\n\r\n\t\t_transitionVert: function(/*Number*/direction){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAnimates the views to show one and hide another, in a\r\n\t\t\t//\t\tvertical direction.\r\n\t\t\t//\t\tIf 'direction' is 1, then the views slide upwards.\r\n\t\t\t//\t\tIf 'direction' is -1, the views slide downwards.\r\n\t\t\tvar curWidget = this._children[this._currentChild];\r\n\t\t\tvar nextWidget = this._children[this._currentChild + direction];\r\n\t\t\tif(!nextWidget){return false;}\r\n\r\n\t\t\tdomStyle.set(nextWidget.domNode, \"visibility\", \"visible\");\r\n\r\n\t\t\tvar height = domStyle.get(this.containerNode, \"height\");\r\n\t\t\tnextWidget.set(\"value\", this.displayMonth);\r\n\r\n\t\t\tif(curWidget.header){\r\n\t\t\t\tdomStyle.set(curWidget.header, \"display\", \"none\");\r\n\t\t\t}\r\n\t\t\tif(nextWidget.header){\r\n\t\t\t\tdomStyle.set(nextWidget.header, \"display\", \"\");\r\n\t\t\t}\r\n\t\t\tdomStyle.set(nextWidget.domNode, \"top\", (height * -1) + \"px\");\r\n\t\t\tdomStyle.set(nextWidget.domNode, \"visibility\", \"visible\");\r\n\r\n\t\t\tthis._currentChild += direction;\r\n\r\n\t\t\tvar height1 = height * direction;\r\n\t\t\tvar height2 = 0;\r\n\t\t\tdomStyle.set(nextWidget.domNode, \"top\", (height1 * -1) + \"px\");\r\n\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSlides two nodes vertically.\r\n\t\t\tvar anim1 = fx.animateProperty({\r\n\t\t\t\tnode: curWidget.domNode,\r\n\t\t\t\tproperties: {top: height1},\r\n\t\t\t\tonEnd: function(){\r\n\t\t\t\t\tdomStyle.set(curWidget.domNode, \"visibility\", \"hidden\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar anim2 = fx.animateProperty({\r\n\t\t\t\tnode: nextWidget.domNode,\r\n\t\t\t\tproperties: {top: height2},\r\n\t\t\t\tonEnd: function(){\r\n\t\t\t\t\tnextWidget.onDisplay();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tdomClass.toggle(this.container, \"no-header\", !nextWidget.useHeader);\r\n\r\n\t\t\tanim1.play();\r\n\t\t\tanim2.play();\r\n\t\t\tcurWidget.onBeforeUnDisplay();\r\n\t\t\tnextWidget.onBeforeDisplay();\r\n\r\n\t\t\tthis._updateTitleStyle();\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t_updateTitleStyle: function(){\r\n\t\t\tdomClass.toggle(this.header, \"navToPanel\", this._currentChild < this._children.length -1);\r\n\t\t},\r\n\r\n\t\t_slideTable: function(/*String*/widget, /*Number*/direction, /*Function*/callback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAnimates the horizontal sliding of a table.\r\n\t\t\tvar table = widget.domNode;\r\n\r\n\t\t\t//Clone the existing table\r\n\t\t\tvar newTable = table.cloneNode(true);\r\n\t\t\tvar left = domStyle.get(table, \"width\");\r\n\r\n\t\t\ttable.parentNode.appendChild(newTable);\r\n\r\n\t\t\t//Place the existing node either to the left or the right of the new node,\r\n\t\t\t//depending on which direction it is to slide.\r\n\t\t\tdomStyle.set(table, \"left\", (left * direction) + \"px\");\r\n\r\n\t\t\t//Call the function that generally populates the new cloned node with new data.\r\n\t\t\t//It may also attach event listeners.\r\n\t\t\tcallback();\r\n\r\n\t\t\t//Animate the two nodes.\r\n\t\t\tvar anim1 = fx.animateProperty({node: newTable, properties:{left: left * direction * -1}, duration: 500, onEnd: function(){\r\n\t\t\t\tnewTable.parentNode.removeChild(newTable);\r\n\t\t\t}});\r\n\t\t\tvar anim2 = fx.animateProperty({node: table, properties:{left: 0}, duration: 500});\r\n\r\n\t\t\tanim1.play();\r\n\t\t\tanim2.play();\r\n\t\t},\r\n\r\n\t\t_addView: function(view){\r\n\t\t\t//Insert the view at the start of the array.\r\n\t\t\tthis._views.push(view);\r\n\t\t},\r\n\r\n\t\tgetClassForDate: function(/*Date*/dateObject, /*String?*/locale){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tMay be overridden to return CSS classes to associate with the date entry for the given dateObject,\r\n\t\t\t//\t\tfor example to indicate a holiday in specified locale.\r\n\r\n\t/*=====\r\n\t\t\treturn \"\"; // String\r\n\t=====*/\r\n\t\t},\r\n\r\n\t\t_adjustDisplay: function(/*String*/part, /*int*/amount, noSlide){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tThis function overrides the base function defined in dijit/Calendar.\r\n\t\t\t//\t\tIt changes the displayed years, months and days depending on the inputs.\r\n\t\t\tvar child = this._children[this._currentChild];\r\n\r\n\t\t\tvar month = this.displayMonth = child.adjustDate(this.displayMonth, amount);\r\n\r\n\t\t\tthis._slideTable(child, amount, function(){\r\n\t\t\t\tchild.set(\"value\", month);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n});\r\n"]}