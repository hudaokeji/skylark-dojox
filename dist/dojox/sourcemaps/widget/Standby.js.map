{"version":3,"sources":["widget/Standby.js"],"names":["define","kernel","declare","array","event","has","dom","attr","construct","geometry","domStyle","window","baseWindow","baseFx","fx","_Widget","_TemplatedMixin","registry","experimental","image","require","toUrl","toString","imageText","text","centerIndicator","target","color","duration","zIndex","opacity","templateString","_underlayNode","_imageNode","_textNode","_centerNode","_displayed","_resizeCheck","_started","_parent","startup","args","this","w","byId","domNode","innerHTML","set","display","backgroundColor","connect","parentNode","body","appendChild","_ieFixNode","create","position","top","inherited","arguments","show","_anim","stop","_size","_disableOverflow","_fadeIn","hide","_fadeOut","clearInterval","isVisible","onShow","onHide","uninitialize","removeChild","_ie7zoom","dir","get","toLowerCase","scrollers","_scrollerWidths","curStyle","box","doc","getBox","x","l","y","t","cntrIndicator","getMarginBox","offsetTop","Math","floor","h","zi","ziUl","ziIn","parseInt","cNode","oldZi","newZi","pn","obh","obw","pnBox","scrollHeight","clientHeight","v","scrollWidth","clientWidth","vpTop","vpBottom","bTop","bBottom","vpLeft","vpRight","bLeft","bRight","visHeight","visWidth","width","height","left","styles","_cloneStyles","cntrIndicatorTop","cntrIndicatorLeft","self","setInterval","list","forEach","s","underlayNodeAnim","animateProperty","node","properties","start","end","imageAnim","onEnd","combine","play","_enableOverflow","_ignore","e","div","overflow","padding","margin","iDiv","b","getContentBox","a","_setTextAttr","_setColorAttr","c","_setImageTextAttr","_setImageAttr","url","_setCenterIndicatorAttr","indicator","_overflowDisabled","style","_oldOverflow","_oldBodyParentOverflow","setTimeout"],"mappings":"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","file":"../../widget/Standby.js","sourcesContent":["define([\"dojo/_base/kernel\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/_base/sniff\",\r\n\t\"dojo/dom\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/window\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/_base/fx\",\r\n\t\"dojo/fx\",\r\n\t\"dijit/_Widget\",\r\n\t\"dijit/_TemplatedMixin\",\r\n\t\"dijit/registry\"],\r\n\r\nfunction(kernel,\r\n\t\tdeclare,\r\n\t\tarray,\r\n\t\tevent,\r\n\t\thas,\r\n\t\tdom,\r\n\t\tattr,\r\n\t\tconstruct,\r\n\t\tgeometry,\r\n\t\tdomStyle,\r\n\t\twindow,\r\n\t\tbaseWindow,\r\n\t\tbaseFx,\r\n\t\tfx,\r\n\t\t_Widget,\r\n\t\t_TemplatedMixin,\r\n\t\tregistry) {\r\n\r\nkernel.experimental(\"dojox.widget.Standby\");\r\n\r\nreturn declare(\"dojox.widget.Standby\", [_Widget, _TemplatedMixin],{\r\n\t// summary:\r\n\t//\t\tA widget designed to act as a Standby/Busy/Disable/Blocking widget to indicate a\r\n\t//\t\tparticular DOM node is processing and cannot be clicked on at this time.\r\n\t//\t\tThis widget uses absolute positioning to apply the overlay and image.\r\n\r\n\t// image: String\r\n\t//\t\tA URL to an image to center within the blocking overlay.\r\n\t//\t\tThe default is a basic spinner.\r\n\timage: require.toUrl(\"dojox/widget/Standby/images/loading.gif\").toString(),\r\n\r\n\t// imageText: String\r\n\t//\t\tText to set on the ALT tag of the image.\r\n\t//\t\tThe default is 'Please wait...'\r\n\timageText: \"Please Wait...\", // TODO: i18n\r\n\r\n\t// text: String\r\n\t//\t\tText/HTML to display in the center of the overlay\r\n\t//\t\tThis is used if image center is disabled.\r\n\t//\t\tDefaults to 'Please Wait...'\r\n\ttext: \"Please wait...\",\r\n\r\n\t// centerIndicator: String\r\n\t//\t\tProperty to define if the image and its alt text should be used, or\r\n\t//\t\ta simple Text/HTML node should be used.  Allowable values are 'image'\r\n\t//\t\tand 'text'.\r\n\t//\t\tDefault is 'image'.\r\n\tcenterIndicator: \"image\",\r\n\t\r\n\t// target: DOMNode||DOMID(String)||WidgetID(String)\r\n\t//\t\tThe target to overlay when active.  Can be a widget id, a\r\n\t//\t\tdom id, or a direct node reference.\r\n\ttarget: \"\",\r\n\r\n\t// color:\tString\r\n\t//\t\tThe color to set the overlay.  Should be in #XXXXXX form.\r\n\t//\t\tDefault color for the translucent overlay is light gray.\r\n\tcolor: \"#C0C0C0\",\r\n\r\n\t// duration: Integer\r\n\t//\t\tInteger defining how long the show and hide effects should take in milliseconds.\r\n\t//\t\tDefaults to 500\r\n\tduration: 500,\r\n\t\r\n\t// zIndex: String\r\n\t//\t\tControl that lets you specify if the zIndex for the overlay\r\n\t//\t\tshould be auto-computed based off parent zIndex, or should be set\r\n\t//\t\tto a particular value.  This is useful when you want to overlay\r\n\t//\t\tthings in digit.Dialogs, you can specify a base zIndex to append from.\r\n\tzIndex: \"auto\",\r\n\t\r\n\t// opacity: float\r\n\t//\t\tThe opacity to make the overlay when it is displayed/faded in.\r\n\t//\t\tThe default is 0.75.  This does not affect the image opacity, only the\r\n\t//\t\toverlay.\r\n\topacity: 0.75,\t\r\n\t\r\n\t// templateString: [protected] String\r\n\t//\t\tThe template string defining out the basics of the widget.  No need for an external\r\n\t//\t\tfile.\r\n\ttemplateString:\r\n\t\t\"<div>\" +\r\n\t\t\t\"<div style=\\\"display: none; opacity: 0; z-index: 9999; \" +\r\n\t\t\t\t\"position: absolute; cursor:wait;\\\" dojoAttachPoint=\\\"_underlayNode\\\"></div>\" +\r\n\t\t\t\"<img src=\\\"${image}\\\" style=\\\"opacity: 0; display: none; z-index: -10000; \" +\r\n\t\t\t\t\"position: absolute; top: 0px; left: 0px; cursor:wait;\\\" \"+\r\n\t\t\t\t\"dojoAttachPoint=\\\"_imageNode\\\">\" +\r\n\t\t\t\"<div style=\\\"opacity: 0; display: none; z-index: -10000; position: absolute; \" +\r\n\t\t\t\t\"top: 0px;\\\" dojoAttachPoint=\\\"_textNode\\\"></div>\" +\r\n\t\t\"</div>\",\r\n\r\n\t// _underlayNode: [private] DOMNode\r\n\t//\t\tThe node that is the translucent underlay for the\r\n\t//\t\timage that blocks access to the target.\r\n\t_underlayNode: null,\r\n\r\n\t// _imageNode: [private] DOMNode\r\n\t//\t\tThe image node where we attach and define the image to display.\r\n\t_imageNode: null,\r\n\r\n\t// _textNode: [private] DOMNode\r\n\t//\t\tThe div to attach text/HTML in the overlay center item.\r\n\t_textNode: null,\r\n\r\n\t// _centerNode: [private] DOMNode\r\n\t//\t\tWhich node to use as the center node, the image or the text node.\r\n\t_centerNode: null,\r\n\r\n\t// _displayed: [private] Boolean\r\n\t//\t\tFlag to indicate if the overlay is displayed or not.\r\n\t_displayed: false,\r\n\r\n\t// _resizeCheck: [private] Object\r\n\t//\t\tHandle to interval function that checks the target for changes.\r\n\t_resizeCheck: null,\r\n\r\n\t// _started: [private] Boolean\r\n\t//\t\tTrap flag to ensure startup only processes once.\r\n\t_started: false,\r\n\r\n\t// _parent: [private] DOMNode\r\n\t//\t\tWrapping div for the widget, also used for IE 7 in dealing with the\r\n\t//\t\tzoom issue.\r\n\t_parent: null,\r\n\r\n\tstartup: function(args){\r\n\t\t// summary:\r\n\t\t//\t\tOver-ride of the basic widget startup function.\r\n\t\t//\t\tConfigures the target node and sets the image to use.\r\n\t\tif(!this._started){\r\n\t\t\tif(typeof this.target === \"string\"){\r\n\t\t\t\tvar w = registry.byId(this.target);\r\n\t\t\t\tthis.target = w ? w.domNode : dom.byId(this.target);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.text){\r\n\t\t\t\tthis._textNode.innerHTML = this.text;\r\n\t\t\t}\r\n\t\t\tif(this.centerIndicator === \"image\"){\r\n\t\t\t\tthis._centerNode = this._imageNode;\r\n\t\t\t\tattr.set(this._imageNode, \"src\", this.image);\r\n\t\t\t\tattr.set(this._imageNode, \"alt\", this.imageText);\r\n\t\t\t}else{\r\n\t\t\t\tthis._centerNode = this._textNode;\r\n\t\t\t}\r\n\t\t\tdomStyle.set(this._underlayNode, {\r\n\t\t\t\tdisplay: \"none\",\r\n\t\t\t\tbackgroundColor: this.color\r\n\t\t\t});\r\n\t\t\tdomStyle.set(this._centerNode, \"display\", \"none\");\r\n\t\t\tthis.connect(this._underlayNode, \"onclick\", \"_ignore\");\r\n\r\n\t\t\t//Last thing to do is move the widgets parent, if any, to the current document body.\r\n\t\t\t//Avoids having to deal with parent relative/absolute mess.  Otherwise positioning\r\n\t\t\t//tends to go goofy.\r\n\t\t\tif(this.domNode.parentNode && this.domNode.parentNode != baseWindow.body()){\r\n\t\t\t\tbaseWindow.body().appendChild(this.domNode);\r\n\t\t\t}\r\n\r\n\t\t\t//IE 7 has a horrible bug with zoom, so we have to create this node\r\n\t\t\t//to cross-check later.  Sigh.\r\n\t\t\tif(has(\"ie\") == 7){\r\n\t\t\t\tthis._ieFixNode = construct.create(\"div\");\r\n\t\t\t\tdomStyle.set(this._ieFixNode, {\r\n\t\t\t\t\topacity: \"0\",\r\n\t\t\t\t\tzIndex: \"-1000\",\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\ttop: \"-1000px\"\r\n\t\t\t\t});\r\n\t\t\t\tbaseWindow.body().appendChild(this._ieFixNode);\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tshow: function(){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to display the blocking overlay and busy/status icon or text.\r\n\t\tif(!this._displayed){\r\n\t\t\tif(this._anim){\r\n\t\t\t\tthis._anim.stop();\r\n\t\t\t\tdelete this._anim;\r\n\t\t\t}\r\n\t\t\tthis._displayed = true;\r\n\t\t\tthis._size();\r\n\t\t\tthis._disableOverflow();\r\n\t\t\tthis._fadeIn();\r\n\t\t}\r\n\t},\r\n\r\n\thide: function(){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to hide the blocking overlay and status icon or text.\r\n\t\tif(this._displayed){\r\n\t\t\tif(this._anim){\r\n\t\t\t\tthis._anim.stop();\r\n\t\t\t\tdelete this._anim;\r\n\t\t\t}\r\n\t\t\tthis._size();\r\n\t\t\tthis._fadeOut();\r\n\t\t\tthis._displayed = false;\r\n\t\t\tif(this._resizeCheck !== null){\r\n\t\t\t\tclearInterval(this._resizeCheck);\r\n\t\t\t\tthis._resizeCheck = null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\t// summary:\r\n\t\t//\t\tHelper function so you can test if the widget is already visible or not.\r\n\t\t// returns:\r\n\t\t//\t\tboolean indicating if the widget is in 'show' state or not.\r\n\t\treturn this._displayed; // boolean\r\n\t},\r\n\r\n\tonShow: function(){\r\n\t\t// summary:\r\n\t\t//\t\tEvent that fires when the display of the Standby completes.\r\n\t},\r\n\r\n\tonHide: function(){\r\n\t\t// summary:\r\n\t\t//\t\tEvent that fires when the display of the Standby completes.\r\n\t},\r\n\r\n\tuninitialize: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOver-ride to hide the widget, which clears intervals, before cleanup.\r\n\t\tthis._displayed = false;\r\n\t\tif(this._resizeCheck){\r\n\t\t\tclearInterval(this._resizeCheck);\r\n\t\t}\r\n\t\tdomStyle.set(this._centerNode, \"display\", \"none\");\r\n\t\tdomStyle.set(this._underlayNode, \"display\", \"none\");\r\n\t\tif(has(\"ie\") == 7 && this._ieFixNode){\r\n\t\t\tbaseWindow.body().removeChild(this._ieFixNode);\r\n\t\t\tdelete this._ieFixNode;\r\n\t\t}\r\n\t\tif(this._anim){\r\n\t\t\tthis._anim.stop();\r\n\t\t\tdelete this._anim;\r\n\t\t}\r\n\t\tthis.target = null;\r\n\t\tthis._imageNode = null;\r\n\t\tthis._textNode = null;\r\n\t\tthis._centerNode = null;\r\n\t\tthis.inherited(arguments);\r\n\t},\r\n\r\n\t_size: function(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function that handles resizing the overlay and\r\n\t\t//\t\tcentering of the image on window resizing.\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tif(this._displayed){\r\n\t\t\tvar dir = attr.get(baseWindow.body(), \"dir\");\r\n\t\t\tif(dir){dir = dir.toLowerCase();}\r\n\t\t\tvar _ie7zoom;\r\n\t\t\tvar scrollers = this._scrollerWidths();\r\n\r\n\t\t\tvar target = this.target;\r\n\r\n\t\t\t//Show the image and make sure the zIndex is set high.\r\n\t\t\tvar curStyle = domStyle.get(this._centerNode, \"display\");\r\n\t\t\tdomStyle.set(this._centerNode, \"display\", \"block\");\r\n\t\t\tvar box = geometry.position(target, true);\r\n\t\t\tif(target === baseWindow.body() || target === baseWindow.doc){\r\n\t\t\t\t// Target is the whole doc, so scale to viewport.\r\n\t\t\t\tbox = window.getBox();\r\n\t\t\t\tbox.x = box.l;\r\n\t\t\t\tbox.y = box.t;\r\n\t\t\t}\r\n\r\n\t\t\tvar cntrIndicator = geometry.getMarginBox(this._centerNode);\r\n\t\t\tdomStyle.set(this._centerNode, \"display\", curStyle);\r\n\r\n\t\t\t//IE has a horrible zoom bug.  So, we have to try and account for\r\n\t\t\t//it and fix up the scaling.\r\n\t\t\tif(this._ieFixNode){\r\n\t\t\t\t_ie7zoom = -this._ieFixNode.offsetTop / 1000;\r\n\t\t\t\tbox.x = Math.floor((box.x + 0.9) / _ie7zoom);\r\n\t\t\t\tbox.y = Math.floor((box.y + 0.9) / _ie7zoom);\r\n\t\t\t\tbox.w = Math.floor((box.w + 0.9) / _ie7zoom);\r\n\t\t\t\tbox.h = Math.floor((box.h + 0.9) / _ie7zoom);\r\n\t\t\t}\r\n\r\n\t\t\t//Figure out how to zIndex this thing over the target.\r\n\t\t\tvar zi = domStyle.get(target, \"zIndex\");\r\n\t\t\tvar ziUl = zi;\r\n\t\t\tvar ziIn = zi;\r\n\r\n\t\t\tif(this.zIndex === \"auto\"){\r\n\t\t\t\tif(zi != \"auto\"){\r\n\t\t\t\t\tziUl = parseInt(ziUl, 10) + 1;\r\n\t\t\t\t\tziIn = parseInt(ziIn, 10) + 2;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//We need to search up the chain to see if there\r\n\t\t\t\t\t//are any parent zIndexs to overlay.\r\n\t\t\t\t\tvar cNode = target;\r\n\t\t\t\t\tif(cNode && cNode !== baseWindow.body() && cNode !== baseWindow.doc){\r\n\t\t\t\t\t\tcNode = target.parentNode;\r\n\t\t\t\t\t\tvar oldZi = -100000;\r\n\t\t\t\t\t\twhile(cNode && cNode !== baseWindow.body()){\r\n\t\t\t\t\t\t\tzi = domStyle.get(cNode, \"zIndex\");\r\n\t\t\t\t\t\t\tif(!zi || zi === \"auto\"){\r\n\t\t\t\t\t\t\t\tcNode = cNode.parentNode;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar newZi = parseInt(zi, 10);\r\n\t\t\t\t\t\t\t\tif(oldZi < newZi){\r\n\t\t\t\t\t\t\t\t\toldZi = newZi;\r\n\t\t\t\t\t\t\t\t\tziUl = newZi + 1;\r\n\t\t\t\t\t\t\t\t\tziIn = newZi + 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// Keep looking until we run out, we want the highest zIndex.\r\n\t\t\t\t\t\t\t\tcNode = cNode.parentNode;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tziUl = parseInt(this.zIndex, 10) + 1;\r\n\t\t\t\tziIn = parseInt(this.zIndex, 10) + 2;\r\n\t\t\t}\r\n\r\n\t\t\tdomStyle.set(this._centerNode, \"zIndex\", ziIn);\r\n\t\t\tdomStyle.set(this._underlayNode, \"zIndex\", ziUl);\r\n\r\n\r\n\t\t\tvar pn = target.parentNode;\r\n\t\t\tif(pn && pn !== baseWindow.body() &&\r\n\t\t\t\ttarget !== baseWindow.body() &&\r\n\t\t\t\ttarget !== baseWindow.doc){\r\n\t\t\t\t\r\n\t\t\t\t// If the parent is the body tag itself,\r\n\t\t\t\t// we can avoid all this, the body takes\r\n\t\t\t\t// care of overflow for me.  Besides, browser\r\n\t\t\t\t// weirdness with height and width on body causes\r\n\t\t\t\t// problems with this sort of intersect testing\r\n\t\t\t\t// anyway.\r\n\t\t\t\tvar obh = box.h;\r\n\t\t\t\tvar obw = box.w;\r\n\t\t\t\tvar pnBox = geometry.position(pn, true);\r\n\r\n\t\t\t\t//More IE zoom corrections.  Grr.\r\n\t\t\t\tif(this._ieFixNode){\r\n\t\t\t\t\t_ie7zoom = -this._ieFixNode.offsetTop / 1000;\r\n\t\t\t\t\tpnBox.x = Math.floor((pnBox.x + 0.9) / _ie7zoom);\r\n\t\t\t\t\tpnBox.y = Math.floor((pnBox.y + 0.9) / _ie7zoom);\r\n\t\t\t\t\tpnBox.w = Math.floor((pnBox.w + 0.9) / _ie7zoom);\r\n\t\t\t\t\tpnBox.h = Math.floor((pnBox.h + 0.9) / _ie7zoom);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//Shift the parent width/height a bit if scollers are present.\r\n\t\t\t\tpnBox.w -= pn.scrollHeight > pn.clientHeight &&\r\n\t\t\t\t\tpn.clientHeight > 0 ? scrollers.v: 0;\r\n\t\t\t\tpnBox.h -= pn.scrollWidth > pn.clientWidth &&\r\n\t\t\t\t\tpn.clientWidth > 0 ? scrollers.h: 0;\r\n\r\n\t\t\t\t//RTL requires a bit of massaging in some cases\r\n\t\t\t\t//(and differently depending on browser, ugh!)\r\n\t\t\t\t//WebKit and others still need work.\r\n\t\t\t\tif(dir === \"rtl\"){\r\n\t\t\t\t\tif(has(\"opera\")){\r\n\t\t\t\t\t\tbox.x += pn.scrollHeight > pn.clientHeight &&\r\n\t\t\t\t\t\t\tpn.clientHeight > 0 ? scrollers.v: 0;\r\n\t\t\t\t\t\tpnBox.x += pn.scrollHeight > pn.clientHeight &&\r\n\t\t\t\t\t\t\tpn.clientHeight > 0 ? scrollers.v: 0;\r\n\t\t\t\t\t}else if(has(\"ie\")){\r\n\t\t\t\t\t\tpnBox.x += pn.scrollHeight > pn.clientHeight &&\r\n\t\t\t\t\t\t\tpn.clientHeight > 0 ? scrollers.v: 0;\r\n\t\t\t\t\t}else if(has(\"webkit\")){\r\n\t\t\t\t\t\t//TODO:  FIX THIS!\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Figure out if we need to adjust the overlay to fit a viewable\r\n\t\t\t\t//area, then resize it, we saved the original height/width above.\r\n\t\t\t\t//This is causing issues on IE.  Argh!\r\n\t\t\t\tif(pnBox.w < box.w){\r\n\t\t\t\t\t//Scale down the width if necessary.\r\n\t\t\t\t\tbox.w = box.w - pnBox.w;\r\n\t\t\t\t}\r\n\t\t\t\tif(pnBox.h < box.h){\r\n\t\t\t\t\t//Scale down the width if necessary.\r\n\t\t\t\t\tbox.h = box.h - pnBox.h;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Look at the y positions and see if we intersect with the\r\n\t\t\t\t//viewport borders.  Will have to do computations off it.\r\n\t\t\t\tvar vpTop = pnBox.y;\r\n\t\t\t\tvar vpBottom = pnBox.y + pnBox.h;\r\n\t\t\t\tvar bTop = box.y;\r\n\t\t\t\tvar bBottom = box.y + obh;\r\n\t\t\t\tvar vpLeft = pnBox.x;\r\n\t\t\t\tvar vpRight = pnBox.x + pnBox.w;\r\n\t\t\t\tvar bLeft = box.x;\r\n\t\t\t\tvar bRight = box.x + obw;\r\n\t\t\t\tvar delta;\r\n\t\t\t\t//Adjust the height now\r\n\t\t\t\tif(bBottom > vpTop &&\r\n\t\t\t\t\tbTop < vpTop){\r\n\t\t\t\t\tbox.y = pnBox.y;\r\n\t\t\t\t\t//intersecting top, need to do some shifting.\r\n\t\t\t\t\tdelta = vpTop - bTop;\r\n\t\t\t\t\tvar visHeight = obh - delta;\r\n\t\t\t\t\t//If the visible height < viewport height,\r\n\t\t\t\t\t//We need to shift it.\r\n\t\t\t\t\tif(visHeight < pnBox.h){\r\n\t\t\t\t\t\tbox.h = visHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//Deal with horizontal scrollbars if necessary.\r\n\t\t\t\t\t\tbox.h -= 2*(pn.scrollWidth > pn.clientWidth &&\r\n\t\t\t\t\t\t\tpn.clientWidth > 0? scrollers.h: 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(bTop < vpBottom && bBottom > vpBottom){\r\n\t\t\t\t\t//Intersecting bottom, just figure out how much\r\n\t\t\t\t\t//overlay to show.\r\n\t\t\t\t\tbox.h = vpBottom - bTop;\r\n\t\t\t\t}else if(bBottom <= vpTop || bTop >= vpBottom){\r\n\t\t\t\t\t//Outside view, hide it.\r\n\t\t\t\t\tbox.h = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//adjust width\r\n\t\t\t\tif(bRight > vpLeft && bLeft < vpLeft){\r\n\t\t\t\t\tbox.x = pnBox.x;\r\n\t\t\t\t\t//intersecting left, need to do some shifting.\r\n\t\t\t\t\tdelta = vpLeft - bLeft;\r\n\t\t\t\t\tvar visWidth = obw - delta;\r\n\t\t\t\t\t//If the visible width < viewport width,\r\n\t\t\t\t\t//We need to shift it.\r\n\t\t\t\t\tif(visWidth < pnBox.w){\r\n\t\t\t\t\t\tbox.w = visWidth;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//Deal with horizontal scrollbars if necessary.\r\n\t\t\t\t\t\tbox.w -= 2*(pn.scrollHeight > pn.clientHeight &&\r\n\t\t\t\t\t\t\tpn.clientHeight > 0? scrollers.w:0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(bLeft < vpRight && bRight > vpRight){\r\n\t\t\t\t\t//Intersecting right, just figure out how much\r\n\t\t\t\t\t//overlay to show.\r\n\t\t\t\t\tbox.w = vpRight - bLeft;\r\n\t\t\t\t}else if(bRight <= vpLeft || bLeft >= vpRight){\r\n\t\t\t\t\t//Outside view, hide it.\r\n\t\t\t\t\tbox.w = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(box.h > 0 && box.w > 0){\r\n\t\t\t\t//Set position and size of the blocking div overlay.\r\n\t\t\t\tdomStyle.set(this._underlayNode, {\r\n\t\t\t\t\tdisplay: \"block\",\r\n\t\t\t\t\twidth: box.w + \"px\",\r\n\t\t\t\t\theight: box.h + \"px\",\r\n\t\t\t\t\ttop: box.y + \"px\",\r\n\t\t\t\t\tleft: box.x + \"px\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar styles = [\"borderRadius\", \"borderTopLeftRadius\",\r\n\t\t\t\t\t\"borderTopRightRadius\",\"borderBottomLeftRadius\",\r\n\t\t\t\t\t\"borderBottomRightRadius\"];\r\n\t\t\t\tthis._cloneStyles(styles);\r\n\t\t\t\tif(!has(\"ie\")){\r\n\t\t\t\t\t//Browser specific styles to try and clone if non-IE.\r\n\t\t\t\t\tstyles = [\"MozBorderRadius\", \"MozBorderRadiusTopleft\",\r\n\t\t\t\t\t\t\"MozBorderRadiusTopright\",\"MozBorderRadiusBottomleft\",\r\n\t\t\t\t\t\t\"MozBorderRadiusBottomright\",\"WebkitBorderRadius\",\r\n\t\t\t\t\t\t\"WebkitBorderTopLeftRadius\", \"WebkitBorderTopRightRadius\",\r\n\t\t\t\t\t\t\"WebkitBorderBottomLeftRadius\",\"WebkitBorderBottomRightRadius\"\r\n\t\t\t\t\t];\r\n\t\t\t\t\tthis._cloneStyles(styles, this);\r\n\t\t\t\t}\r\n\t\t\t\tvar cntrIndicatorTop = (box.h/2) - (cntrIndicator.h/2);\r\n\t\t\t\tvar cntrIndicatorLeft = (box.w/2) - (cntrIndicator.w/2);\r\n\t\t\t\t//Only show the image if there is height and width room.\r\n\t\t\t\tif(box.h >= cntrIndicator.h && box.w >= cntrIndicator.w){\r\n\t\t\t\t\tdomStyle.set(this._centerNode, {\r\n\t\t\t\t\t\ttop: (cntrIndicatorTop + box.y) + \"px\",\r\n\t\t\t\t\t\tleft: (cntrIndicatorLeft + box.x) + \"px\",\r\n\t\t\t\t\t\tdisplay: \"block\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdomStyle.set(this._centerNode, \"display\", \"none\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//Target has no size, display nothing on it!\r\n\t\t\t\tdomStyle.set(this._underlayNode, \"display\", \"none\");\r\n\t\t\t\tdomStyle.set(this._centerNode, \"display\", \"none\");\r\n\t\t\t}\r\n\t\t\tif(this._resizeCheck === null){\r\n\t\t\t\t//Set an interval timer that checks the target size and scales as needed.\r\n\t\t\t\t//Checking every 10th of a second seems to generate a fairly smooth update.\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tthis._resizeCheck = setInterval(function(){self._size();}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_cloneStyles: function(list){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function to clone a set of styles from the target to\r\n\t\t//\t\tthe underlay.\r\n\t\t// list: Array\r\n\t\t//\t\tAn array of style names to clone.\r\n\t\t//\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tarray.forEach(list, function(s){\r\n\t\t\tdomStyle.set(this._underlayNode, s, domStyle.get(this.target, s));\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_fadeIn: function(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function that does the opacity style fade in animation.\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tvar self = this;\r\n\t\tvar underlayNodeAnim = baseFx.animateProperty({\r\n\t\t\tduration: self.duration,\r\n\t\t\tnode: self._underlayNode,\r\n\t\t\tproperties: {opacity: {start: 0, end: self.opacity}}\r\n\t\t});\r\n\t\tvar imageAnim = baseFx.animateProperty({\r\n\t\t\tduration: self.duration,\r\n\t\t\tnode: self._centerNode,\r\n\t\t\tproperties: {opacity: {start: 0, end: 1}},\r\n\t\t\tonEnd: function(){\r\n\t\t\t\tself.onShow();\r\n\t\t\t\tdelete self._anim;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._anim = fx.combine([underlayNodeAnim,imageAnim]);\r\n\t\tthis._anim.play();\r\n\t},\r\n\r\n\t_fadeOut: function(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function that does the opacity style fade out animation.\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tvar self = this;\r\n\t\tvar underlayNodeAnim = baseFx.animateProperty({\r\n\t\t\tduration: self.duration,\r\n\t\t\tnode: self._underlayNode,\r\n\t\t\tproperties: {opacity: {start: self.opacity, end: 0}},\r\n\t\t\tonEnd: function(){\r\n\t\t\t\tdomStyle.set(this.node,{\"display\":\"none\", \"zIndex\": \"-1000\"});\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar imageAnim = baseFx.animateProperty({\r\n\t\t\tduration: self.duration,\r\n\t\t\tnode: self._centerNode,\r\n\t\t\tproperties: {opacity: {start: 1, end: 0}},\r\n\t\t\tonEnd: function(){\r\n\t\t\t\tdomStyle.set(this.node,{\"display\":\"none\", \"zIndex\": \"-1000\"});\r\n\t\t\t\tself.onHide();\r\n\t\t\t\tself._enableOverflow();\r\n\t\t\t\tdelete self._anim;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._anim = fx.combine([underlayNodeAnim,imageAnim]);\r\n\t\tthis._anim.play();\r\n\t},\r\n\r\n\t_ignore: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to ignore events that occur on the overlay.\r\n\t\t// event: Event\r\n\t\t//\t\tThe event to halt\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tif(e){\r\n\t\t\tevent.stop(e);\r\n\t\t}\r\n\t},\r\n\r\n\t_scrollerWidths: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function will calculate the size of the vertical and\r\n\t\t//\t\thorizontaol scrollbars.\r\n\t\t// returns:\r\n\t\t//\t\tObject of form: {v: Number, h: Number} where v is vertical scrollbar width\r\n\t\t//\t\tand h is horizontal scrollbar width.\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\t\tvar div = construct.create(\"div\");\r\n\t\tdomStyle.set(div, {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\topacity: 0,\r\n\t\t\toverflow: \"hidden\",\r\n\t\t\twidth: \"50px\",\r\n\t\t\theight: \"50px\",\r\n\t\t\tzIndex: \"-100\",\r\n\t\t\ttop: \"-200px\",\r\n\t\t\tpadding: \"0px\",\r\n\t\t\tmargin: \"0px\"\r\n\t\t});\r\n\t\tvar iDiv = construct.create(\"div\");\r\n\t\tdomStyle.set(iDiv, {\r\n\t\t\twidth: \"200px\",\r\n\t\t\theight: \"10px\"\r\n\t\t});\r\n\t\tdiv.appendChild(iDiv);\r\n\t\tbaseWindow.body().appendChild(div);\r\n\r\n\t\t//Figure out content size before and after\r\n\t\t//scrollbars are there, then just subtract to\r\n\t\t//get width.\r\n\t\tvar b = geometry.getContentBox(div);\r\n\t\tdomStyle.set(div, \"overflow\", \"scroll\");\r\n\t\tvar a = geometry.getContentBox(div);\r\n\t\tbaseWindow.body().removeChild(div);\r\n\t\treturn { v: b.w - a.w, h: b.h - a.h };\r\n\t},\r\n\r\n\t/* The following are functions that tie into _Widget.attr() */\r\n\r\n\t_setTextAttr: function(text){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to allow widget.attr to set the text displayed in center\r\n\t\t//\t\tif using text display.\r\n\t\t// text: String\r\n\t\t//\t\tThe text to set.\r\n\t\tthis._textNode.innerHTML = text;\r\n\t\tthis.text = text;\r\n\t},\r\n\r\n\t_setColorAttr: function(c){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to allow widget.attr to set the color used for the translucent\r\n\t\t//\t\tdiv overlay.\r\n\t\t// c: String\r\n\t\t//\t\tThe color to set the background underlay to in #XXXXXX format..\r\n\t\tdomStyle.set(this._underlayNode, \"backgroundColor\", c);\r\n\t\tthis.color = c;\r\n\t},\r\n\r\n\t_setImageTextAttr: function(text){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to allow widget.attr to set the ALT text text displayed for\r\n\t\t//\t\tthe image (if using image center display).\r\n\t\t// text: String\r\n\t\t//\t\tThe text to set.\r\n\t\tattr.set(this._imageNode, \"alt\", text);\r\n\t\tthis.imageText = text;\r\n\t},\r\n\r\n\t_setImageAttr: function(url){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to allow widget.attr to set the url source for the center image\r\n\t\t// text: String\r\n\t\t//\t\tThe url to set for the image.\r\n\t\tattr.set(this._imageNode, \"src\", url);\r\n\t\tthis.image = url;\r\n\t},\r\n\r\n\t_setCenterIndicatorAttr: function(indicator){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to allow widget.attr to set the node used for the center indicator,\r\n\t\t//\t\teither the image or the text.\r\n\t\t// indicator: String\r\n\t\t//\t\tThe indicator to use, either 'image' or 'text'.\r\n\t\tthis.centerIndicator = indicator;\r\n\t\tif(indicator === \"image\"){\r\n\t\t\tthis._centerNode = this._imageNode;\r\n\t\t\tdomStyle.set(this._textNode, \"display\", \"none\");\r\n\t\t}else{\r\n\t\t\tthis._centerNode = this._textNode;\r\n\t\t\tdomStyle.set(this._imageNode, \"display\", \"none\");\r\n\t\t}\r\n\t},\r\n\r\n\t_disableOverflow: function(){\r\n\t\t // summary:\r\n\t\t //\t\tFunction to disable scrollbars on the body.  Only used if the overlay\r\n\t\t //\t\ttargets the body or the document.\r\n\t\t if(this.target === baseWindow.body() || this.target === baseWindow.doc){\r\n\t\t\t // Store the overflow state we have to restore later.\r\n\t\t\t // IE had issues, so have to check that it's defined.  Ugh.\r\n\t\t\t this._overflowDisabled = true;\r\n\t\t\t var body = baseWindow.body();\r\n\t\t\t if(body.style && body.style.overflow){\r\n\t\t\t\t this._oldOverflow = domStyle.get(body, \"overflow\");\r\n\t\t\t }else{\r\n\t\t\t\t this._oldOverflow = \"\";\r\n\t\t\t }\r\n\t\t\t if(has(\"ie\") && !has(\"quirks\")){\r\n\t\t\t\t // IE will put scrollbars in anyway, html (parent of body)\r\n\t\t\t\t // also controls them in standards mode, so we have to\r\n\t\t\t\t // remove them, argh.\r\n\t\t\t\t if(body.parentNode &&\r\n\t\t\t\t\tbody.parentNode.style &&\r\n\t\t\t\t\tbody.parentNode.style.overflow){\r\n\t\t\t\t\t this._oldBodyParentOverflow = body.parentNode.style.overflow;\r\n\t\t\t\t }else{\r\n\t\t\t\t\t try{\r\n\t\t\t\t\t\tthis._oldBodyParentOverflow = domStyle.get(body.parentNode, \"overflow\");\r\n\t\t\t\t\t }catch(e){\r\n\t\t\t\t\t\t this._oldBodyParentOverflow = \"scroll\";\r\n\t\t\t\t\t }\r\n\t\t\t\t }\r\n\t\t\t\t domStyle.set(body.parentNode, \"overflow\", \"hidden\");\r\n\t\t\t }\r\n\t\t\t domStyle.set(body, \"overflow\", \"hidden\");\r\n\t\t }\r\n\t},\r\n\r\n\t_enableOverflow: function(){\r\n\t\t // summary:\r\n\t\t //\t\tFunction to restore scrollbars on the body.  Only used if the overlay\r\n\t\t //\t\ttargets the body or the document.\r\n\t\t if(this._overflowDisabled){\r\n\t\t\tdelete this._overflowDisabled;\r\n\t\t\tvar body = baseWindow.body();\r\n\t\t\t// Restore all the overflow.\r\n\t\t\tif(has(\"ie\") && !has(\"quirks\")){\r\n\t\t\t\tbody.parentNode.style.overflow = this._oldBodyParentOverflow;\r\n\t\t\t\tdelete this._oldBodyParentOverflow;\r\n\t\t\t}\r\n\t\t\tdomStyle.set(body, \"overflow\", this._oldOverflow);\r\n\t\t\tif(has(\"webkit\")){\r\n\t\t\t\t//Gotta poke WebKit, or scrollers don't come back. :-(\r\n\t\t\t\tvar div = construct.create(\"div\", { style: {\r\n\t\t\t\t\t\theight: \"2px\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbody.appendChild(div);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tbody.removeChild(div);\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t\tdelete this._oldOverflow;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n});\r\n"]}