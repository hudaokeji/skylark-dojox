{"version":3,"sources":["widget/tests/test_PortletInGridContainer.js"],"names":["createProgrammaticPortlet","portlet","dojox","widget","FeedPortlet","id","dndType","title","dojo","create","innerHTML","settings","PortletFeedSettings","urls","url","label","addChild","dijit","byId","addService","provide","require","addOnLoad","parser","parse","chart","window","charting","Chart2D","setTheme","themes","PlotKit","orange","addAxis","fixLower","natural","stroke","majorTick","length","minorTick","vertical","min","max","majorTickStep","minorTickStep","addPlot","type","addSeries","leftBottom","hAxis","vAxis","plot","hMinorLines","render","show","setInterval","w","domNode","body","removeChild","clearInterval","scaleX","scaleY","offsetX","offsetY","connect","value","console","log","setWindow","_init","node","e","x","clientX","y","clientY","ox","oy","stopEvent","dx","dy","count","loadFeed","nodeId","emptyMsg","request","query","outNode","testStore","data","GoogleFeedStore","onBegin","numItems","onComplete","items","addClass","ul","forEach","item","li","getValue","showTooltip","hideTooltip","accordion","layout","AccordionContainer","appendChild","summary","substring","contentPane","ContentPane","content","style","startup","getEnclosingWidget","fetch","layoutHtmlTable","name","field","width","text_explode_2","height","originalText","properties","words","distance","duration","random","onEnd","currentAnimation","fx","text","converge","mixin","undefined","play","explode"],"mappings":"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","file":"../../../widget/tests/test_PortletInGridContainer.js","sourcesContent":["dojo.provide(\"dojox.widget.tests.test_PortletInGridContainer\");\r\ndojo.require(\"dijit.dijit\");\r\ndojo.require(\"dojo.date.locale\");\r\ndojo.require(\"dojo.cookie\");\r\ndojo.require(\"dijit.form.CheckBox\");\r\ndojo.require(\"dijit.form.TextBox\");\r\ndojo.require(\"dijit.form.Slider\");\r\ndojo.require(\"dijit.layout.TabContainer\");\r\ndojo.require(\"dijit.layout.AccordionContainer\");\r\ndojo.require(\"dijit.layout.BorderContainer\");\r\ndojo.require(\"dijit.Tooltip\");\r\ndojo.require(\"dijit.Tree\");\r\ndojo.require(\"dijit.tree.ForestStoreModel\");\r\ndojo.require(\"dojox.image.Gallery\");\r\ndojo.require(\"dojox.widget.PlaceholderMenuItem\");\r\ndojo.require(\"dojox.data.FileStore\");\r\ndojo.require(\"dojox.charting.widget.Chart2D\");\r\ndojo.require(\"dojox.charting.themes.Grasslands\");\r\ndojo.require(\"dojox.charting.themes.PlotKit.orange\");\r\ndojo.require(\"dojox.widget.Calendar\");\r\ndojo.require(\"dojox.widget.Portlet\");\r\ndojo.require(\"dojox.layout.GridContainer\");\r\ndojo.require(\"dojox.layout.TableContainer\");\r\ndojo.require(\"dojox.grid.DataGrid\");\r\ndojo.require(\"dojox.data.HtmlStore\");\r\ndojo.require(\"dojox.data.FlickrRestStore\");\r\ndojo.require(\"dojox.fx.text\");\r\ndojo.require(\"dojox.layout.ExpandoPane\");\r\ndojo.require(\"dojox.charting.Chart3D\");\r\ndojo.require(\"dojox.charting.action2d.Highlight\");\r\ndojo.require(\"dojox.charting.action2d.MoveSlice\");\r\ndojo.require(\"dojox.charting.action2d.Tooltip\");\r\n\r\n//This must be included on the page for FeedPortlets that\r\n//load local feeds.\r\ndojo.require(\"dojox.data.AtomReadStore\");\r\n\r\ndojo.require(\"dojo.parser\");\r\n\r\ndojo.addOnLoad(function(){\r\n\tdojo.parser.parse();\r\n\r\n\tvar chart = window.chart = new dojox.charting.Chart2D(\"zoomer\");\r\n\tchart.setTheme(dojox.charting.themes.PlotKit.orange);\r\n\tchart.addAxis(\"x\", {fixLower: \"minor\", natural: true, stroke: \"grey\",\r\n\t\tmajorTick: {stroke: \"black\", length: 4}, minorTick: {stroke: \"gray\", length: 2}});\r\n\tchart.addAxis(\"y\", {vertical: true, min: 0, max: 30, majorTickStep: 5, minorTickStep: 1, stroke: \"grey\",\r\n\t\tmajorTick: {stroke: \"black\", length: 4}, minorTick: {stroke: \"gray\", length: 2}});\r\n\tchart.addPlot(\"default\", {type: \"Areas\"});\r\n\tchart.addSeries(\"Series A\", [0, 25, 5, 20, 10, 15, 5, 20, 0, 25]);\r\n\tchart.addAxis(\"x2\", {fixLower: \"minor\", natural: true, leftBottom: false, stroke: \"grey\",\r\n\t\tmajorTick: {stroke: \"black\", length: 4}, minorTick: {stroke: \"gray\", length: 2}});\r\n\tchart.addAxis(\"y2\", {vertical: true, min: 0, max: 20, leftBottom: false, stroke: \"grey\",\r\n\t\tmajorTick: {stroke: \"black\", length: 4}, minorTick: {stroke: \"gray\", length: 2}});\r\n\tchart.addPlot(\"plot2\", {type: \"Areas\", hAxis: \"x2\", vAxis: \"y2\"});\r\n\tchart.addSeries(\"Series B\", [15, 0, 15, 0, 15, 0, 15, 0, 15, 0, 15, 0, 15, 0, 15, 0, 15], {plot: \"plot2\"});\r\n\tchart.addPlot(\"grid\", {type: \"Grid\", hMinorLines: true});\r\n\tchart.render();\r\n\r\n\tvar show = setInterval(function(){\r\n\t\tvar w = dijit.byId(\"gridContainer\");\r\n\t\tif (w && w.domNode) {\r\n\t\t\tdojo.body().removeChild(dojo.byId(\"masker\"));\r\n\t\t\tclearInterval(show);\r\n\t\t}\r\n\t}, 500);\r\n\r\n\r\n\tvar scaleX = 1, scaleY = 1, offsetX = 0, offsetY = 0;\r\n\tdojo.connect(dijit.byId(\"scaleXSlider\"), \"onChange\", function(value){\r\n\t\tscaleX = value;\r\n\t\tconsole.log(\"calling update\");\r\n\t\tupdate();\r\n\t});\r\n\r\n\tfunction update() {\r\n\t\tchart.setWindow(scaleX, scaleY, offsetX, offsetY).render();\r\n\t}\r\n\r\n\tvar _init = null;\r\n\tvar onMouseDown = function(e){\r\n\t\t_init = {x: e.clientX, y: e.clientY, ox: offsetX, oy: offsetY};\r\n\t\tdojo.stopEvent(e);\r\n\t};\r\n\r\n\tvar onMouseUp = function(e){\r\n\t\tif(_init){\r\n\t\t\t_init = null;\r\n\t\t\tdojo.stopEvent(e);\r\n\t\t}\r\n\t};\r\n\r\n\tvar onMouseMove = function(e){\r\n\t\tif(_init){\r\n\t\t\tvar dx = e.clientX - _init.x,\r\n\t\t\t\tdy = e.clientY - _init.y;\r\n\t\t\toffsetX = _init.ox - dx;\r\n\t\t\toffsetY = _init.oy + dy;\r\n\t\t\tchart.setWindow(scaleX, scaleY, offsetX, offsetY).render();\r\n\t\t\tdojo.stopEvent(e);\r\n\t\t}\r\n\t};\r\n\r\n\tdojo.connect(chart.node, \"onmousedown\", onMouseDown);\r\n\tdojo.connect(chart.node, \"onmousemove\", onMouseMove);\r\n\tdojo.connect(chart.node, \"onmouseup\",   onMouseUp);\r\n\r\n\r\n\tcreateProgrammaticPortlet();\r\n});\r\n\r\nfunction createProgrammaticPortlet() {\r\n\tvar portlet = new dojox.widget.FeedPortlet({\r\n\t\tid: \"ProgrammaticPortlet\",\r\n\t\tdndType: \"Portlet\",\r\n\t\ttitle: \"Programmatic FeedPortlet with multiple feeds\"\r\n\t}, dojo.create(\"div\", {\r\n\t\tinnerHTML: \"This portlet was created programmatically, and has mulitple feeds to select from.\"\r\n\t\t\t\t+ \" Click the settings icon in the title bar to choose another feed.\"\r\n\t}));\r\n\tvar settings = new dojox.widget.PortletFeedSettings({\r\n\t\tid: \"ProgrammaticPortletSettings\",\r\n\t\turls: [\r\n\t\t\t{\r\n\t\t\t\turl: \"http://news.google.com/news?hl=en&topic=t&output=atom\",\r\n\t\t\t\tlabel: \"Google News\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\turl: \"http://shaneosullivan.wordpress.com/category/dojo/feed/\",\r\n\t\t\t\tlabel: \"Dojo Blatherings\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\turl: \"http://www.dojotoolkit.org/aggregator/rss\",\r\n\t\t\t\tlabel: \"Planet Dojo\"\r\n\t\t\t}\r\n\t\t]\r\n\t});\r\n\tportlet.addChild(settings);\r\n\tdijit.byId(\"gridContainer2\").addService(portlet, 0, 0);\r\n}\r\n\r\nvar count = 0;\r\nfunction loadFeed(url, nodeId, emptyMsg, type) {\r\n\r\n\tvar query = {\r\n\t\turl: url\r\n\t};\r\n\tvar request = {query:query};\r\n\r\n\tvar maxBufSize = 8;\r\n\tvar outNode = dojo.byId(nodeId);\r\n\r\n\tvar testStore = new dojox.data.GoogleFeedStore();\r\n\r\n\tfunction doAppend(items){\r\n\t\tconsole.log(items);\r\n\t\tif (items.length > 0) {\r\n      if (type == \"list\") {\r\n\t\t\t\tdojo.addClass(outNode, \"feedList\");\r\n\r\n\t      var ul = dojo.create(\"ul\", null, outNode);\r\n\t\t\t\tdojo.forEach(items, function(item){\r\n\t\t\t\t\tvar li = dojo.create(\"li\", {\r\n\t\t\t\t\t\tinnerHTML: '<a href=\"' + testStore.getValue(item, 'link') + '\">'\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ testStore.getValue(item, 'title') + '</a>'\r\n\t\t\t\t\t},ul);\r\n\r\n\t\t\t\t\tdojo.connect(li, \"onmouseover\", function() {\r\n\t\t\t\t\t\tdijit.showTooltip(testStore.getValue(item, \"content\"), li);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdojo.connect(li, \"onmouseout\", function() {\r\n\t\t\t\t\t\tdijit.hideTooltip(li);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar accordion = new dijit.layout.AccordionContainer({});\r\n\t\t\t\tdojo.byId(nodeId).appendChild(accordion.domNode);\r\n\r\n\t\t\t\tdojo.forEach(items, function(item){\r\n\t\t\t\t\tvar summary = testStore.getValue(item, \"title\");\r\n\r\n\t\t\t\t\tif (summary.length > 40) {\r\n\t\t\t\t\t\tsummary = summary.substring(0, 50);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar contentPane = new dijit.layout.ContentPane({\r\n\t\t\t\t\t\ttitle: summary,\r\n\t\t\t\t\t\tcontent: testStore.getValue(item, \"content\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdojo.style(contentPane.domNode, \"width\", \"100%\");\r\n\t\t\t\t\taccordion.addChild(contentPane);\r\n\t\t\t\t\tcontentPane.startup();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar portlet = dijit.getEnclosingWidget(dojo.byId(nodeId));\r\n\t\t\t\tportlet.addChild(accordion);\r\n\t\t\t}\r\n\t  } else {\r\n\t\t\tdojo.byId(nodeId).innerHTML = emptyMsg || \"No results\";\r\n\t\t}\r\n\t}\r\n\r\n\trequest.onBegin = function(numItems){};\r\n\r\n\trequest.onComplete = doAppend;\r\n\r\n\trequest.count = 4;\r\n\r\n\ttestStore.fetch(request);\r\n}\r\n\r\nvar layoutHtmlTable = [\r\n\t [\r\n\t\t{name: 'First Name', field: 'First Name', width: '50%'},\r\n\t\t{name: 'Last Name', field: 'Last Name', width: '25%'},\r\n\t\t{name: 'DOB', field: 'DOB', width: '25%'}\r\n\t\t]\r\n\t];\r\n\r\nvar text_explode_2 = function(node){\r\n\r\n\tif(node.style.height){\r\n\t\treturn;\r\n\t}\r\n\tvar originalText = node.innerHTML;\r\n\tvar properties = {\r\n\t\tnode: node,\r\n\t\twords: true,\r\n\t\tdistance: 1.5,\r\n\t\tduration: 1500,\r\n\t\trandom: 0.5\r\n\t};\r\n\tproperties.onEnd = function(){\r\n\t\tcurrentAnimation = dojox.fx.text.converge(dojo.mixin(properties,{\r\n\t\t\tonEnd: undefined,\r\n\t\t\ttext: originalText\r\n\t\t}));\r\n\t\tcurrentAnimation.play();\r\n\t};\r\n\tcurrentAnimation = dojox.fx.text.explode(properties).play();\r\n};\r\n"]}