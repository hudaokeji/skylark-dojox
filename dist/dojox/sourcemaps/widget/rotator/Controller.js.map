{"version":3,"sources":["widget/rotator/Controller.js"],"names":["define","declare","lang","html","event","array","connect","query","_play","_dojoxRotator","_tab","_selected","rotator","commands","constructor","params","node","mixin","this","r","firstChild","removeChild","ul","_domNode","create","icon","cb","label","css","action","className","innerHTML","onclick","e","stop","control","apply","forEach","split","b","i","_info","_buildInfo","j","panes","length","title","idx","addClass","_togglePlay","_con","destroy","disconnect","playing","p","style","_onUpdate","type","s","n","removeClass"],"mappings":";;;;;;;AAAAA,QACC,qBACA,kBACA,kBACA,mBACA,mBACA,qBACA,cACE,SAASC,EAASC,EAAMC,EAAMC,EAAOC,EAAOC,EAASC,GAEvD,IACCC,EAAQC,mBAGRC,EAAOD,kBACPE,EAAYF,uBAEb,OAAOR,EAAQ,kCAAmC,MAsCjDW,QAAS,KAUTC,SAAU,4BAEVC,YAAa,SAAmBC,EAA0BC,GAIzDd,EAAKe,MAAMC,KAAMH,GAGjB,IAAII,EAAID,KAAKN,QACb,GAAGO,EAAE,CAEJ,KAAMH,EAAKI,YACVJ,EAAKK,YAAYL,EAAKI,YAGvB,IAAIE,EAAKJ,KAAKK,SAAWpB,EAAKqB,OAAO,KAAM,KAAMR,GAChDS,EAAO,oBAGPC,EAAK,SAAmBC,EAAiBC,EAAcC,GACtD1B,EAAKqB,OAAO,MACXM,UAAWF,EACXG,UAAW,qBAAuBJ,EAAQ,cAC1CK,QAAS,SAAkBC,GAC1B7B,EAAM8B,KAAKD,GACRd,GACFA,EAAEgB,QAAQC,MAAMjB,EAAGU,KAGnBP,IAILjB,EAAMgC,QAAQnB,KAAKL,SAASyB,MAAM,KAAM,SAASC,EAAGC,GACnD,OAAOD,GACN,IAAK,OACJb,EAAG,OAAQjB,mBAAyBgB,GAAO,SAC3C,MACD,IAAK,aACJC,EAAG,OAAQlB,EAAQiB,GAAO,SAC1BC,EAAG,QA9FCjB,oBA8FiBgB,GAAO,UAC5B,MACD,IAAK,OACJP,KAAKuB,MAAQtC,EAAKqB,OAAO,MACxBM,UAAWrB,mBACXsB,UAAWb,KAAKwB,WAAWvB,IACzBG,GACH,MACD,IAAK,OACJI,EAAG,OAAQjB,mBAAyBgB,GAAO,SAC3C,MACD,IAAK,IACL,IAAK,SACJ,IAAI,IAAIkB,EAAE,EAAGA,EAAExB,EAAEyB,MAAMC,OAAQF,IAC9BjB,EACgB,KAALa,EAAWI,EAAE,EAAIxB,EAAEyB,MAAMD,GAAGG,OAAS,QAAUH,EAAE,IAC7C,KAALJ,EA7GN9B,qBA6G2BC,GAAQ,KAAOiC,GAAKxB,EAAE4B,IAAMpC,EAAY,IAAM,oBAA+BgC,GAC/F,KAAMA,MAKpBzB,MAGHX,EAAM,iBAAkBe,GAAI0B,SAASvC,qBACrCF,EAAM,gBAAiBe,GAAI0B,SAASvC,oBAGpCS,KAAK+B,cAEL/B,KAAKgC,KAAO5C,EAAQA,QAAQa,EAAG,WAAYD,KAAM,eAInDiC,QAAS,WAGR7C,EAAQ8C,WAAWlC,KAAKgC,MACxB/C,EAAKgD,QAAQjC,KAAKK,WAGnB0B,YAAa,SAAoBI,GAIhC,IAAIC,EAAIpC,KAAKN,QAAQyC,QACrB9C,EAAM,IAAIC,EAAOU,KAAKK,UAAUgC,MAAM,UAAWD,EAAI,OAAS,IAC9D/C,EAAM,qBAAYW,KAAKK,UAAUgC,MAAM,UAAWD,EAAI,GAAK,SAG5DZ,WAAY,SAAiCvB,GAG5C,MAAO,UAAYA,EAAE4B,IAAI,GAAK,MAAQ5B,EAAEyB,MAAMC,OAAS,WAGxDW,UAAW,SAAmBC,GAI7B,IAAItC,EAAID,KAAKN,QAEb,OAAO6C,GACN,IAAK,OACL,IAAK,QACJvC,KAAK+B,cACL,MACD,IAAK,oBACD/B,KAAKuB,QACPvB,KAAKuB,MAAMV,UAAYb,KAAKwB,WAAWvB,IAIxC,IAAIuC,EAAI,SAAqBC,GACzBxC,EAAE4B,IAAMY,EAAEd,QACZ1C,EAAK6C,SAASW,EAAExC,EAAE4B,KAAMpC,IAI1B+C,EAAEnD,EAAM,sBAAeW,KAAKK,UAAUqC,YAAYjD,IAClD+C,EAAEnD,EAAM,IAAMG,EAAMQ,KAAKK,UAAUqC,YAAYjD","file":"../../../widget/rotator/Controller.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/query\"\r\n], function(declare, lang, html, event, array, connect, query) {\r\n\r\n\tvar _dojoxRotator = \"dojoxRotator\",\r\n\t\t_play = _dojoxRotator + \"Play\",\r\n\t\t_pause = _dojoxRotator + \"Pause\",\r\n\t\t_number = _dojoxRotator + \"Number\",\r\n\t\t_tab = _dojoxRotator + \"Tab\",\r\n\t\t_selected = _dojoxRotator + \"Selected\";\r\n\r\n\treturn declare(\"dojox.widget.rotator.Controller\", null, {\r\n\t\t// summary:\r\n\t\t//\t\tA controller that manipulates a Rotator or AutoRotator.\r\n\t\t// description:\r\n\t\t//\t\tDisplays a series of controls that send actions to a Rotator or\r\n\t\t//\t\tAutoRotator.  The Controller supports the following controls:\r\n\t\t//\r\n\t\t//\t\t- Next pane\r\n\t\t//\t\t- Previous pane\r\n\t\t//\t\t- Play/Pause toggler\r\n\t\t//\t\t- Numbered tabs\r\n\t\t//\t\t- Titled tabs\r\n\t\t//\t\t- Information\r\n\t\t//\r\n\t\t//\t\tYou may specify any of these controls in any order.  You may also\r\n\t\t//\t\thave multiple Controllers tied to a single Rotator instance.\r\n\t\t//\r\n\t\t//\t\tThe Controller's DOM node may also be styled for positioning or\r\n\t\t//\t\tother styled preferences.\r\n\t\t// example:\r\n\t\t//\t|\t<div dojoType=\"dojox.widget.rotator.Controller\"\r\n\t\t//\t|\t\trotator=\"myRotator\"\r\n\t\t//\t|\t></div>\r\n\t\t// example:\r\n\t\t//\t|\t<div dojoType=\"dojox.widget.rotator.Controller\"\r\n\t\t//\t|\t\trotator=\"myRotator\"\r\n\t\t//\t|\t\tcontrols=\"prev,#,next\"\r\n\t\t//\t|\t\tclass=\"myCtrl\"\r\n\t\t//\t|\t></div>\r\n\t\t// example:\r\n\t\t//\t|\t<div dojoType=\"dojox.widget.rotator.Controller\"\r\n\t\t//\t|\t\trotator=\"myRotator\"\r\n\t\t//\t|\t\tcontrols=\"titles\"\r\n\t\t//\t|\t\tclass=\"myCtrl\"\r\n\t\t//\t|\t></div>s\r\n\r\n\t\t// rotator: dojox.widget.Rotator\r\n\t\t//\t\tAn instance of a Rotator widget.\r\n\t\trotator: null,\r\n\r\n\t\t// commands: string\r\n\t\t//\t\tA comma-separated list of commands. Valid commands are:\r\n\t\t//\t\t  prev\t\t\tAn icon button to go to the previous pane.\r\n\t\t//\t\t  next\t\t\tAn icon button to go to the next pane.\r\n\t\t//\t\t  play/pause\tA play and pause toggle icon button.\r\n\t\t//\t\t  info\t\t\tDisplays the current and total panes. (ie \"1 / 4\")\r\n\t\t//\t\t  #\t\t\t\tDisplays a number button for each pane. (ie \"1 2 3 4\")\r\n\t\t//\t\t  titles\t\tDisplays each pane's title as a tab. (ie \"Home Services Contact Blog\")\r\n\t\tcommands: \"prev,play/pause,info,next\",\r\n\r\n\t\tconstructor: function(/*Object*/params, /*DomNode|string*/node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInitializes the pager and connect to the rotator.\r\n\r\n\t\t\tlang.mixin(this, params);\r\n\r\n\t\t\t// check if we have a valid rotator\r\n\t\t\tvar r = this.rotator;\r\n\t\t\tif(r){\r\n\t\t\t\t// remove all of the controller's child nodes just in case\r\n\t\t\t\twhile(node.firstChild){\r\n\t\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar ul = this._domNode = html.create(\"ul\", null, node),\r\n\t\t\t\t\ticon = \" \" + _dojoxRotator + \"Icon\",\r\n\r\n\t\t\t\t\t// helper function for creating a button\r\n\t\t\t\t\tcb = function(/*string*/label, /*string*/css, /*array*/action){\r\n\t\t\t\t\t\thtml.create(\"li\", {\r\n\t\t\t\t\t\t\tclassName: css,\r\n\t\t\t\t\t\t\tinnerHTML: '<a href=\"#\"><span>' + label + '</span></a>',\r\n\t\t\t\t\t\t\tonclick: function(/*event*/e){\r\n\t\t\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t\t\t\tif(r){\r\n\t\t\t\t\t\t\t\t\tr.control.apply(r, action);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, ul);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t// build out the commands\r\n\t\t\t\tarray.forEach(this.commands.split(','), function(b, i){\r\n\t\t\t\t\tswitch(b){\r\n\t\t\t\t\t\tcase \"prev\":\r\n\t\t\t\t\t\t\tcb(\"Prev\", _dojoxRotator + \"Prev\" + icon, [\"prev\"]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"play/pause\":\r\n\t\t\t\t\t\t\tcb(\"Play\", _play + icon, [\"play\"]);\r\n\t\t\t\t\t\t\tcb(\"Pause\", _pause + icon, [\"pause\"]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"info\":\r\n\t\t\t\t\t\t\tthis._info = html.create(\"li\", {\r\n\t\t\t\t\t\t\t\tclassName: _dojoxRotator + \"Info\",\r\n\t\t\t\t\t\t\t\tinnerHTML: this._buildInfo(r)\r\n\t\t\t\t\t\t\t}, ul);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"next\":\r\n\t\t\t\t\t\t\tcb(\"Next\", _dojoxRotator + \"Next\" + icon, [\"next\"]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"#\":\r\n\t\t\t\t\t\tcase \"titles\":\r\n\t\t\t\t\t\t\tfor(var j=0; j<r.panes.length; j++){\r\n\t\t\t\t\t\t\t\tcb(\r\n\t\t\t\t\t\t\t\t\t/*label*/ b == '#' ? j+1 : r.panes[j].title || \"Tab \" + (j+1),\r\n\t\t\t\t\t\t\t\t\t/*css*/ (b == '#' ? _number : _tab) + ' ' + (j == r.idx ? _selected : \"\") + ' ' + _dojoxRotator + \"Pane\" + j,\r\n\t\t\t\t\t\t\t\t\t/*action*/ [\"go\", j]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\t// add the first/last classes for styling\r\n\t\t\t\tquery(\"li:first-child\", ul).addClass(_dojoxRotator + \"First\");\r\n\t\t\t\tquery(\"li:last-child\", ul).addClass(_dojoxRotator + \"Last\");\r\n\r\n\t\t\t\t// set the initial state of the play/pause toggle button\r\n\t\t\t\tthis._togglePlay();\r\n\r\n\t\t\t\tthis._con = connect.connect(r, \"onUpdate\", this, \"_onUpdate\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDisconnect from the rotator.\r\n\t\t\tconnect.disconnect(this._con);\r\n\t\t\thtml.destroy(this._domNode);\r\n\t\t},\r\n\r\n\t\t_togglePlay: function(/*boolean*/playing){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tToggles the play/pause button, if it exists.\r\n\r\n\t\t\tvar p = this.rotator.playing;\r\n\t\t\tquery('.'+_play, this._domNode).style(\"display\", p ? \"none\" : \"\");\r\n\t\t\tquery('.'+_pause, this._domNode).style(\"display\", p ? \"\" : \"none\");\r\n\t\t},\r\n\r\n\t\t_buildInfo: function(/*dojox.widget.Rotator*/r){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturn a string containing the current pane number and the total number of panes.\r\n\t\t\treturn '<span>' + (r.idx+1) + ' / ' + r.panes.length + '</span>'; /*string*/\r\n\t\t},\r\n\r\n\t\t_onUpdate: function(/*string*/type){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUpdates various pager controls when the rotator updates.\r\n\r\n\t\t\tvar r = this.rotator; // no need to test if this is null since _onUpdate is only fired by the rotator\r\n\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"play\":\r\n\t\t\t\tcase \"pause\":\r\n\t\t\t\t\tthis._togglePlay();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"onAfterTransition\":\r\n\t\t\t\t\tif(this._info){\r\n\t\t\t\t\t\tthis._info.innerHTML = this._buildInfo(r);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// helper function for selecting the current tab\r\n\t\t\t\t\tvar s = function(/*NodeList*/n){\r\n\t\t\t\t\t\tif(r.idx < n.length){\r\n\t\t\t\t\t\t\thtml.addClass(n[r.idx], _selected);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\ts(query('.' + _number, this._domNode).removeClass(_selected));\r\n\t\t\t\t\ts(query('.' + _tab, this._domNode).removeClass(_selected));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});"]}