{"version":3,"sources":["gfx/registry.js"],"names":["define","has","shapeLib","add","registry","_ids","hash","register","s","t","declaredClass","split","pop","uid","byId","id","dispose","recurse","children","i","length","getUID"],"mappings":";;;;;;;AAAAA,QAAQ,WAAW,WAAY,SAASC,EAAKC,GAE5CD,EAAIE,IAAI,cAAe,GAEvB,IAAIC,KAGAC,KAEAC,KA0CJ,OAxCAF,EAASG,SAAWL,EAASK,SAAW,SAAkCC,GASzE,IAAIC,EAAID,EAAEE,cAAcC,MAAM,KAAKC,MAE/BC,EAAMJ,GADFA,KAAKJ,IAASA,EAAKI,GAAOJ,EAAKI,GAAK,GAG5C,OADAH,EAAKO,GAAOL,EACLK,GAGRT,EAASU,KAAOZ,EAASY,KAAO,SAAmBC,GAMlD,OAAOT,EAAKS,IAGbX,EAASY,QAAUd,EAASc,QAAU,SAAkCR,EAAeS,GAKtF,GAAGA,GAAWT,EAAEU,SACf,IAAI,IAAIC,EAAE,EAAGA,EAAGX,EAAEU,SAASE,SAAUD,EACpCf,EAASY,QAAQR,EAAEU,SAASC,IAAI,GAGlC,IAAIN,EAAML,EAAEa,SACZf,EAAKO,GAAO,YACLP,EAAKO,IAGNT","file":"../../gfx/registry.js","sourcesContent":["define([\"dojo/has\",\"./shape\"], function(has, shapeLib){\r\n\r\n\thas.add(\"gfxRegistry\", 1);\r\n\r\n\tvar registry = {};\r\n\r\n\t// a set of ids (keys=type)\r\n\tvar _ids = {};\r\n\t// a simple set impl to map shape<->id\r\n\tvar hash = {};\r\n\r\n\tregistry.register = shapeLib.register = function(/*dojox/gfx/shape.Shape*/s){\r\n\t\t// summary:\r\n\t\t//\t\tRegister the specified shape into the graphics registry.\r\n\t\t// s: dojox/gfx/shape.Shape\r\n\t\t//\t\tThe shape to register.\r\n\t\t// returns: Number\r\n\t\t//\t\tThe unique id associated with this shape.\r\n\r\n\t\t// the id pattern : type+number (ex: Rect0,Rect1,etc)\r\n\t\tvar t = s.declaredClass.split('.').pop();\r\n\t\tvar i = t in _ids ? ++_ids[t] : ((_ids[t] = 0));\r\n\t\tvar uid = t+i;\r\n\t\thash[uid] = s;\r\n\t\treturn uid;\r\n\t};\r\n\r\n\tregistry.byId = shapeLib.byId = function(/*String*/id){\r\n\t\t// summary:\r\n\t\t//\t\tReturns the shape that matches the specified id.\r\n\t\t// id: String\r\n\t\t//\t\tThe unique identifier for this Shape.\r\n\t\t// returns: dojox/gfx/shape.Shape\r\n\t\treturn hash[id]; //dojox/gfx/shape.Shape\r\n\t};\r\n\r\n\tregistry.dispose = shapeLib.dispose = function(/*dojox/gfx/shape.Shape*/s, /*Boolean?*/recurse){\r\n\t\t// summary:\r\n\t\t//\t\tRemoves the specified shape from the registry.\r\n\t\t// s: dojox/gfx/shape.Shape\r\n\t\t//\t\tThe shape to unregister.\r\n\t\tif(recurse && s.children){\r\n\t\t\tfor(var i=0; i< s.children.length; ++i){\r\n\t\t\t\tregistry.dispose(s.children[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar uid = s.getUID();\r\n\t\thash[uid] = null;\r\n\t\tdelete hash[uid];\r\n\t};\r\n\r\n\treturn registry;\r\n});\r\n"]}