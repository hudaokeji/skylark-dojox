{"version":3,"sources":["gfx/renderer.js"],"names":["define","g","lang","has","win","config","currentRenderer","add","global","document","element","innerHTML","supported","firstChild","load","id","require","silverlightObject","silverlightFlag","renderer","forceGfxRenderer","renderers","isString","gfxRenderer","split","length","shift","ActiveXObject","IsVersionSupported","navigator","plugins","e","CanvasRenderingContext2D","canvasEvents","isDebug","console","log","window","svgweb","addOnLoad","loadRenderer","module"],"mappings":";;;;;;;AAAAA,QAAQ,UAAU,kBAAmB,mBAAoB,oBAAqB,qBAC5E,SAASC,EAAGC,EAAMC,EAAKC,EAAKC,GAE7B,IAAIC,EAAkB,KAStB,OAPAH,EAAII,IAAI,MAAO,SAASC,EAAQC,EAAUC,GACzCA,EAAQC,UAAY,qBACpB,IAAIC,EAAa,QAASF,EAAQG,WAElC,OADAH,EAAQC,UAAY,GACbC,KAQPE,KAAM,SAASC,EAAIC,EAASF,GAG3B,GAAGR,GAAyB,SAANS,EACrBD,EAAKR,OADN,CASA,IALA,IAGCW,EAAmBC,EAHhBC,EAAWd,EAAOe,iBACrBC,GAAaF,IAAajB,EAAKoB,SAASjB,EAAOkB,aAC9ClB,EAAOkB,YAAc,8BAA8BC,MAAM,MAGpDL,GAAYE,EAAUI,QAC5B,OAAOJ,EAAUK,SAChB,IAAK,MAED,aAActB,EAAII,SACpBW,EAAW,OAEZ,MACD,IAAK,MACDhB,EAAI,SACNgB,EAAW,OAEZ,MACD,IAAK,cACJ,IACIhB,EAAI,OACNc,EAAoB,IAAIU,cAAc,yBACdV,EAAkBW,mBAAmB,SAC5DV,GAAkB,GAGhBW,UAAUC,QAAQ,yBACpBZ,GAAkB,GAGpB,MAAMa,GACNb,GAAkB,EAClB,QACAD,EAAoB,KAElBC,IACFC,EAAW,eAEZ,MACD,IAAK,SACDf,EAAII,OAAOwB,2BACbb,EAAW,UAME,WAAbA,IAAiD,IAAxBd,EAAO4B,eACnCd,EAAW,oBAGTd,EAAO6B,SACTC,QAAQC,IAAI,kBAAoBjB,GAYlB,OAAZA,QAA6C,IAAjBkB,OAAOC,OACrCD,OAAOC,OAAOC,UAAUC,GAExBA,IAZD,SAASA,IACRxB,GAAS,aAAeG,GAAW,SAASsB,GAC3CxC,EAAEkB,SAAWA,EAEbb,EAAkBmC,EAElB3B,EAAK2B","file":"../../gfx/renderer.js","sourcesContent":["define([\"./_base\",\"dojo/_base/lang\", \"dojo/_base/sniff\", \"dojo/_base/window\", \"dojo/_base/config\"],\r\n  function(g, lang, has, win, config){\r\n  //>> noBuildResolver\r\n\tvar currentRenderer = null;\r\n\r\n\thas.add(\"vml\", function(global, document, element){\r\n\t\telement.innerHTML = \"<v:shape adj=\\\"1\\\"/>\";\r\n\t\tvar supported = (\"adj\" in element.firstChild);\r\n\t\telement.innerHTML = \"\";\r\n\t\treturn supported;\r\n\t});\r\n\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tThis module is an AMD loader plugin that loads the appropriate graphics renderer\r\n\t\t//\t\timplementation based on detected environment and current configuration settings.\r\n\t\t\r\n\t\tload: function(id, require, load){\r\n\t\t\t// tags:\r\n\t\t\t//      private\r\n\t\t\tif(currentRenderer && id != \"force\"){\r\n\t\t\t\tload(currentRenderer);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar renderer = config.forceGfxRenderer,\r\n\t\t\t\trenderers = !renderer && (lang.isString(config.gfxRenderer) ?\r\n\t\t\t\t\tconfig.gfxRenderer : \"svg,vml,canvas,silverlight\").split(\",\"),\r\n\t\t\t\tsilverlightObject, silverlightFlag;\r\n\r\n\t\t\twhile(!renderer && renderers.length){\r\n\t\t\t\tswitch(renderers.shift()){\r\n\t\t\t\t\tcase \"svg\":\r\n\t\t\t\t\t\t// the next test is from https://github.com/phiggins42/has.js\r\n\t\t\t\t\t\tif(\"SVGAngle\" in win.global){\r\n\t\t\t\t\t\t\trenderer = \"svg\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"vml\":\r\n\t\t\t\t\t\tif(has(\"vml\")){\r\n\t\t\t\t\t\t\trenderer = \"vml\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"silverlight\":\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tif(has(\"ie\")){\r\n\t\t\t\t\t\t\t\tsilverlightObject = new ActiveXObject(\"AgControl.AgControl\");\r\n\t\t\t\t\t\t\t\tif(silverlightObject && silverlightObject.IsVersionSupported(\"1.0\")){\r\n\t\t\t\t\t\t\t\t\tsilverlightFlag = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tif(navigator.plugins[\"Silverlight Plug-In\"]){\r\n\t\t\t\t\t\t\t\t\tsilverlightFlag = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\tsilverlightFlag = false;\r\n\t\t\t\t\t\t}finally{\r\n\t\t\t\t\t\t\tsilverlightObject = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(silverlightFlag){\r\n\t\t\t\t\t\t\trenderer = \"silverlight\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"canvas\":\r\n\t\t\t\t\t\tif(win.global.CanvasRenderingContext2D){\r\n\t\t\t\t\t\t\trenderer = \"canvas\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (renderer === 'canvas' && config.canvasEvents !== false) {\r\n\t\t\t\trenderer = \"canvasWithEvents\";\r\n\t\t\t}\r\n\r\n\t\t\tif(config.isDebug){\r\n\t\t\t\tconsole.log(\"gfx renderer = \" + renderer);\r\n\t\t\t}\r\n\r\n\t\t\tfunction loadRenderer(){\r\n\t\t\t\trequire([\"dojox/gfx/\" + renderer], function(module){\r\n\t\t\t\t\tg.renderer = renderer;\r\n\t\t\t\t\t// memorize the renderer module\r\n\t\t\t\t\tcurrentRenderer = module;\r\n\t\t\t\t\t// now load it\r\n\t\t\t\t\tload(module);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(renderer == \"svg\" && typeof window.svgweb != \"undefined\"){\r\n\t\t\t\twindow.svgweb.addOnLoad(loadRenderer);\r\n\t\t\t}else{\r\n\t\t\t\tloadRenderer();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n"]}