{"version":3,"sources":["gfx/fx.js"],"names":["define","lang","g","m","Color","arr","fx","Hub","has","fxg","InterpolNumber","start","end","this","InterpolUnit","units","InterpolColor","temp","InterpolValues","values","length","InterpolObject","def","InterpolTransform","stack","original","prototype","getValue","r","blendColors","Math","min","floor","ret","clone","i","forEach","t","Matrix2D","push","name","f","val","map","v","matrix","apply","transfMatrix","p","transparent","getColorInterpol","prop","obj","normalizeColor","value","animateStroke","args","easing","_defaultEasing","stroke","anim","Animation","shape","connect","getStroke","color","style","width","getNumberInterpol","cap","join","curve","animateFill","fill","getFill","animateFont","font","getFont","variant","weight","family","size","parseFloat","animateTransform","getTransform","transform","renderer","handlers","parent","getParent","__svgContainer","rawNode","parentNode","ov","visibility","offsetHeight","e","disconnect","sn","setTimeout"],"mappings":"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","file":"../../gfx/fx.js","sourcesContent":["define([\"dojo/_base/lang\", \"./_base\", \"./matrix\", \"dojo/_base/Color\", \"dojo/_base/array\", \"dojo/_base/fx\", \"dojo/_base/connect\", \"dojo/sniff\"], \r\n  function(lang, g, m, Color, arr, fx, Hub, has){\r\n\tvar fxg = g.fx = {};\r\n\r\n\t// Generic interpolators. Should they be moved to dojox.fx?\r\n\r\n\tfunction InterpolNumber(start, end){\r\n\t\tthis.start = start, this.end = end;\r\n\t}\r\n\tInterpolNumber.prototype.getValue = function(r){\r\n\t\treturn (this.end - this.start) * r + this.start;\r\n\t};\r\n\r\n\tfunction InterpolUnit(start, end, units){\r\n\t\tthis.start = start, this.end = end;\r\n\t\tthis.units = units;\r\n\t}\r\n\tInterpolUnit.prototype.getValue = function(r){\r\n\t\treturn (this.end - this.start) * r + this.start + this.units;\r\n\t};\r\n\r\n\tfunction InterpolColor(start, end){\r\n\t\tthis.start = start, this.end = end;\r\n\t\tthis.temp = new Color();\r\n\t}\r\n\tInterpolColor.prototype.getValue = function(r){\r\n\t\treturn Color.blendColors(this.start, this.end, r, this.temp);\r\n\t};\r\n\r\n\tfunction InterpolValues(values){\r\n\t\tthis.values = values;\r\n\t\tthis.length = values.length;\r\n\t}\r\n\tInterpolValues.prototype.getValue = function(r){\r\n\t\treturn this.values[Math.min(Math.floor(r * this.length), this.length - 1)];\r\n\t};\r\n\r\n\tfunction InterpolObject(values, def){\r\n\t\tthis.values = values;\r\n\t\tthis.def = def ? def : {};\r\n\t}\r\n\tInterpolObject.prototype.getValue = function(r){\r\n\t\tvar ret = lang.clone(this.def);\r\n\t\tfor(var i in this.values){\r\n\t\t\tret[i] = this.values[i].getValue(r);\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\tfunction InterpolTransform(stack, original){\r\n\t\tthis.stack = stack;\r\n\t\tthis.original = original;\r\n\t}\r\n\tInterpolTransform.prototype.getValue = function(r){\r\n\t\tvar ret = [];\r\n\t\tarr.forEach(this.stack, function(t){\r\n\t\t\tif(t instanceof m.Matrix2D){\r\n\t\t\t\tret.push(t);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(t.name == \"original\" && this.original){\r\n\t\t\t\tret.push(this.original);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n \t\t\t// Adding support for custom matrices\r\n \t\t\tif(t.name == \"matrix\"){\r\n \t\t\t\tif((t.start instanceof m.Matrix2D) && (t.end instanceof m.Matrix2D)){\r\n \t\t\t\t\tvar transfMatrix = new m.Matrix2D();\r\n \t\t\t\t\tfor(var p in t.start) {\r\n \t\t\t\t\t\ttransfMatrix[p] = (t.end[p] - t.start[p])*r + t.start[p];\r\n \t\t\t\t\t}\r\n \t\t\t\t\tret.push(transfMatrix);\r\n \t\t\t\t}\r\n \t\t\t\treturn;\r\n \t\t\t}\r\n\t\t\tif(!(t.name in m)){ return; }\r\n\t\t\tvar f = m[t.name];\r\n\t\t\tif(typeof f != \"function\"){\r\n\t\t\t\t// constant\r\n\t\t\t\tret.push(f);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar val = arr.map(t.start, function(v, i){\r\n\t\t\t\t\t\t\treturn (t.end[i] - v) * r + v;\r\n\t\t\t\t\t\t}),\r\n\t\t\t\tmatrix = f.apply(m, val);\r\n\t\t\tif(matrix instanceof m.Matrix2D){\r\n\t\t\t\tret.push(matrix);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\treturn ret;\r\n\t};\r\n\r\n\tvar transparent = new Color(0, 0, 0, 0);\r\n\r\n\tfunction getColorInterpol(prop, obj, name, def){\r\n\t\tif(prop.values){\r\n\t\t\treturn new InterpolValues(prop.values);\r\n\t\t}\r\n\t\tvar value, start, end;\r\n\t\tif(prop.start){\r\n\t\t\tstart = g.normalizeColor(prop.start);\r\n\t\t}else{\r\n\t\t\tstart = value = obj ? (name ? obj[name] : obj) : def;\r\n\t\t}\r\n\t\tif(prop.end){\r\n\t\t\tend = g.normalizeColor(prop.end);\r\n\t\t}else{\r\n\t\t\tif(!value){\r\n\t\t\t\tvalue = obj ? (name ? obj[name] : obj) : def;\r\n\t\t\t}\r\n\t\t\tend = value;\r\n\t\t}\r\n\t\treturn new InterpolColor(start, end);\r\n\t}\r\n\r\n\tfunction getNumberInterpol(prop, obj, name, def){\r\n\t\tif(prop.values){\r\n\t\t\treturn new InterpolValues(prop.values);\r\n\t\t}\r\n\t\tvar value, start, end;\r\n\t\tif(prop.start){\r\n\t\t\tstart = prop.start;\r\n\t\t}else{\r\n\t\t\tstart = value = obj ? obj[name] : def;\r\n\t\t}\r\n\t\tif(prop.end){\r\n\t\t\tend = prop.end;\r\n\t\t}else{\r\n\t\t\tif(typeof value != \"number\"){\r\n\t\t\t\tvalue = obj ? obj[name] : def;\r\n\t\t\t}\r\n\t\t\tend = value;\r\n\t\t}\r\n\t\treturn new InterpolNumber(start, end);\r\n\t}\r\n\r\n\tfxg.animateStroke = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation which will change stroke properties over time.\r\n\t\t// args:\r\n\t\t//\t\tan object defining the animation setting.\r\n\t\t// example:\r\n\t\t//\t|\tfxg.animateStroke{{\r\n\t\t//\t|\t\tshape: shape,\r\n\t\t//\t|\t\tduration: 500,\r\n\t\t//\t|\t\tcolor: {start: \"red\", end: \"green\"},\r\n\t\t//\t|\t\twidth: {end: 15},\r\n\t\t//\t|\t\tjoin:  {values: [\"miter\", \"bevel\", \"round\"]}\r\n\t\t//\t|\t}).play();\r\n\t\tif(!args.easing){ args.easing = fx._defaultEasing; }\r\n\t\tvar anim = new fx.Animation(args), shape = args.shape, stroke;\r\n\t\tHub.connect(anim, \"beforeBegin\", anim, function(){\r\n\t\t\tstroke = shape.getStroke();\r\n\t\t\tvar prop = args.color, values = {}, value, start, end;\r\n\t\t\tif(prop){\r\n\t\t\t\tvalues.color = getColorInterpol(prop, stroke, \"color\", transparent);\r\n\t\t\t}\r\n\t\t\tprop = args.style;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.style = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.width;\r\n\t\t\tif(prop){\r\n\t\t\t\tvalues.width = getNumberInterpol(prop, stroke, \"width\", 1);\r\n\t\t\t}\r\n\t\t\tprop = args.cap;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.cap = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.join;\r\n\t\t\tif(prop){\r\n\t\t\t\tif(prop.values){\r\n\t\t\t\t\tvalues.join = new InterpolValues(prop.values);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstart = prop.start ? prop.start : (stroke && stroke.join || 0);\r\n\t\t\t\t\tend = prop.end ? prop.end : (stroke && stroke.join || 0);\r\n\t\t\t\t\tif(typeof start == \"number\" && typeof end == \"number\"){\r\n\t\t\t\t\t\tvalues.join = new InterpolNumber(start, end);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.curve = new InterpolObject(values, stroke);\r\n\t\t});\r\n\t\tHub.connect(anim, \"onAnimate\", shape, \"setStroke\");\r\n\t\treturn anim; // dojo.Animation\r\n\t};\r\n\r\n\tfxg.animateFill = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation which will change fill color over time.\r\n\t\t//\t\tOnly solid fill color is supported at the moment\r\n\t\t// args:\r\n\t\t//\t\tan object defining the animation setting.\r\n\t\t// example:\r\n\t\t//\t|\tgfx.animateFill{{\r\n\t\t//\t|\t\tshape: shape,\r\n\t\t//\t|\t\tduration: 500,\r\n\t\t//\t|\t\tcolor: {start: \"red\", end: \"green\"}\r\n\t\t//\t|\t}).play();\r\n\t\tif(!args.easing){ args.easing = fx._defaultEasing; }\r\n\t\tvar anim = new fx.Animation(args), shape = args.shape, fill;\r\n\t\tHub.connect(anim, \"beforeBegin\", anim, function(){\r\n\t\t\tfill = shape.getFill();\r\n\t\t\tvar prop = args.color, values = {};\r\n\t\t\tif(prop){\r\n\t\t\t\tthis.curve = getColorInterpol(prop, fill, \"\", transparent);\r\n\t\t\t}\r\n\t\t});\r\n\t\tHub.connect(anim, \"onAnimate\", shape, \"setFill\");\r\n\t\treturn anim; // dojo.Animation\r\n\t};\r\n\r\n\tfxg.animateFont = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation which will change font properties over time.\r\n\t\t// args:\r\n\t\t//\t\tan object defining the animation setting.\r\n\t\t// example:\r\n\t\t//\t|\tgfx.animateFont{{\r\n\t\t//\t|\t\tshape: shape,\r\n\t\t//\t|\t\tduration: 500,\r\n\t\t//\t|\t\tvariant: {values: [\"normal\", \"small-caps\"]},\r\n\t\t//\t|\t\tsize:  {end: 10, units: \"pt\"}\r\n\t\t//\t|\t}).play();\r\n\t\tif(!args.easing){ args.easing = fx._defaultEasing; }\r\n\t\tvar anim = new fx.Animation(args), shape = args.shape, font;\r\n\t\tHub.connect(anim, \"beforeBegin\", anim, function(){\r\n\t\t\tfont = shape.getFont();\r\n\t\t\tvar prop = args.style, values = {}, value, start, end;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.style = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.variant;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.variant = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.weight;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.weight = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.family;\r\n\t\t\tif(prop && prop.values){\r\n\t\t\t\tvalues.family = new InterpolValues(prop.values);\r\n\t\t\t}\r\n\t\t\tprop = args.size;\r\n\t\t\tif(prop && prop.units){\r\n\t\t\t\tstart = parseFloat(prop.start ? prop.start : (shape.font && shape.font.size || \"0\"));\r\n\t\t\t\tend = parseFloat(prop.end ? prop.end : (shape.font && shape.font.size || \"0\"));\r\n\t\t\t\tvalues.size = new InterpolUnit(start, end, prop.units);\r\n\t\t\t}\r\n\t\t\tthis.curve = new InterpolObject(values, font);\r\n\t\t});\r\n\t\tHub.connect(anim, \"onAnimate\", shape, \"setFont\");\r\n\t\treturn anim; // dojo.Animation\r\n\t};\r\n\r\n\tfxg.animateTransform = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation which will change transformation over time.\r\n\t\t// args:\r\n\t\t//\t\tan object defining the animation setting.\r\n\t\t// example:\r\n\t\t//\t|\tgfx.animateTransform{{\r\n\t\t//\t|\t\tshape: shape,\r\n\t\t//\t|\t\tduration: 500,\r\n\t\t//\t|\t\ttransform: [\r\n\t\t//\t|\t\t\t{name: \"translate\", start: [0, 0], end: [200, 200]},\r\n\t\t//\t|\t\t\t{name: \"original\"}\r\n\t\t//\t|\t\t]\r\n\t\t//\t|\t}).play();\r\n\t\tif(!args.easing){ args.easing = fx._defaultEasing; }\r\n\t\tvar anim = new fx.Animation(args), shape = args.shape, original;\r\n\t\tHub.connect(anim, \"beforeBegin\", anim, function(){\r\n\t\t\toriginal = shape.getTransform();\r\n\t\t\tthis.curve = new InterpolTransform(args.transform, original);\r\n\t\t});\r\n\t\tHub.connect(anim, \"onAnimate\", shape, \"setTransform\");\r\n\t\tif(g.renderer === \"svg\" && has(\"ie\") >= 10){\r\n\t\t\t// fix http://bugs.dojotoolkit.org/ticket/16879\r\n\t\t\tvar handlers = [\r\n\t\t\t\t\tHub.connect(anim, \"onBegin\", anim, function(){\r\n\t\t\t\t\t\tvar parent = shape.getParent();\r\n\t\t\t\t\t\twhile(parent && parent.getParent){\r\n\t\t\t\t\t\t\tparent = parent.getParent();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(parent){\r\n\t\t\t\t\t\t\tshape.__svgContainer = parent.rawNode.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tHub.connect(anim, \"onAnimate\", anim, function(){\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tif(shape.__svgContainer){\r\n\t\t\t\t\t\t\t\tvar ov = shape.__svgContainer.style.visibility;\r\n\t\t\t\t\t\t\t\tshape.__svgContainer.style.visibility = \"visible\";\r\n\t\t\t\t\t\t\t\tvar pokeNode = shape.__svgContainer.offsetHeight;\r\n\t\t\t\t\t\t\t\tshape.__svgContainer.style.visibility = ov;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}catch(e){}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tHub.connect(anim, \"onEnd\", anim, function(){\r\n\t\t\t\t\t\tarr.forEach(handlers, Hub.disconnect);\r\n\t\t\t\t\t\tif(shape.__svgContainer){\r\n\t\t\t\t\t\t\tvar ov = shape.__svgContainer.style.visibility;\r\n\t\t\t\t\t\t\tvar sn = shape.__svgContainer;\r\n\t\t\t\t\t\t\tshape.__svgContainer.style.visibility = \"visible\";\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\tsn.style.visibility = ov;\r\n\t\t\t\t\t\t\t\t\tsn = null;\r\n\t\t\t\t\t\t\t\t}catch(e){}\r\n\t\t\t\t\t\t\t},100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete shape.__svgContainer;\r\n\t\t\t\t\t})\r\n\t\t\t\t];\r\n\t\t}\r\n\t\treturn anim; // dojo.Animation\r\n\t};\r\n\t\r\n\treturn fxg;\r\n});\r\n"]}