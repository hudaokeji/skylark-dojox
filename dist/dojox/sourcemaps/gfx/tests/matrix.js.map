{"version":3,"sources":["gfx/tests/matrix.js"],"names":["dojo","provide","require","m","dojox","gfx","matrix","eq","t","a","b","Math","abs","tests","register","Matrix2D","xx","yy","xy","yx","dx","dy","rotateg","normalize","invert","rotategAt","multiplyPoint","x","y","scale","c","d","reflect","project","assertTrue","isIdentity","assertFalse","res","r","width","height","multiplyRectangle","tl","tr","br","bl","exp","translate"],"mappings":"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","file":"../../../gfx/tests/matrix.js","sourcesContent":["dojo.provide(\"dojox.gfx.tests.matrix\");\r\ndojo.require(\"dojox.gfx.matrix\");\r\n\r\n(function(){\r\n\tvar m = dojox.gfx.matrix;\r\n\tvar eq = function(t, a, b){ t.t(2 * Math.abs(a - b) / ((a < 1 && b < 1) ? 1 : a + b) < 1e-6); };\r\n\ttests.register(\"dojox.gfx.tests.matrix\", [\r\n\t\tfunction IdentityTest(t){\r\n\t\t\tvar a = new m.Matrix2D();\r\n\t\t\teq(t, a.xx, 1);\r\n\t\t\teq(t, a.yy, 1);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction Rot30gTest(t){\r\n\t\t\tvar a = m.rotateg(30);\r\n\t\t\teq(t, a.xx, a.yy);\r\n\t\t\teq(t, a.xy, -a.yx);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.yx, 0.5);\r\n\t\t\tt.t(a.xy < 0);\r\n\t\t\tt.t(a.yx > 0);\r\n\t\t},\r\n\t\tfunction Rot45gTest(t){\r\n\t\t\tvar a = m.rotateg(45);\r\n\t\t\teq(t, a.xx, a.yy);\r\n\t\t\teq(t, a.xy, -a.yx);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, a.yx);\r\n\t\t\teq(t, a.yy, -a.xy);\r\n\t\t},\r\n\t\tfunction Rot90gTest(t){\r\n\t\t\tvar a = m.rotateg(90);\r\n\t\t\teq(t, a.xx, a.yy);\r\n\t\t\teq(t, a.xy, -a.yx);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, 0);\r\n\t\t\teq(t, a.yx, 1);\r\n\t\t},\r\n\t\tfunction CombineIdentitiesTest(t){\r\n\t\t\tvar a = m.normalize([new m.Matrix2D(), new m.Matrix2D(), new m.Matrix2D()]);\r\n\t\t\teq(t, a.xx, 1);\r\n\t\t\teq(t, a.yy, 1);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction CombineExclusiveTest(t){\r\n\t\t\tvar a = m.normalize([m.rotateg(30), m.rotateg(-30)]);\r\n\t\t\teq(t, a.xx, 1);\r\n\t\t\teq(t, a.yy, 1);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction CombineInvertedTest(t){\r\n\t\t\tvar a = m.normalize([m.rotateg(30), m.invert(m.rotateg(30))]);\r\n\t\t\teq(t, a.xx, 1);\r\n\t\t\teq(t, a.yy, 1);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction Rot90gAtTest(t){\r\n\t\t\tvar a = m.rotategAt(90, 10, 10);\r\n\t\t\teq(t, a.xx, a.yy);\r\n\t\t\teq(t, a.xy, -a.yx);\r\n\t\t\teq(t, a.dx, 20);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, 0);\r\n\t\t\teq(t, a.yx, 1);\r\n\t\t},\r\n\t\tfunction MultPointTest1(t){\r\n\t\t\tvar b = m.multiplyPoint(m.rotategAt(90, 10, 10), 10, 10);\r\n\t\t\teq(t, b.x, 10);\r\n\t\t\teq(t, b.y, 10);\r\n\t\t},\r\n\t\tfunction MultPointTest2(t){\r\n\t\t\tvar b = m.multiplyPoint(m.rotategAt(90, 10, 10), {x: 10, y: 5});\r\n\t\t\teq(t, b.x, 15);\r\n\t\t\teq(t, b.y, 10);\r\n\t\t},\r\n\t\tfunction MultPointTest3(t){\r\n\t\t\tvar b = m.multiplyPoint(m.rotategAt(90, 10, 10), 10, 15);\r\n\t\t\teq(t, b.x, 5);\r\n\t\t\teq(t, b.y, 10);\r\n\t\t},\r\n\t\tfunction ScaleTest1(t){\r\n\t\t\tvar a = m.normalize([m.scale(2, 1), m.invert(m.rotateg(45))]);\r\n\t\t\teq(t, a.xx, 2 * a.yy);\r\n\t\t\teq(t, a.xy, -2 * a.yx);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, a.xy);\r\n\t\t\teq(t, a.yy, -a.yx);\r\n\t\t},\r\n\t\tfunction ScaleTest2(t){\r\n\t\t\tvar a = m.normalize([m.scale(1, 2), m.invert(m.rotateg(45))]);\r\n\t\t\teq(t, 2 * a.xx, a.yy);\r\n\t\t\teq(t, 2 * a.xy, -a.yx);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, a.xy);\r\n\t\t\teq(t, a.yy, -a.yx);\r\n\t\t},\r\n\t\tfunction ScaleTest3(t){\r\n\t\t\tvar a = m.normalize([m.rotateg(45), m.scale(2, 1)]);\r\n\t\t\teq(t, a.xx, 2 * a.yy);\r\n\t\t\teq(t, a.yx, -2 * a.xy);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, a.yx);\r\n\t\t\teq(t, a.yy, -a.xy);\r\n\t\t},\r\n\t\tfunction ScaleTest4(t){\r\n\t\t\tvar a = m.normalize([m.rotateg(45), m.scale(1, 2)]);\r\n\t\t\teq(t, 2 * a.xx, a.yy);\r\n\t\t\teq(t, 2 * a.yx, -a.xy);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t\teq(t, a.xx, a.yx);\r\n\t\t\teq(t, a.yy, -a.xy);\r\n\t\t},\r\n\t\tfunction ScaleTest5(t){\r\n\t\t\tvar a = m.normalize([m.rotategAt(45, 100, 100), m.scale(2)]);\r\n\t\t\teq(t, a.xx, a.yy);\r\n\t\t\teq(t, a.xy, -a.yx);\r\n\t\t\teq(t, a.xx, a.yx);\r\n\t\t\teq(t, a.yy, -a.xy);\r\n\t\t\teq(t, a.dx, 100);\r\n\t\t\tt.t(a.dy < 0);\r\n\t\t\tvar b = m.normalize([m.scale(2), m.rotategAt(45, 100, 100)]);\r\n\t\t\teq(t, b.xx, b.yy);\r\n\t\t\teq(t, b.xy, -b.yx);\r\n\t\t\teq(t, b.xx, b.yx);\r\n\t\t\teq(t, b.yy, -b.xy);\r\n\t\t\teq(t, b.dx, 200);\r\n\t\t\tt.t(b.dy < 0);\r\n\t\t\teq(t, a.xx, b.xx);\r\n\t\t\teq(t, a.xy, b.xy);\r\n\t\t\teq(t, a.yx, b.yx);\r\n\t\t\teq(t, a.yy, b.yy);\r\n\t\t\teq(t, 2 * a.dx, b.dx);\r\n\t\t\teq(t, 2 * a.dy, b.dy);\r\n\t\t\tvar c = m.normalize([m.rotateg(45), m.scale(2)]);\r\n\t\t\teq(t, c.xx, c.yy);\r\n\t\t\teq(t, c.xy, -c.yx);\r\n\t\t\teq(t, c.xx, c.yx);\r\n\t\t\teq(t, c.yy, -c.xy);\r\n\t\t\teq(t, c.dx, 0);\r\n\t\t\teq(t, c.dy, 0);\r\n\t\t\tvar d = m.normalize([m.scale(2), m.rotateg(45)]);\r\n\t\t\teq(t, d.xx, d.yy);\r\n\t\t\teq(t, d.xy, -d.yx);\r\n\t\t\teq(t, d.xx, d.yx);\r\n\t\t\teq(t, d.yy, -d.xy);\r\n\t\t\teq(t, d.dx, 0);\r\n\t\t\teq(t, d.dy, 0);\r\n\t\t\teq(t, a.xx, c.xx);\r\n\t\t\teq(t, a.xy, c.xy);\r\n\t\t\teq(t, a.yx, c.yx);\r\n\t\t\teq(t, a.yy, c.yy);\r\n\t\t\teq(t, a.xx, d.xx);\r\n\t\t\teq(t, a.xy, d.xy);\r\n\t\t\teq(t, a.yx, d.yx);\r\n\t\t\teq(t, a.yy, d.yy);\r\n\t\t},\r\n\t\tfunction ScaleTest6(t){\r\n\t\t\tvar a = m.normalize(6);\r\n\t\t\teq(t, a.xx, 6);\r\n\t\t\teq(t, a.yy, 6);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction ScaleTest7(t){\r\n\t\t\tvar a = m.normalize([2, m.scale(2, 1)]);\r\n\t\t\teq(t, a.xx, 4);\r\n\t\t\teq(t, a.yy, 2);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 0);\r\n\t\t\teq(t, a.dy, 0);\r\n\t\t},\r\n\t\tfunction TranslateTest(t){\r\n\t\t\tvar a = m.normalize({dx: 100, dy: 200});\r\n\t\t\teq(t, a.xx, 1);\r\n\t\t\teq(t, a.yy, 1);\r\n\t\t\teq(t, a.xy, 0);\r\n\t\t\teq(t, a.yx, 0);\r\n\t\t\teq(t, a.dx, 100);\r\n\t\t\teq(t, a.dy, 200);\r\n\t\t},\r\n\t\tfunction ReflectTest1(t){\r\n\t\t\tvar b = m.multiplyPoint(m.reflect(1, 1), 1, 0);\r\n\t\t\teq(t, b.x, 0);\r\n\t\t\teq(t, b.y, 1);\r\n\t\t},\r\n\t\tfunction ReflectTest2(t){\r\n\t\t\tvar b = m.multiplyPoint(m.reflect(1, 1), 0, 1);\r\n\t\t\teq(t, b.x, 1);\r\n\t\t\teq(t, b.y, 0);\r\n\t\t},\r\n\t\tfunction ProjectTest1(t){\r\n\t\t\tvar b = m.multiplyPoint(m.project(1, 1), 1, 0);\r\n\t\t\teq(t, b.x, 0.5);\r\n\t\t\teq(t, b.y, 0.5);\r\n\t\t},\r\n\t\tfunction ProjectTest2(t){\r\n\t\t\tvar b = m.multiplyPoint(m.project(1, 1), 0, 1);\r\n\t\t\teq(t, b.x, 0.5);\r\n\t\t\teq(t, b.y, 0.5);\r\n\t\t},\r\n\t\tfunction IsIdentityTest(t){\r\n\t\t\tvar a = new m.Matrix2D();\r\n\t\t\ttests.assertTrue(m.isIdentity(a));\r\n\t\t\ta.xy=1;\r\n\t\t\ttests.assertFalse(m.isIdentity(a));\r\n\t\t},\r\n\t\tfunction MultiplyRectangle(t){\r\n\t\t\tvar a = new m.Matrix2D(), \r\n\t\t\t\tr = {x:0,y:0,width:3,height:2},\r\n\t\t\t\tres;\r\n\t\t\t// multiply by identity -> same rect\r\n\t\t\tres = m.multiplyRectangle(a, r);\r\n\t\t\ttests.assertTrue(res.x == r.x && res.y == r.y && res.width == r.width && res.height == r.height);\t\t\t\r\n\t\t\tres = m.multiplyRectangle(m.scale(2,2), r);\r\n\t\t\teq(t, res.x, 0);\r\n\t\t\teq(t, res.y, 0);\r\n\t\t\teq(t, res.width, 6);\r\n\t\t\teq(t, res.height, 4);\r\n\t\t\ta = m.rotategAt(-45, 0, 0);\r\n\t\t\tvar tl = m.multiplyPoint(a, 0, 0), // top left\r\n\t\t\t\ttr = m.multiplyPoint(a, 3, 0), // top right\r\n\t\t\t\tbr = m.multiplyPoint(a, 3, 2), // bottom right\r\n\t\t\t\tbl = m.multiplyPoint(a, 0, 2), // bottom left\r\n\t\t\t\texp = {x : tl.x, y:tr.y, width: br.x, height: bl.y - tr.y}; // expected\r\n\t\t\tres = m.multiplyRectangle(a, r);\r\n\t\t\teq(t, res.x, exp.x);\r\n\t\t\teq(t, res.y, exp.y);\r\n\t\t\teq(t, res.width, exp.width);\r\n\t\t\teq(t, res.height, exp.height);\r\n\t\t\t// matrices array\r\n\t\t\tres = m.multiplyRectangle([m.translate(10,10), m.scale(2,2)], r);\r\n\t\t\teq(t, res.x, 10);\r\n\t\t\teq(t, res.y, 10);\r\n\t\t\teq(t, res.width, 6);\r\n\t\t\teq(t, res.height, 4);\r\n\t\t}\r\n\t\t\r\n\t]);\r\n})();\r\n"]}