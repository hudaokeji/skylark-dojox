{"version":3,"sources":["gfx/tests/decompose.js"],"names":["dojo","provide","require","m","dojox","gfx","matrix","eq","t","a","b","Math","abs","reconstruct","r","decompose","normalize","translate","dx","dy","rotate","angle2","scale","sx","sy","angle1","compare","A","xx","yy","xy","yx","eqM","tests","register","identity","flipX","flipY","flipXY","rotateg","skewXg","skewYg","reflect","project","rotateAt"],"mappings":"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","file":"../../../gfx/tests/decompose.js","sourcesContent":["dojo.provide(\"dojox.gfx.tests.decompose\");\r\ndojo.require(\"dojox.gfx.decompose\");\r\n\r\n(function(){\r\n\tvar m = dojox.gfx.matrix;\r\n\tvar eq = function(t, a, b){ t.t(2 * Math.abs(a - b) / ((a < 1 && b < 1) ? 1 : a + b) < 1e-6); };\r\n\tvar eqM = function(t, a, b){\r\n\t\teq(t, a.xx, b.xx);\r\n\t\teq(t, a.yy, b.yy);\r\n\t\teq(t, a.xy, b.xy);\r\n\t\teq(t, a.yx, b.yx);\r\n\t\teq(t, a.dx, b.dx);\r\n\t\teq(t, a.dy, b.dy);\r\n\t};\r\n\tvar compose = function(r){\r\n\t\treturn m.normalize([\r\n\t\t\tm.translate(r.dx, r.dy),\r\n\t\t\tm.rotate(r.angle2),\r\n\t\t\tm.scale(r.sx, r.sy),\r\n\t\t\tm.rotate(r.angle1)\r\n\t\t]);\r\n\t};\r\n\tvar reconstruct = function(a){\r\n\t\treturn compose(dojox.gfx.decompose(a));\r\n\t};\r\n\tvar compare = function(t, a){\r\n\t\tvar A = m.normalize(a);\r\n\t\teqM(t, A, reconstruct(A));\r\n\t};\r\n\ttests.register(\"dojox.gfx.tests.decompose\", [\r\n\t\tfunction IdentityTest(t){\r\n\t\t\tcompare(t, m.identity);\r\n\t\t},\r\n\t\tfunction FlipXTest(t){\r\n\t\t\tcompare(t, m.flipX);\r\n\t\t},\r\n\t\tfunction FlipYTest(t){\r\n\t\t\tcompare(t, m.flipY);\r\n\t\t},\r\n\t\tfunction FlipXYTest(t){\r\n\t\t\tcompare(t, m.flipXY);\r\n\t\t},\r\n\t\tfunction TranslationTest(t){\r\n\t\t\tcompare(t, m.translate(45, -15));\r\n\t\t},\r\n\t\tfunction RotationTest(t){\r\n\t\t\tcompare(t, m.rotateg(35));\r\n\t\t},\r\n\t\tfunction SkewXTest(t){\r\n\t\t\tcompare(t, m.skewXg(35));\r\n\t\t},\r\n\t\tfunction SkewYTest(t){\r\n\t\t\tcompare(t, m.skewYg(35));\r\n\t\t},\r\n\t\tfunction ReflectTest(t){\r\n\t\t\tcompare(t, m.reflect(13, 27));\r\n\t\t},\r\n\t\tfunction ProjectTest(t){\r\n\t\t\tcompare(t, m.project(13, 27));\r\n\t\t},\r\n\t\tfunction ScaleTest1(t){\r\n\t\t\tcompare(t, m.scale(3));\r\n\t\t},\r\n\t\tfunction ScaleTest2(t){\r\n\t\t\tcompare(t, m.scale(3, -1));\r\n\t\t},\r\n\t\tfunction ScaleTest3(t){\r\n\t\t\tcompare(t, m.scale(-3, 1));\r\n\t\t},\r\n\t\tfunction ScaleTest4(t){\r\n\t\t\tcompare(t, m.scale(-3, -1));\r\n\t\t},\r\n\t\tfunction ScaleRotateTest1(t){\r\n\t\t\tcompare(t, [m.scale(3), m.rotateAt(35, 13, 27)]);\r\n\t\t},\r\n\t\tfunction ScaleRotateTest2(t){\r\n\t\t\tcompare(t, [m.scale(3, -1), m.rotateAt(35, 13, 27)]);\r\n\t\t},\r\n\t\tfunction ScaleRotateTest3(t){\r\n\t\t\tcompare(t, [m.scale(-3, 1), m.rotateAt(35, 13, 27)]);\r\n\t\t},\r\n\t\tfunction ScaleRotateTest4(t){\r\n\t\t\tcompare(t, [m.scale(-3, -1), m.rotateAt(35, 13, 27)]);\r\n\t\t},\r\n\t\tfunction RotateScaleTest1(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(3)]);\r\n\t\t},\r\n\t\tfunction RotateScaleTest2(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(3, -1)]);\r\n\t\t},\r\n\t\tfunction RotateScaleTest3(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(-3, 1)]);\r\n\t\t},\r\n\t\tfunction RotateScaleTest4(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(-3, -1)]);\r\n\t\t},\r\n\t\tfunction RotateScaleRotateTest1(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(3), m.rotateAt(-15, 163, -287)]);\r\n\t\t},\r\n\t\tfunction RotateScaleRotateTest2(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(3, -1), m.rotateAt(-15, 163, -287)]);\r\n\t\t},\r\n\t\tfunction RotateScaleRotateTest3(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(-3, 1), m.rotateAt(-15, 163, -287)]);\r\n\t\t},\r\n\t\tfunction RotateScaleRotateTest4(t){\r\n\t\t\tcompare(t, [m.rotateAt(35, 13, 27), m.scale(-3, -1), m.rotateAt(-15, 163, -287)]);\r\n\t\t}\r\n\t]);\r\n})();\r\n"]}