{"version":3,"sources":["drawing/util/positioning.js"],"names":["define","common","positioning","label","start","end","x","y","slope","deltay","Math","sqrt","foo","align","angle"],"mappings":";;;;;;;AAAAA,QAAQ,YAAa,SAASC,GAE7B,IAGIC,GACJC,MAAoB,SAAmBC,EAAiBC,GAKvD,IAAIC,EAAI,IAAKF,EAAME,EAAED,EAAIC,GACrBC,EAAI,IAAKH,EAAMG,EAAEF,EAAIE,GAGrBC,EAAQP,EAAOO,MAAMJ,EAAOC,GAC5BI,EAdY,EAcQC,KAAKC,KAAK,EAAIH,EAAMA,GAe5C,OAbGH,EAAIE,EAAEH,EAAMG,GAAKF,EAAIC,EAAEF,EAAME,GAAKD,EAAIE,EAAEH,EAAMG,GAAKF,EAAIC,EAAEF,EAAME,KAGjEG,GAAUA,EACVF,GAnBgB,KA4BRD,EAPTA,IAAMG,EAAOD,EAOCD,EANdA,GAAKE,EAMcG,IAAI,MAAOC,MAFlBR,EAAIC,EAAEF,EAAME,EAAI,MAAQ,UAKrCQ,MAAoB,SAAmBV,EAAiBC,GAKvD,IAAIC,EAAI,GAAIF,EAAME,EAAE,GAAID,EAAIC,EACxBC,EAAI,GAAIH,EAAMG,EAAE,GAAIF,EAAIE,EAGxBC,EAAQP,EAAOO,MAAMJ,EAAOC,GAC5BI,EA1CY,EA0CQC,KAAKC,KAAK,EAAIH,EAAMA,GAEzCH,EAAIC,EAAEF,EAAME,IAAGG,GAAUA,GAC5BH,IAAMG,EAASD,EACfD,GAAKE,EAIL,IAAII,EAAQR,EAAIE,EAAEH,EAAMG,EAAI,MAAQ,QAIpC,OAASD,EAAEA,EAAGC,EAFPA,GAAKF,EAAIC,EAAIF,EAAME,EAAI,IAAmB,GAE9BO,MAAMA,KAG1B,OAAOX","file":"../../../drawing/util/positioning.js","sourcesContent":["define(['./common'], function(common){\r\n\t\r\n\tvar textOffset = 4;  // distance from line to text box\r\n\tvar textYOffset = 20;  // height of text box\r\n\t\r\n\tvar positioning = {};\r\n\tpositioning.label = function(/*Object*/start, /*Object*/end){\r\n\t\t// summary:\r\n\t\t//\t\tReturns the optimal text positions for annotations.Label.\r\n\t\t\r\n\t\t// label at middle of vector\r\n\t\tvar x = 0.5*(start.x+end.x);\r\n\t\tvar y = 0.5*(start.y+end.y);\r\n\t\t\r\n\t\t// move label a set distance from the line\r\n\t\tvar slope = common.slope(start, end);\r\n\t\tvar deltay = textOffset/Math.sqrt(1.0+slope*slope);\r\n\t\t\r\n\t\tif(end.y>start.y && end.x>start.x || end.y<start.y && end.x<start.x){\r\n\t\t\t// Position depending on quadrant.  Y offset\r\n\t\t\t// positions box aligned vertically from top\r\n\t\t\tdeltay = -deltay;\r\n\t\t\ty -= textYOffset;\r\n\t\t}\r\n\t\tx += -deltay*slope;\r\n\t\ty += deltay;\r\n\t\t\r\n\t\t// want text to be away from start of vector\r\n\t\t// This will make force diagrams less crowded\r\n\t\tvar align = end.x<start.x ? \"end\" : \"start\";\r\n\t\t\r\n\t\treturn { x:x, y:y, foo:\"bar\", align:align}; // Object\r\n\t};\r\n\t\r\n\tpositioning.angle = function(/*Object*/start, /*Object*/end){\r\n\t\t// summary:\r\n\t\t//\t\tReturns the optimal position for annotations.Angle.\r\n\r\n\t\t// angle at first third of vector\r\n\t\tvar x = 0.7*start.x+0.3*end.x;\r\n\t\tvar y = 0.7*start.y+0.3*end.y;\r\n\r\n\t\t// move label a set distance from the line\r\n\t\tvar slope = common.slope(start, end);\r\n\t\tvar deltay = textOffset/Math.sqrt(1.0+slope*slope);\r\n\t\t\r\n\t\tif(end.x<start.x){deltay = -deltay;}\r\n\t\tx += -deltay * slope;\r\n\t\ty += deltay;\r\n\t\t\r\n\t\t// want text to be clockwise from vector\r\n\t\t// to match angle measurement from x-axis\r\n\t\tvar align = end.y>start.y ? \"end\" : \"start\";\r\n\t        // box vertical aligned from middle\r\n\t        y += end.x > start.x ? 0.5*textYOffset :  -0.5*textYOffset;\r\n\t\t\r\n\t\treturn { x:x, y:y, align:align}; // Object\r\n\t};\r\n\t\r\n\treturn positioning;\r\n});\r\n\r\n"]}