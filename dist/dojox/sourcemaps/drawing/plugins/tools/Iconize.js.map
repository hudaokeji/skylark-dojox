{"version":3,"sources":["drawing/plugins/tools/Iconize.js"],"names":["define","dojo","oo","Plugin","registry","Iconize","declare","options","onClick","item","nm","this","stencils","console","log","id","shortType","points","makeIcon","p","rnd","n","Number","toFixed","x","y","forEach","pt","undefined","isNaN","Math","min","xmax","ymax","max","txt","i","t","length","byId","value","setup","name","tooltip","iconClass","setObject","register"],"mappings":";;;;;;;AAAAA,QAAQ,OAAQ,gBAAiB,aAAc,2BAC/C,SAASC,EAAMC,EAAIC,EAAQC,GAG3B,IAAIC,EAAUH,EAAGI,QAChBH,EACA,SAASI,MASRC,QAAS,WACR,IAAIC,EACJ,IAAI,IAAIC,KAAMC,KAAKC,SAASA,SAE3B,GADAC,QAAQC,IAAI,kBAAmBH,KAAKC,SAASA,SAASF,GAAIK,GAAIJ,KAAKC,SAASA,SAASF,IAC5C,QAAtCC,KAAKC,SAASA,SAASF,GAAIM,UAAkB,CAC/CP,EAAOE,KAAKC,SAASA,SAASF,GAC9B,MAGCD,IACFI,QAAQC,IAAI,uBAAwBL,EAAKQ,QACzCN,KAAKO,SAAST,EAAKQ,UAGrBC,SAAU,SAAkBC,GAC3B,IAAIC,EAAM,SAASC,GAClB,OAAOC,OAAOD,EAAEE,QAAQ,KAGrBC,EAAI,IACJC,EAAI,IACRN,EAAEO,QAAQ,SAASC,QACRC,IAAPD,EAAGH,GAAkBK,MAAMF,EAAGH,KAChCA,EAAIM,KAAKC,IAAIP,EAAGG,EAAGH,GACnBC,EAAIK,KAAKC,IAAIN,EAAGE,EAAGF,MAIrB,IAAIO,EAAO,EACPC,EAAO,EACXd,EAAEO,QAAQ,SAASC,QACRC,IAAPD,EAAGH,GAAkBK,MAAMF,EAAGH,KAChCG,EAAGH,EAAIJ,EAAIO,EAAGH,EAAIA,GAElBG,EAAGF,EAAIL,EAAIO,EAAGF,EAAIA,GAClBO,EAAOF,KAAKI,IAAIF,EAAML,EAAGH,GACzBS,EAAOH,KAAKI,IAAID,EAAMN,EAAGF,MAI3BZ,QAAQC,IAAI,QAASkB,EAAM,QAASC,GAKpCd,EAAEO,QAAQ,SAASC,GAClBA,EAAGH,EAJI,GAIAJ,EAAIO,EAAGH,EAAIQ,GAHX,GAIPL,EAAGF,EALI,GAKAL,EAAIO,EAAGF,EAAIQ,GAJX,KAOR,IAAIE,EAAM,MACVlC,EAAKyB,QAAQP,EAAG,SAASQ,EAAIS,GAC5BD,GAAO,MACJR,EAAGU,IACLF,GAAO,MAAMR,EAAGU,EAAE,UAETT,IAAPD,EAAGH,GAAkBK,MAAMF,EAAGH,KAC7BG,EAAGU,IACLF,GAAO,MAERA,GAAO,KAAKR,EAAGH,EAAE,UAAUG,EAAGF,GAE/BU,GAAO,MACJC,GAAGjB,EAAEmB,OAAO,IACdH,GAAO,KAERA,GAAO,OAERA,GAAK,IAELtB,QAAQC,IAAIqB,GACZ,IAAId,EAAIpB,EAAKsC,KAAK,QACflB,IACFA,EAAEmB,MAAQL,MAcd,OARA9B,EAAQoC,OACPC,KAAK,sCACLC,QAAQ,eACRC,UAAU,WAEX3C,EAAK4C,UAAU,sCAAuCxC,GACtDD,EAAS0C,SAASzC,EAAQoC,MAAO,UAE1BpC","file":"../../../../drawing/plugins/tools/Iconize.js","sourcesContent":["define([\"dojo\", \"../../util/oo\", \"../_Plugin\", \"../../manager/_registry\"],\r\nfunction(dojo, oo, Plugin, registry){\r\n\r\n//dojox.drawing.plugins.tools.Iconize = \r\nvar Iconize = oo.declare(\r\n\tPlugin,\r\n\tfunction(options){\r\n\t\r\n\t},\r\n\t{\r\n\t\t// summary:\r\n\t\t//\t\tSomewhat of internal use...\r\n\t\t//\t\tOutputs a path to be used as an icon. Will end up being a\r\n\t\t//\t\tsub-icon under Export options\r\n\r\n\t\tonClick: function(){\r\n\t\t\tvar item;\r\n\t\t\tfor(var nm in this.stencils.stencils){\r\n\t\t\t\tconsole.log(\" stanceil item:\", this.stencils.stencils[nm].id, this.stencils.stencils[nm])\r\n\t\t\t\tif(this.stencils.stencils[nm].shortType==\"path\"){\r\n\t\t\t\t\titem = this.stencils.stencils[nm];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(item){\r\n\t\t\t\tconsole.log(\"click Iconize plugin\", item.points);\r\n\t\t\t\tthis.makeIcon(item.points);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmakeIcon: function(/*Array*/p){\r\n\t\t\tvar rnd = function(n){\r\n\t\t\t\treturn Number(n.toFixed(1));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar x = 10000;\r\n\t\t\tvar y = 10000;\r\n\t\t\tp.forEach(function(pt){\r\n\t\t\t\tif(pt.x!==undefined && !isNaN(pt.x)){\r\n\t\t\t\t\tx = Math.min(x, pt.x);\r\n\t\t\t\t\ty = Math.min(y, pt.y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar xmax = 0;\r\n\t\t\tvar ymax = 0;\r\n\t\t\tp.forEach(function(pt){\r\n\t\t\t\tif(pt.x!==undefined && !isNaN(pt.x)){\r\n\t\t\t\t\tpt.x = rnd(pt.x - x);\r\n\t\t\t\t\t//console.log(\"Y:\", pt.y, y, pt.y - y)\r\n\t\t\t\t\tpt.y = rnd(pt.y - y);\r\n\t\t\t\t\txmax = Math.max(xmax, pt.x);\r\n\t\t\t\t\tymax = Math.max(ymax, pt.y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tconsole.log(\"xmax:\", xmax, \"ymax:\", ymax)\r\n\t\t\t\r\n\t\t\tvar s = 60\r\n\t\t\tvar m = 20\r\n\t\t\t\r\n\t\t\tp.forEach(function(pt){\r\n\t\t\t\tpt.x = rnd(pt.x / xmax) * s + m;\r\n\t\t\t\tpt.y = rnd(pt.y / ymax) * s + m;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar txt = \"[\\n\";\r\n\t\t\tdojo.forEach(p, function(pt, i){\r\n\t\t\t\ttxt += \"{\\t\"\r\n\t\t\t\tif(pt.t){\r\n\t\t\t\t\ttxt += \"t:'\"+pt.t+\"'\"\r\n\t\t\t\t}\r\n\t\t\t\tif(pt.x!==undefined && !isNaN(pt.x)){\r\n\t\t\t\t\tif(pt.t){\r\n\t\t\t\t\t\ttxt += \", \";\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttxt += \"x:\"+pt.x+\",\\t\\ty:\"+pt.y;\r\n\t\t\t\t}\r\n\t\t\t\ttxt += \"\\t}\";\r\n\t\t\t\tif(i!=p.length-1){\r\n\t\t\t\t\ttxt += \",\"\r\n\t\t\t\t}\r\n\t\t\t\ttxt += \"\\n\"\r\n\t\t\t});\r\n\t\t\ttxt+=\"]\"\r\n\t\t\t\r\n\t\t\tconsole.log(txt)\r\n\t\t\tvar n = dojo.byId(\"data\");\r\n\t\t\tif(n){\r\n\t\t\t\tn.value = txt;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nIconize.setup = {\r\n\tname:\"dojox.drawing.plugins.tools.Iconize\",\r\n\ttooltip:\"Iconize Tool\",\r\n\ticonClass:\"iconPan\"\r\n};\r\ndojo.setObject('dojox.drawing.plugins.tools.Iconize', Iconize);\r\nregistry.register(Iconize.setup, \"plugin\");\r\n\r\nreturn Iconize;\r\n});\r\n"]}