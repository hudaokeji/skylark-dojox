{"version":3,"sources":["drawing/tools/Ellipse.js"],"names":["define","lang","oo","registry","StencilEllipse","Ellipse","declare","draws","onDrag","obj","s","start","e","x","y","w","h","this","keys","shift","Math","max","alt","points","render","onUp","created","_downOnCanvas","shape","o","pointsToData","console","log","rx","minimumSize","ry","remove","hit","data","cx","cy","dataToPoints","onRender","setObject","setup","name","tooltip","iconClass","register"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,aAAc,uBAAwB,sBACjE,SAASC,EAAMC,EAAIC,EAAUC,GAG7B,IAAIC,EAAUH,EAAGI,QAChBF,EACA,cAQCG,OAAM,EACNC,OAAQ,SAAwBC,GAC/B,IAAIC,EAAID,EAAIE,MAAOC,EAAIH,EACnBI,EAAIH,EAAEG,EAAID,EAAEC,EAAIH,EAAEG,EAAID,EAAEC,EAC3BC,EAAIJ,EAAEI,EAAIF,EAAEE,EAAIJ,EAAEI,EAAIF,EAAEE,EACxBC,EAAIL,EAAEG,EAAID,EAAEC,EAAID,EAAEC,EAAEH,EAAEG,EAAIH,EAAEG,EAAED,EAAEC,EAChCG,EAAIN,EAAEI,EAAIF,EAAEE,EAAIF,EAAEE,EAAEJ,EAAEI,EAAIJ,EAAEI,EAAEF,EAAEE,EAE9BG,KAAKC,KAAKC,QAAQJ,EAAIC,EAAII,KAAKC,IAAIN,EAAEC,IACpCC,KAAKC,KAAKI,KAGVR,EAAIE,EAAI,IAAIA,EAAIF,GAChBD,EAAIE,EAAI,IAAIA,EAAIF,KAHnBA,GAAGE,EAAE,EAAGD,GAAGE,EAAE,EAAGD,GAAG,EAAGC,GAAG,GAM1BC,KAAKM,SACHV,EAAEA,EAAEE,EAAGD,EAAEA,EAAEE,IACXH,EAAEA,EAAEE,EAAGD,EAAEA,EAAEE,IACXH,EAAEA,EAAEE,EAAGD,EAAEA,EAAEE,IACXH,EAAEA,EAAEE,EAAGD,EAAEA,EAAEE,IAEbC,KAAKO,UAGNC,KAAM,SAAwBhB,GAC7B,IAAGQ,KAAKS,SAAYT,KAAKU,cAAzB,CAGA,GAFAV,KAAKU,eAAgB,EAEjBV,KAAKW,MAUJ,CAEJ,IAAIC,EAAIZ,KAAKa,eAEb,GADAC,QAAQC,IAAI,4CAA4CH,GAChD,EAALA,EAAEI,GAAKhB,KAAKiB,aAAoB,EAALL,EAAEM,GAAOlB,KAAKiB,YAE3C,YADAjB,KAAKmB,OAAOnB,KAAKW,MAAOX,KAAKoB,SAfhB,CACd,IAAI3B,EAAID,EAAIE,MAAOC,EAAqB,EAAjBK,KAAKiB,YAC5BjB,KAAKqB,MACJC,GAAI7B,EAAEG,EAAED,EACR4B,GAAI9B,EAAEI,EAAEF,EACRqB,GAAIrB,EACJuB,GAAIvB,GAELK,KAAKwB,eACLxB,KAAKO,SAWNP,KAAKyB,SAASzB,UAejB,OATAhB,EAAK0C,UAAU,8BAA+BtC,GAC9CA,EAAQuC,OACPC,KAAK,8BACLC,QAAQ,eACRC,UAAU,eAGX5C,EAAS6C,SAAS3C,EAAQuC,MAAO,QAE1BvC","file":"../../../drawing/tools/Ellipse.js","sourcesContent":["define([\"dojo/_base/lang\", \"../util/oo\", \"../manager/_registry\", \"../stencil/Ellipse\"],\r\nfunction(lang, oo, registry, StencilEllipse){\r\n\r\n//dojox.drawing.tools.Ellipse = \r\nvar Ellipse = oo.declare(\r\n\tStencilEllipse,\r\n\tfunction(){\r\n\t\t// summary:\r\n\t\t//\t\tconstructor\r\n\t},\r\n\t{\r\n\t\t// summary:\r\n\t\t//\t\tA drawable Ellipse.\r\n\r\n\t\tdraws:true,\r\n\t\tonDrag: function(/*EventObject*/obj){\r\n\t\t\tvar s = obj.start, e = obj;\r\n\t\t\tvar\tx = s.x < e.x ? s.x : e.x,\r\n\t\t\t\ty = s.y < e.y ? s.y : e.y,\r\n\t\t\t\tw = s.x < e.x ? e.x-s.x : s.x-e.x,\r\n\t\t\t\th = s.y < e.y ? e.y-s.y : s.y-e.y;\r\n\t\t\t\r\n\t\t\tif(this.keys.shift){ w = h = Math.max(w,h); }\r\n\t\t\tif(!this.keys.alt){ // ellipse is normally on center\r\n\t\t\t\tx+=w/2; y+=h/2; w/=2; h/=2;\r\n\t\t\t} else{\r\n\t\t\t\tif(y - h < 0){ h = y; }\r\n\t\t\t\tif(x - w < 0){ w = x; }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.points = [\r\n\t\t\t\t{x:x-w, y:y-h}, \t// TL\r\n\t\t\t\t{x:x+w, y:y-h},\t\t// TR\r\n\t\t\t\t{x:x+w, y:y+h},\t\t// BR\r\n\t\t\t\t{x:x-w, y:y+h}\t\t// BL\r\n\t\t\t];\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\t\r\n\t\tonUp: function(/*EventObject*/obj){\r\n\t\t\tif(this.created || !this._downOnCanvas){ return; }\r\n\t\t\tthis._downOnCanvas = false;\r\n\t\t\t//Default shape on single click\r\n\t\t\tif(!this.shape){\r\n\t\t\t\tvar s = obj.start, e = this.minimumSize*2;\r\n\t\t\t\tthis.data = {\r\n\t\t\t\t\tcx: s.x+e,\r\n\t\t\t\t\tcy: s.y+e,\r\n\t\t\t\t\trx: e,\r\n\t\t\t\t\try: e\r\n\t\t\t\t};\r\n\t\t\t\tthis.dataToPoints();\r\n\t\t\t\tthis.render();\r\n\t\t\t}else{\r\n\t\t\t// if too small, need to reset\r\n\t\t\t\tvar o = this.pointsToData();\r\n\t\t\t\tconsole.log(\"Create a default shape here, pt to data: \",o);\r\n\t\t\t\tif(o.rx*2<this.minimumSize && o.ry*2 < this.minimumSize){\r\n\t\t\t\t\tthis.remove(this.shape, this.hit);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.onRender(this);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n);\r\n\r\nlang.setObject(\"dojox.drawing.tools.Ellipse\", Ellipse);\r\nEllipse.setup = {\r\n\tname:\"dojox.drawing.tools.Ellipse\",\r\n\ttooltip:\"Ellipse Tool\",\r\n\ticonClass:\"iconEllipse\"\r\n};\r\n\r\nregistry.register(Ellipse.setup, \"tool\");\r\n\r\nreturn Ellipse;\r\n});\r\n"]}