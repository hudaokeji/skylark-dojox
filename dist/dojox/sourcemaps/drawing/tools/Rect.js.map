{"version":3,"sources":["drawing/tools/Rect.js"],"names":["define","lang","oo","registry","StencilRect","Rect","declare","draws","onDrag","obj","s","start","e","x","y","w","h","this","keys","shift","Math","max","alt","setPoints","render","onUp","created","_downOnCanvas","shape","o","data","width","minimumSize","height","remove","hit","onRender","setObject","setup","name","tooltip","iconClass","register"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,aAAc,uBAAwB,mBACjE,SAASC,EAAMC,EAAIC,EAAUC,GAG7B,IAAIC,EAAOH,EAAGI,QACbF,EACA,cAQCG,OAAM,EAENC,OAAQ,SAAwBC,GAC/B,IAAIC,EAAID,EAAIE,MAAOC,EAAIH,EACnBI,EAAIH,EAAEG,EAAID,EAAEC,EAAIH,EAAEG,EAAID,EAAEC,EAC3BC,EAAIJ,EAAEI,EAAIF,EAAEE,EAAIJ,EAAEI,EAAIF,EAAEE,EACxBC,EAAIL,EAAEG,EAAID,EAAEC,EAAID,EAAEC,EAAEH,EAAEG,EAAIH,EAAEG,EAAED,EAAEC,EAChCG,EAAIN,EAAEI,EAAIF,EAAEE,EAAIF,EAAEE,EAAEJ,EAAEI,EAAIJ,EAAEI,EAAEF,EAAEE,EAE9BG,KAAKC,KAAKC,QAAQJ,EAAIC,EAAII,KAAKC,IAAIN,EAAEC,IAErCC,KAAKC,KAAKI,MACZT,GAAGE,EAAGD,GAAGE,EAAGD,GAAG,EAAGC,GAAG,EACrBH,EAAIO,KAAKC,IAAIR,EAAG,GAChBC,EAAIM,KAAKC,IAAIP,EAAG,IAEjBG,KAAKM,YACHV,EAAEA,EAAGC,EAAEA,IACPD,EAAEA,EAAEE,EAAGD,EAAEA,IACTD,EAAEA,EAAEE,EAAGD,EAAEA,EAAEE,IACXH,EAAEA,EAAGC,EAAEA,EAAEE,KAEXC,KAAKO,UAGNC,KAAM,SAAwBhB,GAC7B,IAAGQ,KAAKS,SAAYT,KAAKU,cAAzB,CAIA,GAHAV,KAAKU,eAAgB,EAGjBV,KAAKW,MAUJ,CAGJ,IAAIC,EAAIZ,KAAKa,KACb,GAAGD,EAAEE,MAAMd,KAAKe,aAAeH,EAAEI,OAAShB,KAAKe,YAE9C,YADAf,KAAKiB,OAAOjB,KAAKW,MAAOX,KAAKkB,SAfhB,CACd,IAAIzB,EAAID,EAAIE,MACRC,EAAqB,EAAjBK,KAAKe,YACbf,KAAKM,YACHV,EAAEH,EAAEG,EAAGC,EAAEJ,EAAEI,IACXD,EAAEH,EAAEG,EAAED,EAAGE,EAAEJ,EAAEI,IACbD,EAAEH,EAAEG,EAAED,EAAGE,EAAEJ,EAAEI,EAAEF,IACfC,EAAEH,EAAEG,EAAGC,EAAEJ,EAAEI,EAAEF,KAEfK,KAAKO,SAUNP,KAAKmB,SAASnB,UAejB,OATAhB,EAAKoC,UAAU,2BAA4BhC,GAC3CA,EAAKiC,OACJC,KAAK,2BACLC,QAAQ,0HAERC,UAAU,YAEXtC,EAASuC,SAASrC,EAAKiC,MAAO,QAEvBjC","file":"../../../drawing/tools/Rect.js","sourcesContent":["define([\"dojo/_base/lang\", \"../util/oo\", \"../manager/_registry\", \"../stencil/Rect\"],\r\nfunction(lang, oo, registry, StencilRect){\r\n\r\n//dojox.drawing.tools.Rect \r\nvar Rect = oo.declare(\r\n\tStencilRect,\r\n\tfunction(){\r\n\t\t// summary:\r\n\t\t//\t\tconstructor\r\n\t},\r\n\t{\r\n\t\t// summary:\r\n\t\t//\t\tClass for a drawable rectangle\r\n\r\n\t\tdraws:true,\r\n\t\t\r\n\t\tonDrag: function(/*EventObject*/obj){\r\n\t\t\tvar s = obj.start, e = obj;\r\n\t\t\tvar\tx = s.x < e.x ? s.x : e.x,\r\n\t\t\t\ty = s.y < e.y ? s.y : e.y,\r\n\t\t\t\tw = s.x < e.x ? e.x-s.x : s.x-e.x,\r\n\t\t\t\th = s.y < e.y ? e.y-s.y : s.y-e.y;\r\n\t\t\t\r\n\t\t\tif(this.keys.shift){ w = h = Math.max(w,h); }\r\n\t\t\t\r\n\t\t\tif(this.keys.alt){\r\n\t\t\t\tx-=w; y-=h; w*=2; h*=2;\r\n\t\t\t\tx = Math.max(x, 0);\r\n\t\t\t\ty = Math.max(y, 0);\r\n\t\t\t}\r\n\t\t\tthis.setPoints ([\r\n\t\t\t\t{x:x, y:y}, \t// TL\r\n\t\t\t\t{x:x+w, y:y},\t// TR\r\n\t\t\t\t{x:x+w, y:y+h},\t// BR\r\n\t\t\t\t{x:x, y:y+h}\t// BL\r\n\t\t\t]);\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\t\r\n\t\tonUp: function(/*EventObject*/obj){\r\n\t\t\tif(this.created || !this._downOnCanvas){ return; }\r\n\t\t\tthis._downOnCanvas = false;\r\n\t\t\t\r\n\t\t\t//Default shape on single click\r\n\t\t\tif(!this.shape){\r\n\t\t\t\tvar s = obj.start;\r\n\t\t\t\tvar e = this.minimumSize*4;\r\n\t\t\t\tthis.setPoints([\r\n\t\t\t\t\t{x:s.x, y:s.y},\r\n\t\t\t\t\t{x:s.x+e, y:s.y},\r\n\t\t\t\t\t{x:s.x+e, y:s.y+e},\r\n\t\t\t\t\t{x:s.x, y:s.y+e}\r\n\t\t\t\t]);\r\n\t\t\t\tthis.render();\r\n\t\t\t}else{\r\n\t\t\t\r\n\t\t\t\t// if too small, need to reset\r\n\t\t\t\tvar o = this.data;\r\n\t\t\t\tif(o.width<this.minimumSize && o.height < this.minimumSize){\r\n\t\t\t\t\tthis.remove(this.shape, this.hit);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.onRender(this);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n);\r\n\r\nlang.setObject(\"dojox.drawing.tools.Rect\", Rect);\r\nRect.setup = {\r\n\tname:\"dojox.drawing.tools.Rect\",\r\n\ttooltip:'<span class=\"drawingTipTitle\">Rectangle Tool</span><br/>'\r\n\t\t+ '<span class=\"drawingTipDesc\">SHIFT - constrain to square</span>',\r\n\ticonClass:\"iconRect\"\r\n};\r\nregistry.register(Rect.setup, \"tool\");\r\n\r\nreturn Rect;\r\n});\r\n"]}