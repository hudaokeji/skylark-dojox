{"version":3,"sources":["drawing/annotations/Arrow.js"],"names":["define","oo","Path","declare","options","this","stencil","connectMult","connect","o","points","idx1","c","idx2","getRadius","minimumSize","arrowHead","x","y","style","subShape","x1","y1","x2","y2","obj","start","angle","util","lineLength","length","al","arrows","aw","width","pointOnCircle"],"mappings":";;;;;;;AAAAA,QAAQ,aAAc,mBACtB,SAASC,EAAIC,GAGb,OAAOD,EAAGE,QAETD,EACA,SAAkCE,GACjCC,KAAKC,QAAQC,cACXF,KAAKC,QAAS,SAAUD,KAAM,WAC9BA,KAAKC,QAAS,WAAYD,KAAM,aAChCA,KAAKC,QAAS,SAAUD,KAAM,WAC9BA,KAAKC,QAAS,WAAYD,KAAM,aAGlCA,KAAKG,QAAQ,iBAAkBH,KAAM,WACpC,IAAII,EAAIJ,KAAKC,QAAQI,OAAOL,KAAKM,MAC7BC,EAAIP,KAAKC,QAAQI,OAAOL,KAAKQ,MAC9BR,KAAKC,QAAQQ,aAAeT,KAAKU,YACnCV,KAAKK,OAASL,KAAKW,UAAUJ,EAAEK,EAAGL,EAAEM,EAAGT,EAAEQ,EAAGR,EAAES,EAAGb,KAAKc,OAEtDd,KAAKK,cAYPC,KAAK,EACLE,KAAK,EAELO,UAAS,EACTL,YAAY,GAGZC,UAAW,SAASK,EAAIC,EAAIC,EAAIC,EAAIL,GAInC,IAAIM,GACHC,OACCT,EAAEI,EACFH,EAAEI,GAEHL,EAAEM,EACFL,EAAEM,GAECG,EAAQtB,KAAKuB,KAAKD,MAAMF,GAExBI,EAAaxB,KAAKuB,KAAKE,OAAOL,GAC9BM,EAAKZ,EAAMa,OAAOF,OAClBG,EAAKd,EAAMa,OAAOE,MAAM,EAO5B,OANGL,EAAWE,IACbA,EAAKF,EAAW,KAMfZ,EAAEM,EAAIL,EAAEM,GAJDnB,KAAKuB,KAAKO,cAAcZ,EAAIC,GAAKO,EAAIJ,EAAMM,GAC3C5B,KAAKuB,KAAKO,cAAcZ,EAAIC,GAAKO,EAAIJ,EAAMM","file":"../../../drawing/annotations/Arrow.js","sourcesContent":["define([\"../util/oo\", \"../stencil/Path\"], \r\nfunction(oo, Path){\r\n\r\n//dojox.drawing.annotations.Arrow =\r\nreturn oo.declare(\r\n\r\n\tPath,\r\n\tfunction(/* dojox.__stencilArgs */options){\r\n\t\tthis.stencil.connectMult([\r\n\t\t\t[this.stencil, \"select\", this, \"select\"],\r\n\t\t\t[this.stencil, \"deselect\", this, \"deselect\"],\r\n\t\t\t[this.stencil, \"render\", this, \"render\"],\r\n\t\t\t[this.stencil, \"onDelete\", this, \"destroy\"]\r\n\t\t]);\r\n\t\t\r\n\t\tthis.connect(\"onBeforeRender\", this, function(){\r\n\t\t\tvar o = this.stencil.points[this.idx1];\r\n\t\t\tvar c = this.stencil.points[this.idx2];\r\n\t\t\tif(this.stencil.getRadius() >= this.minimumSize){\r\n\t\t\t\tthis.points = this.arrowHead(c.x, c.y, o.x, o.y, this.style);\r\n\t\t\t}else{\r\n\t\t\t\tthis.points = [];\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t},\r\n\t{\r\n\t\t// summary:\r\n\t\t//\t\tAn annotation called internally to put an arrowhead\r\n\t\t//\t\ton ether end of a Line. Initiated in Arrow (and Vector)\r\n\t\t//\t\twith the optional params: arrowStart and arrowEnd. Both\r\n\t\t//\t\tdefault true for Axes.\r\n\r\n\t\tidx1:0,\r\n\t\tidx2:1,\r\n\t\t\r\n\t\tsubShape:true,\r\n\t\tminimumSize:30,\r\n\t\t//annotation:true, NOT!\r\n\t\t\r\n\t\tarrowHead: function(x1, y1, x2, y2, style){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreates data used to draw arrow head.\r\n\r\n\t\t\tvar obj = {\r\n\t\t\t\tstart:{\r\n\t\t\t\t\tx:x1,\r\n\t\t\t\t\ty:y1\r\n\t\t\t\t},\r\n\t\t\t\tx:x2,\r\n\t\t\t\ty:y2\r\n\t\t\t}\r\n\t\t\tvar angle = this.util.angle(obj);\r\n\t\t\t\r\n\t\t\tvar lineLength = this.util.length(obj);\r\n\t\t\tvar al = style.arrows.length;\r\n\t\t\tvar aw = style.arrows.width/2;\r\n\t\t\tif(lineLength<al){\r\n\t\t\t\tal = lineLength/2;\r\n\t\t\t}\r\n\t\t\tvar p1 = this.util.pointOnCircle(x2, y2, -al, angle-aw);\r\n\t\t\tvar p2 = this.util.pointOnCircle(x2, y2, -al, angle+aw);\r\n\t\t\t\r\n\t\t\treturn [\r\n\t\t\t\t{x:x2, y:y2},\r\n\t\t\t\tp1,\r\n\t\t\t\tp2\r\n\t\t\t];\r\n\t\t}\r\n\t\t\r\n\t}\r\n);\r\n});\r\n"]}