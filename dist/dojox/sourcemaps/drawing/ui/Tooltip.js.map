{"version":3,"sources":["drawing/ui/Tooltip.js"],"names":["define","dojo","oo","Plugin","registry","master","MasterC","declare","options","this","createDom","show","button","text","domNode","innerHTML","px","data","x","width","py","y","height","mouse","origin","style","display","left","top","box","marginBox","createShape","w","h","balloon","destroy","x2","y2","points","add","i","arguments","length","push","t","drawing","addUI","create","class","document","body","position","Tooltip","stencil","connect","onOver","onOut","setObject","register","name"],"mappings":";;;;;;;AAAAA,QAAQ,OAAQ,aAAc,qBAAsB,wBACpD,SAASC,EAAMC,EAAIC,EAAQC,GAE1B,IAAIC,EAAS,KACTC,EAAUJ,EAAGK,QAChBJ,EACA,SAASK,GACRC,KAAKC,cAOLC,KAAM,SAASC,EAAQC,GACtBJ,KAAKK,QAAQC,UAAYF,EAEzB,IACIG,EAAKJ,EAAOK,KAAKC,EAAIN,EAAOK,KAAKE,MACjCC,EAAKR,EAAOK,KAAKI,EAAIT,EAAOK,KAAKK,OACjCJ,EAAKF,EAAKP,KAAKc,MAAMC,OAAON,EAHvB,GAILG,EAAID,EAAKX,KAAKc,MAAMC,OAAOH,EAJtB,GAMTpB,EAAKwB,MAAMhB,KAAKK,SACfY,QAAS,SACTC,KAAKT,EAAG,KACRU,IAAIP,EAAE,OAGP,IAAIQ,EAAM5B,EAAK6B,UAAUrB,KAAKK,SAE9BL,KAAKsB,YAAYb,EAAET,KAAKc,MAAMC,OAAON,EAAGG,EAAEZ,KAAKc,MAAMC,OAAOH,EAAGQ,EAAIG,EAAGH,EAAII,IAI3EF,YAAa,SAASb,EAAEG,EAAEW,EAAEC,GAC3BxB,KAAKyB,SAAWzB,KAAKyB,QAAQC,UAC7B,IAAWC,EAAKlB,EAAEc,EAAGK,EAAKhB,EAAEY,EAAGK,KAC3BC,EAAM,WACT,IAAI,IAAIC,EAAE,EAAEA,EAAEC,UAAUC,OAAOF,IAC9BF,EAAOK,KAAKF,UAAUD,KAIxBD,GAAKrB,EAAEA,EAAEG,EAAEA,EAAE,IACXuB,EAAE,IAAK1B,EAAEA,EAAEG,EAAEA,IACbH,EAAEA,EATI,EASAG,EAAEA,IAEVkB,GAAKK,EAAE,IAAK1B,EAAEkB,EAXN,EAWWf,EAAEA,IAErBkB,GAAKK,EAAE,IAAK1B,EAAEkB,EAAGf,EAAEA,IACjBH,EAAEkB,EAAGf,EAAEA,EAdD,IAgBRkB,GAAKK,EAAE,IAAK1B,EAAEkB,EAAGf,EAAEgB,EAhBX,IAkBRE,GAAKK,EAAE,IAAK1B,EAAEkB,EAAGf,EAAEgB,IACjBnB,EAAEkB,EAnBI,EAmBCf,EAAEgB,IAEXE,GAAKK,EAAE,IAAK1B,EAAEA,EArBN,EAqBUG,EAAEgB,IAEpBE,GAAKK,EAAE,IAAK1B,EAAEA,EAAEG,EAAEgB,IAChBnB,EAAEA,EAAEG,EAAEgB,EAxBA,IA0BRE,GAAKK,EAAE,IAAK1B,EAAEA,EAAEG,EAAEA,EA1BV,IA4BRZ,KAAKyB,QAAUzB,KAAKoC,QAAQC,MAAM,QAASR,OAAOA,KAGnD5B,UAAW,WACVD,KAAKK,QAAUb,EAAK8C,OAAO,QAASC,MAAQ,kBAAmBC,SAASC,MACxEjD,EAAKwB,MAAMhB,KAAKK,SACfY,QAAS,OACTyB,SAAS,gBAMTC,EAAWlD,EAAGK,QAEjBJ,EACA,SAASK,GACJH,IACHA,EAAS,IAAIC,EAAQE,IAEnBA,EAAQ6C,SAEF5C,KAAKG,SACbH,KAAK6C,QAAQ7C,KAAKG,OAAQ,SAAUH,KAAM,UAC1CA,KAAK6C,QAAQ7C,KAAKG,OAAQ,QAASH,KAAM,YAK1CU,MAAM,IACNG,OAAO,IACPiC,OAAQ,WAEPlD,EAAOM,KAAKF,KAAKG,OAAQH,KAAKQ,KAAKJ,OAGpC2C,MAAO,eAST,OAJAvD,EAAKwD,UAAU,2BAA4BL,GAC3ChD,EAASsD,UACRC,KAAK,4BACH,WACIP","file":"../../../drawing/ui/Tooltip.js","sourcesContent":["define([\"dojo\", \"../util/oo\", \"../plugins/_Plugin\", \"../manager/_registry\"], \r\nfunction(dojo, oo, Plugin, registry){\r\n\t\r\n\tvar master = null;\r\n\tvar MasterC = oo.declare(\r\n\t\tPlugin,\r\n\t\tfunction(options){\r\n\t\t\tthis.createDom();\r\n\t\t},\r\n\t\t{\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUsed for UI tooltips. Buttons in the toolbar.\r\n\t\t\t//\t\tThis file is not complete.\r\n\r\n\t\t\tshow: function(button, text){\r\n\t\t\t\tthis.domNode.innerHTML = text;\r\n\t\t\t\t\r\n\t\t\t\tvar dx = 30;\r\n\t\t\t\tvar px = button.data.x + button.data.width;\r\n\t\t\t\tvar py = button.data.y + button.data.height;\r\n\t\t\t\tvar x =  px + this.mouse.origin.x + dx;\r\n\t\t\t\tvar y = py + this.mouse.origin.y + dx;\r\n\t\t\t\t\r\n\t\t\t\tdojo.style(this.domNode, {\r\n\t\t\t\t\tdisplay: \"inline\",\r\n\t\t\t\t\tleft:x +\"px\",\r\n\t\t\t\t\ttop:y+\"px\"\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tvar box = dojo.marginBox(this.domNode);\r\n\t\t\t\t\r\n\t\t\t\tthis.createShape(x-this.mouse.origin.x, y-this.mouse.origin.y, box.w, box.h);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tcreateShape: function(x,y,w,h){\r\n\t\t\t\tthis.balloon && this.balloon.destroy();\r\n\t\t\t\tvar r = 5, x2 = x+w, y2 = y+h, points = [];\r\n\t\t\t\tvar add = function(){\r\n\t\t\t\t\tfor(var i=0;i<arguments.length;i++){\r\n\t\t\t\t\t\tpoints.push(arguments[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tadd({x:x,y:y+5},\r\n\t\t\t\t\t{t:\"Q\", x:x,y:y},\r\n\t\t\t\t\t{x:x+r,y:y});\r\n\t\t\t\t\r\n\t\t\t\tadd({t:\"L\", x:x2-r,y:y});\r\n\t\t\t\t\r\n\t\t\t\tadd({t:\"Q\", x:x2,y:y},\r\n\t\t\t\t\t{x:x2,y:y+r});\r\n\t\t\t\t\t\r\n\t\t\t\tadd({t:\"L\", x:x2,y:y2-r});\r\n\t\t\t\t\t\r\n\t\t\t\tadd({t:\"Q\", x:x2,y:y2},\r\n\t\t\t\t\t{x:x2-r,y:y2});\r\n\t\t\t\t\r\n\t\t\t\tadd({t:\"L\", x:x+r,y:y2});\r\n\t\t\t\t\r\n\t\t\t\tadd({t:\"Q\", x:x,y:y2},\r\n\t\t\t\t\t{x:x,y:y2-r});\r\n\t\t\t\t\t\r\n\t\t\t\tadd({t:\"L\", x:x,y:y+r});\r\n\t\t\t\t\r\n\t\t\t\tthis.balloon = this.drawing.addUI(\"path\", {points:points});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcreateDom: function(){\r\n\t\t\t\tthis.domNode = dojo.create('span', {\"class\":\"drawingTooltip\"}, document.body);\r\n\t\t\t\tdojo.style(this.domNode, {\r\n\t\t\t\t\tdisplay: \"none\",\r\n\t\t\t\t\tposition:\"absolute\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\t\r\n\tvar Tooltip =  oo.declare(\r\n\t\t\r\n\t\tPlugin,\r\n\t\tfunction(options){\r\n\t\t\tif(!master){\r\n\t\t\t\tmaster = new MasterC(options);\r\n\t\t\t}\r\n\t\t\tif(options.stencil){\r\n\t\t\t\t//todo\r\n\t\t\t}else if(this.button){\r\n\t\t\t\tthis.connect(this.button, \"onOver\", this, \"onOver\");\r\n\t\t\t\tthis.connect(this.button, \"onOut\", this, \"onOut\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth:300,\r\n\t\t\theight:200,\r\n\t\t\tonOver: function(){\r\n\t\t\t\t//console.log(\"   tooltip over\", this.data.text)\r\n\t\t\t\tmaster.show(this.button, this.data.text);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tonOut: function(){\r\n\t\t\t\t//console.log(\"   tooltip out\")\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tdojo.setObject('dojox.drawing.ui.Tooltip', Tooltip);\r\n\tregistry.register({\r\n\t\tname:\"dojox.drawing.ui.Tooltip\"\r\n\t}, \"stencil\");\r\n\treturn Tooltip;\r\n});\r\n"]}