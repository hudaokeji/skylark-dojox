{"version":3,"sources":["json/tests/query.js"],"names":["performanceTest","dojo","require","data","i","push","foo","Math","random","now","Date","getTime","results","dojox","jsonPath","query","alert","length","json","provide","tests","error","t","d","errData","errback","testData","store","book","category","author","title","price","isbn","bicycle","color","symbols","@.$;","doh","register","name","runTest","result","this","console","log","toJson","assertEqual","toString","round","e"],"mappings":";;;;;;;AAyWA,SAASA,kBACRC,KAAKC,QAAQ,kBAEb,IADA,IAAIC,KACIC,EAAI,EAAGA,EAAI,IAAMA,IACxBD,EAAKE,MAAMC,IAAIC,KAAKC,WAErB,IAAIC,GAAM,IAAIC,MAAOC,UACjBC,EAAUC,MAAMC,SAASC,MAAMZ,EAAK,oBACxCa,MAAM,aAAc,IAAIN,MAAOC,UAAUF,GAAO,IAAMG,EAAQK,QAC9DR,GAAM,IAAIC,MAAOC,UACjBC,EAAUC,MAAMK,KAAKH,MAAM,mBAAmBZ,GAC9Ca,MAAM,cAAe,IAAIN,MAAOC,UAAUF,GAAO,IAAMG,EAAQK,QApXhEhB,KAAKkB,QAAQ,0BACblB,KAAKC,QAAQ,oBAGbW,MAAMK,KAAKE,MAAMC,MAAQ,SAASC,EAAGC,EAAGC,GAGvCD,EAAEE,QAAQD,IAGXX,MAAMK,KAAKE,MAAMM,UAChBC,OACCC,OAEEC,SAAW,YACXC,OAAS,aACTC,MAAQ,yBACRC,MAAQ,OAGRH,SAAW,UACXC,OAAS,eACTC,MAAQ,kBACRC,MAAQ,QAGRH,SAAW,UACXC,OAAS,kBACTC,MAAQ,YACRE,KAAO,gBACPD,MAAQ,OAGRH,SAAW,UACXC,OAAS,mBACTC,MAAQ,yBACRE,KAAO,gBACPD,MAAQ,QAGVE,SACEC,MAAQ,MACRH,MAAQ,QAGXI,SAAWC,OAAO,IAGnBC,IAAIC,SAAS,2BAGVC,KAAM,wBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAAS7B,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,UACzDkB,QAAQC,IAAI,SAASH,GACrBA,EAASzC,KAAK6C,OAAOJ,GAErBJ,IAAIS,YADW,qEACSL,MAIzBF,KAAM,YACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,qEACSL,MAKzBF,KAAM,YACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADU,4bACUL,MAIzBF,KAAM,iBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADU,gCACUL,MAIzBF,KAAM,yBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,8HACSL,MAIzBF,KAAM,uBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,8HACSL,MAIzBF,KAAM,kBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,8HACSL,MAIzBF,KAAM,kBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,wLACSL,MAIzBF,KAAM,iBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,wLACSL,MAIzBF,KAAM,kCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,0BACSL,MAIzBF,KAAM,kCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,MAAM3B,MAAMK,KAAKE,MAAMM,SAASb,MAAMK,KAAKE,MAAMM,YAEhGY,IAAIS,YADW,8GACSL,MAIzBF,KAAM,0BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,MAAM3B,MAAMK,KAAKE,MAAMM,SAASb,MAAMK,KAAKE,MAAMM,YAEhGY,IAAIS,YADW,8GACSL,MAIzBF,KAAM,+BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,MAAM3B,MAAMK,KAAKE,MAAMM,SAASb,MAAMK,KAAKE,MAAMM,YAEhGY,IAAIS,YADW,8GACSL,MAIzBF,KAAM,wBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,wOACSL,MAIzBF,KAAM,4BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,2MACSL,MAIzBF,KAAM,gCACNC,QAAS,SAASnB,GACjB,IAAIP,EAAQF,MAAMK,KAAKH,MAAM4B,KAAKH,MAC9BE,EAASzC,KAAK6C,OAAO/B,EAAMF,MAAMK,KAAKE,MAAMM,SAAS,aAAa,OAEtEY,IAAIS,YADW,iGACSL,MAIzBF,KAAM,gCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,SAAS,kBAAkB,OAEhGY,IAAIS,YADW,8GACSL,MAIzBF,KAAM,+BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,2MACSL,MAIzBF,KAAM,iBACNC,QAAS,SAASnB,GACjB,IAAIP,EAAQF,MAAMK,KAAKH,MAAM4B,KAAKH,MAClCI,QAAQC,IAAI,0BAA0B9B,EAAMiC,YAC5C,IAAIN,EAASzC,KAAK6C,OAAO/B,EAAMF,MAAMK,KAAKE,MAAMM,WAEhDY,IAAIS,YADW,2MACSL,MAIzBF,KAAM,uBACNC,QAAS,SAASnB,GACjB,IAAIP,EAAQF,MAAMK,KAAKH,MAAM4B,KAAKH,MAClCI,QAAQC,IAAI,0BAA0B9B,EAAMiC,YAC5C,IAAIN,EAASzC,KAAK6C,OAAO/B,EAAMF,MAAMK,KAAKE,MAAMM,WAEhDY,IAAIS,YADW,2MACSL,MAIzBF,KAAM,0CACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,0BACSL,MAIzBF,KAAM,2CACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,0BACSL,MAIzBF,KAAM,gCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,2NACSL,MAIzBF,KAAM,4CACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,qBACSL,MAIzBF,KAAM,4CACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,qBACSL,MAIzBF,KAAM,iEACNC,QAAS,SAASnB,GACjB,IAAIoB,EAAS7B,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,UAEzDY,IAAIS,YADW,GACSxC,KAAK0C,MAAMP,OAIpCF,KAAM,eACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADW,MACSL,MAIzBF,KAAM,oBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM4B,KAAKH,KAAK3B,MAAMK,KAAKE,MAAMM,WAErEY,IAAIS,YADU,IACUL,MAIzBF,KAAM,mCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,mCAAmCF,MAAMK,KAAKE,MAAMM,WAE9FY,IAAIS,YADU,qMACUL,MAIzBF,KAAM,uCACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,uCAAuCF,MAAMK,KAAKE,MAAMM,WAElGY,IAAIS,YADU,kDACUL,MAIzBF,KAAM,2BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,2BAA2BF,MAAMK,KAAKE,MAAMM,WAEtFY,IAAIS,YADU,YACUL,MAIzBF,KAAM,uBACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,kBAAkBF,MAAMK,KAAKE,MAAMM,WAE7EY,IAAIS,YADU,gCACUL,MAIzBF,KAAM,+BACNC,QAAS,SAASnB,GACjB,IAAIoB,EAASzC,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,0BAA0BF,MAAMK,KAAKE,MAAMM,WAErFY,IAAIS,YADU,8CACUL,MAIzBF,KAAM,yBACNC,QAAS,SAASnB,GACjB,IACcrB,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,2BAA2BF,MAAMK,KAAKE,MAAMM,WACtFkB,QAAQC,IAAI,0BACZP,IAAIY,EAAE,8BACL,MAAMA,GACPN,QAAQC,IAAI,wBAAyBK,OAKvCV,KAAM,2BACNC,QAAS,SAASnB,GACjB,IACcrB,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,8BAA8BF,MAAMK,KAAKE,MAAMM,WACzFkB,QAAQC,IAAI,0BACZP,IAAIY,EAAE,8BACL,MAAMA,GACPN,QAAQC,IAAI,wBAAyBK,OAKvCV,KAAM,2BACNC,QAAS,SAASnB,GACjB,IACcrB,KAAK6C,OAAOjC,MAAMK,KAAKH,MAAM,wBAAwBF,MAAMK,KAAKE,MAAMM,WACnFkB,QAAQC,IAAI,0BACZP,IAAIY,EAAE,8BACL,MAAMA,GACPN,QAAQC,IAAI,wBAAyBK","file":"../../../json/tests/query.js","sourcesContent":["dojo.provide(\"dojox.json.tests.query\");\r\ndojo.require(\"dojox.json.query\");\r\n\r\n\r\ndojox.json.tests.error = function(t, d, errData){\r\n\t// summary:\r\n\t//\t\tThe error callback function to be used for all of the tests.\r\n\td.errback(errData);\r\n};\r\n\r\ndojox.json.tests.testData= {\r\n\tstore: {\r\n\t\t\"book\": [\r\n\t\t\t{\r\n\t\t\t\t\"category\":\"reference\",\r\n\t\t\t\t\"author\":\"Nigel Rees\",\r\n\t\t\t\t\"title\":\"Sayings of the Century\",\r\n\t\t\t\t\"price\":8.95\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"category\":\"fiction\",\r\n\t\t\t\t\"author\":\"Evelyn Waugh\",\r\n\t\t\t\t\"title\":\"Sword of Honour\",\r\n\t\t\t\t\"price\":12.99\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"category\":\"fiction\",\r\n\t\t\t\t\"author\":\"Herman Melville\",\r\n\t\t\t\t\"title\":\"Moby Dick\",\r\n\t\t\t\t\"isbn\":\"0-553-21311-3\",\r\n\t\t\t\t\"price\":8.99\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"category\":\"fiction\",\r\n\t\t\t\t\"author\":\"J. R. R. Tolkien\",\r\n\t\t\t\t\"title\":\"The Lord of the\\nRings\",\r\n\t\t\t\t\"isbn\":\"0-395-19395-8\",\r\n\t\t\t\t\"price\":22.99\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"bicycle\": {\r\n\t\t\t\t\"color\":\"red\",\r\n\t\t\t\t\"price\":19.95\r\n\t\t}\r\n\t},\r\n\t\"symbols\":{\"@.$;\":5}\r\n};\r\n\r\ndoh.register(\"dojox.json.tests.query\",\r\n\t[\r\n\t\t{\r\n\t\t\tname: \"$.store.book[=author]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojox.json.query(this.name,dojox.json.tests.testData);\r\n\t\t\t\tconsole.log(\"result\",result);\r\n\t\t\t\tresult = dojo.toJson(result);\r\n\t\t\t\tvar success =  '[\"Nigel Rees\",\"Evelyn Waugh\",\"Herman Melville\",\"J. R. R. Tolkien\"]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..author\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[\"Nigel Rees\",\"Evelyn Waugh\",\"Herman Melville\",\"J. R. R. Tolkien\"]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.*\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success = '[[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Evelyn Waugh\",\"title\":\"Sword of Honour\",\"price\":12.99},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99},{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}],{\"color\":\"red\",\"price\":19.95}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store..price\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success = '[8.95,12.99,8.99,22.99,19.95]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0]?price=22.99\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0]?price>=20\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][-1:]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][0,1]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Evelyn Waugh\",\"title\":\"Sword of Honour\",\"price\":12.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][:2]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Evelyn Waugh\",\"title\":\"Sword of Honour\",\"price\":12.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[=category][^?true]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[\"reference\",\"fiction\"]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..[^?author~'herman melville']\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,[dojox.json.tests.testData,dojox.json.tests.testData]));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..[^?author='Herman*']\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,[dojox.json.tests.testData,dojox.json.tests.testData]));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..[^?@['author']='Herman*']\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,[dojox.json.tests.testData,dojox.json.tests.testData]));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][?(@.isbn)]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99},{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][?(@.price<10)]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0]?author=$1&price=$2\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar query = dojox.json.query(this.name);\r\n\t\t\t\tvar result = dojo.toJson(query(dojox.json.tests.testData,\"Nigel Rees\",8.95));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0]?author=$1&price=$2\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData,\"Herman Melville\",8.99));\r\n\t\t\t\tvar success =  '[{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..book[0][?(@['price']<10)]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$..[?price<10]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar query = dojox.json.query(this.name);\r\n\t\t\t\tconsole.log(\"recursive object search\",query.toString());\r\n\t\t\t\tvar result = dojo.toJson(query(dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store..[?price<10]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar query = dojox.json.query(this.name);\r\n\t\t\t\tconsole.log(\"recursive object search\",query.toString());\r\n\t\t\t\tvar result = dojo.toJson(query(dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[/category][/price][=price]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[8.95,8.99,12.99,22.99]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[\\\\category,\\\\price][=price]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[8.95,22.99,12.99,8.99]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book?title='*of the*'\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[{\"category\":\"reference\",\"author\":\"Nigel Rees\",\"title\":\"Sayings of the Century\",\"price\":8.95},{\"category\":\"fiction\",\"author\":\"J. R. R. Tolkien\",\"title\":\"The Lord of the\\\\nRings\",\"isbn\":\"0-395-19395-8\",\"price\":22.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[?'?iction'=category][=price]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[12.99,8.99,22.99]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[?'?ICTion'~category][=price]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[12.99,8.99,22.99]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[\\\\price][0].price - $.store.book[/price][0].price\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojox.json.query(this.name,dojox.json.tests.testData);\r\n\t\t\t\tvar success =  14;\r\n\t\t\t\tdoh.assertEqual(success,Math.round(result));\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.symbols[*]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success =  '[5]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.symbols['@.$;']\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(this.name,dojox.json.tests.testData));\r\n\t\t\t\tvar success = '5';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[?(@.price<15)][1:3]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[?(@.price<15)][1:3]\",dojox.json.tests.testData));\r\n\t\t\t\tvar success = '[{\"category\":\"fiction\",\"author\":\"Evelyn Waugh\",\"title\":\"Sword of Honour\",\"price\":12.99},{\"category\":\"fiction\",\"author\":\"Herman Melville\",\"title\":\"Moby Dick\",\"isbn\":\"0-553-21311-3\",\"price\":8.99}]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[?(@.price<15)][=author]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[?(@.price<15)][=author]\",dojox.json.tests.testData));\r\n\t\t\t\tvar success = '[\"Nigel Rees\",\"Evelyn Waugh\",\"Herman Melville\"]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"$.store.book[1].category\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[1].category\",dojox.json.tests.testData));\r\n\t\t\t\tvar success = '\"fiction\"';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"test $.store.bicycle\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.bicycle\",dojox.json.tests.testData));\r\n\t\t\t\tvar success = '{\"color\":\"red\",\"price\":19.95}';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"test $.store.book[=category]\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[=category]\",dojox.json.tests.testData));\r\n\t\t\t\tvar success = '[\"reference\",\"fiction\",\"fiction\",\"fiction\"]';\r\n\t\t\t\tdoh.assertEqual(success,result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"safeEval: Illegal Eval\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[?(push(5))]\",dojox.json.tests.testData));\r\n\t\t\t\t\tconsole.log(\"Illegal eval permitted\");\r\n\t\t\t\t\tdoh.e(\"Illegal eval was permitted\");\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Eval properly blocked\", e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"safeEval: Illegal Eval 2\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[?(new Danger)]\",dojox.json.tests.testData ));\r\n\t\t\t\t\tconsole.log(\"Illegal eval permitted\");\r\n\t\t\t\t\tdoh.e(\"Illegal eval was permitted\");\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Eval properly blocked\", e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"safeEval: Illegal Eval 3\",\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar result = dojo.toJson(dojox.json.query(\"$.store.book[?(@+=2)]\",dojox.json.tests.testData));\r\n\t\t\t\t\tconsole.log(\"Illegal eval permitted\");\r\n\t\t\t\t\tdoh.e(\"Illegal eval was permitted\");\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Eval properly blocked\", e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t]\r\n);\r\nfunction performanceTest(){\r\n\tdojo.require(\"dojox.jsonPath\");\r\n\tvar data = [];\r\n\tfor(var i = 0; i < 20000;i++){\r\n\t\tdata.push({foo:Math.random()});\r\n\t}\r\n\tvar now = new Date().getTime();\r\n\tvar results = dojox.jsonPath.query(data,\"$[?(@.foo<0.01)]\");\r\n\talert(\"JSONPath\" + (new Date().getTime()-now) + \" \" + results.length);\r\n\tnow = new Date().getTime();\r\n\tresults = dojox.json.query(\"$[?(@.foo<0.01)]\",data);\r\n\talert(\"JSONQuery\" + (new Date().getTime()-now) + \" \" + results.length);\r\n}\r\n\r\n"]}