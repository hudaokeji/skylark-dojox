{"version":3,"sources":["grid/enhanced/_FocusManager.js"],"names":["define","dojo","lang","declare","array","connect","event","has","html","keys","dijitA11y","dijitFocus","_FocusManager","_FocusArea","constructor","area","focusManager","this","_fm","_evtStack","name","dummy","onFocus","onBlur","onMove","onKeyUp","onKeyDown","mixin","move","rowStep","colStep","evt","i","length","_areas","_onKeyEvent","funcName","len","keydown","keyup","contentMouseEventPlanner","headerMouseEventPlanner","_stopEvent","preventDefault","stop","e","grid","_areaQueue","_contentMouseEventHandlers","_headerMouseEventHandlers","_currentAreaIdx","_gridBlured","_connects","push","scroller","addArea","hitch","focusHeader","_blurHeader","_navHeader","getRegions","_findHeaderCells","onRegionFocus","doColHeaderFocus","onRegionBlur","doColHeaderBlur","_onHeaderKeyDown","_focusContent","_blurContent","_navContent","_onContentKeyDown","_focusEditableCell","_blurEditableCell","_onEditableCellKeyDown","onContentMouseEvent","_onEditableCellMouseEvent","areas","placeArea","destroy","forEach","disconnect","uninitialize","inherited","arguments","isString","onHeaderMouseEvent","getArea","areaName","_bindAreaEvents","hdl","_initialized","isFunction","initialize","_regions","r","removeArea","ignoreArea","indexOf","splice","currentArea","toBlurOld","idx","cai","tabbingOut","pos","otherAreaName","isAbove","otherArea","filter","focusArea","areaId","step","tab","dir","nextArea","focus","domNode","lastFocusNode","_onMouseEvent","type","lowercase","toLowerCase","handlers","res","map","sort","a","b","resHandlers","handler","contentMouseEvent","headerMouseEvent","initFocusView","focusView","views","getFirstScrollingView","isNavHeader","previousKey","nextKey","setFocusCell","inCell","inRowIndex","edit","isEditing","_focusifyCellNode","cell","rowIndex","onCellFocus","doFocus","target","currentTarget","_doBlur","doLastNodeFocus","_delayedHeaderFocus","_delayedCellFocus","_changeMenuBindNode","oldBindNode","newBindNode","hm","headerMenu","_contextMenuBindNode","unBindDomNode","bindDomNode","didFocus","_colHeadNode","style","removeClass","focusClass","removeAttr","viewsHeaderNode","_colHeadFocusIdx","colDir","savedIdx","shiftKey","ctrlKey","colSizeAdjust","isBubble","dk","keyCode","ENTER","SPACE","colIdx","getHeaderIndex","pluginMgr","isFixedCell","setSortIndex","_setActiveColHeader","findAndFocusGridCell","isEmpty","rowCount","isNoFocusCell","getCell","hidden","setFocusIndex","rowNodes","scrollToRow","focusGrid","index","s","g","indirectSelection","selection","clickSelect","isCopyKey","onRowClick","PAGE_UP","firstVisibleRow","setScrollTop","findScrollTop","lastVisibleRow","PAGE_DOWN","_blurFromEditableCell","_isNavigating","_navElems","_applyEditableCell","apply","console","warn","toBlur","elems","firstElem","lowest","first","lastElem","last","highest","srcElement","setSelectable","getNode","cc","layout","cellCount","col","editable","_initNavigatableElems","_getTabNavigable","editApplied","toPropagate","navigatable","toFocus","setEditCell","canEdit","ESCAPE","cancel","singleClickEdit"],"mappings":"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","file":"../../../grid/enhanced/_FocusManager.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/_base/sniff\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/keys\",\r\n\t\"dijit/a11y\",\r\n\t\"dijit/focus\",\r\n\t\"../_FocusManager\"\r\n], function(dojo, lang, declare, array, connect, event, has, html, keys, dijitA11y, dijitFocus, _FocusManager){\r\n\r\nvar _FocusArea = declare(\"dojox.grid.enhanced._FocusArea\", null, {\r\n\t// summary:\r\n\t//\t\tThis is a friend class of _FocusManager\r\n/*=====\r\n\t\t// name: string\r\n\t\t//\t\tName of this area.\r\n\t\tname: \"\",\r\n\r\n\t\tonFocus: function(event, step){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when this area logically gets focus.\r\n\t\t\t// event: Event object\r\n\t\t\t//\t\tMay be unavailable, should check before use.\r\n\t\t\t// step: Integer\r\n\t\t\t//\t\tThe distance in the tab sequence from last focused area to this area.\r\n\t\t\t// returns:\r\n\t\t\t//\t\twhether this area is successfully focused. If not, the next area will get focus.\r\n\r\n \t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\tonBlur: function(event, step){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when this area logically loses focus.\r\n\t\t\t// event: Event object\r\n\t\t\t//\t\tMay be unavailable, should check before use.\r\n\t\t\t// step: Integer\r\n\t\t\t//\t\tThe distance in the tab sequence from this area to the area to focus.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tIf Boolean, means whether this area has successfully blurred. If not, the next area to focus is still this one.\r\n\t\t\t//\t\tIf String, means the next area to focus is given by this returned name.\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\tonMove: function(rowStep, colStep, event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when focus is moving around within this area.\r\n\t\t\t// rowStep: Integer\r\n\t\t\t// colStep: Integer\r\n\t\t\t// event: Event object\r\n\t\t\t//\t\tMay be unavailable, should check before use.\r\n\t\t},\r\n\t\t\r\n\t\tonKey: function(event, isBubble){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when some key is pressed when focus is logically in this area.\r\n\t\t\t// event: Event object\r\n\t\t\t// isBubble: Boolean\r\n\t\t\t//\t\tWhether is in bubble stage (true) or catch stage (false).\r\n\t\t\t// returns:\r\n\t\t\t//\t\tIf you do NOT want the event to propagate any further along the area stack, return exactly false.\r\n\t\t\t//\t\tSo if you return nothing (undefined), this event is still propagating.\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\tgetRegions: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDefine the small regions (dom nodes) in this area.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tArray of dom nodes.\r\n\t\t},\r\n\t\t\r\n\t\tonRegionFocus: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConnected to the onfocus event of the defined regions (if any)\r\n\t\t},\r\n\t\t\r\n\t\tonRegionBlur: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConnected to the onblur event of the defined regions (if any)\r\n\t\t},\r\n=====*/\r\n\tconstructor: function(area, focusManager){\r\n\t\tthis._fm = focusManager;\r\n\t\tthis._evtStack = [area.name];\r\n\t\tvar dummy = function(){return true;};\r\n\t\tarea.onFocus = area.onFocus || dummy;\r\n\t\tarea.onBlur = area.onBlur || dummy;\r\n\t\tarea.onMove = area.onMove || dummy;\r\n\t\tarea.onKeyUp = area.onKeyUp || dummy;\r\n\t\tarea.onKeyDown = area.onKeyDown || dummy;\r\n\t\tlang.mixin(this, area);\r\n\t},\r\n\tmove: function(rowStep, colStep, evt){\r\n\t\tif(this.name){\r\n\t\t\tvar i, len = this._evtStack.length;\r\n\t\t\tfor(i = len - 1; i >= 0; --i){\r\n\t\t\t\tif(this._fm._areas[this._evtStack[i]].onMove(rowStep, colStep, evt) === false){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_onKeyEvent: function(evt, funcName){\r\n\t\tif(this.name){\r\n\t\t\tvar i, len = this._evtStack.length;\r\n\t\t\tfor(i = len - 1; i >= 0; --i){\r\n\t\t\t\tif(this._fm._areas[this._evtStack[i]][funcName](evt, false) === false){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < len; ++i){\r\n\t\t\t\tif(this._fm._areas[this._evtStack[i]][funcName](evt, true) === false){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tkeydown: function(evt){\r\n\t\treturn this._onKeyEvent(evt, \"onKeyDown\");\r\n\t},\r\n\tkeyup: function(evt){\r\n\t\treturn this._onKeyEvent(evt, \"onKeyUp\");\r\n\t},\r\n\tcontentMouseEventPlanner: function(){\r\n\t\treturn 0;\r\n\t},\r\n\theaderMouseEventPlanner: function(){\r\n\t\treturn 0;\r\n\t}\r\n});\r\n\r\nreturn declare(\"dojox.grid.enhanced._FocusManager\", _FocusManager, {\r\n\t_stopEvent: function(evt){\r\n\t\ttry{\r\n\t\t\tif(evt && evt.preventDefault){\r\n\t\t\t\tevent.stop(evt);\r\n\t\t\t}\r\n\t\t}catch(e){}\r\n\t},\r\n\t\r\n\tconstructor: function(grid){\r\n\t\tthis.grid = grid;\r\n\t\tthis._areas = {};\r\n\t\tthis._areaQueue = [];\r\n\t\tthis._contentMouseEventHandlers = [];\r\n\t\tthis._headerMouseEventHandlers = [];\r\n\t\tthis._currentAreaIdx = -1;\r\n\t\tthis._gridBlured = true;\r\n\t\tthis._connects.push(connect.connect(grid, \"onBlur\", this, \"_doBlur\"));\r\n\t\tthis._connects.push(connect.connect(grid.scroller, \"renderPage\", this, \"_delayedCellFocus\"));\r\n\t\t\r\n\t\tthis.addArea({\r\n\t\t\tname: \"header\",\r\n\t\t\tonFocus: lang.hitch(this, this.focusHeader),\r\n\t\t\tonBlur: lang.hitch(this, this._blurHeader),\r\n\t\t\tonMove: lang.hitch(this, this._navHeader),\r\n\t\t\tgetRegions: lang.hitch(this, this._findHeaderCells),\r\n\t\t\tonRegionFocus: lang.hitch(this, this.doColHeaderFocus),\r\n\t\t\tonRegionBlur: lang.hitch(this, this.doColHeaderBlur),\r\n\t\t\tonKeyDown: lang.hitch(this, this._onHeaderKeyDown)\r\n\t\t});\r\n\t\tthis.addArea({\r\n\t\t\tname: \"content\",\r\n\t\t\tonFocus: lang.hitch(this, this._focusContent),\r\n\t\t\tonBlur: lang.hitch(this, this._blurContent),\r\n\t\t\tonMove: lang.hitch(this, this._navContent),\r\n\t\t\tonKeyDown: lang.hitch(this, this._onContentKeyDown)\r\n\t\t});\r\n\t\tthis.addArea({\r\n\t\t\tname: \"editableCell\",\r\n\t\t\tonFocus: lang.hitch(this, this._focusEditableCell),\r\n\t\t\tonBlur: lang.hitch(this, this._blurEditableCell),\r\n\t\t\tonKeyDown: lang.hitch(this, this._onEditableCellKeyDown),\r\n\t\t\tonContentMouseEvent: lang.hitch(this, this._onEditableCellMouseEvent),\r\n\t\t\tcontentMouseEventPlanner: function(evt, areas){ return -1; }\r\n\t\t});\r\n\t\tthis.placeArea(\"header\");\r\n\t\tthis.placeArea(\"content\");\r\n\t\tthis.placeArea(\"editableCell\");\r\n\t\tthis.placeArea(\"editableCell\",\"above\",\"content\");\r\n\t},\r\n\tdestroy: function(){\r\n\t\tfor(var name in this._areas){\r\n\t\t\tvar area = this._areas[name];\r\n\t\t\tarray.forEach(area._connects, connect.disconnect);\r\n\t\t\tarea._connects = null;\r\n\t\t\tif(area.uninitialize){\r\n\t\t\t\tarea.uninitialize();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.inherited(arguments);\r\n\t},\r\n\taddArea: function(area){\r\n\t\tif(area.name && lang.isString(area.name)){\r\n\t\t\tif(this._areas[area.name]){\r\n\t\t\t\t//Just replace the original area, instead of remove it, so the position does not change.\r\n\t\t\t\tarray.forEach(area._connects, connect.disconnect);\r\n\t\t\t}\r\n\t\t\tthis._areas[area.name] = new _FocusArea(area, this);\r\n\t\t\tif(area.onHeaderMouseEvent){\r\n\t\t\t\tthis._headerMouseEventHandlers.push(area.name);\r\n\t\t\t}\r\n\t\t\tif(area.onContentMouseEvent){\r\n\t\t\t\tthis._contentMouseEventHandlers.push(area.name);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetArea: function(areaName){\r\n\t\treturn this._areas[areaName];\r\n\t},\r\n\t_bindAreaEvents: function(){\r\n\t\tvar area, hdl, areas = this._areas;\r\n\t\tarray.forEach(this._areaQueue, function(name){\r\n\t\t\tarea = areas[name];\r\n\t\t\tif(!area._initialized && lang.isFunction(area.initialize)){\r\n\t\t\t\tarea.initialize();\r\n\t\t\t\tarea._initialized = true;\r\n\t\t\t}\r\n\t\t\tif(area.getRegions){\r\n\t\t\t\tarea._regions = area.getRegions() || [];\r\n\t\t\t\tarray.forEach(area._connects || [], connect.disconnect);\r\n\t\t\t\tarea._connects = [];\r\n\t\t\t\tarray.forEach(area._regions, function(r){\r\n\t\t\t\t\tif(area.onRegionFocus){\r\n\t\t\t\t\t\thdl = connect.connect(r, \"onfocus\", area.onRegionFocus);\r\n\t\t\t\t\t\tarea._connects.push(hdl);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(area.onRegionBlur){\r\n\t\t\t\t\t\thdl = connect.connect(r, \"onblur\", area.onRegionBlur);\r\n\t\t\t\t\t\tarea._connects.push(hdl);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tremoveArea: function(areaName){\r\n\t\tvar area = this._areas[areaName];\r\n\t\tif(area){\r\n\t\t\tthis.ignoreArea(areaName);\r\n\t\t\tvar i = array.indexOf(this._contentMouseEventHandlers, areaName);\r\n\t\t\tif(i >= 0){\r\n\t\t\t\tthis._contentMouseEventHandlers.splice(i, 1);\r\n\t\t\t}\r\n\t\t\ti = array.indexOf(this._headerMouseEventHandlers, areaName);\r\n\t\t\tif(i >= 0){\r\n\t\t\t\tthis._headerMouseEventHandlers.splice(i, 1);\r\n\t\t\t}\r\n\t\t\tarray.forEach(area._connects, connect.disconnect);\r\n\t\t\tif(area.uninitialize){\r\n\t\t\t\tarea.uninitialize();\r\n\t\t\t}\r\n\t\t\tdelete this._areas[areaName];\r\n\t\t}\r\n\t},\r\n\tcurrentArea: function(areaName, toBlurOld){\r\n\t\t// summary:\r\n\t\t//\t\tSet current area to the one areaName refers.\r\n\t\t// areaName: String\r\n\t\tvar idx, cai = this._currentAreaIdx;\r\n\t\tif(lang.isString(areaName) && (idx = array.indexOf(this._areaQueue, areaName)) >= 0){\r\n\t\t\tif(cai != idx){\r\n\t\t\t\tthis.tabbingOut = false;\r\n\t\t\t\tif(toBlurOld && cai >= 0 && cai < this._areaQueue.length){\r\n\t\t\t\t\tthis._areas[this._areaQueue[cai]].onBlur();\r\n\t\t\t\t}\r\n\t\t\t\tthis._currentAreaIdx = idx;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn (cai < 0 || cai >= this._areaQueue.length) ?\r\n\t\t\t\tnew _FocusArea({}, this) :\r\n\t\t\t\tthis._areas[this._areaQueue[this._currentAreaIdx]];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tplaceArea: function(name, pos, otherAreaName){\r\n\t\t// summary:\r\n\t\t//\t\tPlace the area referred by *name* at some logical position relative to an existing area.\r\n\t\t// example:\r\n\t\t//\t\tplaceArea(\"myarea\",\"before\"|\"after\",...)\r\n\t\t//\t\tplaceArea(\"myarea\",\"below\"|\"above\",...)\r\n\t\tif(!this._areas[name]){ return; }\r\n\t\tvar idx = array.indexOf(this._areaQueue,otherAreaName);\r\n\t\tswitch(pos){\r\n\t\t\tcase \"after\":\r\n\t\t\t\tif(idx >= 0){ ++idx; }\r\n\t\t\t\t//intentional drop through\r\n\t\t\tcase \"before\":\r\n\t\t\t\tif(idx >= 0){\r\n\t\t\t\t\tthis._areaQueue.splice(idx,0,name);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t//intentional drop through\r\n\t\t\tdefault:\r\n\t\t\t\tthis._areaQueue.push(name);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"above\":\r\n\t\t\t\tvar isAbove = true;\r\n\t\t\t\t//intentional drop through\r\n\t\t\tcase \"below\":\r\n\t\t\t\tvar otherArea = this._areas[otherAreaName];\r\n\t\t\t\tif(otherArea){\r\n\t\t\t\t\tif(isAbove){\r\n\t\t\t\t\t\totherArea._evtStack.push(name);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\totherArea._evtStack.splice(0,0,name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t},\r\n\tignoreArea: function(name){\r\n\t\tthis._areaQueue = array.filter(this._areaQueue,function(areaName){\r\n\t\t\treturn areaName != name;\r\n\t\t});\r\n\t},\r\n\tfocusArea: function(/* int|string|areaObj */areaId,evt){\r\n\t\tvar idx;\r\n\t\tif(typeof areaId == \"number\"){\r\n\t\t\tidx = areaId < 0 ? this._areaQueue.length + areaId : areaId;\r\n\t\t}else{\r\n\t\t\tidx = array.indexOf(this._areaQueue,\r\n\t\t\t\tlang.isString(areaId) ? areaId : (areaId && areaId.name));\r\n\t\t}\r\n\t\tif(idx < 0){ idx = 0; }\r\n\t\tvar step = idx - this._currentAreaIdx;\r\n\t\tthis._gridBlured = false;\r\n\t\tif(step){\r\n\t\t\tthis.tab(step, evt);\r\n\t\t}else{\r\n\t\t\tthis.currentArea().onFocus(evt, step);\r\n\t\t}\r\n\t},\r\n\ttab: function(step,evt){\r\n\t\t//console.log(\"===========tab\",step,\"curArea\",this._currentAreaIdx,\"areaCnt\",this._areaQueue.length);\r\n\t\tthis._gridBlured = false;\r\n\t\tthis.tabbingOut = false;\r\n\t\tif(step === 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar cai = this._currentAreaIdx;\r\n\t\tvar dir = step > 0 ? 1:-1;\r\n\t\tif(cai < 0 || cai >= this._areaQueue.length){\r\n\t\t\tcai = (this._currentAreaIdx += step);\r\n\t\t}else{\r\n\t\t\tvar nextArea = this._areas[this._areaQueue[cai]].onBlur(evt,step);\r\n\t\t\tif(nextArea === true){\r\n\t\t\t\tcai = (this._currentAreaIdx += step);\r\n\t\t\t}else if(lang.isString(nextArea) && this._areas[nextArea]){\r\n\t\t\t\tcai = this._currentAreaIdx = array.indexOf(this._areaQueue,nextArea);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//console.log(\"target area:\",cai);\r\n\t\tfor(; cai >= 0 && cai < this._areaQueue.length; cai += dir){\r\n\t\t\tthis._currentAreaIdx = cai;\r\n\t\t\tif(this._areaQueue[cai] && this._areas[this._areaQueue[cai]].onFocus(evt,step)){\r\n\t\t\t\t//console.log(\"final target area:\",this._currentAreaIdx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//console.log(\"tab out\");\r\n\t\tthis.tabbingOut = true;\r\n\t\tif(step < 0){\r\n\t\t\tthis._currentAreaIdx = -1;\r\n\t\t\tdijitFocus.focus(this.grid.domNode);\r\n\t\t}else{\r\n\t\t\tthis._currentAreaIdx = this._areaQueue.length;\r\n\t\t\tdijitFocus.focus(this.grid.lastFocusNode);\r\n\t\t}\r\n\t},\r\n\t_onMouseEvent: function(type, evt){\r\n\t\tvar lowercase = type.toLowerCase(),\r\n\t\t\thandlers = this[\"_\" + lowercase + \"MouseEventHandlers\"],\r\n\t\t\tres = array.map(handlers, function(areaName){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"area\": areaName,\r\n\t\t\t\t\t\"idx\": this._areas[areaName][lowercase + \"MouseEventPlanner\"](evt, handlers)\r\n\t\t\t\t};\r\n\t\t\t}, this).sort(function(a, b){\r\n\t\t\t\treturn b.idx - a.idx;\r\n\t\t\t}),\r\n\t\t\tresHandlers = array.map(res, function(handler){\r\n\t\t\t\treturn res.area;\r\n\t\t\t}),\r\n\t\t\ti = res.length;\r\n\t\twhile(--i >= 0){\r\n\t\t\tif(this._areas[res[i].area][\"on\" + type + \"MouseEvent\"](evt, resHandlers) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcontentMouseEvent: function(evt){\r\n\t\tthis._onMouseEvent(\"Content\", evt);\r\n\t},\r\n\theaderMouseEvent: function(evt){\r\n\t\tthis._onMouseEvent(\"Header\", evt);\r\n\t},\r\n\tinitFocusView: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tthis.focusView = this.grid.views.getFirstScrollingView() || this.focusView || this.grid.views.views[0];\r\n\t\tthis._bindAreaEvents();\r\n\t},\r\n\tisNavHeader: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\t//\t\tCheck whether currently navigating among column headers.\r\n\t\t// returns:\r\n\t\t//\t\ttrue - focus is on a certain column header | false otherwise\r\n\t\treturn this._areaQueue[this._currentAreaIdx] == \"header\";\r\n\t},\r\n\tpreviousKey: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tthis.tab(-1,e);\r\n\t},\r\n\tnextKey: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tthis.tab(1,e);\r\n\t},\r\n\tsetFocusCell: function(/* Object */inCell, /* Integer */inRowIndex){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten - focuses the given grid cell\r\n\t\tif(inCell){\r\n\t\t\tthis.currentArea(this.grid.edit.isEditing() ? \"editableCell\" : \"content\", true);\r\n\t\t\t//This is very slow when selecting cells!\r\n\t\t\t//this.focusGridView();\r\n\t\t\tthis._focusifyCellNode(false);\r\n\t\t\tthis.cell = inCell;\r\n\t\t\tthis.rowIndex = inRowIndex;\r\n\t\t\tthis._focusifyCellNode(true);\r\n\t\t}\r\n\t\tthis.grid.onCellFocus(this.cell, this.rowIndex);\r\n\t},\r\n\tdoFocus: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\t//\t\ttrap focus only for grid dom node\r\n\t\t//\t\tdo not focus for scrolling if grid is about to blur\r\n\t\tif(e && e.target == e.currentTarget && !this.tabbingOut){\r\n\t\t\tif(this._gridBlured){\r\n\t\t\t\tthis._gridBlured = false;\r\n\t\t\t\tif(this._currentAreaIdx < 0 || this._currentAreaIdx >= this._areaQueue.length){\r\n\t\t\t\t\tthis.focusArea(0, e);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.focusArea(this._currentAreaIdx, e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.tabbingOut = false;\r\n\t\t}\r\n\t\tevent.stop(e);\r\n\t},\r\n\t_doBlur: function(){\r\n\t\tthis._gridBlured = true;\r\n\t},\r\n\tdoLastNodeFocus: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tif(this.tabbingOut){\r\n\t\t\tthis.tabbingOut = false;\r\n\t\t}else{\r\n\t\t\tthis.focusArea(-1, e);\r\n\t\t}\r\n\t},\r\n\t_delayedHeaderFocus: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tif(this.isNavHeader() && !has('ie')){\r\n\t\t\tthis.focusHeader();\r\n\t\t}\r\n\t},\r\n\t_delayedCellFocus: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\t\r\n\t\t//If focus header here, the page will scroll to grid when the grid is created.\r\n\t\t//this.focusArea(\"header\");\r\n\t},\r\n\t_changeMenuBindNode: function(oldBindNode, newBindNode){\r\n\t\tvar hm = this.grid.headerMenu;\r\n\t\tif(hm && this._contextMenuBindNode == oldBindNode){\r\n\t\t\thm.unBindDomNode(oldBindNode);\r\n\t\t\thm.bindDomNode(newBindNode);\r\n\t\t\tthis._contextMenuBindNode = newBindNode;\r\n\t\t}\r\n\t},\r\n\t//---------------Header Area------------------------------------------\r\n\tfocusHeader: function(evt, step){ //need a further look why these changes to parent's\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tvar didFocus = false;\r\n\t\tthis.inherited(arguments);\r\n\t\tif(this._colHeadNode && html.style(this._colHeadNode, 'display') != \"none\"){\r\n\t\t\tdijitFocus.focus(this._colHeadNode);\r\n\t\t\tthis._stopEvent(evt);\r\n\t\t\tdidFocus = true;\r\n\t\t}\r\n\t\treturn didFocus;\r\n\t},\r\n\t_blurHeader: function(evt,step){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tif(this._colHeadNode){\r\n\t\t\thtml.removeClass(this._colHeadNode, this.focusClass);\r\n\t\t}\r\n\t\thtml.removeAttr(this.grid.domNode,\"aria-activedescendant\");\r\n\t\t// reset contextMenu onto viewsHeaderNode so right mouse on header will invoke (see focusHeader)\r\n\t\tthis._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode);\r\n\t\t//moved here from nextKey\r\n\t\tthis._colHeadNode = this._colHeadFocusIdx = null;\r\n\t\treturn true;\r\n\t},\r\n\t_navHeader: function(rowStep, colStep, evt){\r\n\t\tvar colDir = colStep < 0 ? -1 : 1,\r\n\t\t\tsavedIdx = array.indexOf(this._findHeaderCells(), this._colHeadNode);\r\n\t\tif(savedIdx >= 0 && (evt.shiftKey && evt.ctrlKey)){\r\n\t\t\tthis.colSizeAdjust(evt, savedIdx, colDir * 5);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.move(rowStep, colStep);\r\n\t},\r\n\t_onHeaderKeyDown: function(e, isBubble){\r\n\t\tif(isBubble){\r\n\t\t\tvar dk = keys;\r\n\t\t\tswitch(e.keyCode){\r\n\t\t\t\tcase dk.ENTER:\r\n\t\t\t\tcase dk.SPACE:\r\n\t\t\t\t\tvar colIdx = this.getHeaderIndex();\r\n\t\t\t\t\tif(colIdx >= 0 && !this.grid.pluginMgr.isFixedCell(e.cell)/*TODO*/){\r\n\t\t\t\t\t\tthis.grid.setSortIndex(colIdx, null, e);\r\n\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_setActiveColHeader: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tthis.inherited(arguments);\r\n\t\t//EDG now will decorate event on header key events, if no focus, the cell will be wrong\r\n\t\tdijitFocus.focus(this._colHeadNode);\r\n\t},\r\n\t//---------------Content Area------------------------------------------\r\n\tfindAndFocusGridCell: function(){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten\r\n\t\tthis._focusContent();\r\n\t},\r\n\t_focusContent: function(evt,step){\r\n\t\tvar didFocus = true;\r\n\t\tvar isEmpty = (this.grid.rowCount === 0); // If grid is empty this.grid.rowCount == 0\r\n\t\tif(this.isNoFocusCell() && !isEmpty){\r\n\t\t\t//skip all the hidden cells\r\n\t\t\tfor(var i = 0, cell = this.grid.getCell(0); cell && cell.hidden; cell = this.grid.getCell(++i)){}\r\n\t\t\tthis.setFocusIndex(0, cell ? i : 0);\r\n\t\t}else if(this.cell && !isEmpty){\r\n\t\t\tif(this.focusView && !this.focusView.rowNodes[this.rowIndex]){\r\n\t\t\t\t// if rowNode for current index is undefined (likely as a result of a sort and because of #7304)\r\n\t\t\t\t// scroll to that row\r\n\t\t\t\tthis.grid.scrollToRow(this.rowIndex);\r\n\t\t\t\tthis.focusGrid();\r\n\t\t\t}else{\r\n\t\t\t\tthis.setFocusIndex(this.rowIndex, this.cell.index);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tdidFocus = false;\r\n\t\t}\r\n\t\tif(didFocus){ this._stopEvent(evt); }\r\n\t\treturn didFocus;\r\n\t},\r\n\t_blurContent: function(evt,step){\r\n\t\tthis._focusifyCellNode(false);\r\n\t\treturn true;\r\n\t},\r\n\t_navContent: function(rowStep, colStep, evt){\r\n\t\tif((this.rowIndex === 0 && rowStep < 0) || (this.rowIndex === this.grid.rowCount - 1 && rowStep > 0)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._colHeadNode = null;\r\n\t\tthis.move(rowStep, colStep, evt);\r\n\t\tif(evt){\r\n\t\t\tevent.stop(evt);\r\n\t\t}\r\n\t},\r\n\t_onContentKeyDown: function(e, isBubble){\r\n\t\tif(isBubble){\r\n\t\t\tvar dk = keys, s = this.grid.scroller;\r\n\t\t\tswitch(e.keyCode){\r\n\t\t\t\tcase dk.ENTER:\r\n\t\t\t\tcase dk.SPACE:\r\n\t\t\t\t\tvar g = this.grid;\r\n\t\t\t\t\tif(g.indirectSelection){ break; }\r\n\t\t\t\t\tg.selection.clickSelect(this.rowIndex, connect.isCopyKey(e), e.shiftKey);\r\n\t\t\t\t\tg.onRowClick(e);\r\n\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase dk.PAGE_UP:\r\n\t\t\t\t\tif(this.rowIndex !== 0){\r\n\t\t\t\t\t\tif(this.rowIndex != s.firstVisibleRow + 1){\r\n\t\t\t\t\t\t\tthis._navContent(s.firstVisibleRow - this.rowIndex, 0);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.grid.setScrollTop(s.findScrollTop(this.rowIndex - 1));\r\n\t\t\t\t\t\t\tthis._navContent(s.firstVisibleRow - s.lastVisibleRow + 1, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase dk.PAGE_DOWN:\r\n\t\t\t\t\tif(this.rowIndex + 1 != this.grid.rowCount){\r\n\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t\tif(this.rowIndex != s.lastVisibleRow - 1){\r\n\t\t\t\t\t\t\tthis._navContent(s.lastVisibleRow - this.rowIndex - 1, 0);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.grid.setScrollTop(s.findScrollTop(this.rowIndex + 1));\r\n\t\t\t\t\t\t\tthis._navContent(s.lastVisibleRow - s.firstVisibleRow - 1, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t//------------------editable content area-------------------------\r\n\t_blurFromEditableCell: false,\r\n\t_isNavigating: false,\r\n\t_navElems: null,\r\n\t_focusEditableCell: function(evt,step){\r\n\t\tvar didFocus = false;\r\n\t\tif(this._isNavigating){\r\n\t\t\tdidFocus = true;\r\n\t\t}else if(this.grid.edit.isEditing() && this.cell){\r\n\t\t\tif(this._blurFromEditableCell || !this._blurEditableCell(evt, step)){\r\n\t\t\t\tthis.setFocusIndex(this.rowIndex,this.cell.index);\r\n\t\t\t\tdidFocus = true;\r\n\t\t\t}\r\n\t\t\tthis._stopEvent(evt);\r\n\t\t}\r\n\t\treturn didFocus;\r\n\t},\r\n\t_applyEditableCell: function(){\r\n\t\ttry{\r\n\t\t\tthis.grid.edit.apply();\r\n\t\t}catch(e){\r\n\t\t\tconsole.warn(\"_FocusManager._applyEditableCell() error:\", e);\r\n\t\t}\r\n\t},\r\n\t_blurEditableCell: function(evt,step){\r\n\t\tthis._blurFromEditableCell = false;\r\n\t\tif(this._isNavigating){\r\n\t\t\tvar toBlur = true;\r\n\t\t\tif(evt){\r\n\t\t\t\tvar elems = this._navElems;\r\n\t\t\t\tvar firstElem = elems.lowest || elems.first;\r\n\t\t\t\tvar lastElem = elems.last || elems.highest || firstElem;\r\n\t\t\t\tvar target = has('ie') ? evt.srcElement : evt.target;\r\n\t\t\t\ttoBlur = target == (step > 0 ? lastElem : firstElem);\r\n\t\t\t}\r\n\t\t\tif(toBlur){\r\n\t\t\t\tthis._isNavigating = false;\r\n\t\t\t\thtml.setSelectable(this.cell.getNode(this.rowIndex), false);\r\n\t\t\t\treturn \"content\";\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}else if(this.grid.edit.isEditing() && this.cell){\r\n\t\t\tif(!step || typeof step != \"number\"){ return false; }\r\n\t\t\tvar dir = step > 0 ? 1 : -1;\r\n\t\t\tvar cc = this.grid.layout.cellCount;\r\n\t\t\tfor(var cell, col = this.cell.index + dir; col >= 0 && col < cc; col += dir){\r\n\t\t\t\tcell = this.grid.getCell(col);\r\n\t\t\t\tif(cell.editable){\r\n\t\t\t\t\tthis.cell = cell;\r\n\t\t\t\t\tthis._blurFromEditableCell = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif((this.rowIndex > 0 || dir == 1) && (this.rowIndex < this.grid.rowCount || dir == -1)){\r\n\t\t\t\tthis.rowIndex += dir;\r\n\t\t\t\t//this.cell = this.grid.getCell(0); //There must be an editable cell, so this is not necessary.\r\n\t\t\t\tfor(col = dir > 0 ? 0 : cc - 1; col >= 0 && col < cc; col += dir){\r\n\t\t\t\t\tcell = this.grid.getCell(col);\r\n\t\t\t\t\tif(cell.editable){\r\n\t\t\t\t\t\tthis.cell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._applyEditableCell();\r\n\t\t\t\treturn \"content\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_initNavigatableElems: function(){\r\n\t\tthis._navElems = dijitA11y._getTabNavigable(this.cell.getNode(this.rowIndex));\r\n\t},\r\n\t_onEditableCellKeyDown: function(e, isBubble){\r\n\t\tvar dk = keys,\r\n\t\t\tg = this.grid,\r\n\t\t\tedit = g.edit,\r\n\t\t\teditApplied = false,\r\n\t\t\ttoPropagate = true;\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase dk.ENTER:\r\n\t\t\t\tif(isBubble && edit.isEditing()){\r\n\t\t\t\t\tthis._applyEditableCell();\r\n\t\t\t\t\teditApplied = true;\r\n\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t}\r\n\t\t\t\t//intentional drop through\r\n\t\t\tcase dk.SPACE:\r\n\t\t\t\tif(!isBubble && this._isNavigating){\r\n\t\t\t\t\ttoPropagate = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(isBubble){\r\n\t\t\t\t\tif(!this.cell.editable && this.cell.navigatable){\r\n\t\t\t\t\t\tthis._initNavigatableElems();\r\n\t\t\t\t\t\tvar toFocus = this._navElems.lowest || this._navElems.first;\r\n\t\t\t\t\t\tif(toFocus){\r\n\t\t\t\t\t\t\tthis._isNavigating = true;\r\n\t\t\t\t\t\t\thtml.setSelectable(this.cell.getNode(this.rowIndex), true);\r\n\t\t\t\t\t\t\tdijitFocus.focus(toFocus);\r\n\t\t\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\t\t\tthis.currentArea(\"editableCell\", true);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!editApplied && !edit.isEditing() && !g.pluginMgr.isFixedCell(this.cell)){\r\n\t\t\t\t\t\tedit.setEditCell(this.cell, this.rowIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(editApplied){\r\n\t\t\t\t\t\tthis.currentArea(\"content\", true);\r\n\t\t\t\t\t}else if(this.cell.editable && g.canEdit()){\r\n\t\t\t\t\t\tthis.currentArea(\"editableCell\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase dk.PAGE_UP:\r\n\t\t\tcase dk.PAGE_DOWN:\r\n\t\t\t\tif(!isBubble && edit.isEditing()){\r\n\t\t\t\t\t//prevent propagating to content area\r\n\t\t\t\t\ttoPropagate = false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase dk.ESCAPE:\r\n\t\t\t\tif(!isBubble){\r\n\t\t\t\t\tedit.cancel();\r\n\t\t\t\t\tthis.currentArea(\"content\", true);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\treturn toPropagate;\r\n\t},\r\n\t_onEditableCellMouseEvent: function(evt){\r\n\t\tif(evt.type == \"click\"){\r\n\t\t\tvar cell = this.cell || evt.cell;\r\n\t\t\tif(cell && !cell.editable && cell.navigatable){\r\n\t\t\t\tthis._initNavigatableElems();\r\n\t\t\t\tif(this._navElems.lowest || this._navElems.first){\r\n\t\t\t\t\tvar target = has('ie') ? evt.srcElement : evt.target;\r\n\t\t\t\t\tif(target != cell.getNode(evt.rowIndex)){\r\n\t\t\t\t\t\tthis._isNavigating = true;\r\n\t\t\t\t\t\tthis.focusArea(\"editableCell\", evt);\r\n\t\t\t\t\t\thtml.setSelectable(cell.getNode(evt.rowIndex), true);\r\n\t\t\t\t\t\tdijitFocus.focus(target);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(this.grid.singleClickEdit){\r\n\t\t\t\tthis.currentArea(\"editableCell\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n});\r\n});"]}