{"version":3,"sources":["grid/enhanced/plugins/Pagination.js"],"names":["define","kernel","declare","array","connect","lang","html","event","query","string","keys","template","Dialog","layers","_Plugin","EnhancedGrid","Button","NumberTextBox","dijitFocus","_Widget","_TemplatedMixin","_WidgetsInTemplateMixin","metrics","nls","_GotoPagePane","templateString","widgetsInTemplate","dlg","postMixInProperties","this","plugin","postCreate","inherited","arguments","_mainMsgNode","innerHTML","_nls","_confirmBtn","set","_cancelBtn","_onConfirm","evt","_pageInputBox","isValid","getDisplayedValue","currentPage","parse","_gotoPageDialog","hide","reset","stopEvent","_onCancel","_onKey","altKey","metaKey","keyCode","ENTER","_GotoPageDialog","pageCount","dlgPane","constructor","startup","refNode","grid","domNode","title","content","_updatePageCount","getTotalPageNum","constraints","fractional","min","max","_pageLabelNode","substitute","showDialog","show","destroy","_ForcedPageStoreLayer","_StoreLayer","tags","_plugin","_fetch","request","_this","scope","global","onBegin","start","_currentPage","_currentPageSize","startIdx","endIdx","p","_paginator","_showAll","sizeSwitch","pageStepper","gotoButton","size","req","_maxSize","_update","call","count","_pending_requests","firstPage","Math","hitch","_store","_originFetch","stop","e","_Focus","_focusedNode","_isFocused","paginator","_pager","focus","_onFocus","step","node","dir","tabindex","parseInt","getAttribute","_focus","_onBlur","hasClass","removeClass","_onMove","rowDelta","colDelta","delta","isIE","addClass","_onActive","target","focusArea","position","_moveFocus","next","nextSibling","prev","previousSibling","_Paginator","params","mixin","g","_originalResize","resize","changeSize","resultSize","_changeSize","_resultSize","apply","_placeSelf","removeArea","onSwitchPageSize","onPageStep","onShowGotoPageDialog","_updateDescription","_updatePageStepper","_updateSizeSwitch","_updateGotoButton","_registerFocus","isTop","focusMgr","name","addArea","onFocus","onBlur","onMove","placeArea","placeAt","viewsHeaderNode","viewsNode","_resetGridHeight","_autoHeight","padBorder","_getPadBorder","h","gh","clientHeight","style","contentBox","hh","_getHeaderHeight","ph","marginBox","autoHeight","cgh","_styleMsgNode","w","hasHScroller","some","views","v","hasHScrollbar","forEach","childNodes","c","scrollboxNode","getScrollbar","top","width","height","messagesNode","z-Index","s","forcePageStoreLayer","maxSize","getItemTitle","description","descriptionDiv","sizeSwitchTd","length","_createSizeSwitchNodes","_updateSwitchNodesStyle","pageSizes","labelValue","isFinite","value","create","setAttribute","styleNode","status","removeAttr","isNaN","pageStepperTd","pageStepperDiv","_createPageStepNodes","_createWardBtns","_resetPageStepNodes","_updatePageStepNodesStyle","startPage","_getStartPage","stepSize","_getStepPageSize","label","i","maxPageStep","highContrastLabel","prevPage","nextPage","lastPage","createWardBtn","highConrastNode","tip","stepNodes","j","attr","curPage","updateClass","isWardBtn","enableClass","disableClass","disablePageNum","_showGotoButton","flag","gotoPageDiv","gotoPageTd","toggleClass","_openGotopageDialog","type","SPACE","_onSwitchPageSize","currentPageSize","_onPageStep","cp","ms","hs","tp","sp","Pagination","defaultPageSize","defaultPage","Infinity","init","usingPagination","_initOptions","rowsPerPage","store","wrap","option","_regApis","unwrap","scrollToRow","_gridOriginalfuncs","_onNew","removeSelectedRows","page","_refresh","startIndex","_defaultRowsPerPage","ceil","getTotalRowCount","inRowIndex","rowIdx","_multiRemoving","save","showGotoPageButton","gotoPage","deprecated","gotoFirstPage","gotoLastPage","changePageSize","undefined","isArray","push","indexOf","sort","a","b","isString","toLowerCase","descTemplate","allItemsLabelTemplate","pageSizeLabelTemplate","pageStepLabelTemplate","itemTitle","singularItemTitle","prevTip","firstTip","nextTip","lastTip","gotoButtonTitle","dialogTitle","dialogIndication","pageCountIndication","dialogConfirm","dialogCancel","all","_onDelete","item","parentInfo","totalPages","get","registerPlugin"],"mappings":"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","file":"../../../../grid/enhanced/plugins/Pagination.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/query\",\r\n\t\"dojo/string\",\r\n\t\"dojo/keys\",\r\n\t\"dojo/text!../templates/Pagination.html\",\r\n\t\"./Dialog\",\r\n\t\"./_StoreLayer\",\r\n\t\"../_Plugin\",\r\n\t\"../../EnhancedGrid\",\r\n\t\"dijit/form/Button\",\r\n\t\"dijit/form/NumberTextBox\",\r\n\t\"dijit/focus\",\r\n\t\"dijit/_Widget\",\r\n\t\"dijit/_TemplatedMixin\",\r\n\t\"dijit/_WidgetsInTemplateMixin\",\r\n\t\"dojox/html/metrics\",\r\n\t\"dojo/i18n!../nls/Pagination\"\r\n], function(kernel, declare, array, connect, lang, html, event, query,\r\n\tstring, keys, template, Dialog, layers, _Plugin, EnhancedGrid,\r\n\tButton, NumberTextBox, dijitFocus, _Widget, _TemplatedMixin, _WidgetsInTemplateMixin, metrics, nls){\r\n\t\t\r\nvar _GotoPagePane = declare(\"dojox.grid.enhanced.plugins.pagination._GotoPagePane\", [_Widget, _TemplatedMixin, _WidgetsInTemplateMixin], {\r\n\ttemplateString: \"<div>\" + \r\n\t\t\t\t\t\t\"<div class='dojoxGridDialogMargin' dojoAttachPoint='_mainMsgNode'></div>\" +\r\n\t\t\t\t\t\t\"<div class='dojoxGridDialogMargin'>\" +\r\n\t\t\t\t\t\t\t\"<input dojoType='dijit.form.NumberTextBox' style='width: 50px;' dojoAttachPoint='_pageInputBox' dojoAttachEvent='onKeyUp: _onKey'></input>\" +\r\n\t\t\t\t\t\t\t\"<label dojoAttachPoint='_pageLabelNode'></label>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class='dojoxGridDialogButton'>\" +\r\n\t\t\t\t\t\t\t\"<button dojoType='dijit.form.Button' dojoAttachPoint='_confirmBtn' dojoAttachEvent='onClick: _onConfirm'></button>\" +\r\n\t\t\t\t\t\t\t\"<button dojoType='dijit.form.Button' dojoAttachPoint='_cancelBtn' dojoAttachEvent='onClick: _onCancel'></button>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\"</div>\",\r\n\twidgetsInTemplate: true,\r\n\tdlg: null,\r\n\tpostMixInProperties: function(){\r\n\t\tthis.plugin = this.dlg.plugin;\r\n\t},\r\n\tpostCreate: function(){\r\n\t\tthis.inherited(arguments);\r\n\t\tthis._mainMsgNode.innerHTML = this.plugin._nls[12];\r\n\t\tthis._confirmBtn.set(\"label\", this.plugin._nls[14]);\r\n\t\tthis._confirmBtn.set(\"disabled\", true);\r\n\t\tthis._cancelBtn.set(\"label\", this.plugin._nls[15]);\r\n\t},\r\n\t_onConfirm: function(evt){\r\n\t\tif(this._pageInputBox.isValid() && this._pageInputBox.getDisplayedValue() !== \"\"){\r\n\t\t\tthis.plugin.currentPage(this._pageInputBox.parse(this._pageInputBox.getDisplayedValue()));\r\n\t\t\tthis.dlg._gotoPageDialog.hide();\r\n\t\t\tthis._pageInputBox.reset();\r\n\t\t}\r\n\t\tstopEvent(evt);\r\n\t},\r\n\t_onCancel: function(evt){\r\n\t\tthis._pageInputBox.reset();\r\n\t\tthis.dlg._gotoPageDialog.hide();\r\n\t\tstopEvent(evt);\r\n\t},\r\n\t_onKey: function(evt){\r\n\t\tthis._confirmBtn.set(\"disabled\", !this._pageInputBox.isValid() || this._pageInputBox.getDisplayedValue() == \"\");\r\n\t\tif(!evt.altKey && !evt.metaKey && evt.keyCode === keys.ENTER){\r\n\t\t\tthis._onConfirm(evt);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar _GotoPageDialog = declare(\"dojox.grid.enhanced.plugins.pagination._GotoPageDialog\", null, {\r\n\tpageCount: 0,\r\n\tdlgPane: null,\r\n\tconstructor: function(plugin){\r\n\t\tthis.plugin = plugin;\r\n\t\tthis.dlgPane = new _GotoPagePane({\"dlg\": this});\r\n\t\tthis.dlgPane.startup();\r\n\t\tthis._gotoPageDialog = new Dialog({\r\n\t\t\t\"refNode\": plugin.grid.domNode,\r\n\t\t\t\"title\": this.plugin._nls[11],\r\n\t\t\t\"content\": this.dlgPane\r\n\t\t});\r\n\t\tthis._gotoPageDialog.startup();\r\n\t},\r\n\t_updatePageCount: function(){\r\n\t\tthis.pageCount = this.plugin.getTotalPageNum();\r\n\t\tthis.dlgPane._pageInputBox.constraints = {fractional:false, min:1, max:this.pageCount};\r\n\t\tthis.dlgPane._pageLabelNode.innerHTML = string.substitute(this.plugin._nls[13], [this.pageCount]);\r\n\t},\r\n\tshowDialog: function(){\r\n\t\tthis._updatePageCount();\r\n\t\tthis._gotoPageDialog.show();\r\n\t},\r\n\tdestroy: function(){\r\n\t\tthis._gotoPageDialog.destroy();\r\n\t}\r\n});\r\n\r\nvar _ForcedPageStoreLayer = declare(\"dojox.grid.enhanced.plugins._ForcedPageStoreLayer\", layers._StoreLayer, {\r\n\ttags: [\"presentation\"],\r\n\tconstructor: function(plugin){\r\n\t\tthis._plugin = plugin;\r\n\t},\r\n\t_fetch: function(request){\r\n\t\tvar _this = this,\r\n\t\t\tplugin = _this._plugin,\r\n\t\t\tgrid = plugin.grid,\r\n\t\t\tscope = request.scope || kernel.global,\r\n\t\t\tonBegin = request.onBegin;\r\n\t\trequest.start = (plugin._currentPage - 1) * plugin._currentPageSize + request.start;\r\n\t\t_this.startIdx = request.start;\r\n\t\t_this.endIdx = request.start + plugin._currentPageSize - 1;\r\n\t\tvar p = plugin._paginator;\r\n\t\tif(!plugin._showAll){\r\n\t\t\tplugin._showAll = !p.sizeSwitch && !p.pageStepper && !p.gotoButton;\r\n\t\t}\r\n\t\tif(onBegin && plugin._showAll){\r\n\t\t\trequest.onBegin = function(size, req){\r\n\t\t\t\tplugin._maxSize = plugin._currentPageSize = size;\r\n\t\t\t\t_this.startIdx = 0;\r\n\t\t\t\t_this.endIdx = size - 1;\r\n\t\t\t\tplugin._paginator._update();\r\n\t\t\t\treq.onBegin = onBegin;\r\n\t\t\t\treq.onBegin.call(scope, size, req);\r\n\t\t\t};\r\n\t\t}else if(onBegin){\r\n\t\t\trequest.onBegin = function(size, req){\r\n\t\t\t\treq.start = 0;\r\n\t\t\t\treq.count = plugin._currentPageSize;\r\n\t\t\t\tplugin._maxSize = size;\r\n\t\t\t\t_this.endIdx = _this.endIdx >= size ? (size - 1) : _this.endIdx;\r\n\t\t\t\tif(_this.startIdx > size && size !== 0){\r\n\t\t\t\t\tgrid._pending_requests[req.start] = false;\r\n\t\t\t\t\tplugin.firstPage();\r\n\t\t\t\t}\r\n\t\t\t\tplugin._paginator._update();\r\n\t\t\t\treq.onBegin = onBegin;\r\n\t\t\t\treq.onBegin.call(scope, Math.min(plugin._currentPageSize, (size - _this.startIdx)), req);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn lang.hitch(this._store, this._originFetch)(request);\r\n\t}\r\n});\r\n\r\nvar stopEvent = function(evt){\r\n\ttry{\r\n\t\tif(evt){\r\n\t\t\tevent.stop(evt);\r\n\t\t}\r\n\t}catch(e){}\r\n};\r\n\r\nvar _Focus = declare(\"dojox.grid.enhanced.plugins.pagination._Focus\", null, {\r\n\t_focusedNode: null,\r\n\t_isFocused: false,\r\n\tconstructor: function(paginator){\r\n\t\tthis._pager = paginator;\r\n\t\tvar focusMgr =  paginator.plugin.grid.focus;\r\n\t\tpaginator.plugin.connect(paginator, 'onSwitchPageSize', lang.hitch(this, '_onActive'));\r\n\t\tpaginator.plugin.connect(paginator, 'onPageStep', lang.hitch(this, '_onActive'));\r\n\t\tpaginator.plugin.connect(paginator, 'onShowGotoPageDialog', lang.hitch(this, '_onActive'));\r\n\t\tpaginator.plugin.connect(paginator, '_update', lang.hitch(this, '_moveFocus'));\r\n\t},\r\n\t_onFocus: function(evt, step){\r\n\t\tvar node, nodes;\r\n\t\tif(!this._isFocused){\r\n\t\t\tnode = this._focusedNode || query('[tabindex]', this._pager.domNode)[0];\r\n\t\t}else if(step && this._focusedNode){\r\n\t\t\tvar dir = step > 0 ? -1 : 1,\r\n\t\t\t\ttabindex = parseInt(this._focusedNode.getAttribute('tabindex'), 10) + dir;\r\n\t\t\twhile(tabindex >= -3 && tabindex < 0){\r\n\t\t\t\tnode = query('[tabindex=' + tabindex + ']', this._pager.domNode)[0];\r\n\t\t\t\tif(node){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttabindex += dir;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._focus(node, evt);\r\n\t},\r\n\t_onBlur: function(evt, step){\r\n\t\tif(!step || !this._focusedNode){\r\n\t\t\tthis._isFocused = false;\r\n\t\t\tif(this._focusedNode && html.hasClass(this._focusedNode, 'dojoxGridButtonFocus')){\r\n\t\t\t\thtml.removeClass(this._focusedNode, 'dojoxGridButtonFocus');\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar node, dir = step > 0 ? -1 : 1,\r\n\t\t\ttabindex = parseInt(this._focusedNode.getAttribute('tabindex'), 10) + dir;\r\n\t\twhile(tabindex >= -3 && tabindex < 0){\r\n\t\t\tnode = query('[tabindex=' + tabindex + ']', this._pager.domNode)[0];\r\n\t\t\tif(node){\r\n\t\t\t\tbreak;\r\n\t\t\t}else{\r\n\t\t\t\ttabindex += dir;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!node){\r\n\t\t\tthis._isFocused = false;\r\n\t\t\tif(html.hasClass(this._focusedNode, 'dojoxGridButtonFocus')){\r\n\t\t\t\thtml.removeClass(this._focusedNode, 'dojoxGridButtonFocus');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node ? false : true;\r\n\t},\r\n\t_onMove: function(rowDelta, colDelta, evt){\r\n\t\tif(this._focusedNode){\r\n\t\t\tvar tabindex = this._focusedNode.getAttribute('tabindex'),\r\n\t\t\t\tdelta = colDelta == 1 ? \"nextSibling\" : \"previousSibling\",\r\n\t\t\t\tnode = this._focusedNode[delta];\r\n\t\t\twhile(node){\r\n\t\t\t\tif(node.getAttribute('tabindex') == tabindex){\r\n\t\t\t\t\tthis._focus(node);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tnode = node[delta];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_focus: function(node, evt){\r\n\t\tif(node){\r\n\t\t\tthis._isFocused = true;\r\n\t\t\tif(kernel.isIE && this._focusedNode){\r\n\t\t\t\thtml.removeClass(this._focusedNode, 'dojoxGridButtonFocus');\r\n\t\t\t}\r\n\t\t\tthis._focusedNode = node;\r\n\t\t\tnode.focus();\r\n\t\t\tif(kernel.isIE){\r\n\t\t\t\thtml.addClass(node, 'dojoxGridButtonFocus');\r\n\t\t\t}\r\n\t\t\tstopEvent(evt);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_onActive: function(e){\r\n\t\tthis._focusedNode = e.target;\r\n\t\tif(!this._isFocused){\r\n\t\t\tthis._pager.plugin.grid.focus.focusArea('pagination' + this._pager.position);\r\n\t\t}\r\n\t},\r\n\t_moveFocus: function(){\r\n\t\tif(this._focusedNode && !this._focusedNode.getAttribute('tabindex')){\r\n\t\t\tvar next = this._focusedNode.nextSibling;\r\n\t\t\twhile(next){\r\n\t\t\t\tif(next.getAttribute('tabindex')){\r\n\t\t\t\t\tthis._focus(next);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnext = next.nextSibling;\r\n\t\t\t}\r\n\t\t\tvar prev = this._focusedNode.previousSibling;\r\n\t\t\twhile(prev){\r\n\t\t\t\tif(prev.getAttribute('tabindex')){\r\n\t\t\t\t\tthis._focus(prev);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tprev = prev.previousSibling;\r\n\t\t\t}\r\n\t\t\tthis._focusedNode = null;\r\n\t\t\tthis._onBlur();\r\n\t\t}else if(kernel.isIE && this._focusedNode){\r\n\t\t\thtml.addClass(this._focusedNode, 'dojoxGridButtonFocus');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar _Paginator = declare(\"dojox.grid.enhanced.plugins._Paginator\", [_Widget, _TemplatedMixin], {\r\n\ttemplateString: template,\r\n\tconstructor: function(params){\r\n\t\tlang.mixin(this, params);\r\n\t\tthis.grid = this.plugin.grid;\r\n\t},\r\n\tpostCreate: function(){\r\n\t\tthis.inherited(arguments);\r\n\t\tvar _this = this, g = this.grid;\r\n\t\tthis.plugin.connect(g, \"_resize\", lang.hitch(this, \"_resetGridHeight\"));\r\n\t\tthis._originalResize = g.resize;\r\n\t\tg.resize = function(changeSize, resultSize){\r\n\t\t\t_this._changeSize = changeSize;\r\n\t\t\t_this._resultSize = resultSize;\r\n\t\t\t_this._originalResize.apply(g, arguments);\r\n\t\t};\r\n\t\tthis.focus = _Focus(this);\r\n\t\tthis._placeSelf();\r\n\t},\r\n\tdestroy: function(){\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.grid.focus.removeArea(\"pagination\" + this.position);\r\n\t\tif(this._gotoPageDialog){\r\n\t\t\tthis._gotoPageDialog.destroy();\r\n\t\t}\r\n\t\tthis.grid.resize = this._originalResize;\r\n\t},\r\n\tonSwitchPageSize: function(/*Event*/evt){\r\n\r\n\t},\r\n\tonPageStep: function(/*Event*/evt){\r\n\r\n\t},\r\n\tonShowGotoPageDialog: function(/*Event*/evt){\r\n\r\n\t},\r\n\t_update: function(){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to update paging information and update\r\n\t\t//\t\tpagination bar display.\r\n\t\tthis._updateDescription();\r\n\t\tthis._updatePageStepper();\r\n\t\tthis._updateSizeSwitch();\r\n\t\tthis._updateGotoButton();\r\n\t},\r\n\t_registerFocus: function(isTop){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to register pagination bar to focus manager.\r\n\t\tvar focusMgr = this.grid.focus, \r\n\t\t\tname = \"pagination\" + this.position,\r\n\t\t\tf = this.focus;\r\n\t\tfocusMgr.addArea({\r\n\t\t\tname: name,\r\n\t\t\tonFocus: lang.hitch(this.focus, \"_onFocus\"),\r\n\t\t\tonBlur: lang.hitch(this.focus, \"_onBlur\"),\r\n\t\t\tonMove: lang.hitch(this.focus, \"_onMove\")\r\n\t\t});\r\n\t\tfocusMgr.placeArea(name, isTop ? \"before\" : \"after\", isTop ? \"header\" : \"content\");\r\n\t},\r\n\t_placeSelf: function(){\r\n\t\t// summary:\r\n\t\t//\t\tPlace pagination bar to a position.\r\n\t\t//\t\tThere are two options, top of the grid, bottom of the grid.\r\n\t\tvar g = this.grid,\r\n\t\t\tisTop = this.position == \"top\";\r\n\t\tthis.placeAt(isTop ? g.viewsHeaderNode : g.viewsNode, isTop ? \"before\" : \"after\");\r\n\t\tthis._registerFocus(isTop);\r\n\t},\r\n\t_resetGridHeight: function(changeSize, resultSize){\r\n\t\t// summary:\r\n\t\t//\t\tFunction of resize grid height to place this pagination bar.\r\n\t\t//\t\tSince the grid would be able to add other element in its domNode, we have\r\n\t\t//\t\tchange the grid view size to place the pagination bar.\r\n\t\t//\t\tThis function will resize the grid viewsNode height, scorllboxNode height\r\n\t\tvar g = this.grid;\r\n\t\tchangeSize = changeSize || this._changeSize;\r\n\t\tresultSize = resultSize || this._resultSize;\r\n\t\tdelete this._changeSize;\r\n\t\tdelete this._resultSize;\r\n\t\tif(g._autoHeight){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar padBorder = g._getPadBorder().h;\r\n\t\tif(!this.plugin.gh){\r\n\t\t\tthis.plugin.gh = (g.domNode.clientHeight || html.style(g.domNode, 'height')) + 2 * padBorder;\r\n\t\t}\r\n\t\tif(resultSize){\r\n\t\t\tchangeSize = resultSize;\r\n\t\t}\r\n\t\tif(changeSize){\r\n\t\t\tthis.plugin.gh = html.contentBox(g.domNode).h + 2 * padBorder;\r\n\t\t}\r\n\t\tvar gh = this.plugin.gh,\r\n\t\t\thh = g._getHeaderHeight(),\r\n\t\t\tph = html.marginBox(this.domNode).h;\r\n\t\t// ph = this.plugin._paginator.position == \"bottom\" ? ph * 2 : ph;\r\n\t\tif(typeof g.autoHeight === \"number\"){\r\n\t\t\tvar cgh = gh + ph - padBorder;\r\n\t\t\thtml.style(g.domNode, \"height\", cgh + \"px\");\r\n\t\t\thtml.style(g.viewsNode, \"height\", (cgh - ph - hh) + \"px\");\r\n\t\t\tthis._styleMsgNode(hh, html.marginBox(g.viewsNode).w, cgh - ph - hh);\r\n\t\t}else{\r\n\t\t\tvar h = gh - ph - hh - padBorder;\r\n\t\t\thtml.style(g.viewsNode, \"height\", h + \"px\");\r\n\t\t\tvar hasHScroller = array.some(g.views.views, function(v){\r\n\t\t\t\treturn v.hasHScrollbar();\r\n\t\t\t});\r\n\t\t\tarray.forEach(g.viewsNode.childNodes, function(c){\r\n\t\t\t\thtml.style(c, \"height\", h + \"px\");\r\n\t\t\t});\r\n\t\t\tarray.forEach(g.views.views, function(v){\r\n\t\t\t\tif(v.scrollboxNode){\r\n\t\t\t\t\tif(!v.hasHScrollbar() && hasHScroller){\r\n\t\t\t\t\t\thtml.style(v.scrollboxNode, \"height\", (h - metrics.getScrollbar().h) + \"px\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\thtml.style(v.scrollboxNode, \"height\", h + \"px\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._styleMsgNode(hh, html.marginBox(g.viewsNode).w, h);\r\n\t\t}\r\n\t},\r\n\t_styleMsgNode: function(top, width, height){\r\n\t\tvar messagesNode = this.grid.messagesNode;\r\n\t\thtml.style(messagesNode, {\"position\": \"absolute\", \"top\": top + \"px\", \"width\": width + \"px\", \"height\": height + \"px\", \"z-Index\": \"100\"});\r\n\t},\r\n\t_updateDescription: function(){\r\n\t\t// summary:\r\n\t\t//\t\tUpdate size information.\r\n\t\tvar s = this.plugin.forcePageStoreLayer,\r\n\t\t\tmaxSize = this.plugin._maxSize,\r\n\t\t\tnls = this.plugin._nls,\r\n\t\t\tgetItemTitle = function(){\r\n\t\t\t\treturn maxSize <= 0 || maxSize == 1 ? nls[5] : nls[4];\r\n\t\t\t};\r\n\t\tif(this.description && this.descriptionDiv){\r\n\t\t\tthis.descriptionDiv.innerHTML = maxSize > 0 ? string.substitute(nls[0], [getItemTitle(), maxSize, s.startIdx + 1, s.endIdx + 1]) : \"0 \" + getItemTitle();\r\n\t\t}\r\n\t},\r\n\t_updateSizeSwitch: function(){\r\n\t\t// summary:\r\n\t\t//\t\tUpdate \"items per page\" information.\r\n\t\thtml.style(this.sizeSwitchTd, \"display\", this.sizeSwitch ? \"\" : \"none\");\r\n\t\tif(!this.sizeSwitch){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.sizeSwitchTd.childNodes.length < 1){\r\n\t\t\tthis._createSizeSwitchNodes();\r\n\t\t}\r\n\t\tthis._updateSwitchNodesStyle();\r\n\t},\r\n\t_createSizeSwitchNodes: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThe function to create the size switch nodes\r\n\t\tvar node = null, \r\n\t\t\tnls = this.plugin._nls, \r\n\t\t\tconnect = lang.hitch(this.plugin, 'connect');\r\n\t\tarray.forEach(this.pageSizes, function(size){\r\n\t\t\t// create page size switch node\r\n\t\t\tvar labelValue = isFinite(size) ? string.substitute(nls[2], [size]) : nls[1],\r\n\t\t\t\tvalue = isFinite(size) ? size : nls[16];\r\n\t\t\tnode = html.create(\"span\", {innerHTML: value, title: labelValue, value: size, tabindex: \"-1\"}, this.sizeSwitchTd, \"last\");\r\n\t\t\t// for accessibility\r\n\t\t\tnode.setAttribute(\"aria-label\", labelValue);\r\n\t\t\t// connect event\r\n\t\t\tconnect(node, \"onclick\", lang.hitch(this, \"_onSwitchPageSize\"));\r\n\t\t\tconnect(node, \"onkeydown\", lang.hitch(this, \"_onSwitchPageSize\"));\r\n\t\t\tconnect(node, \"onmouseover\", function(e){\r\n\t\t\t\thtml.addClass(e.target, \"dojoxGridPageTextHover\");\r\n\t\t\t});\r\n\t\t\tconnect(node, \"onmouseout\", function(e){\r\n\t\t\t\thtml.removeClass(e.target, \"dojoxGridPageTextHover\");\r\n\t\t\t});\r\n\t\t\t// create a separation node\r\n\t\t\tnode = html.create(\"span\", {innerHTML: \"|\"}, this.sizeSwitchTd, \"last\");\r\n\t\t\thtml.addClass(node, \"dojoxGridSeparator\");\r\n\t\t}, this);\r\n\t\t// delete last separation node\r\n\t\thtml.destroy(node);\r\n\t},\r\n\t_updateSwitchNodesStyle: function(){\r\n\t\t// summary:\r\n\t\t//\t\tUpdate the switch nodes style\r\n\t\tvar size = null;\r\n\t\tvar styleNode = function(node, status){\r\n\t\t\tif(status){\r\n\t\t\t\thtml.addClass(node, \"dojoxGridActivedSwitch\");\r\n\t\t\t\thtml.removeAttr(node, \"tabindex\");\r\n\t\t\t}else{\r\n\t\t\t\thtml.addClass(node, \"dojoxGridInactiveSwitch\");\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t}\r\n\t\t};\r\n\t\tarray.forEach(this.sizeSwitchTd.childNodes, function(node){\r\n\t\t\tif(node.value){\r\n\t\t\t\thtml.removeClass(node);\r\n\t\t\t\tsize = node.value;\r\n\t\t\t\tif(this.plugin._showAll){\r\n\t\t\t\t\tstyleNode(node, isNaN(parseInt(size, 10)));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstyleNode(node, this.plugin._currentPageSize == size);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\t_updatePageStepper: function(){\r\n\t\t// summary:\r\n\t\t//\t\tUpdate the page step nodes\r\n\t\thtml.style(this.pageStepperTd, \"display\", this.pageStepper ? \"\" : \"none\");\r\n\t\tif(!this.pageStepper){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.pageStepperDiv.childNodes.length < 1){\r\n\t\t\tthis._createPageStepNodes();\r\n\t\t\tthis._createWardBtns();\r\n\t\t}else{\r\n\t\t\tthis._resetPageStepNodes();\r\n\t\t}\r\n\t\tthis._updatePageStepNodesStyle();\r\n\t},\r\n\t_createPageStepNodes: function(){\r\n\t\t// summary:\r\n\t\t//\t\tCreate the page step nodes if they do not exist\r\n\t\tvar startPage = this._getStartPage(),\r\n\t\t\tstepSize = this._getStepPageSize(),\r\n\t\t\tlabel = \"\", node = null, i = startPage,\r\n\t\t\tconnect = lang.hitch(this.plugin, 'connect');\r\n\t\tfor(; i < startPage + this.maxPageStep + 1; i++){\r\n\t\t\tlabel = string.substitute(this.plugin._nls[3], [i]);\r\n\t\t\tnode = html.create(\"div\", {innerHTML: i, value: i, title: label}, this.pageStepperDiv, \"last\");\r\n\t\t\tnode.setAttribute(\"aria-label\", label);\r\n\t\t\t// connect event\r\n\t\t\tconnect(node, \"onclick\", lang.hitch(this, \"_onPageStep\"));\r\n\t\t\tconnect(node, \"onkeydown\", lang.hitch(this, \"_onPageStep\"));\r\n\t\t\tconnect(node, \"onmouseover\", function(e){\r\n\t\t\t\thtml.addClass(e.target, \"dojoxGridPageTextHover\");\r\n\t\t\t});\r\n\t\t\tconnect(node, \"onmouseout\", function(e){\r\n\t\t\t\thtml.removeClass(e.target, \"dojoxGridPageTextHover\");\r\n\t\t\t});\r\n\t\t\thtml.style(node, \"display\", i < startPage + stepSize ? \"\" : \"none\");\r\n\t\t}\r\n\t},\r\n\t_createWardBtns: function(){\r\n\t\t// summary:\r\n\t\t//\t\tCreate the previous/next/first/last button\r\n\t\tvar _this = this, nls = this.plugin._nls;\r\n\t\tvar highContrastLabel = {prevPage: \"&#60;\", firstPage: \"&#171;\", nextPage: \"&#62;\", lastPage: \"&#187;\"};\r\n\t\tvar createWardBtn = function(value, label, position){\r\n\t\t\tvar node = html.create(\"div\", {value: value, title: label, tabindex: \"-2\"}, _this.pageStepperDiv, position);\r\n\t\t\t_this.plugin.connect(node, \"onclick\", lang.hitch(_this, \"_onPageStep\"));\r\n\t\t\t_this.plugin.connect(node, \"onkeydown\", lang.hitch(_this, \"_onPageStep\"));\r\n\t\t\tnode.setAttribute(\"aria-label\", label);\r\n\t\t\t// for high contrast\r\n\t\t\tvar highConrastNode = html.create(\"span\", {value: value, title: label, innerHTML: highContrastLabel[value]}, node, position);\r\n\t\t\thtml.addClass(highConrastNode, \"dojoxGridWardButtonInner\");\r\n\t\t};\r\n\t\tcreateWardBtn(\"prevPage\", nls[6], \"first\");\r\n\t\tcreateWardBtn(\"firstPage\", nls[7], \"first\");\r\n\t\tcreateWardBtn(\"nextPage\", nls[8], \"last\");\r\n\t\tcreateWardBtn(\"lastPage\", nls[9], \"last\");\r\n\t},\r\n\t_resetPageStepNodes: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThe page step nodes might be changed when fetch data, we need to\r\n\t\t//\t\tupdate/reset them\r\n\t\tvar startPage = this._getStartPage(),\r\n\t\t\tstepSize = this._getStepPageSize(),\r\n\t\t\tstepNodes = this.pageStepperDiv.childNodes,\r\n\t\t\tnode = null, i = startPage, j = 2, tip;\r\n\t\tfor(; j < stepNodes.length - 2; j++, i++){\r\n\t\t\tnode = stepNodes[j];\r\n\t\t\tif(i < startPage + stepSize){\r\n\t\t\t\ttip = string.substitute(this.plugin._nls[3], [i]);\r\n\t\t\t\thtml.attr(node, {\r\n\t\t\t\t\t\"innerHTML\": i,\r\n\t\t\t\t\t\"title\": tip,\r\n\t\t\t\t\t\"value\": i\r\n\t\t\t\t});\r\n\t\t\t\thtml.style(node, \"display\", \"\");\r\n\t\t\t\tnode.setAttribute(\"aria-label\", tip);\r\n\t\t\t}else{\r\n\t\t\t\thtml.style(node, \"display\", \"none\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_updatePageStepNodesStyle: function(){\r\n\t\t// summary:\r\n\t\t//\t\tUpdate the style of the page step nodes\r\n\t\tvar value = null,\r\n\t\t\tcurPage = this.plugin.currentPage(),\r\n\t\t\tpageCount = this.plugin.getTotalPageNum();\r\n\t\tvar updateClass = function(node, isWardBtn, status){\r\n\t\t\tvar value = node.value,\r\n\t\t\t\tenableClass = isWardBtn ? \"dojoxGrid\" + value + \"Btn\" : \"dojoxGridInactived\",\r\n\t\t\t\tdisableClass = isWardBtn ? \"dojoxGrid\" + value + \"BtnDisable\" : \"dojoxGridActived\";\r\n\t\t\tif(status){\r\n\t\t\t\thtml.addClass(node, disableClass);\r\n\t\t\t\thtml.removeAttr(node, \"tabindex\");\r\n\t\t\t}else{\r\n\t\t\t\thtml.addClass(node, enableClass);\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-2\");\r\n\t\t\t}\r\n\t\t};\r\n\t\tarray.forEach(this.pageStepperDiv.childNodes, function(node){\r\n\t\t\thtml.removeClass(node);\r\n\t\t\tif(isNaN(parseInt(node.value, 10))){\r\n\t\t\t\thtml.addClass(node, \"dojoxGridWardButton\");\r\n\t\t\t\tvar disablePageNum = node.value == \"prevPage\" || node.value == \"firstPage\" ? 1 : pageCount;\r\n\t\t\t\tupdateClass(node, true, (curPage === disablePageNum));\r\n\t\t\t}else{\r\n\t\t\t\tvalue = parseInt(node.value, 10);\r\n\t\t\t\tupdateClass(node, false, (value === curPage || html.style(node, \"display\") === \"none\"));\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\t_showGotoButton: function(flag){\r\n\t\tthis.gotoButton = flag;\r\n\t\tthis._updateGotoButton();\r\n\t},\r\n\t_updateGotoButton: function(){\r\n\t\t// summary:\r\n\t\t//\t\tCreate/destroy the goto page button\r\n\t\tif(!this.gotoButton){\r\n\t\t\tif(this._gotoPageDialog){\r\n\t\t\t\tthis._gotoPageDialog.destroy();\r\n\t\t\t}\r\n\t\t\thtml.removeAttr(this.gotoPageDiv, \"tabindex\");\r\n\t\t\thtml.style(this.gotoPageTd, 'display', 'none');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(html.style(this.gotoPageTd, 'display') == 'none'){\r\n\t\t\thtml.style(this.gotoPageTd, 'display', '');\r\n\t\t}\r\n\t\tthis.gotoPageDiv.setAttribute('title', this.plugin._nls[10]);\r\n\t\thtml.toggleClass(this.gotoPageDiv, \"dojoxGridPaginatorGotoDivDisabled\", this.plugin.getTotalPageNum() <= 1);\r\n\t\tif(this.plugin.getTotalPageNum() <= 1){\r\n\t\t\thtml.removeAttr(this.gotoPageDiv, \"tabindex\");\r\n\t\t}else{\r\n\t\t\tthis.gotoPageDiv.setAttribute(\"tabindex\", \"-3\");\r\n\t\t}\r\n\t},\r\n\t_openGotopageDialog: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tShow the goto page dialog\r\n\t\tif(this.plugin.getTotalPageNum() <= 1){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(e.type === \"keydown\" && e.keyCode !== keys.ENTER && e.keyCode !== keys.SPACE){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!this._gotoPageDialog){\r\n\t\t\tthis._gotoPageDialog = new _GotoPageDialog(this.plugin);\r\n\t\t}\r\n\t\tthis._gotoPageDialog.showDialog();\r\n\t\tthis.onShowGotoPageDialog(e);\r\n\t},\r\n\t_onSwitchPageSize: function(/*Event*/e){\r\n\t\t// summary:\r\n\t\t//\t\tThe handler of switch the page size\r\n\t\tif(e.type === \"keydown\" && e.keyCode !== keys.ENTER && e.keyCode !== keys.SPACE){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.onSwitchPageSize(e);\r\n\t\tthis.plugin.currentPageSize(e.target.value);\r\n\t},\r\n\t_onPageStep: function(/*Event*/e){\r\n\t\t// summary:\r\n\t\t//\t\tThe handler jump page event\r\n\t\tif(e.type === \"keydown\" && e.keyCode !== keys.ENTER && e.keyCode !== keys.SPACE){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar p = this.plugin,\r\n\t\t\tvalue = e.target.value;\r\n\t\tthis.onPageStep(e);\r\n\t\tif(!isNaN(parseInt(value, 10))){\r\n\t\t\tp.currentPage(parseInt(value, 10));\r\n\t\t}else{\r\n\t\t\tp[value]();\r\n\t\t}\r\n\t},\r\n\t_getStartPage: function(){\r\n\t\tvar cp = this.plugin.currentPage(),\r\n\t\t\tms = this.maxPageStep,\r\n\t\t\ths = parseInt(ms / 2, 10),\r\n\t\t\ttp = this.plugin.getTotalPageNum();\r\n\t\tif(cp < hs || (cp - hs) < 1 || tp <= ms){\r\n\t\t\treturn 1;\r\n\t\t}else{\r\n\t\t\treturn tp - cp < hs && cp - ms >= 0 ? tp - ms + 1 : cp - hs;\r\n\t\t}\r\n\t},\r\n\t_getStepPageSize: function(){\r\n\t\tvar sp = this._getStartPage(),\r\n\t\t\ttp = this.plugin.getTotalPageNum(),\r\n\t\t\tms = this.maxPageStep;\r\n\t\treturn sp + ms > tp ? tp - sp + 1 : ms;\r\n\t}\r\n});\r\n\r\nvar Pagination = declare(\"dojox.grid.enhanced.plugins.Pagination\", _Plugin, {\r\n\t// summary:\r\n\t//\t\tThe typical pagination way to deal with huge dataset\r\n\t//\t\tan alternative for the default virtual scrolling manner.\r\n\tname: \"pagination\",\r\n\r\n\t// defaultPageSize: Integer\r\n\t//\t\tNumber of rows in a page, 25 by default.\r\n\tdefaultPageSize: 25,\r\n\r\n\t// defaultPage: Integer\r\n\t//\t\tWhich page will be displayed initially, 1st page by default.\r\n\tdefaultPage: 1,\r\n\r\n\t// description: boolean\r\n\t//\t\tWhether the description information will be displayed, true by default.\r\n\tdescription: true,\r\n\r\n\t// sizeSwitch: boolean\r\n\t//\t\tWhether the page size switch options will be displayed, true by default.\r\n\tsizeSwitch: true,\r\n\r\n\t// pageStepper: boolean\r\n\t//\t\tWhether the page switch options will be displayed, true by default.\r\n\tpageStepper: true,\r\n\r\n\t// gotoButton: boolean\r\n\t//\t\tWhether the goto page button will be displayed, false by default.\r\n\tgotoButton: false,\r\n\r\n\t// pageSizes: Array\r\n\t//\t\tArray of page sizes for switching, e.g. [10, 25, 50, 100, Infinity] by default,\r\n\t//\t\tInfinity or any NaN value will be treated as \"all\".\r\n\tpageSizes: [10, 25, 50, 100, Infinity],\r\n\r\n\t// maxPageStep: Integer\r\n\t//\t\tThe max number of page sizes to be displayed, 7 by default.\r\n\tmaxPageStep: 7,\r\n\r\n\t// position: string\r\n\t//\t\tThe position of the pagination bar - \"top\"|\"bottom\", \"bottom\" by default.\r\n\tposition: 'bottom',\r\n\t\r\n\tinit: function(){\r\n\t\tvar g = this.grid;\r\n\t\tg.usingPagination = true;\r\n\t\tthis._initOptions();\r\n\t\tthis._currentPage = this.defaultPage;\r\n\t\tthis._currentPageSize = this.grid.rowsPerPage = this.defaultPageSize;\r\n\t\t// wrap store layer\r\n\t\tthis._store = g.store;\r\n\t\tthis.forcePageStoreLayer = new _ForcedPageStoreLayer(this);\r\n\t\tlayers.wrap(g, \"_storeLayerFetch\", this.forcePageStoreLayer);\r\n\t\t// create pagination bar\r\n\t\tthis._paginator = this.option.position != \"top\" ? \r\n\t\t\tnew _Paginator(lang.mixin(this.option, {position: \"bottom\", plugin: this})) :\r\n\t\t\tnew _Paginator(lang.mixin(this.option, {position: \"top\", plugin: this}));\r\n\t\tthis._regApis();\r\n\t},\r\n\tdestroy: function(){\r\n\t\tthis.inherited(arguments);\r\n\t\tthis._paginator.destroy();\r\n\t\tvar g = this.grid;\r\n\t\tg.unwrap(this.forcePageStoreLayer.name());\r\n\t\tg.scrollToRow = this._gridOriginalfuncs[0];\r\n\t\tg._onNew = this._gridOriginalfuncs[1];\r\n\t\tg.removeSelectedRows = this._gridOriginalfuncs[2];\r\n\t\tthis._paginator = null;\r\n\t\tthis._nls = null;\r\n\t},\r\n\tcurrentPage: function(page){\r\n\t\t// summary:\r\n\t\t//\t\tShift to the given page, return current page number. If there \r\n\t\t//\t\tis no valid page was passed in, just return current page num.\r\n\t\t// page: Integer\r\n\t\t//\t\tThe page to go to, starting at 1.\r\n\t\t// returns:\r\n\t\t//\t\tCurrent page number\r\n\t\tif(page <= this.getTotalPageNum() && page > 0 && this._currentPage !== page){\r\n\t\t\tthis._currentPage = page;\r\n\t\t\tthis.grid._refresh(true);\r\n\t\t\tthis.grid.resize();\r\n\t\t}\r\n\t\treturn this._currentPage;\r\n\t},\r\n\tnextPage: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGo to the next page.\r\n\t\tthis.currentPage(this._currentPage + 1);\r\n\t},\r\n\tprevPage: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGo to the previous page.\r\n\t\tthis.currentPage(this._currentPage - 1);\r\n\t},\r\n\tfirstPage: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGo to the first page\r\n\t\tthis.currentPage(1);\r\n\t},\r\n\tlastPage: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGo to the last page\r\n\t\tthis.currentPage(this.getTotalPageNum());\r\n\t},\r\n\tcurrentPageSize: function(size){\r\n\t\t// summary:\r\n\t\t//\t\tChange the size of current page or return the current page size.\r\n\t\t// size: Integer|null\r\n\t\t//\t\tAn integer identifying the number of rows per page. If the size\r\n\t\t//\t\tis an Infinity, all rows will be displayed; if an invalid value passed\r\n\t\t//\t\tin, the current page size will be returned.\r\n\t\t// returns:\r\n\t\t//\t\tCurrent size of items per page.  \r\n\t\tif(!isNaN(size)){\r\n\t\t\tvar g = this.grid,\r\n\t\t\t\tstartIndex = this._currentPageSize * (this._currentPage - 1), endIndex;\r\n\t\t\tthis._showAll = !isFinite(size);\r\n\t\t\tthis.grid.usingPagination = !this._showAll;\r\n\t\t\tthis._currentPageSize = this._showAll ? this._maxSize : size;\r\n\t\t\tg.rowsPerPage = this._showAll ? this._defaultRowsPerPage : size;\r\n\t\t\tendIndex = startIndex + Math.min(this._currentPageSize, this._maxSize);\r\n\t\t\tif(endIndex > this._maxSize){\r\n\t\t\t\tthis.lastPage();\r\n\t\t\t}else{\r\n\t\t\t\tvar cp = Math.ceil(startIndex / this._currentPageSize) + 1;\r\n\t\t\t\tif(cp !== this._currentPage){\r\n\t\t\t\t\tthis.currentPage(cp);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.grid._refresh(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.grid.resize();\r\n\t\t}\r\n\t\treturn this._currentPageSize;\r\n\t},\r\n\tgetTotalPageNum: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGet total page number\r\n\t\treturn Math.ceil(this._maxSize / this._currentPageSize);\r\n\t},\r\n\tgetTotalRowCount: function(){\r\n\t\t// summary:\r\n\t\t//\t\tFunction for get total row count\r\n\t\treturn this._maxSize;\r\n\t},\r\n\tscrollToRow: function(inRowIndex){\r\n\t\t// summary:\r\n\t\t//\t\tOverride the grid.scrollToRow(), could jump to the right page\r\n\t\t//\t\tand scroll to the specific row\r\n\t\t// inRowIndex: integer\r\n\t\t//\t\tThe row index\r\n\t\tvar page = parseInt(inRowIndex / this._currentPageSize, 10) + 1;\r\n\t\tif(page > this.getTotalPageNum()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.currentPage(page);\r\n\t\tvar rowIdx = inRowIndex % this._currentPageSize;\r\n\t\treturn this._gridOriginalfuncs[0](rowIdx);\r\n\t},\r\n\tremoveSelectedRows: function(){\r\n\t\tthis._multiRemoving = true;\r\n\t\tthis._gridOriginalfuncs[2].apply();\r\n\t\tthis._multiRemoving = false;\r\n\t\tif(this.grid.store.save){\r\n\t\t\tthis.grid.store.save();\r\n\t\t}\r\n\t\tthis.grid.resize();\r\n\t\tthis.grid._refresh();\r\n\t},\r\n\tshowGotoPageButton: function(flag){\r\n\t\t// summary:\r\n\t\t//\t\tFor show/hide the go to page button dynamically\r\n\t\t// flag: boolean\r\n\t\t//\t\tShow the go to page button when flag is true, otherwise hide it\r\n\t\tthis._paginator.gotoButton = flag;\r\n\t\tthis._paginator._updateGotoButton();\r\n\t},\r\n\t// [DEPRECATED] ============\r\n\tgotoPage: function(page){\r\n\t\tkernel.deprecated(\"dojox.grid.enhanced.EnhancedGrid.gotoPage(page)\", \"use dojox.grid.enhanced.EnhancedGrid.currentPage(page) instead\", \"1.8\");\r\n\t\tthis.currentPage(page);\r\n\t},\r\n\tgotoFirstPage: function(){\r\n\t\tkernel.deprecated(\"dojox.grid.enhanced.EnhancedGrid.gotoFirstPage()\", \"use dojox.grid.enhanced.EnhancedGrid.firstPage() instead\", \"1.8\");\r\n\t\tthis.firstPage();\r\n\t},\r\n\tgotoLastPage: function(){\r\n\t\tkernel.deprecated(\"dojox.grid.enhanced.EnhancedGrid.gotoLastPage()\", \"use dojox.grid.enhanced.EnhancedGrid.lastPage() instead\", \"1.8\");\r\n\t\tthis.lastPage();\r\n\t},\r\n\tchangePageSize: function(size){\r\n\t\tkernel.deprecated(\"dojox.grid.enhanced.EnhancedGrid.changePageSize(size)\", \"use dojox.grid.enhanced.EnhancedGrid.currentPageSize(size) instead\", \"1.8\");\r\n\t\tthis.currentPageSize(size);\r\n\t},\r\n\t// =============== Protected ================\r\n\t_nls: null,\r\n\t_showAll: false,\r\n\t_maxSize: 0,\r\n\t// =============== Private =============== \r\n\t_defaultRowsPerPage: 25,\r\n\t_currentPage: 1,\r\n\t_currentPageSize: 25,\r\n\t\r\n\t_initOptions: function(){\r\n\t\tthis._defaultRowsPerPage = this.grid.rowsPerPage || 25;\r\n\t\tthis.defaultPage = this.option.defaultPage >= 1 ? parseInt(this.option.defaultPage, 10) : 1;\r\n\t\tthis.option.description = this.option.description !== undefined ? !!this.option.description : this.description;\r\n\t\tthis.option.sizeSwitch = this.option.sizeSwitch !== undefined ? !!this.option.sizeSwitch : this.sizeSwitch;\r\n\t\tthis.option.pageStepper = this.option.pageStepper !== undefined ? !!this.option.pageStepper : this.pageStepper;\r\n\t\tthis.option.gotoButton = this.option.gotoButton !== undefined ? !!this.option.gotoButton : this.gotoButton;\r\n\t\tif(lang.isArray(this.option.pageSizes)){\r\n\t\t\tvar pageSizes = [];\r\n\t\t\tarray.forEach(this.option.pageSizes, function(size){\r\n\t\t\t\tsize = typeof size == 'number' ? size : parseInt(size, 10);\r\n\t\t\t\tif(!isNaN(size) && size > 0){\r\n\t\t\t\t\tpageSizes.push(size);\r\n\t\t\t\t}else if(array.indexOf(pageSizes, Infinity) < 0){\r\n\t\t\t\t\tpageSizes.push(Infinity);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis.option.pageSizes = pageSizes.sort(function(a, b){return a - b;});\r\n\t\t}else{\r\n\t\t\tthis.option.pageSizes = this.pageSizes;\r\n\t\t}\r\n\t\tthis.defaultPageSize = this.option.defaultPageSize >= 1 ? parseInt(this.option.defaultPageSize, 10) : this.pageSizes[0];\r\n\t\tthis.option.maxPageStep = this.option.maxPageStep > 0 ? this.option.maxPageStep : this.maxPageStep;\r\n\t\tthis.option.position = lang.isString(this.option.position) ? this.option.position.toLowerCase() : this.position;\r\n\t\tthis._nls = [\r\n\t\t\tnls.descTemplate,\r\n\t\t\tnls.allItemsLabelTemplate,\r\n\t\t\tnls.pageSizeLabelTemplate,\r\n\t\t\tnls.pageStepLabelTemplate,\r\n\t\t\tnls.itemTitle,\r\n\t\t\tnls.singularItemTitle,\r\n\t\t\tnls.prevTip,\r\n\t\t\tnls.firstTip,\r\n\t\t\tnls.nextTip,\r\n\t\t\tnls.lastTip,\r\n\t\t\tnls.gotoButtonTitle,\r\n\t\t\tnls.dialogTitle,\r\n\t\t\tnls.dialogIndication,\r\n\t\t\tnls.pageCountIndication,\r\n\t\t\tnls.dialogConfirm,\r\n\t\t\tnls.dialogCancel,\r\n\t\t\tnls.all\r\n\t\t];\r\n\t},\r\n\t_regApis: function(){\r\n\t\tvar g = this.grid;\r\n\t\t// New added APIs\r\n\t\tg.currentPage = lang.hitch(this, this.currentPage);\r\n\t\tg.nextPage = lang.hitch(this, this.nextPage);\r\n\t\tg.prevPage = lang.hitch(this, this.prevPage);\r\n\t\tg.firstPage = lang.hitch(this, this.firstPage);\r\n\t\tg.lastPage = lang.hitch(this, this.lastPage);\r\n\t\tg.currentPageSize = lang.hitch(this, this.currentPageSize);\r\n\t\tg.showGotoPageButton = lang.hitch(this, this.showGotoPageButton);\r\n\t\tg.getTotalRowCount = lang.hitch(this, this.getTotalRowCount);\r\n\t\tg.getTotalPageNum = lang.hitch(this, this.getTotalPageNum);\r\n\t\t\r\n\t\tg.gotoPage = lang.hitch(this, this.gotoPage);\r\n\t\tg.gotoFirstPage = lang.hitch(this, this.gotoFirstPage);\r\n\t\tg.gotoLastPage = lang.hitch(this, this.gotoLastPage);\r\n\t\tg.changePageSize = lang.hitch(this, this.changePageSize);\r\n\t\t// Changed APIs\r\n\t\tthis._gridOriginalfuncs = [\r\n\t\t\tlang.hitch(g, g.scrollToRow),\r\n\t\t\tlang.hitch(g, g._onNew),\t\t\r\n\t\t\tlang.hitch(g, g.removeSelectedRows)\r\n\t\t];\r\n\t\tg.scrollToRow = lang.hitch(this, this.scrollToRow);\r\n\t\tg.removeSelectedRows = lang.hitch(this, this.removeSelectedRows);\r\n\t\tg._onNew = lang.hitch(this, this._onNew);\r\n\t\tthis.connect(g, \"_onDelete\", lang.hitch(this, this._onDelete));\r\n\t},\r\n\t_onNew: function(item, parentInfo){\r\n\t\tvar totalPages = this.getTotalPageNum();\r\n\t\tif(((this._currentPage === totalPages || totalPages === 0) && this.grid.get('rowCount') < this._currentPageSize) || this._showAll){\r\n\t\t\tlang.hitch(this.grid, this._gridOriginalfuncs[1])(item, parentInfo);\r\n\t\t\tthis.forcePageStoreLayer.endIdx++;\r\n\t\t}\r\n\t\tthis._maxSize++;\r\n\t\tif(this._showAll){\r\n\t\t\tthis._currentPageSize++;\r\n\t\t}\r\n\t\tif(this._showAll && this.grid.autoHeight){\r\n\t\t\tthis.grid._refresh();\r\n\t\t}else{\r\n\t\t\tthis._paginator._update();\r\n\t\t}\r\n\t},\r\n\t_onDelete: function(){\r\n\t\tif(!this._multiRemoving){\r\n\t\t\tthis.grid.resize();\r\n\t\t\tif(this._showAll){\r\n\t\t\t\tthis.grid._refresh();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.grid.get('rowCount') === 0){\r\n\t\t\tthis.prevPage();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nEnhancedGrid.registerPlugin(Pagination/*name:'pagination'*/);\r\n\r\nreturn Pagination;\r\n\r\n});"]}