{"version":3,"sources":["grid/enhanced/_Events.js"],"names":["define","dojo","declare","keys","html","event","_Events","_events","headerCellActiveClass","cellActiveClass","rowActiveClass","constructor","inGrid","this","mixin","dokeyup","e","focus","currentArea","keyup","onKeyDown","altKey","metaKey","editing","edit","isEditing","keyCode","TAB","ctrlKey","tab","shiftKey","UP_ARROW","DOWN_ARROW","move","LEFT_ARROW","RIGHT_ARROW","offset","_isBodyLtr","F10","menus","onRowContextMenu","keydown","domouseup","cellNode","onMouseUp","onRowSelectorMouseUp","domousedown","onRowSelectorMouseDown","rowIndex","onCellMouseDown","addClass","rowNode","onCellMouseUp","removeClass","onCellClick","call","contentMouseEvent","onCellDblClick","pluginMgr","isFixedCell","cell","_click","length","onRowClick","rowClick","plugin","selection","clickSelectEvent","showMenu","onSelectedRegionContextMenu","selectedRegionMenu","_openMyself","target","coords","x","pageX","y","pageY","stop","onHeaderCellMouseOut","cellOverClass","onHeaderCellMouseDown","onHeaderCellMouseUp","onHeaderCellClick","isRowSelector","headerMouseEvent","focusArea","onMouseUpRow","onRowMouseUp"],"mappings":";;;;;;;AAAAA,QACC,oBACA,qBACA,YACA,kBACA,mBACA,sBACE,SAASC,EAAMC,EAASC,EAAMC,EAAMC,EAAOC,GAE9C,OAAOJ,EAAQ,8BAA+B,MAU7CK,QAAS,KAITC,sBAAuB,wBAIvBC,gBAAiB,sBAIjBC,eAAgB,qBAEhBC,YAAa,SAASC,GAErBC,KAAKN,QAAU,IAAID,EAEnBM,EAAOE,MAAMF,EAAQC,OAEtBE,QAAS,SAASC,GAKjBH,KAAKI,MAAMC,cAAcC,MAAMH,IAEhCI,UAAW,SAASJ,GAGnB,IAAGA,EAAEK,SAAUL,EAAEM,QAAjB,CACA,IAAIL,EAAQJ,KAAKI,MACbM,EAAUV,KAAKW,KAAKC,YACxB,OAAOT,EAAEU,SACR,KAAKvB,EAAKwB,IACT,GAAGX,EAAEY,QAAU,OACfX,EAAMY,IAAIb,EAAEc,UAAY,EAAE,EAAEd,GAC5B,MACD,KAAKb,EAAK4B,SACV,KAAK5B,EAAK6B,WACT,GAAGT,EAAU,OACbN,EAAMC,cAAce,KAAKjB,EAAEU,SAAWvB,EAAK4B,UAAY,EAAI,EAAG,EAAGf,GACjE,MACD,KAAKb,EAAK+B,WACV,KAAK/B,EAAKgC,YACT,GAAGZ,EAAU,OACb,IAAIa,EAAUpB,EAAEU,SAAWvB,EAAK+B,WAAc,GAAK,EAChD9B,EAAKiC,eAAeD,IAAW,GAClCnB,EAAMC,cAAce,KAAK,EAAGG,EAAQpB,GACpC,MACD,KAAKb,EAAKmC,IACNzB,KAAK0B,OAASvB,EAAEc,UAClBjB,KAAK2B,iBAAiBxB,GAEvB,MACD,QACCC,EAAMC,cAAcuB,QAAQzB,MAM/B0B,UAAW,SAAS1B,GAChBA,EAAE2B,SACJ9B,KAAK+B,UAAU5B,GAEfH,KAAKgC,qBAAqB7B,IAG5B8B,YAAa,SAAS9B,GACjBA,EAAE2B,UACL9B,KAAKkC,uBAAuB/B,IAG9B4B,UAAW,SAAS5B,GAKnBH,MAAoB,GAAfG,EAAEgC,SAAiB,sBAAwB,iBAAiBhC,IAElEiC,gBAAiB,SAASjC,GAGzBZ,EAAK8C,SAASlC,EAAE2B,SAAU9B,KAAKJ,iBAC/BL,EAAK8C,SAASlC,EAAEmC,QAAStC,KAAKH,iBAE/B0C,cAAe,SAASpC,GAKvBZ,EAAKiD,YAAYrC,EAAE2B,SAAU9B,KAAKJ,iBAClCL,EAAKiD,YAAYrC,EAAEmC,QAAStC,KAAKH,iBAElC4C,YAAa,SAAStC,GAKrBH,KAAKN,QAAQ+C,YAAYC,KAAK1C,KAAMG,GAEpCH,KAAKI,MAAMuC,kBAAkBxC,IAE9ByC,eAAgB,SAASzC,GAGrBH,KAAK6C,UAAUC,YAAY3C,EAAE4C,UAC7B/C,KAAKgD,OAAOC,OAAS,IAAOjD,KAAKgD,OAAO,IAAOhD,KAAKgD,OAAO,KAC7DhD,KAAKgD,OAAO,GAAKhD,KAAKgD,OAAO,GAAK7C,GAGnCH,KAAKN,QAAQkD,eAAeF,KAAK1C,KAAMG,KAExC+C,WAAY,SAAS/C,GAGpBH,KAAKW,KAAKwC,SAAShD,GACfA,EAAE4C,MAAS/C,KAAKoD,OAAO,sBAC1BpD,KAAKqD,UAAUC,iBAAiBnD,IAGlCwB,iBAAkB,SAASxB,IAGtBH,KAAKW,KAAKC,aAAeZ,KAAK0B,OACjC1B,KAAKuD,SAASpD,IAGhBqD,4BAA6B,SAASrD,GAMlCH,KAAKyD,qBACPzD,KAAKyD,mBAAmBC,aACvBC,OAAQxD,EAAEwD,OACVC,OAAQzD,EAAEU,UAAYvB,EAAKmC,KAAO,UAAWtB,GAC5C0D,EAAG1D,EAAE2D,MACLC,EAAG5D,EAAE6D,OACF,OAELxE,EAAMyE,KAAK9D,KAGb+D,qBAAsB,SAAS/D,GAG3BA,EAAE2B,WACJvC,EAAKiD,YAAYrC,EAAE2B,SAAU9B,KAAKmE,eAClC5E,EAAKiD,YAAYrC,EAAE2B,SAAU9B,KAAKL,yBAGpCyE,sBAAuB,SAASjE,GAG5BA,EAAE2B,UACJvC,EAAK8C,SAASlC,EAAE2B,SAAU9B,KAAKL,wBAGjC0E,oBAAqB,SAASlE,GAG1BA,EAAE2B,UACJvC,EAAKiD,YAAYrC,EAAE2B,SAAU9B,KAAKL,wBAGpC2E,kBAAmB,SAASnE,GAK3BH,KAAKI,MAAMC,YAAY,UAEnBF,EAAE4C,KAAKwB,eACVvE,KAAKN,QAAQ4E,kBAAkB5B,KAAK1C,KAAMG,GAG3CH,KAAKI,MAAMoE,iBAAiBrE,IAE7B+B,uBAAwB,SAAS/B,GAChCH,KAAKI,MAAMqE,UAAU,YAAatE,IAGnC6B,qBAAsB,SAAS7B,KAG/BuE,aAAc,SAASvE,IACJ,GAAfA,EAAEgC,UACJnC,KAAK2E,aAAaxE,IAGpBwE,aAAc,SAASxE","file":"../../../grid/enhanced/_Events.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/keys\",\r\n\t\"dojo/_base/html\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojox/grid/_Events\"\r\n], function(dojo, declare, keys, html, event, _Events){\r\n\r\nreturn declare(\"dojox.grid.enhanced._Events\", null, {\r\n\t// summary:\r\n\t//\t\tOverwrite some default events of DataGrid\r\n\t//\r\n\t// description:\r\n\t//\t\tMethods are copied or replaced for overwriting, this might be refined once\r\n\t//\t\tan overall plugin architecture is set up for DataGrid.\r\n\r\n\t// _events: Object\r\n\t//\t\tMethod map cached from dojox.grid._Events().\r\n\t_events: null,\r\n\r\n\t// headerCellActiveClass: String\r\n\t//\t\tcss class to apply to grid header cells when activated(mouse down)\r\n\theaderCellActiveClass: 'dojoxGridHeaderActive',\r\n\t\r\n\t// cellActiveClass: String\r\n\t//\t\tcss class to apply to grid content cells when activated(mouse down)\r\n\tcellActiveClass: 'dojoxGridCellActive',\r\n\t\r\n\t// rowActiveClass: String\r\n\t//\t\tcss class to apply to grid rows when activated(mouse down)\r\n\trowActiveClass: 'dojoxGridRowActive',\r\n\r\n\tconstructor: function(inGrid){\r\n\t\t//TODO - extend dojox.grid._Events rather than mixin for 1.8\r\n\t\tthis._events = new _Events();\r\n\t\t//mixin \"this\" to Grid\r\n\t\tinGrid.mixin(inGrid, this);\r\n\t},\r\n\tdokeyup: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tGrid key up event handler.\r\n\t\t// e: Event\r\n\t\t//\t\tUn-decorated event object\r\n\t\tthis.focus.currentArea().keyup(e);\r\n\t},\r\n\tonKeyDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onKeyDown();\r\n\t\tif(e.altKey || e.metaKey){ return; }\r\n\t\tvar focus = this.focus;\r\n\t\tvar editing = this.edit.isEditing();\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase keys.TAB:\r\n\t\t\t\tif(e.ctrlKey){ return; }\r\n\t\t\t\tfocus.tab(e.shiftKey ? -1:1,e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.UP_ARROW:\r\n\t\t\tcase keys.DOWN_ARROW:\r\n\t\t\t\tif(editing){ return; }\r\n\t\t\t\tfocus.currentArea().move(e.keyCode == keys.UP_ARROW ? -1 : 1, 0, e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.LEFT_ARROW:\r\n\t\t\tcase keys.RIGHT_ARROW:\r\n\t\t\t\tif(editing){ return; }\r\n\t\t\t\tvar offset = (e.keyCode == keys.LEFT_ARROW) ? 1 : -1;\r\n\t\t\t\tif(html._isBodyLtr()){ offset *= -1; }\r\n\t\t\t\tfocus.currentArea().move(0, offset, e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.F10:\r\n\t\t\t\tif(this.menus && e.shiftKey){\r\n\t\t\t\t\tthis.onRowContextMenu(e);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tfocus.currentArea().keydown(e);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t//TODO - make the following events more reasonalble - e.g. more accurate conditions\r\n\t//events for row selectors\r\n\tdomouseup: function(e){\r\n\t\tif(e.cellNode){\r\n\t\t\tthis.onMouseUp(e);\r\n\t\t}else{\r\n\t\t\tthis.onRowSelectorMouseUp(e);\r\n\t\t}\r\n\t},\r\n\tdomousedown: function(e){\r\n\t\tif(!e.cellNode){\r\n\t\t\tthis.onRowSelectorMouseDown(e);\r\n\t\t}\r\n\t},\r\n\tonMouseUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tNew - Event fired when mouse is up inside grid.\r\n\t\t// e: Event\r\n\t\t//\t\tDecorated event object that contains reference to grid, cell, and rowIndex\r\n\t\tthis[e.rowIndex == -1 ? \"onHeaderCellMouseUp\" : \"onCellMouseUp\"](e);\r\n\t},\r\n\tonCellMouseDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onCellMouseDown()\r\n\t\thtml.addClass(e.cellNode, this.cellActiveClass);\r\n\t\thtml.addClass(e.rowNode, this.rowActiveClass);\r\n\t},\r\n\tonCellMouseUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tNew - Event fired when mouse is up inside content cell.\r\n\t\t// e: Event\r\n\t\t//\t\tDecorated event object that contains reference to grid, cell, and rowIndex\r\n\t\thtml.removeClass(e.cellNode, this.cellActiveClass);\r\n\t\thtml.removeClass(e.rowNode, this.rowActiveClass);\r\n\t},\r\n\tonCellClick: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onCellClick()\r\n\r\n\t\t//invoke dojox.grid._Events.onCellClick()\r\n\t\tthis._events.onCellClick.call(this, e);\r\n\t\t//move mouse events to the focus manager.\r\n\t\tthis.focus.contentMouseEvent(e);//TODO\r\n\t},\r\n\tonCellDblClick: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onCellDblClick()\r\n\t\tif(this.pluginMgr.isFixedCell(e.cell)){ return; }\r\n\t\tif(this._click.length > 1 && (!this._click[0] || !this._click[1])){\r\n\t\t\tthis._click[0] = this._click[1] = e;\r\n\t\t}\r\n\t\t//invoke dojox.grid._Events.onCellDblClick()\r\n\t\tthis._events.onCellDblClick.call(this, e);\r\n\t},\r\n\tonRowClick: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onRowClick()\r\n\t\tthis.edit.rowClick(e);\r\n\t\tif(!e.cell || !this.plugin('indirectSelection')){\r\n\t\t\tthis.selection.clickSelectEvent(e);\r\n\t\t}\r\n\t},\r\n\tonRowContextMenu: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onRowContextMenu()\r\n\t\tif(!this.edit.isEditing() && this.menus){\r\n\t\t\tthis.showMenu(e);\r\n\t\t}\r\n\t},\r\n\tonSelectedRegionContextMenu: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tNew - Event fired when a selected region context menu is accessed via mouse right click.\r\n\t\t// e: Event\r\n\t\t//\t\tDecorated event object which contains reference to grid and info of selected\r\n\t\t//\t\tregions(selection type - row|column, selected index - [...])\r\n\t\tif(this.selectedRegionMenu){\r\n\t\t\tthis.selectedRegionMenu._openMyself({\r\n\t\t\t\ttarget: e.target,\r\n\t\t\t\tcoords: e.keyCode !== keys.F10 && \"pageX\" in e ? {\r\n\t\t\t\t\tx: e.pageX,\r\n\t\t\t\t\ty: e.pageY\r\n\t\t\t\t} : null\r\n\t\t\t});\r\n\t\t\tevent.stop(e);\r\n\t\t}\r\n\t},\r\n\tonHeaderCellMouseOut: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onHeaderCellMouseOut()\r\n\t\tif(e.cellNode){\r\n\t\t\thtml.removeClass(e.cellNode, this.cellOverClass);\r\n\t\t\thtml.removeClass(e.cellNode, this.headerCellActiveClass);\r\n\t\t}\r\n\t},\r\n\tonHeaderCellMouseDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onHeaderCellMouseDown()\r\n\t\tif(e.cellNode){//TBD - apply to selection region for nested sorting?\r\n\t\t\thtml.addClass(e.cellNode, this.headerCellActiveClass);\r\n\t\t}\r\n\t},\r\n\tonHeaderCellMouseUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tNew event\r\n\t\tif(e.cellNode){\r\n\t\t\thtml.removeClass(e.cellNode, this.headerCellActiveClass);\r\n\t\t}\r\n\t},\r\n\tonHeaderCellClick: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tOverwritten, see dojox.grid._Events.onHeaderCellClick()\r\n\t\t\r\n\t\t//move focus to header.\r\n\t\tthis.focus.currentArea(\"header\");\r\n\t\t//invoke dojox.grid._Events.onHeaderCellClick()\r\n\t\tif(!e.cell.isRowSelector){\r\n\t\t\tthis._events.onHeaderCellClick.call(this, e);\r\n\t\t}\r\n\t\t//move mouse events to the focus manager.\r\n\t\tthis.focus.headerMouseEvent(e);\r\n\t},\r\n\tonRowSelectorMouseDown: function(e){\r\n\t\tthis.focus.focusArea(\"rowHeader\", e);\r\n\t},\r\n\t\r\n\tonRowSelectorMouseUp: function(e){},\r\n\t\r\n\t//triggered in _View, see Selector plugin\r\n\tonMouseUpRow: function(e){\r\n\t\tif(e.rowIndex != -1){\r\n\t\t\tthis.onRowMouseUp(e);\r\n\t\t}\r\n\t},\r\n\tonRowMouseUp: function(e){}\r\n});\r\n});"]}