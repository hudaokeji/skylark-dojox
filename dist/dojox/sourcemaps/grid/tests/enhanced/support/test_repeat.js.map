{"version":3,"sources":["grid/tests/enhanced/support/test_repeat.js"],"names":["gridIndex","totalCount","timeInterval","createGrid","step","g","dijit","byId","destroyRecursive","dojo","publish","layout","length","console","log","gridAttrs","plugins","t1","Date","getTime","dojox","grid","EnhancedGrid","mixin","id","store","test_store","structure","placeAt","startup","value","e","cnt","start","setTimeout","stop","gotoGrid","parseInt","isNaN","destroy","addOnLoad","btns","appendChild","create","innerHTML","onclick","partial","type"],"mappings":";;;;;;;CAAA,WACA,IAAIA,EAAY,EACZC,EAAa,IACbC,EAAe,IACnB,SAASC,EAAWC,GACnB,IACC,IAAIC,EAAIC,MAAMC,KAAK,QAGnB,IAFAF,GAAKA,EAAEG,mBACPC,KAAKC,QAAQ,8BACTV,GAAaI,EAAMJ,EAAY,EAAGA,GAAaW,OAAOC,QAC1DZ,GAAaW,OAAOC,OACpBC,QAAQC,IAAI,oBAAqBC,UAAUC,QAAShB,GACpD,IAAIiB,GAAK,IAAKC,MAAQC,UAWtB,OAVAd,EAAI,IAAIe,MAAMC,KAAKC,aAAab,KAAKc,OACpCC,GAAM,OACNC,MAASC,WAAW,GACpBC,UAAahB,OAAOX,IAClBe,iBACDa,QAAQnB,KAAKF,KAAK,kBACpBF,EAAEwB,UACFpB,KAAKF,KAAK,OAAOuB,MAAQ9B,EACzBa,QAAQC,IAAId,EAAY,mEAAmE,IAAKkB,MAAQC,UAAYF,EAAI,MACxHR,KAAKC,QAAQ,4BACNL,EACP,MAAM0B,GACNlB,QAAQC,IAAI,cAAciB,IAG5B,IAAIC,EAAM/B,EACV,SAASgC,IACR,GAAGD,EAAM,IACNA,EACF7B,EAAW,GACX+B,WAAWD,EAAO/B,OACd,CACJ,IAAIG,EAAIC,MAAMC,KAAK,QACnBF,GAAKA,EAAEG,mBACPwB,EAAM/B,GAGR,SAASkC,IACRH,EAAM,EAEP,SAASI,IACR,IAAIZ,EAAKa,SAAS5B,KAAKF,KAAK,OAAOuB,OAASnB,OAAOC,OACnDZ,EAAYsC,MAAMd,GAAMxB,EAAYwB,EACpCrB,EAAW,GAEZ,SAASoC,IACR,IAAIlC,EAAIC,MAAMC,KAAK,QACnBF,GAAKA,EAAEG,mBACPC,KAAKC,QAAQ,8BAEdD,KAAK+B,UAAU,WACd,IAAIC,EAAOhC,KAAKF,KAAK,YACrBkC,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,OACbC,QAAWZ,KAEZQ,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,OACbC,QAAWV,KAEZM,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,OACbC,QAAWpC,KAAKqC,QAAQ3C,GAAa,MAEtCsC,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,OACbC,QAAWpC,KAAKqC,QAAQ3C,EAAY,MAErCsC,EAAKC,YAAYjC,KAAKkC,OAAO,SAC5BnB,GAAM,MACNM,MAAS9B,EACT+C,KAAQ,UAETN,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,SACbC,QAAWT,KAEZK,EAAKC,YAAYjC,KAAKkC,OAAO,UAC5BC,UAAa,UACbC,QAAWN,OAlFb","file":"../../../../../grid/tests/enhanced/support/test_repeat.js","sourcesContent":["(function(){\r\nvar gridIndex = 0;\r\nvar totalCount = 1000;\r\nvar timeInterval = 500;\r\nfunction createGrid(step){\r\n\ttry{\r\n\t\tvar g = dijit.byId(\"grid\");\r\n\t\tg && g.destroyRecursive();\r\n\t\tdojo.publish(\"test_repeat_grid_destroyed\");\r\n\t\tfor(gridIndex += step; gridIndex < 0; gridIndex += layout.length){}\r\n\t\tgridIndex %= layout.length;\r\n\t\tconsole.log(\"grid plugin args:\", gridAttrs.plugins, gridIndex);\r\n\t\tvar t1 = (new Date()).getTime();\r\n\t\tg = new dojox.grid.EnhancedGrid(dojo.mixin({\r\n\t\t\t\"id\": \"grid\",\r\n\t\t\t\"store\": test_store[0],\r\n\t\t\t\"structure\": layout[gridIndex]\r\n\t\t}, gridAttrs || {}));\r\n\t\tg.placeAt(dojo.byId(\"gridContainer\"));\r\n\t\tg.startup();\r\n\t\tdojo.byId(\"num\").value = gridIndex;\r\n\t\tconsole.log(gridIndex + \"---------------------------------------------------------------\", (new Date()).getTime() - t1, \"ms\");\r\n\t\tdojo.publish(\"test_repeat_grid_created\");\r\n\t\treturn g;\r\n\t}catch(e){\r\n\t\tconsole.log(\"createGrid:\",e);\r\n\t}\r\n}\r\nvar cnt = totalCount;\r\nfunction start(){\r\n\tif(cnt > 0){\r\n\t\t--cnt;\r\n\t\tcreateGrid(1);\r\n\t\tsetTimeout(start, timeInterval);\r\n\t}else{\r\n\t\tvar g = dijit.byId(\"grid\");\r\n\t\tg && g.destroyRecursive();\r\n\t\tcnt = totalCount;\r\n\t}\r\n}\r\nfunction stop(){\r\n\tcnt = 0;\r\n}\r\nfunction gotoGrid(){\r\n\tvar id = parseInt(dojo.byId('num').value) % layout.length;\r\n\tgridIndex = isNaN(id) ? gridIndex : id;\r\n\tcreateGrid(0);\r\n}\r\nfunction destroy(){\r\n\tvar g = dijit.byId(\"grid\");\r\n\tg && g.destroyRecursive();\r\n\tdojo.publish(\"test_repeat_grid_destroyed\");\r\n}\r\ndojo.addOnLoad(function(){\r\n\tvar btns = dojo.byId(\"ctrlBtns\");\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Play\",\r\n\t\t\"onclick\": start\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Stop\",\r\n\t\t\"onclick\": stop\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Prev\",\r\n\t\t\"onclick\": dojo.partial(createGrid, -1)\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Next\",\r\n\t\t\"onclick\": dojo.partial(createGrid, 1)\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"input\",{\r\n\t\t\"id\": \"num\",\r\n\t\t\"value\": gridIndex,\r\n\t\t\"type\": \"text\"\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Create\",\r\n\t\t\"onclick\": gotoGrid\r\n\t}));\r\n\tbtns.appendChild(dojo.create(\"button\",{\r\n\t\t\"innerHTML\": \"Destroy\",\r\n\t\t\"onclick\": destroy\r\n\t}));\r\n\t//gotoGrid();\r\n});\r\n})();\r\n"]}