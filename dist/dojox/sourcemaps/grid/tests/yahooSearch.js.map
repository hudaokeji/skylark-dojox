{"version":3,"sources":["grid/tests/yahooSearch.js"],"names":["dojo","declare","dojox","data","ServiceStore","_processResults","results","def","totalCount","ResultSet","totalResultsAvailable","Result","resultSet","this","inherited","arguments","fetch","request","query","count","start","getCellData","item","field","grid","store","getValue","getLink","inRowIndex","inItem","text","href","formatLink","result","string","substitute","formatDate","inDatum","d","Date","getMonth","getDate","getFullYear","getImage","thumb","src","Url","width","Width","height","Height","formatImage","getDimensions"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,aAAcC,MAAMC,KAAKC,cACrCC,gBAAiB,SAASC,EAASC,GAClC,IAAIC,EAAa,EACdF,EAAQG,YACVD,EAAaF,EAAQG,UAAUC,sBAC/BJ,EAAUA,EAAQG,UAAUE,QAE7B,IAAIC,EAAYC,KAAKC,UAAUC,WAE/B,OADAH,EAAUJ,WAAaA,EAAa,IAAO,IAAOA,EAC3CI,GAERI,MAAO,SAASC,GAUf,OATGA,EAAQC,QACPD,EAAQE,QACVF,EAAQC,MAAe,QAAID,EAAQE,YAET,IAAjBF,EAAQG,QACjBH,EAAQC,MAAa,MAAID,EAAQG,MAAQ,IAIpCP,KAAKC,UAAUC,cAIxB,IAAIM,YAAc,SAASC,EAAMC,GAChC,OAAOC,KAAKC,MAAMC,SAASJ,EAAMC,IAG9BI,QAAU,SAASC,EAAYC,GAClC,OAAIA,GAEHC,KAAMT,YAAYQ,EAAQ,SAC1BE,KAAMV,YAAYQ,EAAQ,aAHP,UAOjBG,WAAa,SAASC,GACzB,MAAwB,iBAAVA,EAAqBjC,KAAKkC,OAAOC,WAC9C,gDACAF,GACGA,GAGDG,WAAa,SAASC,EAAST,GAClC,IAAIS,EAAU,MAAO,SACrB,IAAIC,EAAI,IAAIC,KAAe,IAAVF,GACjB,OAAOrC,KAAKkC,OAAOC,WAClB,kBACEG,EAAEE,WAAW,EAAGF,EAAEG,UAAWH,EAAEI,iBAI/BC,SAAW,SAASf,EAAYC,GACnC,IAAIA,EAAS,MAAO,SACpB,IAAIe,EAAQvB,YAAYQ,EAAQ,aAChC,OACCE,KAAMV,YAAYQ,EAAQ,YAC1BgB,IAAKD,EAAME,IACXC,MAAOH,EAAMI,MACbC,OAAQL,EAAMM,SAIZC,YAAc,SAASlB,GAC1B,MAAwB,iBAAVA,EAAqBjC,KAAKkC,OAAOC,WAC9C,wGAAyGF,GACzGA,GAGEmB,cAAgB,SAASxB,EAAYC,GACxC,OAAIA,EACIR,YAAYQ,EAAQ,SAEjB,MADHR,YAAYQ,EAAQ,UAFR","file":"../../../grid/tests/yahooSearch.js","sourcesContent":["dojo.declare(\"YahooStore\", dojox.data.ServiceStore, {\r\n\t_processResults: function(results, def){\r\n\t\tvar totalCount = 0;\r\n\t\tif(results.ResultSet){\r\n\t\t\ttotalCount = results.ResultSet.totalResultsAvailable;\r\n\t\t\tresults = results.ResultSet.Result;\r\n\t\t}\r\n\t\tvar resultSet = this.inherited(arguments);\r\n\t\tresultSet.totalCount = totalCount > 1000 ? 1000 : totalCount;\r\n\t\treturn resultSet;\r\n\t},\r\n\tfetch: function(request){\r\n\t\tif(request.query){\r\n\t\t\tif(request.count){\r\n\t\t\t\trequest.query['results'] = request.count;\r\n\t\t\t}\r\n\t\t\tif(typeof request.start != \"undefined\"){\r\n\t\t\t\trequest.query['start'] = request.start + 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.inherited(arguments);\r\n\t}\r\n});\r\n\r\nvar getCellData = function(item, field){\r\n\treturn grid.store.getValue(item, field);\r\n};\r\n\r\nvar getLink = function(inRowIndex, inItem){\r\n\tif(!inItem){ return '&nbsp;'; }\r\n\treturn {\r\n\t\ttext: getCellData(inItem, 'Title'),\r\n\t\thref: getCellData(inItem, 'ClickUrl')\r\n\t};\r\n};\r\n\r\nvar formatLink = function(result){\r\n\treturn typeof result == 'object' ? dojo.string.substitute(\r\n\t\t'<a target=\"_blank\" href=\"${href}\">${text}</a>',\r\n\t\tresult\r\n\t) : result;\r\n}\r\n\r\nvar formatDate = function(inDatum, inRowIndex){\r\n\tif(!inDatum){ return '&nbsp;'; }\r\n\tvar d = new Date(inDatum * 1000);\r\n\treturn dojo.string.substitute(\r\n\t\t\"${0}/${1}/${2}\",\r\n\t\t[ d.getMonth()+1, d.getDate(), d.getFullYear() ]\r\n\t);\r\n};\r\n\r\nvar getImage = function(inRowIndex, inItem){\r\n\tif(!inItem){ return '&nbsp;'; }\r\n\tvar thumb = getCellData(inItem, \"Thumbnail\");\r\n\treturn {\r\n\t\thref: getCellData(inItem, \"ClickUrl\"),\r\n\t\tsrc: thumb.Url,\r\n\t\twidth: thumb.Width,\r\n\t\theight: thumb.Height\r\n\t};\r\n};\r\n\r\nvar formatImage = function(result){\r\n\treturn typeof result == \"object\" ? dojo.string.substitute(\r\n\t\t'<a href=\"${href}\" target=\"_blank\"><img border=0 src=\"${src}\" width=\"${width}\" height=\"${height}\"></a>', result) :\r\n\t\tresult;\r\n}\r\n\r\nvar getDimensions = function(inRowIndex, inItem){\r\n\tif(!inItem){ return '&nbsp;'; }\r\n\tvar w = getCellData(inItem, \"Width\");\r\n\tvar h = getCellData(inItem, \"Height\");\r\n\treturn w + ' x ' + h;\r\n};\r\n"]}