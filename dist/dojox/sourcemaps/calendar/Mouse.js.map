{"version":3,"sources":["calendar/Mouse.js"],"names":["define","arr","declare","event","lang","win","domGeometry","mouse","on","keys","triggerExtent","postMixInProperties","this","inherited","arguments","hitch","irEvent","renderer","own","domNode","e","stop","_onItemClick","triggerEvent","item","_item","_onItemDoubleClick","_onItemContextMenu","resizeStartHandle","_onRendererHandleMouseDown","moveHandle","resizeEndHandle","_rendererMouseDownHandler","container","enter","_editingGesture","_setHoveredItem","_onItemRollOver","__fixEvt","leave","_onItemRollOut","_dispatchCalendarEvt","onItemRollOver","onItemRollOut","selectFromEvent","_setTabIndexAttr","focus","editKind","showFocus","isItemBeingEdited","_isEditing","_endItemEditing","_edProps","editedItem","rendererKind","tempEditedItem","liveLayout","set","handles","push","doc","_editingMouseUpHandler","_editingMouseMoveHandler","p","eventSource","_startPoint","x","screenX","y","screenY","_autoScroll","pageX","pageY","_moveOrResizeItemGesture","getTime","getSubColumn","Math","abs","_startItemEditing","_startItemEditingGesture","_stopAutoScroll","_endItemEditingGesture","forEach","handle","remove","globalX","globalY","isVertical","scrollable","autoScroll","scrollerPos","position","scrollContainer","max","h","w","step","floor","_startAutoScroll"],"mappings":"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","file":"../../calendar/Mouse.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\", \r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\", \r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/mouse\",\r\n\t\"dojo/on\", \t\r\n\t\"dojo/keys\"],\r\n\t\r\nfunction(\r\n\tarr, \t\r\n\tdeclare,\r\n\tevent,\r\n\tlang, \t\r\n\twin, \r\n\tdomGeometry,\r\n\tmouse,\r\n\ton, \t\r\n\tkeys){\r\n\t\r\n\t/*=====\r\n\tvar __ItemMouseEventArgs = {\r\n\t\t// summary:\r\n\t\t//\t\tThe event dispatched when an item is clicked, double-clicked or context-clicked.\r\n\t\t// item: Object\r\n\t\t//\t\tThe item clicked.\r\n\t\t// renderer: dojox/calendar/_RendererMixin\r\n\t\t//\t\tThe item renderer clicked.\r\n\t\t// triggerEvent: Event\r\n\t\t//\t\tThe event at the origin of this event.\r\n\t};\r\n\t=====*/\r\n\t\t\t\r\n\treturn declare(\"dojox.calendar.Mouse\", null, {\r\n\r\n\t\t// summary:\r\n\t\t//\t\tThis plugin is managing the mouse interactions on item renderers displayed by a calendar view.\t\t\r\n\t\t\t\t\r\n\t\t// triggerExtent: Number\r\n\t\t//\t\tThe distance in pixels along the vertical or horizontal axis to cover with the \r\n\t\t//\t\tmouse button down before triggering the editing gesture.\r\n\t\ttriggerExtent: 3,\r\n\t\t\t\t\t\r\n\t\tpostMixInProperties: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\t\r\n\t\t\tthis.on(\"rendererCreated\", lang.hitch(this, function(irEvent){\r\n\t\t\t\t\r\n\t\t\t\tvar renderer = irEvent.renderer.renderer;\r\n\r\n\t\t\t\tthis.own(on(renderer.domNode, \"click\", lang.hitch(this, function(e){\r\n\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\tthis._onItemClick({\r\n\t\t\t\t\t\ttriggerEvent: e,\r\n\t\t\t\t\t\trenderer: renderer,\r\n\t\t\t\t\t\titem: renderer.item._item\r\n\t\t\t\t\t});\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t\tthis.own(on(renderer.domNode, \"dblclick\", lang.hitch(this, function(e){\r\n\t\t\t\t\tevent.stop(e);\r\n\t\t\t\t\tthis._onItemDoubleClick({\r\n\t\t\t\t\t\ttriggerEvent: e,\r\n\t\t\t\t\t\trenderer: renderer,\r\n\t\t\t\t\t\titem: renderer.item._item\r\n\t\t\t\t\t});\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t\tthis.own(on(renderer.domNode, \"contextmenu\", lang.hitch(this, function(e){\r\n\t\t\t\t\tthis._onItemContextMenu({\r\n\t\t\t\t\t\ttriggerEvent: e,\r\n\t\t\t\t\t\trenderer: renderer,\r\n\t\t\t\t\t\titem:renderer.item._item\r\n\t\t\t\t\t});\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t\tif(renderer.resizeStartHandle){\r\n\t\t\t\t\tthis.own(on(renderer.resizeStartHandle, \"mousedown\", lang.hitch(this, function(e){\r\n\t\t\t\t\t\tthis._onRendererHandleMouseDown(e, renderer, \"resizeStart\");\r\n\t\t\t\t\t})));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(renderer.moveHandle){\r\n\t\t\t\t\tthis.own(on(renderer.moveHandle, \"mousedown\", lang.hitch(this, function(e){\r\n\t\t\t\t\t\tthis._onRendererHandleMouseDown(e, renderer, \"move\");\r\n\t\t\t\t\t})));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(renderer.resizeEndHandle){\r\n\t\t\t\t\tthis.own(on(renderer.resizeEndHandle, \"mousedown\", lang.hitch(this, function(e){\r\n\t\t\t\t\t\tthis._onRendererHandleMouseDown(e, renderer, \"resizeEnd\");\r\n\t\t\t\t\t})));\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.own(on(renderer.domNode, \"mousedown\", lang.hitch(this, function(e){\r\n\t\t\t\t\tthis._rendererMouseDownHandler(e, renderer);\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.own(on(irEvent.renderer.container, mouse.enter, lang.hitch(this, function(e){\r\n\t\t\t\t\tif(!renderer.item) return;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!this._editingGesture){\r\n\t\t\t\t\t\tthis._setHoveredItem(renderer.item.item, renderer);\r\n\t\t\t\t\t\tthis._onItemRollOver(this.__fixEvt({\r\n\t\t\t\t\t\t\titem: renderer.item._item,\r\n\t\t\t\t\t\t\trenderer: renderer,\r\n\t\t\t\t\t\t\ttriggerEvent: e\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t\tthis.own(on(renderer.domNode, mouse.leave, lang.hitch(this, function(e){\r\n\t\t\t\t\tif(!renderer.item) return;\r\n\t\t\t\t\tif(!this._editingGesture){\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._setHoveredItem(null);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._onItemRollOut(this.__fixEvt({\r\n\t\t\t\t\t\t\titem: renderer.item._item,\r\n\t\t\t\t\t\t\trenderer: renderer,\r\n\t\t\t\t\t\t\ttriggerEvent: e\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t})));\r\n\t\t\t\t\r\n\t\t\t}));\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t_onItemRollOver: function(e){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\tthis._dispatchCalendarEvt(e, \"onItemRollOver\");\r\n\t\t},\r\n\t\t\r\n\t\tonItemRollOver: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEvent dispatched when the mouse cursor in going over an item renderer.\r\n\t\t\t// e: __ItemMouseEventArgs\r\n\t\t\t//\t\tThe event dispatched when the mouse cursor enters in the item renderer.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tcallback\r\n\r\n\t\t},\r\n\t\t\r\n\t\t_onItemRollOut: function(e){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\tthis._dispatchCalendarEvt(e, \"onItemRollOut\");\r\n\t\t},\r\n\t\t\r\n\t\tonItemRollOut: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEvent dispatched when the mouse cursor in leaving an item renderer.\r\n\t\t\t// e: __ItemMouseEventArgs\r\n\t\t\t//\t\tThe event dispatched when the mouse cursor enters in the item renderer.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\r\n\t\t},\r\n\t\t\r\n\t\t_rendererMouseDownHandler: function(e, renderer){\r\n\t\t\t\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCallback if the user clicked on the item renderer but not on a handle.\r\n\t\t\t//\t\tManages item selection.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\tevent.stop(e);\t\t\t\t\r\n\t\t\t\r\n\t\t\tvar item = renderer.item._item;\r\n\t\t\t\r\n\t\t\tthis.selectFromEvent(e, item, renderer, true);\r\n\t\t\t\r\n\t\t\tif(this._setTabIndexAttr){\r\n\t\t\t\tthis[this._setTabIndexAttr].focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_onRendererHandleMouseDown: function(e, renderer, editKind){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCallback if the user clicked on a handle of an item renderer.\r\n\t\t\t//\t\tManages item selection and editing gesture. If editing is not allowed, \r\n\t\t\t//\t\tresize handles are not displayed and so this callback will never be called.\r\n\t\t\t//\t\tIn that case selected is managed by the _rendererMouseDownHandler function.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\t\r\n\t\t\tevent.stop(e);\t\t\t\t\r\n\t\t\t\r\n\t\t\tthis.showFocus = false;\r\n\t\t\t\r\n\t\t\t// save item here as calling endItemEditing may call a relayout and changes the item.\r\n\t\t\tvar ritem = renderer.item;\r\n\t\t\tvar item = ritem.item;\r\n\t\t\t\r\n\t\t\tif(!this.isItemBeingEdited(item)){\r\n\t\t\t\t\t\t\r\n\t\t\t\tif(this._isEditing){\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis._endItemEditing(\"mouse\", false);\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.selectFromEvent(e, renderer.item._item, renderer, true);\r\n\t\t\t\t\r\n\t\t\t\tif(this._setTabIndexAttr){\r\n\t\t\t\t\tthis[this._setTabIndexAttr].focus();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._edProps = {\r\n\t\t\t\t\teditKind: editKind,\r\n\t\t\t\t\teditedItem: item,\r\n\t\t\t\t\trendererKind: renderer.rendererKind,\r\n\t\t\t\t\ttempEditedItem: item,\t\t\t\t\t\r\n\t\t\t\t\tliveLayout: this.liveLayout\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tthis.set(\"focusedItem\", this._edProps.editedItem);\t\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\tvar handles = [];\r\n\t\t\thandles.push(on(win.doc, \"mouseup\", lang.hitch(this, this._editingMouseUpHandler)));\r\n\t\t\thandles.push(on(win.doc, \"mousemove\", lang.hitch(this, this._editingMouseMoveHandler)));\r\n\t\t\t\r\n\t\t\tvar p = this._edProps;\r\n\t\t\tp.handles = handles;\r\n\t\t\tp.eventSource = \"mouse\";\r\n\t\t\tp.editKind = editKind;\r\n\t\t\t\r\n\t\t\tthis._startPoint = {x: e.screenX, y: e.screenY};\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t_editingMouseMoveHandler: function(e){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\tvar p = this._edProps;\r\n\t\t\t\t\t\r\n\t\t\tif(this._editingGesture){\r\n\t\t\t\t\r\n\t\t\t\tif(!this._autoScroll(e.pageX, e.pageY, true)){\r\n\t\t\t\t\tthis._moveOrResizeItemGesture([this.getTime(e)], \"mouse\", e, this.getSubColumn(e));\t\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t}else if(Math.abs(this._startPoint.x - e.screenX) >= this.triggerExtent || // moved enough to trigger editing\r\n\t\t\t\t\t\t\t Math.abs(this._startPoint.y - e.screenY) >= this.triggerExtent){\r\n\t\t\t\t\t\t\t \t\r\n\t\t\t\tif(!this._isEditing){\r\n\t\t\t\t\tthis._startItemEditing(p.editedItem, \"mouse\");\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tp = this._edProps;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis._startItemEditingGesture([this.getTime(e)], p.editKind, \"mouse\", e);\r\n\t\t\t}\r\n\t\t},\t\t\r\n\t\t\r\n\t\t_editingMouseUpHandler: function(e){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\t\r\n\t\t\tvar p = this._edProps;\r\n\t\t\t\r\n\t\t\tthis._stopAutoScroll();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\tif(this._isEditing){\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(this._editingGesture){ // a gesture is ongoing.\t\t\t\t\t\r\n\t\t\t\t\tthis._endItemEditingGesture(\"mouse\", e);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._endItemEditing(\"mouse\", false);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t}else{ // handlers were not removed by endItemEditing\r\n\t\t\t\tarr.forEach(p.handles, function(handle){\r\n\t\t\t\t\thandle.remove();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_autoScroll: function(globalX, globalY, isVertical){\r\n\t\t\t\r\n\t\t\tif (!this.scrollable || !this.autoScroll) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tvar scrollerPos = domGeometry.position(this.scrollContainer, true);\r\n\t\t\t\r\n\t\t\tvar p = isVertical ? globalY - scrollerPos.y : globalX - scrollerPos.x;\r\n\t\t\tvar max = isVertical ? scrollerPos.h : scrollerPos.w;\r\n\t\t\t\r\n\t\t\tif (p < 0 || p > max) {\r\n\t\t\t\t\r\n\t\t\t\tvar step = Math.floor((p < 0\t? p : p - max)/2)/3;\r\n\t\t\t\t\r\n\t\t\t\tthis._startAutoScroll(step);\r\n\t\t\t\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tthis._stopAutoScroll();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\t\t\t\t\t\t\t\r\n\t});\r\n\r\n});\r\n"]}