{"version":3,"sources":["mobile/pageTurningUtils.js"],"names":["define","kernel","array","connect","event","domClass","domConstruct","domStyle","css3","experimental","this","w","h","turnfrom","page","dogear","duration","alwaysDogeared","_styleParams","_catalogNode","_currentPageNode","_transitionEndHandle","init","_calcStyleParams","cx","cy","dx","dy","fy","tan58","Math","tan","PI","cos32","cos","sin32","sin","tan32","params","fold","fw","fh","dw","pw","base","add","top","left","width","height","transformOrigin","front","boxShadow","back","shadow","display","turnForward","transform","turnBackward","catalog","getChildren","node","filter","childNodes","n","nodeType","getPages","getCurrentPage","getIndexOfPage","pageNode","pages","i","length","getNextPage","nextSibling","getPreviousPage","previousSibling","isPageTurned","style","name","_onPageTurned","e","stop","contains","target","onPageTurned","initCatalog","catalogNode","disconnect","set","forEach","initPage","resetCatalog","_getBaseZIndex","zIndex","len","showDogear","hideDogear","dir","appendChild","create","isFirst","p","_turnPage","turnToNext","nextPage","turnToPrev","prevPage","goTo","index","goBackward","d"],"mappings":"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","file":"../../mobile/pageTurningUtils.js","sourcesContent":["define([\r\n\t\"dojo/_base/kernel\",\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"./_css3\"\r\n], function(kernel, array, connect, event, domClass, domConstruct, domStyle, css3){\r\n\t// module:\r\n\t//\t\tdojox/mobile/pageTurningUtils\r\n\t\r\n\tkernel.experimental(\"dojox.mobile.pageTurningUtils\");\r\n\r\n\treturn function(){\r\n\t\t// summary:\r\n\t\t//\t\tUtilities to provide page turning effects just like turning a real book.\r\n\t\t// example:\r\n\t\t// |\trequire([\r\n\t\t// |\t\t\"dojo/ready\",\r\n\t\t// |\t\t\"dojox/mobile/pageTurningUtils\"\r\n\t\t// |\t], function(ready, pageTurningUtils){\r\n\t\t// |\t\tvar utils = new pageTurningUtils();\r\n\t\t// |\t\tready(function(){\r\n\t\t// |\t\t\tutils.init(300, 400); // Specify width and height by pixels\r\n\t\t// |\t\t\tutils.initCatalog(document.getElementById(\"catalog\"));\r\n\t\t// |\t\t});\r\n\t\t// |\t);\r\n\t\t// |\t<div id=\"catalog\">\r\n\t\t// |\t\t<div id=\"page1\">\r\n\t\t// |\t\t\t<div id=\"front1\"><img src=\"img1.png\"></div>\r\n\t\t// |\t\t\t<div id=\"back1\"><img src=\"img2.png\"></div>\r\n\t\t// |\t\t</div>\r\n\t\t// |\t\t<div id=\"page2\">\r\n\t\t// |\t\t\t<div id=\"front2\"><img src=\"img3.png\"></div>\r\n\t\t// |\t\t\t<div id=\"back2\"><img src=\"img4.png\"></div>\r\n\t\t// |\t\t</div>\r\n\t\t// |\t\t<div id=\"page3\">\r\n\t\t// |\t\t\t<div id=\"front3\"><img src=\"img5.png\"></div>\r\n\t\t// |\t\t\t<div id=\"back3\"></div>\r\n\t\t// |\t\t</div>\r\n\t\t// |\t</div>\r\n\r\n\t\tthis.w = 0;\r\n\t\tthis.h = 0;\r\n\t\tthis.turnfrom = \"top\";\r\n\t\tthis.page = 1;\r\n\t\tthis.dogear = 1.0;\r\n\t\tthis.duration = 2;\r\n\t\tthis.alwaysDogeared = false;\r\n\r\n\t\t/* Internal properties */\r\n\t\tthis._styleParams = {};\r\n\t\tthis._catalogNode = null;\r\n\t\tthis._currentPageNode = null;\r\n\t\tthis._transitionEndHandle = null;\r\n\r\n\t\tthis.init = function(/*int*/w, /*int*/h, /*String?*/turnfrom, \r\n\t\t\t\t\t\t\t/*int?*/page, /*Number?*/dogear, /*Number?*/duration,\r\n\t\t\t\t\t\t\t/*Boolean?*/alwaysDogeared){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets property values necessary for calculating the style parameters\r\n\t\t\t//\t\tfor page positioning and page turning effects.\r\n\t\t\t// w: int\r\n\t\t\t//\t\tThe width of each page by pixels. You cannot specify it by percentage.\r\n\t\t\t// h: int\r\n\t\t\t//\t\tThe height of each page by pixels. You cannot specify it by percentage.\r\n\t\t\t// turnfrom: String?\r\n\t\t\t//\t\tSpecifies from which side/corner the page turning starts. \r\n\t\t\t//\t\tYou can choose from \"top\", \"bottom\" or \"left\". Defaults to \"top\".\r\n\t\t\t//\t\tIf \"top\", each page is turned from top-right corner of the page.\r\n\t\t\t//\t\tIf \"bottom\", each page is turned from bottom-right corner of the page.\r\n\t\t\t//\t\tAnd if \"left\", each page is turned from top-left corner of the page.\r\n\t\t\t//\t\tThe page is shown as dog-eared except the case of \"bottom\".\r\n\t\t\t// page: int?\r\n\t\t\t//\t\tThe number of pages shown in the screen at a time.\r\n\t\t\t//\t\tThis parameter should be either of 1 or 2. Defaults to 1.\r\n\t\t\t//\t\tIf 1, the only one side of two facing pages are shown. \r\n\t\t\t//\t\tIf 2, the two facing pages are shown at a time.\r\n\t\t\t// dogear: Number?\r\n\t\t\t//\t\tThe ratio of actual dog-ear width to the maximum dog-ear width which is\r\n\t\t\t//\t\t11 percent of the page width (= 0.11 * w).\r\n\t\t\t//\t\tThis parameter should be a float number between 0 and 1. Defaults to 1.\r\n\t\t\t//\t\tThe actual dog-ear width is calculated by the following formula:\r\n\t\t\t// |\t\t0.11 * w * dogear.\r\n\t\t\t//\t\tThis parameter is ignored if \"bottom\" is specified to turnfrom parameter.\r\n\t\t\t// duration: Number?\r\n\t\t\t//\t\tThe duration of page turning animations by seconds. (ex. 1.5, 3, etc)\r\n\t\t\t//\t\tDefaults to 2.\r\n\t\t\t// alwaysDogeared: Boolean?\r\n\t\t\t//\t\tSpecifies whether all pages are always dog-eared or not.\r\n\t\t\t//\t\tIf true, all pages are always dog-eared.\r\n\t\t\t//\t\tIf false, only the current page is dog-eared while the others are not.\r\n\t\t\t//\t\tThis parameter is ignored if \"bottom\" is specified to turnfrom parameter.\r\n\t\t\t\r\n\t\t\t// Set property values\r\n\t\t\tthis.w = w;\r\n\t\t\tthis.h = h;\r\n\t\t\tthis.turnfrom = turnfrom ? turnfrom : this.turnfrom;\r\n\t\t\tthis.page = page ? page : this.page;\r\n\t\t\tthis.dogear = typeof dogear !== 'undefined' ? dogear : this.dogear;\r\n\t\t\tthis.duration = typeof duration !== 'undefined' ? duration : this.duration;\r\n\t\t\tthis.alwaysDogeared = typeof alwaysDogeared !== 'undefined' ? alwaysDogeared : this.alwaysDogeared;\r\n\t\t\t\r\n\t\t\tif(this.turnfrom === \"bottom\"){ // dog-ear is not supported if using \"bottom\"\r\n\t\t\t\tthis.alwaysDogeared = true;\r\n\t\t\t}\r\n\t\t\t// Calculate style parameters for page positioning and page turning effects\r\n\t\t\tthis._calcStyleParams();\r\n\t\t};\r\n\r\n\t\tthis._calcStyleParams = function(){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar tan58 = Math.tan(58 * Math.PI/180),\r\n\t\t\t\tcos32 = Math.cos(32 * Math.PI/180),\r\n\t\t\t\tsin32 = Math.sin(32 * Math.PI/180),\r\n\t\t\t\ttan32 = Math.tan(32 * Math.PI/180),\r\n\t\t\t\tw = this.w,\r\n\t\t\t\th = this.h,\r\n\t\t\t\tpage = this.page,\r\n\t\t\t\tturnfrom = this.turnfrom,\r\n\t\t\t\tparams = this._styleParams;\r\n\t\t\t\r\n\t\t\t// Calculate each div size and position based on the page turning algorithm\r\n\t\t\t//\t fw: frontWidth, fh: frontHeight, dw: dogear, cx: posX, cy: posY,\r\n\t\t\t//\t dx: dogearX, dy: dogearY, fy:actualPagePos\r\n\t\t\tvar fold = w * tan58,\r\n\t\t\t\tQ = fold,\r\n\t\t\t\tfw = Q * sin32 + Q * cos32 * tan58,\r\n\t\t\t\tfh = fold + w + w/tan58,\r\n\t\t\t\tdw = w * 0.11 * this.dogear,\r\n\t\t\t\tpw = w - dw,\r\n\t\t\t\tbase = pw * cos32,\r\n\t\t\t\tcx, cy, dx, dy, fy; // These params depend on the types of \"turnfrom\" parameter\r\n\t\t\t\r\n\t\t\tswitch(this.turnfrom){ // TODO Should separate each case as a plugin?\r\n\t\t\tcase \"top\":\r\n\t\t\t\tcx = fw - base;\r\n\t\t\t\tcy = base * tan58;\r\n\t\t\t\tdx = fw - dw;\r\n\t\t\t\tdy = cy + pw/tan58 - 7;\r\n\t\t\t\tfy = cy/cos32;\r\n\t\t\t\t\r\n\t\t\t\tparams.init = {\r\n\t\t\t\t\tpage: css3.add({\r\n\t\t\t\t\t\ttop: -fy + \"px\",\r\n\t\t\t\t\t\tleft: (-fw + (page === 2 ? w : 0)) + \"px\",\r\n\t\t\t\t\t\twidth: fw + \"px\",\r\n\t\t\t\t\t\theight: fh + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttransformOrigin: \"100% 0%\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tshadow: {\r\n\t\t\t\t\t\tdisplay: \"\",\r\n\t\t\t\t\t\tleft: fw + \"px\",\r\n\t\t\t\t\t\theight: h * 1.5 + \"px\"\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnForward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(0deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ fw + \"px,\" + fy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"-110px -18px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ (fw - w) + \"px,\" + fy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnBackward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(-32deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ cx + \"px,\" + cy +\"px) rotate(32deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ dx + \"px,\" + dy +\"px) rotate(-32deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\tcx = fw - (h * sin32 + w * cos32) - 2;\r\n\t\t\t\tcy = fh - (h + w/tan32) * cos32;\r\n\t\t\t\tdx = fw;\r\n\t\t\t\tdy = fh - w/sin32 - h;\r\n\t\t\t\tfy = fh - w/tan32 - h;\r\n\t\t\t\t\r\n\t\t\t\tparams.init = {\r\n\t\t\t\t\tpage: css3.add({\r\n\t\t\t\t\t\ttop: (-fy + 50) + \"px\",\r\n\t\t\t\t\t\tleft: (-fw + (page === 2 ? w : 0)) + \"px\",\r\n\t\t\t\t\t\twidth: fw + \"px\",\r\n\t\t\t\t\t\theight: fh + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttransformOrigin: \"100% 100%\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tshadow: {\r\n\t\t\t\t\t\tdisplay: \"none\"\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnForward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(0deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ fw + \"px,\" + fy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"-220px 35px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ (w * 2) + \"px,\" + fy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnBackward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(32deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ cx + \"px,\" + cy +\"px) rotate(-32deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ dx + \"px,\" + dy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"left\":\r\n\t\t\t\tcx = -w;\r\n\t\t\t\tcy = pw/tan32 - 2;\r\n\t\t\t\tdx = -pw;\r\n\t\t\t\tdy = fy = pw/sin32 + dw * sin32;\r\n\t\t\t\t\r\n\t\t\t\tparams.init = {\r\n\t\t\t\t\tpage: css3.add({\r\n\t\t\t\t\t\ttop: -cy + \"px\",\r\n\t\t\t\t\t\tleft: w + \"px\",\r\n\t\t\t\t\t\twidth: fw + \"px\",\r\n\t\t\t\t\t\theight: fh + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttransformOrigin: \"0% 0%\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({\r\n\t\t\t\t\t\twidth: w + \"px\",\r\n\t\t\t\t\t\theight: h + \"px\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tboxShadow: \"0 0\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tshadow: {\r\n\t\t\t\t\t\tdisplay: \"\",\r\n\t\t\t\t\t\tleft: \"-4px\",\r\n\t\t\t\t\t\theight: ((page === 2 ? h * 1.5 : h) + 50) + \"px\"\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnForward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(0deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ cx + \"px,\" + cy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"160px 68px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(0px,\" + cy +\"px) rotate(0deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tparams.turnBackward = {\r\n\t\t\t\t\tpage: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"rotate(32deg)\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfront: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ (-dw) + \"px,\" + dy +\"px) rotate(-32deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"0px 0px\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tback: css3.add({}, {\r\n\t\t\t\t\t\ttransform: \"translate(\"+ dx + \"px,\" + dy +\"px) rotate(32deg)\",\r\n\t\t\t\t\t\ttransformOrigin: \"top right\"\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparams.init.catalog = { // catalogNode\r\n\t\t\t\twidth: (page === 2 ? w * 2 : w) + \"px\",\r\n\t\t\t\theight: ((page === 2 ? h * 1.5 : h) + (turnfrom == \"top\" ? 0 : 50)) + \"px\"\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tthis.getChildren = function(/*DomNode*/node){\r\n\t\t\treturn array.filter(node.childNodes, function(n){ return n.nodeType === 1; });\r\n\t\t};\r\n\r\n\t\tthis.getPages = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGet the array of all page nodes.\r\n\t\t\treturn this._catalogNode ? this.getChildren(this._catalogNode) : null;\r\n\t\t};\r\n\r\n\t\tthis.getCurrentPage = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGet the current page node.\r\n\t\t\treturn this._currentPageNode;\r\n\t\t};\r\n\r\n\t\tthis.getIndexOfPage = function(/*DomNode*/pageNode, /*DomNode[]?*/pages){\r\n\t\t\tif(!pages){\r\n\t\t\t\tpages = this.getPages();\r\n\t\t\t}\r\n\t\t\tfor(var i=0; i<pages.length; i++){\r\n\t\t\t\tif(pageNode === pages[i]){ return i; }\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\r\n\t\tthis.getNextPage = function(/*DomNode*/pageNode){\r\n\t\t\tfor(var n = pageNode.nextSibling; n; n = n.nextSibling){\r\n\t\t\t\tif(n.nodeType === 1){ return n; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\tthis.getPreviousPage = function(/*DomNode*/pageNode){\r\n\t\t\tfor(var n = pageNode.previousSibling; n; n = n.previousSibling){\r\n\t\t\t\tif(n.nodeType === 1){ return n; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\tthis.isPageTurned = function(/*DomNode*/pageNode){\r\n\t\t\treturn pageNode.style[css3.name(\"transform\")] == \"rotate(0deg)\";\r\n\t\t};\r\n\r\n\t\tthis._onPageTurned = function(e){\r\n\t\t\tevent.stop(e);\r\n\t\t\tif(domClass.contains(e.target, \"mblPageTurningPage\")){\r\n\t\t\t\tthis.onPageTurned(e.target);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.onPageTurned = function(/*DomNode*/ /*===== pageNode =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStub function to which your application connects \r\n\t\t\t//\t\tto handle the event when each page is tured \r\n\t\t\t// description:\r\n\t\t\t//\t\tCalled just after each page is turned.\r\n\t\t};\r\n\r\n\t\tthis.initCatalog = function(/*DomNode*/catalogNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInitializes the specified catalog/book.\r\n\t\t\t// description:\r\n\t\t\t//\t\tApply style class and other various styles to the specified catalog node\r\n\t\t\t//\t\tfor initialization.\r\n\t\t\t//\t\tThis function must be called every time when property values\r\n\t\t\t//\t\tare changed by calling this.init(...) function.\r\n\t\t\t// catalogNode: DOMNode\r\n\t\t\t//\t\tThe catalog node to be initialized.\r\n\t\t\t\r\n\t\t\tif(this._catalogNode != catalogNode){\r\n\t\t\t\tif(this._transitionEndHandle){\r\n\t\t\t\t\tconnect.disconnect(this._transitionEndHandle);\r\n\t\t\t\t}\r\n\t\t\t\tthis._transitionEndHandle = connect.connect(catalogNode, css3.name(\"transitionEnd\"), this, \"_onPageTurned\");\r\n\t\t\t\tthis._catalogNode = catalogNode;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Initialize catalog node\r\n\t\t\tdomClass.add(catalogNode, \"mblPageTurningCatalog\");\r\n\t\t\tdomStyle.set(catalogNode, this._styleParams.init.catalog);\r\n\t\t\t\r\n\t\t\t// Initialize child pages\r\n\t\t\tvar pages = this.getPages();\r\n\t\t\tarray.forEach(pages, function(pageNode){\r\n\t\t\t\tthis.initPage(pageNode);\r\n\t\t\t}, this);\r\n\t\t\t\r\n\t\t\tthis.resetCatalog();\r\n\t\t};\r\n\r\n\t\tthis._getBaseZIndex = function(){\r\n\t\t\t// Check z-index of catalogNode\r\n\t\t\treturn this._catalogNode.style.zIndex || 0;\r\n\t\t};\r\n\r\n\t\tthis.resetCatalog = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResets the catalog by adjust the state of child pages.\r\n\t\t\t// description:\r\n\t\t\t//\t\tAdjust z-index and dog-ear show/hide state of each child page.\r\n\t\t\t//\t\tThis function must be called when you add a new page \r\n\t\t\t//\t\tor remove some page after initialization.\r\n\t\t\t\r\n\t\t\t// Adjust z-index and dog-ear of child pages\r\n\t\t\tvar pages = this.getPages(),\r\n\t\t\t\tlen = pages.length,\r\n\t\t\t\tbase = this._getBaseZIndex();\r\n\t\t\tfor(var i = len - 1; i>=0; i--){\r\n\t\t\t\tvar pageNode = pages[i];\r\n\t\t\t\tthis.showDogear(pageNode);\r\n\t\t\t\tif(this.isPageTurned(pageNode)){\r\n\t\t\t\t\tpageNode.style.zIndex = base + len + 1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpageNode.style.zIndex = base + len - i;\r\n\t\t\t\t\t!this.alwaysDogeared && this.hideDogear(pageNode);\r\n\t\t\t\t\tthis._currentPageNode = pageNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!this.alwaysDogeared && this._currentPageNode != pages[len - 1]){\r\n\t\t\t\tthis.showDogear(this._currentPageNode);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.initPage = function(/*DomNode*/pageNode, /*int?*/dir){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInitializes the specified page.\r\n\t\t\t// description:\r\n\t\t\t//\t\tApply style class and other various styles to the specified page node\r\n\t\t\t//\t\tfor initialization.\r\n\t\t\t//\t\tThis function must be called when you add a new page after initialization.\r\n\t\t\t// pageNode: DOMNode\r\n\t\t\t//\t\tThe page node to be initialized.\r\n\t\t\t// dir: int?\r\n\t\t\t//\t\tSpecified whether the page is turned or not at initialization.\r\n\t\t\t//\t\tThis parameter should be either of 1 or -1.\r\n\t\t\t//\t\tIf 1, the page is turned at initialization. If -1, it is not turned.\r\n\t\t\t\r\n\t\t\t// Create shadow node if not exist\r\n\t\t\tvar childNodes = this.getChildren(pageNode);\r\n\t\t\twhile(childNodes.length < 3){\r\n\t\t\t\tpageNode.appendChild(domConstruct.create(\"div\", null));\r\n\t\t\t\tchildNodes = this.getChildren(pageNode);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Check if it is the first time to initialize this page node or not\r\n\t\t\tvar isFirst = !domClass.contains(pageNode, \"mblPageTurningPage\");\r\n\t\t\t\r\n\t\t\t// Apply style class\r\n\t\t\tdomClass.add(pageNode, \"mblPageTurningPage\");\r\n\t\t\tdomClass.add(childNodes[0], \"mblPageTurningFront\"); // frontNode\r\n\t\t\tdomClass.add(childNodes[1], \"mblPageTurningBack\"); // backNode\r\n\t\t\tdomClass.add(childNodes[2], \"mblPageTurningShadow\"); // shadowNode\r\n\t\t\t\r\n\t\t\t// Apply styles\r\n\t\t\tvar p = this._styleParams.init;\r\n\t\t\tdomStyle.set(pageNode, p.page);\r\n\t\t\tdomStyle.set(childNodes[0], p.front); // frontNode\r\n\t\t\tdomStyle.set(childNodes[1], p.back); // backNode\r\n\t\t\tp.shadow && domStyle.set(childNodes[2], p.shadow); // shadowNode\r\n\t\t\t\r\n\t\t\tif(!dir){\r\n\t\t\t\t// Determine whether to turn this page or not\r\n\t\t\t\tif(isFirst && this._currentPageNode){\r\n\t\t\t\t\tvar pages = this.getPages();\r\n\t\t\t\t\tdir = this.getIndexOfPage(pageNode) < this.getIndexOfPage(this._currentPageNode) ? 1 : -1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdir = this.isPageTurned(pageNode) ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._turnPage(pageNode, dir, 0);\r\n\t\t};\r\n\r\n\t\tthis.turnToNext = function(/*Number?*/duration){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTurns a page forward.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThe current page is turned forward if it is not the last page of the book.\r\n\t\t\t// duration: Number?\r\n\t\t\t//\t\tThe duration of page turning animations by seconds. (ex. 1.5, 3, etc)\r\n\t\t\t//\t\tIf this parameter is omitted, this.duration property value is used.\r\n\t\t\tvar nextPage = this.getNextPage(this._currentPageNode);\r\n\t\t\tif(nextPage){\r\n\t\t\t\tthis._turnPage(this._currentPageNode, 1, duration);\r\n\t\t\t\tthis._currentPageNode = nextPage;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.turnToPrev = function(/*Number?*/duration){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTurns a page backward.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThe current page is turned backward if it is not the first page of the book.\r\n\t\t\t// duration: Number?\r\n\t\t\t//\t\tThe duration of page turning animations by seconds. (ex. 1.5, 3, etc)\r\n\t\t\t//\t\tIf this parameter is omitted, this.duration property value is used.\r\n\t\t\tvar prevPage = this.getPreviousPage(this._currentPageNode);\r\n\t\t\tif(prevPage){\r\n\t\t\t\tthis._turnPage(prevPage, -1, duration);\r\n\t\t\t\tthis._currentPageNode = prevPage;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.goTo = function(/*int*/index){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tJumps to the specified page without page turning animations.\r\n\t\t\t// index: int\r\n\t\t\t//\t\tThe index of the page you want to jump to.\r\n\t\t\tvar pages = this.getPages();\r\n\t\t\tif(this._currentPageNode === pages[index] || pages.length <= index) { return; }\r\n\t\t\t\r\n\t\t\tvar goBackward = index < this.getIndexOfPage(this._currentPageNode, pages);\r\n\t\t\twhile(this._currentPageNode !== pages[index]) {\r\n\t\t\t\tgoBackward ? this.turnToPrev(0) : this.turnToNext(0);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._turnPage = function(/*DomNode*/pageNode, /*int*/dir, /*Number?*/duration){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar childNodes = this.getChildren(pageNode),\r\n\t\t\t\td = ((typeof duration !== 'undefined') ? duration : this.duration) + \"s\",\r\n\t\t\t\tp = (dir === 1) ? this._styleParams.turnForward : this._styleParams.turnBackward;\r\n\t\t\t\r\n\t\t\t// Apply styles for page turning animations\r\n\t\t\tp.page[css3.name(\"transitionDuration\")] = d;\r\n\t\t\tdomStyle.set(pageNode, p.page);\r\n\t\t\t\r\n\t\t\tp.front[css3.name(\"transitionDuration\")] = d;\r\n\t\t\tdomStyle.set(childNodes[0], p.front); // frontNode\r\n\t\t\t\r\n\t\t\tp.back[css3.name(\"transitionDuration\")] = d;\r\n\t\t\tdomStyle.set(childNodes[1], p.back); // backNode\r\n\t\t\t\r\n\t\t\t// Adjust z-index and dog-ear\r\n\t\t\tvar pages = this.getPages(),\r\n\t\t\t\tnextPage = this.getNextPage(pageNode),\r\n\t\t\t\tlen = pages.length,\r\n\t\t\t\tbase = this._getBaseZIndex();\r\n\t\t\tif(dir === 1){\r\n\t\t\t\tpageNode.style.zIndex = base + len + 1;\r\n\t\t\t\tif(!this.alwaysDogeared && nextPage && this.getNextPage(nextPage)){\r\n\t\t\t\t\tthis.showDogear(nextPage);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(nextPage){\r\n\t\t\t\t\tnextPage.style.zIndex = base + len - this.getIndexOfPage(nextPage, pages);\r\n\t\t\t\t\t!this.alwaysDogeared && this.hideDogear(nextPage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.showDogear = function(/*DomNode*/pageNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tShows the dog-ear.\r\n\t\t\tvar childNodes = this.getChildren(pageNode);;\r\n\t\t\tdomStyle.set(pageNode, \"overflow\", \"\");\r\n\t\t\tchildNodes[1] && domStyle.set(childNodes[1], \"display\", \"\"); // backNode\r\n\t\t\tchildNodes[2] && domStyle.set(childNodes[2], \"display\", this.turnfrom === \"bottom\" ? \"none\" : \"\"); // shadowNode\r\n\t\t};\r\n\r\n\t\tthis.hideDogear = function(/*DomNode*/pageNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHides the dog-ear.\r\n\t\t\tif(this.turnfrom === \"bottom\"){ return; }\r\n\t\t\t\r\n\t\t\tvar childNodes = this.getChildren(pageNode);\r\n\t\t\tdomStyle.set(pageNode, \"overflow\", \"visible\");\r\n\t\t\tchildNodes[1] && domStyle.set(childNodes[1], \"display\", \"none\"); // backNode\r\n\t\t\tchildNodes[2] && domStyle.set(childNodes[2], \"display\", \"none\"); // shadowNode\r\n\t\t};\r\n\t};\r\n});\r\n"]}