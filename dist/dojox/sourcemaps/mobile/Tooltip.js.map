{"version":3,"sources":["mobile/Tooltip.js"],"names":["define","array","registry","declare","lang","domClass","domConstruct","domGeometry","domStyle","place","WidgetBase","has","BidiTooltip","Tooltip","baseClass","buildRendering","this","inherited","arguments","anchor","create","class","domNode","arrow","innerArrow","containerNode","show","aroundNode","positions","remove","forEach","findWidgets","widget","height","resize","_parentPadBorderExtentsBottom","getPadBorderExtents","b","map","pos","after","before","best","around","isLeftToRight","connectorClass","MRM","MLM","BMT","TMB","BLT","TLB","BRT","TRB","TLT","TRT","BRB","BLB","corner","aroundCorner","charAt","add","position","set","top","left","Math","max","x","w","offsetWidth","y","h","offsetHeight","replace","hitch","hide","undefined","onBlur","e","destroy","removeChild"],"mappings":";;;;;;;AAAAA,QACC,mBACA,iBACA,qBACA,kBACA,iBACA,qBACA,oBACA,iBACA,cACA,oBACA,WACA,gDACE,SAASC,EAAOC,EAAUC,EAASC,EAAMC,EAAUC,EAAcC,EAAaC,EAAUC,EAAOC,EAAYC,EAAKC,GAElH,IAAIC,EAAUV,EAAQQ,EAAI,aAAe,8BAAgC,uBAAwBD,GAIhGI,UAAW,8BAEXC,eAAgB,WAEfC,KAAKC,UAAUC,WACfF,KAAKG,OAASb,EAAac,OAAO,OAAQC,MAAQ,oBAAqBL,KAAKM,QAAS,SACrFN,KAAKO,MAAQjB,EAAac,OAAO,OAAQC,MAAQ,mBAAoBL,KAAKG,QAC1EH,KAAKQ,WAAalB,EAAac,OAAO,OAAQC,MAAQ,wBAAyBL,KAAKG,QAChFH,KAAKS,gBAERT,KAAKS,cAAgBT,KAAKM,UAI5BI,KAAM,SAAqBC,EAAqBC,GAW/C,IAAIN,EAAUN,KAAKM,QAenBjB,EAASwB,OAAOP,GAAU,kBAAkB,mBAAmB,kBAAkB,oBACjFrB,EAAM6B,QAAQ5B,EAAS6B,YAAYT,GAAU,SAASU,GACjC,QAAjBA,EAAOC,QAA4C,mBAAjBD,EAAOE,SACvCF,EAAOG,gCACVH,EAAOG,8BAAgC5B,EAAY6B,oBAAoBd,GAASe,GAEjFL,EAAOE,YAKNN,IACFA,EAAY3B,EAAMqC,IAAIV,EAAW,SAASW,GACzC,OAAQC,MAAO,iBAAkBC,OAAQ,mBAAmBF,IAAQA,KAGtE,IAAIG,EAAOjC,EAAMkC,OAAOrB,EAASK,EAAYC,IAAc,iBAAkB,iBAAkB,iBAAkB,mBAAoBZ,KAAK4B,iBACtIC,GA9BHC,IAAO,kBACPC,IAAO,mBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,mBACPC,IAAO,kBACPC,IAAO,kBACPC,IAAO,oBAmB8Bf,EAAKgB,OAAShB,EAAKiB,aAAaC,OAAO,KAAO,GACpFvD,EAASwD,IAAIvC,EAASuB,GACtB,IAAIN,EAAMhC,EAAYuD,SAASnC,GAAY,GAO3C,OANAnB,EAASuD,IAAI/C,KAAKG,OAA2B,mBAAlB0B,GAAyD,mBAAlBA,GAC7DmB,IAAK,GAAIC,KAAMC,KAAKC,IAAI,EAAG5B,EAAI6B,EAAI1B,EAAK0B,GAAK7B,EAAI8B,GAAK,IAAMrD,KAAKO,MAAM+C,aAAe,IAAM,OAC5FL,KAAM,GAAID,IAAKE,KAAKC,IAAI,EAAG5B,EAAIgC,EAAI7B,EAAK6B,GAAKhC,EAAIiC,GAAK,IAAMxD,KAAKO,MAAMkD,cAAgB,IAAM,OAElGpE,EAASqE,QAAQpD,EAAS,oBAAqB,oBAC/CN,KAAKkB,OAAS9B,EAAKuE,MAAM3D,KAAM,OAAQW,EAAYC,GAC5Cc,GAGRkC,KAAM,WAGL5D,KAAKkB,YAAS2C,EACdxE,EAASqE,QAAQ1D,KAAKM,QAAS,mBAAoB,sBAGpDwD,OAAQ,SAAkBC,GACzB,OAAO,GAGRC,QAAS,WACLhE,KAAKG,SACPH,KAAKG,OAAO8D,YAAYjE,KAAKQ,YAC7BR,KAAKG,OAAO8D,YAAYjE,KAAKO,OAC7BP,KAAKM,QAAQ2D,YAAYjE,KAAKG,QAC9BH,KAAKG,OAASH,KAAKO,MAAQP,KAAKQ,gBAAaqD,GAE9C7D,KAAKC,UAAUC,cAIjB,OAAOP,EAAI,aAAeR,EAAQ,wBAAyBU,EAASD,IAAgBC","file":"../../mobile/Tooltip.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\", // array.forEach\r\n\t\"dijit/registry\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\",\r\n\t\"dijit/place\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"dojo/has\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/Tooltip\"\r\n], function(array, registry, declare, lang, domClass, domConstruct, domGeometry, domStyle, place, WidgetBase, has, BidiTooltip){\r\n\r\n\tvar Tooltip = declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiTooltip\" : \"dojox.mobile.Tooltip\", WidgetBase, {\r\n\t\t// summary:\r\n\t\t//\t\tA non-templated popup bubble widget\r\n\r\n\t\tbaseClass: \"mblTooltip mblTooltipHidden\",\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\t// create the helper nodes here in case the user overwrote domNode.innerHTML\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.anchor = domConstruct.create(\"div\", {\"class\":\"mblTooltipAnchor\"}, this.domNode, \"first\");\r\n\t\t\tthis.arrow = domConstruct.create(\"div\", {\"class\":\"mblTooltipArrow\"}, this.anchor);\r\n\t\t\tthis.innerArrow = domConstruct.create(\"div\", {\"class\":\"mblTooltipInnerArrow\"}, this.anchor);\r\n\t\t\tif(!this.containerNode){\r\n\t\t\t\t// set containerNode so that getChildren() works\r\n\t\t\t\tthis.containerNode = this.domNode;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshow: function(/*DomNode*/ aroundNode, /*Array*/positions){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tPop up the tooltip and point to aroundNode using the best position\r\n\t\t\t// positions:\r\n\t\t\t//\t\tOrdered list of positions to try matching up.\r\n\t\t\t//\r\n\t\t\t//\t\t- before-centered: places drop down before the aroundNode\r\n\t\t\t//\t\t- after-centered: places drop down after the aroundNode\r\n\t\t\t//\t\t- above-centered: drop down goes above aroundNode\r\n\t\t\t//\t\t- below-centered: drop down goes below aroundNode\r\n\r\n\t\t\tvar domNode = this.domNode;\r\n\t\t\tvar connectorClasses = {\r\n\t\t\t\t\"MRM\": \"mblTooltipAfter\",\r\n\t\t\t\t\"MLM\": \"mblTooltipBefore\",\r\n\t\t\t\t\"BMT\": \"mblTooltipBelow\",\r\n\t\t\t\t\"TMB\": \"mblTooltipAbove\",\r\n\t\t\t\t\"BLT\": \"mblTooltipBelow\",\r\n\t\t\t\t\"TLB\": \"mblTooltipAbove\",\r\n\t\t\t\t\"BRT\": \"mblTooltipBelow\",\r\n\t\t\t\t\"TRB\": \"mblTooltipAbove\",\r\n\t\t\t\t\"TLT\": \"mblTooltipBefore\",\r\n\t\t\t\t\"TRT\": \"mblTooltipAfter\",\r\n\t\t\t\t\"BRB\": \"mblTooltipAfter\",\r\n\t\t\t\t\"BLB\": \"mblTooltipBefore\"\r\n\t\t\t};\r\n\t\t\tdomClass.remove(domNode, [\"mblTooltipAfter\",\"mblTooltipBefore\",\"mblTooltipBelow\",\"mblTooltipAbove\"]);\r\n\t\t\tarray.forEach(registry.findWidgets(domNode), function(widget){\r\n\t\t\t\tif(widget.height == \"auto\" && typeof widget.resize == \"function\"){\r\n\t\t\t\t\tif(!widget._parentPadBorderExtentsBottom){\r\n\t\t\t\t\t\twidget._parentPadBorderExtentsBottom = domGeometry.getPadBorderExtents(domNode).b;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twidget.resize();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// Convert before/after to before-centered/after-centered for compatibility\r\n\t\t\t// TODO remove this 1.7->1.8 compatibility code in 2.0\r\n\t\t\tif(positions){\r\n\t\t\t\tpositions = array.map(positions, function(pos){\r\n\t\t\t\t\treturn {after: \"after-centered\", before: \"before-centered\"}[pos] || pos;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar best = place.around(domNode, aroundNode, positions || [\"below-centered\", \"above-centered\", \"after-centered\", \"before-centered\"], this.isLeftToRight());\r\n\t\t\tvar connectorClass = connectorClasses[best.corner + best.aroundCorner.charAt(0)] || \"\";\r\n\t\t\tdomClass.add(domNode, connectorClass);\r\n\t\t\tvar pos = domGeometry.position(aroundNode, true);\r\n\t\t\tdomStyle.set(this.anchor, (connectorClass == \"mblTooltipAbove\" || connectorClass == \"mblTooltipBelow\")\r\n\t\t\t\t? { top: \"\", left: Math.max(0, pos.x - best.x + (pos.w >> 1) - (this.arrow.offsetWidth >> 1)) + \"px\" }\r\n\t\t\t\t: { left: \"\", top: Math.max(0, pos.y - best.y + (pos.h >> 1) - (this.arrow.offsetHeight >> 1)) + \"px\" }\r\n\t\t\t);\r\n\t\t\tdomClass.replace(domNode, \"mblTooltipVisible\", \"mblTooltipHidden\");\r\n\t\t\tthis.resize = lang.hitch(this, \"show\", aroundNode, positions); // orientation changes\r\n\t\t\treturn best;\r\n\t\t},\r\n\r\n\t\thide: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tPop down the tooltip\r\n\t\t\tthis.resize = undefined;\r\n\t\t\tdomClass.replace(this.domNode, \"mblTooltipHidden\", \"mblTooltipVisible\");\r\n\t\t},\r\n\r\n\t\tonBlur: function(/*Event*/e){\r\n\t\t\treturn true; // touching outside the overlay area does call hide() by default\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\tif(this.anchor){\r\n\t\t\t\tthis.anchor.removeChild(this.innerArrow);\r\n\t\t\t\tthis.anchor.removeChild(this.arrow);\r\n\t\t\t\tthis.domNode.removeChild(this.anchor);\r\n\t\t\t\tthis.anchor = this.arrow = this.innerArrow = undefined;\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn has(\"dojo-bidi\") ? declare(\"dojox.mobile.Tooltip\", [Tooltip, BidiTooltip]) : Tooltip;\t\t\r\n});\r\n"]}