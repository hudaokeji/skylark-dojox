{"version":3,"sources":["mobile/IconItem.js"],"names":["define","declare","event","lang","has","win","domClass","domConstruct","domGeometry","domStyle","ItemBase","Badge","TransitionEvent","iconUtils","lazyLoadUtils","viewRegistry","css3","BidiIconItem","IconItem","lazy","requires","timeout","content","badge","badgeClass","deletable","deleteIcon","tag","paramsToInherit","baseClass","_selStartMethod","_selEndMethod","destroy","this","badgeObj","inherited","arguments","buildRendering","domNode","srcNodeRef","create","_tmpNode","i","len","childNodes","length","appendChild","firstChild","iconDivNode","className","iconParentNode","labelNode","startup","_started","p","getParent","require","iconItemPaneClass","hitch","module","w","paneWidget","iconItemPaneProps","containerNode","paneContainerWidget","addChild","getIndexInParent","set","label","_clickCloseHandle","connect","closeIconNode","_keydownCloseHandle","_isOnLine","undefined","_pendingIcon","icon","defaultIcon","_dragstartHandle","stop","highlight","add","_this","defer","unhighlight","remove","isOpen","e","_onClick","isEditing","type","keyCode","onClick","defaultClickAction","_onNewWindowOpened","_prepareForTransition","transOpts","d","transition","close","open","_closeIconClicked","closeIconClicked","parent","single","closeAll","_open_1","_opening","closeHeaderNode","style","display","appView","_heading","moveTo","id","getTransOpts","dispatch","show","instantiateLazyWidgets","scrollIntoView","onOpen","node","s","getEnclosingScrollable","dim","getDim","c","h","global","scrollBy","position","y","noAnimation","contentNode","nodePos","targetPos","origin","x","transformOrigin","hide","onClose","_setLabelAttr","text","_cv","innerHTML","_getBadgeAttr","getValue","_setBadgeAttr","value","fontSize","top","right","setValue","removeChild","_setDeleteIconAttr","_set","deleteIconNode","setIcon","deleteIconPos","deleteIconTitle","alt","deleteIconRole","setAttribute","_setContentAttr","data","root","empty","_setSelectedAttr","selected","iconNode","pressedIconOpacity"],"mappings":"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","file":"../../mobile/IconItem.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/event\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/sniff\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\",\r\n\t\"./_ItemBase\",\r\n\t\"./Badge\",\r\n\t\"./TransitionEvent\",\r\n\t\"./iconUtils\",\r\n\t\"./lazyLoadUtils\",\r\n\t\"./viewRegistry\",\r\n\t\"./_css3\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/IconItem\"\r\n], function(declare, event, lang, has, win, domClass, domConstruct, domGeometry, domStyle, ItemBase, Badge, TransitionEvent, iconUtils, lazyLoadUtils, viewRegistry, css3, BidiIconItem){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/IconItem\r\n\r\n\tvar IconItem = declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiIconItem\" : \"dojox.mobile.IconItem\", ItemBase, {\r\n\t\t// summary:\r\n\t\t//\t\tAn icon item widget.\r\n\t\t// description:\r\n\t\t//\t\tIconItem represents an item that has an application component\r\n\t\t//\t\tand its icon image. You can tap the icon to open the\r\n\t\t//\t\tcorresponding application component. You can also use the icon\r\n\t\t//\t\tto move to a different view by specifying either of the moveTo,\r\n\t\t//\t\thref or url parameters.\r\n\r\n\t\t// lazy: String\r\n\t\t//\t\tIf true, the content of the widget, which includes dojo markup,\r\n\t\t//\t\tis instantiated lazily. That is, only when the widget is opened\r\n\t\t//\t\tby the user, the required modules are loaded and the content\r\n\t\t//\t\twidgets are instantiated.\r\n\t\t//\t\tThis option works both in the sync and async loader mode.\r\n\t\tlazy: false,\r\n\r\n\t\t// requires: String\r\n\t\t//\t\tComma-separated required module names to be lazily loaded. This\r\n\t\t//\t\tproperty is effective only when lazy=true. All the modules\r\n\t\t//\t\tspecified with data-dojo-type and their depending modules are\r\n\t\t//\t\tautomatically loaded by the IconItem when it is opened.\r\n\t\t//\t\tHowever, if you need other extra modules to be loaded, use this parameter.\r\n\t\t//\t\tThis option works both in the sync and async loader mode.\r\n\t\trequires: \"\",\r\n\r\n\t\t// timeout: String\r\n\t\t//\t\tDuration of highlight in seconds.\r\n\t\ttimeout: 10,\r\n\r\n\t\t// content: String\r\n\t\t//\t\tAn HTML fragment to embed as icon content.\r\n\t\tcontent: \"\",\r\n\r\n\t\t// badge: String\r\n\t\t//\t\tA text to show in a badge (ex. \"55\").\r\n\t\tbadge: \"\",\r\n\r\n\t\t// badgeClass: String\r\n\t\t//\t\tA class name of a DOM button for a badge.\r\n\t\tbadgeClass: \"mblDomButtonRedBadge\",\r\n\r\n\t\t// deletable: Boolean\r\n\t\t//\t\tIf true, you can delete this IconItem by clicking on the delete\r\n\t\t//\t\ticon during edit mode.\r\n\t\t//\t\tIf false, the delete icon is not displayed during edit mode so\r\n\t\t//\t\tthat it cannot be deleted.\r\n\t\tdeletable: true,\r\n\r\n\t\t// deleteIcon: String\r\n\t\t//\t\tA delete icon to display at the top-left corner of the item\r\n\t\t//\t\tduring edit mode. The value can be either a path for an image\r\n\t\t//\t\tfile or a class name of a DOM button.\r\n\t\tdeleteIcon: \"\",\r\n\r\n\t\t// tag: String\r\n\t\t//\t\tA name of the HTML tag to create as domNode.\r\n\t\ttag: \"li\",\r\n\r\n\t\t/* internal properties */\t\r\n\t\t// Note these are overrides for similar properties defined in _ItemBase.\r\n\t\tparamsToInherit: \"transition,icon,deleteIcon,badgeClass,deleteIconTitle,deleteIconRole\",\r\n\t\tbaseClass: \"mblIconItem\",\r\n\t\t_selStartMethod: \"touch\",\r\n\t\t_selEndMethod: \"none\",\r\n\r\n\t\tdestroy: function(){\r\n\t\t\tif(this.badgeObj){\r\n\t\t\t\tdelete this.badgeObj;\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.domNode = this.srcNodeRef || domConstruct.create(this.tag);\r\n\r\n\t\t\tif(this.srcNodeRef){\r\n\t\t\t\t// reparent\r\n\t\t\t\tthis._tmpNode = domConstruct.create(\"div\");\r\n\t\t\t\tfor(var i = 0, len = this.srcNodeRef.childNodes.length; i < len; i++){\r\n\t\t\t\t\tthis._tmpNode.appendChild(this.srcNodeRef.firstChild);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.iconDivNode = domConstruct.create(\"div\", {className:\"mblIconArea\"}, this.domNode);\r\n\t\t\tthis.iconParentNode = domConstruct.create(\"div\", {className:\"mblIconAreaInner\"}, this.iconDivNode);\r\n\t\t\tthis.labelNode = domConstruct.create(\"span\", {className:\"mblIconAreaTitle\"}, this.iconDivNode);\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\r\n\t\t\tvar p = this.getParent();\r\n\t\t\trequire([p.iconItemPaneClass], lang.hitch(this, function(module){\r\n\t\t\t\tvar w = this.paneWidget = new module(p.iconItemPaneProps);\r\n\t\t\t\tthis.containerNode = w.containerNode;\r\n\t\t\t\tif(this._tmpNode){\r\n\t\t\t\t\t// reparent\r\n\t\t\t\t\tfor(var i = 0, len = this._tmpNode.childNodes.length; i < len; i++){\r\n\t\t\t\t\t\tw.containerNode.appendChild(this._tmpNode.firstChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._tmpNode = null;\r\n\t\t\t\t}\r\n\t\t\t\tp.paneContainerWidget.addChild(w, this.getIndexInParent());\r\n\t\t\t\tw.set(\"label\", this.label);\r\n\t\t\t\tthis._clickCloseHandle = this.connect(w.closeIconNode, \"onclick\", \"_closeIconClicked\");\r\n\t\t\t\tthis._keydownCloseHandle = this.connect(w.closeIconNode, \"onkeydown\", \"_closeIconClicked\"); // for desktop browsers\r\n\t\t\t}));\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tif(!this._isOnLine){\r\n\t\t\t\tthis._isOnLine = true;\r\n\t\t\t\t// retry applying the attribute for which the custom setter delays the actual \r\n\t\t\t\t// work until _isOnLine is true. \r\n\t\t\t\tthis.set(\"icon\", this._pendingIcon !== undefined ? this._pendingIcon : this.icon);\r\n\t\t\t\t// Not needed anymore (this code executes only once per life cycle):\r\n\t\t\t\tdelete this._pendingIcon; \r\n\t\t\t}\r\n\t\t\tif(!this.icon && p.defaultIcon){\r\n\t\t\t\tthis.set(\"icon\", p.defaultIcon);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dragstartHandle = this.connect(this.domNode, \"ondragstart\", event.stop);\r\n\t\t\tthis.connect(this.domNode, \"onkeydown\", \"_onClick\"); // for desktop browsers\r\n\t\t},\r\n\r\n\t\thighlight: function(/*Number?*/timeout){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tShakes the icon 10 seconds.\r\n\t\t\tdomClass.add(this.iconDivNode, \"mblVibrate\");\r\n\t\t\ttimeout = (timeout !== undefined) ? timeout : this.timeout;\r\n\t\t\tif(timeout > 0){\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.defer(function(){\r\n\t\t\t\t\t_this.unhighlight();\r\n\t\t\t\t}, timeout*1000);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tunhighlight: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStops shaking the icon.\r\n\t\t\tif(!has(\"ie\") && has(\"trident\") === 7){\r\n\t\t\t\t// Workaround on IE11: if just removing the style, the icon continues to shake\r\n\t\t\t\tdomStyle.set(this.iconDivNode, \"animation-name\", \"\");\r\n\t\t\t}\r\n\t\t\tdomClass.remove(this.iconDivNode, \"mblVibrate\");\r\n\t\t},\r\n\r\n\t\tisOpen: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns true if the icon is open.\r\n\t\t\treturn this.paneWidget.isOpen();\r\n\t\t},\r\n\r\n\t\t_onClick: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal handler for click events.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this.getParent().isEditing || e && e.type === \"keydown\" && e.keyCode !== 13){ return; }\r\n\t\t\tif(this.onClick(e) === false){ return; } // user's click action\r\n\t\t\tthis.defaultClickAction(e);\r\n\t\t},\r\n\r\n\t\tonClick: function(/*Event*/ /*===== e =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUser-defined function to handle clicks.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tcallback\r\n\t\t},\r\n\r\n\t\t_onNewWindowOpened: function(e){\r\n\t\t\t// Override from _ItemBase\r\n\t\t\tthis.set(\"selected\", false);\r\n\t\t},\r\n\r\n\t\t_prepareForTransition: function(e, transOpts){\r\n\t\t\t// Override from _ItemBase\r\n\t\t\tif(transOpts){\r\n\t\t\t\tthis.defer(function(d){\r\n\t\t\t\t\tthis.set(\"selected\", false);\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tif(this.getParent().transition === \"below\" && this.isOpen()){\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.open(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_closeIconClicked: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal handler for click events.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(e){\r\n\t\t\t\tif(e.type === \"keydown\" && e.keyCode !== 13){ return; }\r\n\t\t\t\tif(this.closeIconClicked(e) === false){ return; } // user's click action\r\n\t\t\t\tthis.defer(function(d){ this._closeIconClicked(); });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.close();\r\n\t\t},\r\n\r\n\t\tcloseIconClicked: function(/*Event*/ /*===== e =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUser-defined function to handle clicks for the close icon.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tcallback\r\n\t\t},\r\n\r\n\t\topen: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOpens the icon content, or makes a transition.\r\n\t\t\tvar parent = this.getParent(); // IconContainer\r\n\t\t\tif(this.transition === \"below\"){\r\n\t\t\t\tif(parent.single){\r\n\t\t\t\t\tparent.closeAll();\r\n\t\t\t\t}\r\n\t\t\t\tthis._open_1();\r\n\t\t\t}else{\r\n\t\t\t\tparent._opening = this;\r\n\t\t\t\tif(parent.single){\r\n\t\t\t\t\tthis.paneWidget.closeHeaderNode.style.display = \"none\";\r\n\t\t\t\t\tif(!this.isOpen()){\r\n\t\t\t\t\t\tparent.closeAll();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparent.appView._heading.set(\"label\", this.label);\r\n\t\t\t\t}\r\n\t\t\t\tthis.moveTo = parent.id + \"_mblApplView\";\r\n\t\t\t\tnew TransitionEvent(this.domNode, this.getTransOpts(), e).dispatch();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_open_1: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOpens the icon content for the 'below' transition.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.paneWidget.show();\r\n\t\t\tthis.unhighlight();\r\n\t\t\tif(this.lazy){\r\n\t\t\t\tlazyLoadUtils.instantiateLazyWidgets(this.containerNode, this.requires);\r\n\t\t\t\tthis.lazy = false;\r\n\t\t\t}\r\n\t\t\tthis.scrollIntoView(this.paneWidget.domNode);\r\n\t\t\tthis.onOpen();\r\n\t\t},\r\n\r\n\t\tscrollIntoView: function(/*DomNode*/node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tScrolls until the given node is in the view.\r\n\t\t\tvar s = viewRegistry.getEnclosingScrollable(node);\r\n\t\t\tif(s){ // this node is placed inside scrollable\r\n\t\t\t\tvar dim = s.getDim();\r\n\t\t\t\tif(dim.c.h >= dim.d.h){ // #16306: only if the content is larger than the display area \r\n\t\t\t\t\ts.scrollIntoView(node, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\twin.global.scrollBy(0, domGeometry.position(node, false).y);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(/*Boolean?*/noAnimation){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCloses the icon content.\r\n\t\t\tif(!this.isOpen()){ return; }\r\n\t\t\tthis.set(\"selected\", false);\r\n\t\t\tif(has(\"css3-animations\") && !noAnimation){\r\n\t\t\t\tvar contentNode = this.paneWidget.domNode;\r\n\t\t\t\tif(this.getParent().transition == \"below\"){\r\n\t\t\t\t\tdomClass.add(contentNode, \"mblCloseContent mblShrink\");\r\n\t\t\t\t\tvar nodePos = domGeometry.position(contentNode, true);\r\n\t\t\t\t\tvar targetPos = domGeometry.position(this.domNode, true);\r\n\t\t\t\t\tvar origin = (targetPos.x + targetPos.w/2 - nodePos.x) + \"px \" + (targetPos.y + targetPos.h/2 - nodePos.y) + \"px\";\r\n\t\t\t\t\tdomStyle.set(contentNode, css3.add({}, { transformOrigin:origin }));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdomClass.add(contentNode, \"mblCloseContent mblShrink0\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.paneWidget.hide();\r\n\t\t\t}\r\n\t\t\tthis.onClose();\r\n\t\t},\r\n\r\n\t\tonOpen: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStub method to allow the application to connect.\r\n\t\t},\r\n\r\n\t\tonClose: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStub method to allow the application to connect.\r\n\t\t},\r\n\r\n\t\t_setLabelAttr: function(/*String*/text){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.label = text;\r\n\t\t\tvar s = this._cv ? this._cv(text) : text;\r\n\t\t\tthis.labelNode.innerHTML = s;\r\n\t\t\tif(this.paneWidget){\r\n\t\t\t\tthis.paneWidget.set(\"label\", text);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getBadgeAttr: function(){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\treturn this.badgeObj ? this.badgeObj.getValue() : null;\r\n\t\t},\r\n\r\n\t\t_setBadgeAttr: function(/*String*/value){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(!this.badgeObj){\r\n\t\t\t\tthis.badgeObj = new Badge({fontSize:14, className:this.badgeClass});\r\n\t\t\t\tdomStyle.set(this.badgeObj.domNode, {\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\ttop: \"-2px\",\r\n\t\t\t\t\tright: \"2px\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.badgeObj.setValue(value);\r\n\t\t\tif(value){\r\n\t\t\t\tthis.iconDivNode.appendChild(this.badgeObj.domNode);\r\n\t\t\t}else{\r\n\t\t\t\tthis.iconDivNode.removeChild(this.badgeObj.domNode);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDeleteIconAttr: function(icon){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(!this.getParent()){ return; } // icon may be invalid because inheritParams is not called yet\r\n\r\n\t\t\tthis._set(\"deleteIcon\", icon);\r\n\t\t\ticon = this.deletable ? icon : \"\";\r\n\t\t\tthis.deleteIconNode = iconUtils.setIcon(icon, this.deleteIconPos, this.deleteIconNode, \r\n\t\t\t\t\tthis.deleteIconTitle || this.alt, this.iconDivNode);\r\n\t\t\tif(this.deleteIconNode){\r\n\t\t\t\tdomClass.add(this.deleteIconNode, \"mblIconItemDeleteIcon\");\r\n\t\t\t\tif(this.deleteIconRole){\r\n\t\t\t\t\tthis.deleteIconNode.setAttribute(\"role\", this.deleteIconRole);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setContentAttr: function(/*String|DomNode*/data){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar root;\r\n\t\t\tif(!this.paneWidget){\r\n\t\t\t\tif(!this._tmpNode){\r\n\t\t\t\t\tthis._tmpNode = domConstruct.create(\"div\");\r\n\t\t\t\t}\r\n\t\t\t\troot = this._tmpNode;\r\n\t\t\t}else{\r\n\t\t\t\troot = this.paneWidget.containerNode;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"object\"){\r\n\t\t\t\tdomConstruct.empty(root);\r\n\t\t\t\troot.appendChild(data);\r\n\t\t\t}else{\r\n\t\t\t\troot.innerHTML = data;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setSelectedAttr: function(/*Boolean*/selected){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tMakes this widget in the selected or unselected state.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.iconNode && domStyle.set(this.iconNode, \"opacity\",\r\n\t\t\t\t\t\t selected ? this.getParent().pressedIconOpacity : 1);\r\n\t\t}\r\n\t});\r\n\r\n\treturn has(\"dojo-bidi\") ? declare(\"dojox.mobile.IconItem\", [IconItem, BidiIconItem]) : IconItem;\r\n});\r\n"]}