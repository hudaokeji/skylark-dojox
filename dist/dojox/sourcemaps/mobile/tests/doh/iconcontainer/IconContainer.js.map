{"version":3,"sources":["mobile/tests/doh/iconcontainer/IconContainer.js"],"names":["dojo","addOnLoad","doh","register","name","timeout","runTest","d","Deferred","setTimeout","getTestCallback","demoWidget","dijit","byId","assertEqual","domNode","className","paneWidget","style","display","fireOnMouseDown","fireOnMouseUp","verifyIconItem","set","transition","pressedIconOpacity","get","icon","assertTrue","childNodes","src","search","container","item","paneContainerWidget","getParent","getIndexInParent","index","removeChild","addChild","urlView","window","testCallback1Ok","_onClick","clientX","clientY","testCallback2Ok","run"],"mappings":"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","file":"../../../../../mobile/tests/doh/iconcontainer/IconContainer.js","sourcesContent":["dojo.addOnLoad(function(){\r\n\tdoh.register(\"dojox.mobile.test.doh.IconContainer\", [\r\n\t\t{\r\n\t\t\tname: \"IconContainer Verification\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_IconContainer_0\");\r\n\t\t\t\t\tdoh.assertEqual('mblIconContainer', demoWidget.domNode.className);\r\n\t\t\t\t\t\r\n\t\t\t\t}));\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"IconItem Verification\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_IconItem_0\");\r\n\t\t\t\tvar e;\r\n\t\t\t\t//lazy loading\r\n\r\n\t\t\t\tdoh.assertEqual('none', demoWidget.paneWidget.domNode.style.display);\r\n//\t\t\t\tfireOnClick(demoWidget.domNode.childNodes[0].childNodes[0].childNodes[0]);\r\n\t\t\t\tfireOnMouseDown(demoWidget.domNode);\r\n\t\t\t\tfireOnMouseUp(demoWidget.domNode);\r\n\r\n\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_IconItem_1\");\r\n\t\t\t\tdoh.assertEqual('none', demoWidget.paneWidget.domNode.style.display);\r\n//\t\t\t\tfireOnClick(demoWidget.domNode.childNodes[0].childNodes[0].childNodes[0]);\r\n\t\t\t\tfireOnMouseDown(demoWidget.domNode);\r\n\t\t\t\tfireOnMouseUp(demoWidget.domNode);\r\n\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tverifyIconItem(\"dojox_mobile_IconItem_0\", 'app1', '', /icon3.png/i);\r\n\t\t\t\t\tverifyIconItem(\"dojox_mobile_IconItem_1\", 'app2', '', /icon3.png/i);\r\n\t\t\t\t}),2000);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"IconContainer set\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_IconContainer_0\");\r\n\t\t\t\tdemoWidget.set({transition:\"slide\", pressedIconOpacity:\"0.8\"});\r\n\r\n\t\t\t\tdoh.assertEqual(0.8, demoWidget.get(\"pressedIconOpacity\"));\r\n\t\t\t\tdoh.assertEqual(\"slide\", demoWidget.get(\"transition\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"IconItem set\",\r\n\t\t\ttimeout: 1000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_IconItem_1\");\r\n\t\t\t\tdemoWidget.set({icon:\"../../images/icon1.png\"});\r\n\t\t\t\tdoh.assertEqual(\"../../images/icon1.png\", demoWidget.get(\"icon\"));\r\n\t\t\t\tdoh.assertTrue(demoWidget.domNode.childNodes[0].childNodes[0].childNodes[0].src.search(/icon1.png/i) != -1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"IconItem add/removeChild and pane widgets consistency\",\r\n\t\t\ttimeout: 1000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\t// Checks that pane widgets are added/removed to the pane container by addChild/removeChild\r\n\t\t\t\t\r\n\t\t\t\tvar container = dijit.byId(\"dojox_mobile_IconContainer_0\");\r\n\t\t\t\tvar item = dijit.byId(\"dojox_mobile_IconItem_1\");\r\n\t\t\t\t\r\n\t\t\t\tdoh.assertEqual(container.paneContainerWidget, item.paneWidget.getParent(), \"wrong pane parent at startup\");\r\n\t\t\t\tdoh.assertEqual(item.getIndexInParent(), item.paneWidget.getIndexInParent(), \"wrong pane index at startup\");\r\n\r\n\t\t\t\tvar index = item.getIndexInParent();\t\t\t\t\r\n\t\t\t\tcontainer.removeChild(item);\r\n\r\n\t\t\t\tdoh.assertEqual(null, item.paneWidget.getParent(), \"wrong pane parent after remove\");\r\n\t\t\t\t\r\n\t\t\t\tcontainer.addChild(item, index);\r\n\r\n\t\t\t\tdoh.assertEqual(container.paneContainerWidget, item.paneWidget.getParent(), \"wrong pane parent after add\");\r\n\t\t\t\tdoh.assertEqual(item.getIndexInParent(), item.paneWidget.getIndexInParent(), \"wrong pane index after add\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Function callback triggered after transition to url\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\r\n\t\t\t\t// Click the \"url 2\" icon item\r\n\t\t\t\tvar demoWidget = dijit.byId(\"url2\");\r\n\t\t\t\tfireOnMouseDown(demoWidget.domNode);\r\n\t\t\t\tfireOnMouseUp(demoWidget.domNode);\r\n\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tvar urlView = dijit.byId(\"bar\");\r\n\t\t\t\t\tdoh.assertTrue(urlView != null, \"url2 transitionTo view not created\");\r\n\t\t\t\t\tdoh.assertTrue(window.testCallback1Ok === true, \"callback not executed after url2 transition\");\r\n\t\t\t\t}),2000);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"String callback triggered after transition to url\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\r\n\t\t\t\t// click back button of the view displayed in the previous test\r\n\t\t\t\tdijit.byId(\"dojox_mobile_ToolBarButton_1\")._onClick({clientX: 0, clientY: 0});\r\n\r\n\t\t\t\t// Click the \"url 3\" icon item\r\n\t\t\t\tvar demoWidget = dijit.byId(\"url3\");\r\n\t\t\t\tfireOnMouseDown(demoWidget.domNode);\r\n\t\t\t\tfireOnMouseUp(demoWidget.domNode);\r\n\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tvar urlView = dijit.byId(\"bar\");\r\n\t\t\t\t\tdoh.assertTrue(urlView != null, \"url3 transitionTo view not created\");\r\n\t\t\t\t\tdoh.assertTrue(window.testCallback2Ok === true, \"callback not executed after url3 transition\");\r\n\t\t\t\t}),2000);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t}\r\n\t]);\r\n\tdoh.run();\r\n});\r\n"]}