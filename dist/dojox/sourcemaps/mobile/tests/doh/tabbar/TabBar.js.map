{"version":3,"sources":["mobile/tests/doh/tabbar/TabBar.js"],"names":["dojo","addOnLoad","CLASSNAMES1","CLASSNAMES2","geom","require","checkSpreadedChildren","tabBarId","nbOfButtons","tabBarPaddingPlusBorderPlusMarginWidth","tabBarPosition","position","tabBarButtonsPositions","i","node","byId","console","log","doh","assertEqual","Math","round","w","j","register","name","timeout","runTest","d","Deferred","setTimeout","getTestCallback","demoWidget","dijit","assertTrue","hasClass","domNode","id","className","verifyTabBarButton","verifyRect","iconNode1","childNodes","iconNode2","set","label","selected","icon1","icon2","run"],"mappings":"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","file":"../../../../../mobile/tests/doh/tabbar/TabBar.js","sourcesContent":["dojo.addOnLoad(function(){\r\n\tvar CLASSNAMES1 = [\"mblTabBarButton\", \"mblTabBarButtonSelected\"];\r\n\tvar CLASSNAMES2 = [\"mblTabBarButton\", \"mblTabBarButtonHasIcon\", \"mblTabBarButtonSelected\"];\r\n\tvar geom = require(\"dojo/dom-geometry\");\r\n\tvar checkSpreadedChildren = function(/* String */ tabBarId, /* Number */ nbOfButtons, /* Number */ tabBarPaddingPlusBorderPlusMarginWidth){\r\n\t\tvar tabBarPosition = geom.position(tabBarId);\r\n\t\tvar tabBarButtonsPositions = [];\r\n\t\tfor (var i=1; i <= nbOfButtons; i++){\r\n\t\t\tvar node = dojo.byId(tabBarId + \"-button\" + i);\r\n\t\t\ttabBarButtonsPositions[i] = geom.position(node);\r\n\t\t}\r\n\t\tconsole.log(tabBarId);\r\n\t\tconsole.log(tabBarPosition);\r\n\t\tconsole.log(tabBarButtonsPositions);\r\n\t\tdoh.assertEqual(Math.round(tabBarPosition.w - tabBarPaddingPlusBorderPlusMarginWidth), Math.round(tabBarButtonsPositions[1].w * nbOfButtons), tabBarId + \" > button 1 size\");\r\n\t\tfor (var j=2; j <= nbOfButtons; j++){\r\n\t\t\tdoh.assertEqual(Math.round(tabBarButtonsPositions[1].w), Math.round(tabBarButtonsPositions[j].w), tabBarId + \" > button \" + j + \" size\");\r\n\t\t}\r\n\t};\r\n\tdoh.register(\"dojox.mobile.test.doh.TabBar\", [\r\n\t\t{\r\n\t\t\tname: \"TabBar and TabBarButton Verification\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_TabBar_0\");\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBar'),'mblTabBar ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBarSegmentedControl'), 'mblTabBarSegmentedControl ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"dojox_mobile_TabBarButton_0\", 'New', CLASSNAMES1, 'hidden', '', /tab-icon-16.png/i, /tab-icon-16h.png/);\r\n\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBar_1\");\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBar'),'mblTabBar ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBarTabBar'), 'mblTabBarTabBar ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"dojox_mobile_TabBarButton_3\", 'New', CLASSNAMES2, 'hidden', '', /tab-icon-16.png/i, /tab-icon-16h.png/);\r\n\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBar_2\");\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBar'),'mblTabBar ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\t\t\t\t\tdoh.assertTrue(dojo.hasClass(demoWidget.domNode, 'mblTabBarTabBar'), 'mblTabBarTabBar ' + \" id=\" + demoWidget.id + \" value=\" + demoWidget.domNode.className);\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"dojox_mobile_TabBarButton_6\", 'Featured', CLASSNAMES2, 'hidden', '', /tab-icons.png/i, /tab-icons.png/i, true);\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBarButton_6\");\r\n\t\t\t\t\tverifyRect(demoWidget.iconNode1.childNodes[0], \"0px\", \"29px\", \"29px\", \"0px\");\r\n\t\t\t\t\tverifyRect(demoWidget.iconNode2.childNodes[0], \"29px\", \"29px\", \"58px\", \"0px\");\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"tbbBadge1\", 'Foo', [\"mblTabBarButton\", \"mblTabBarButtonHasIcon\"], '', '', /tab-icon-16.png/i, /tab-icon-16h.png/i);\r\n\t\t\t\t\tverifyTabBarButton(\"tbbBadge2\", 'Bar', [\"mblTabBarButton\", \"mblTabBarButtonHasIcon\"], '', '', /tab-icon-15.png/i, /tab-icon-15h.png/i);\r\n\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"TabBar and TabBarButton set\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tvar demoWidget = dijit.byId(\"dojox_mobile_TabBar_0\");\r\n\r\n\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBarButton_2\");\r\n\t\t\t\t\tdemoWidget.set({label:\"New Value\"});\r\n//\t\t\t\t\tdemoWidget.select();\r\n\t\t\t\t\tdemoWidget.set({selected:true});\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"dojox_mobile_TabBarButton_2\", 'New Value', CLASSNAMES1, 'hidden', '', /tab-icon-10.png/i, /tab-icon-10h.png/);\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBarButton_5\");\r\n\t\t\t\t\tdemoWidget.set({label:\"New Value\", icon1:\"../../images/tab-icon-11.png\", icon2:\"../../images/tab-icon-11h.png\"});\r\n//\t\t\t\t\tdemoWidget.select();\r\n\t\t\t\t\tdemoWidget.set(\"selected\",true);\r\n\r\n\t\t\t\t\tverifyTabBarButton(\"dojox_mobile_TabBarButton_5\", 'New Value', CLASSNAMES2, 'hidden', '', /tab-icon-11.png/i, /tab-icon-11h.png/)\r\n\r\n\t\t\t\t\tdemoWidget = dijit.byId(\"dojox_mobile_TabBarButton_4\");\r\n\t\t\t\t\tdemoWidget.set({icon1:null, icon2:null});\r\n\t\t\t\t\tdoh.assertEqual(null, demoWidget.iconNode1, demoWidget.domNode.id);\r\n\t\t\t\t\tdoh.assertEqual(null, demoWidget.iconNode2, demoWidget.domNode.id);\r\n\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on segmented control\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-sc\", 3, 12);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on tab Bar\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-tb\", 3, 12);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on tab Bar (CSS Sprite)\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-tb-css\", 5, 12);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on slim tab\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-st\", 4, 2);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on standard bar\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-std\", 4, 12);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on flat bar\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-flat\", 4, 0);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"fill='always' on tall bar\",\r\n\t\t\ttimeout: 4000,\r\n\t\t\trunTest: function(){\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tsetTimeout(d.getTestCallback(function(){\r\n\t\t\t\t\tcheckSpreadedChildren(\"spread-tall\", 4, 12);\r\n\t\t\t\t}),500);\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t}\r\n\t]);\r\n\tdoh.run();\r\n});\r\n"]}