{"version":3,"sources":["mobile/Audio.js"],"names":["define","declare","domConstruct","has","Contained","WidgetBase","source","width","height","_playable","_tag","constructor","this","buildRendering","domNode","srcNodeRef","create","_getEmbedRegExp","startup","_started","i","len","re","inherited","arguments","canPlayType","length","src","type","childNodes","n","nodeType","nodeName","push","add","match","node","parentNode","replaceChild"],"mappings":";;;;;;;AAAAA,QACC,qBACA,qBACA,aACA,mBACA,qBACE,SAASC,EAASC,EAAcC,EAAKC,EAAWC,GAIlD,OAAOJ,EAAQ,sBAAuBI,EAAYD,IAgBjDE,OAAQ,KAMRC,MAAO,QAMPC,OAAQ,OAIRC,WAAW,EAIXC,KAAM,QAENC,YAAa,WAGZC,KAAKN,WAGNO,eAAgB,WACfD,KAAKE,QAAUF,KAAKG,YAAcb,EAAac,OAAOJ,KAAKF,OAG5DO,gBAAiB,WAGhB,OAAOd,EAAI,MAAQ,eACfA,EAAI,MAAQ,cACZ,MAGLe,QAAS,WACR,IAAGN,KAAKO,SAAR,CAEA,IAAIC,EAAGC,EAAKC,EACX,GAFDV,KAAKW,UAAUC,WAEXZ,KAAKE,QAAQW,YAChB,GAAGb,KAAKN,OAAOoB,OAAS,EACvB,IAAIN,EAAI,EAAGC,EAAMT,KAAKN,OAAOoB,OAAQN,EAAIC,EAAKD,IAC7ClB,EAAac,OAAO,UAAWW,IAAIf,KAAKN,OAAOc,GAAGO,IAAKC,KAAKhB,KAAKN,OAAOc,GAAGQ,MAAOhB,KAAKE,SACvFF,KAAKH,UAAYG,KAAKH,aAAeG,KAAKE,QAAQW,YAAYb,KAAKN,OAAOc,GAAGQ,WAG9E,IAAIR,EAAI,EAAGC,EAAMT,KAAKE,QAAQe,WAAWH,OAAQN,EAAIC,EAAKD,IAAI,CAC7D,IAAIU,EAAIlB,KAAKE,QAAQe,WAAWT,GACd,IAAfU,EAAEC,UAAiC,WAAfD,EAAEE,WACxBpB,KAAKN,OAAO2B,MAAMN,IAAIG,EAAEH,IAAKC,KAAKE,EAAEF,OACpChB,KAAKH,UAAYG,KAAKH,aAAeG,KAAKE,QAAQW,YAAYK,EAAEF,OAMnE,GADDzB,EAAI+B,IAAI,oCAAoC,GACxC/B,EAAI,sCACHS,KAAKH,UACR,IAAIW,EAAI,EAAGC,EAAMT,KAAKN,OAAOoB,OAAQJ,EAAKV,KAAKK,kBAAmBG,EAAIC,EAAKD,IACzE,GAAGR,KAAKN,OAAOc,GAAGQ,KAAKO,MAAMb,GAAI,CACjC,IAAIc,EAAOlC,EAAac,OAAO,SAC9BW,IAAKf,KAAKN,OAAO,GAAGqB,IACpBC,KAAMhB,KAAKN,OAAO,GAAGsB,KACrBrB,MAAOK,KAAKL,MACZC,OAAQI,KAAKJ,SAEdI,KAAKE,QAAQuB,WAAWC,aAAaF,EAAMxB,KAAKE,SAChDF,KAAKE,QAAUsB,EACfxB,KAAKH,WAAY,EACjB","file":"../../mobile/Audio.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/sniff\",\r\n\t\"dijit/_Contained\",\r\n\t\"dijit/_WidgetBase\"\r\n], function(declare, domConstruct, has, Contained, WidgetBase){\r\n\t// module:\r\n\t//\t\tdojox/mobile/Audio\r\n\r\n\treturn declare(\"dojox.mobile.Audio\", [WidgetBase, Contained], {\r\n\t\t// summary:\r\n\t\t//\t\tA thin wrapper around the HTML5 `<audio>` element.\r\n\t\t// description:\r\n\t\t//\t\tdojox/mobile/Audio is a widget which plays audio. If all sources cannot \r\n\t\t//\t\tbe played (typically, in desktop browsers that do not support `<audio>`), \r\n\t\t//\t\tdojox/mobile/Audio automatically replaces `<audio>` with `<embed>`, such \r\n\t\t//\t\tthat the browser tries to play it with a suitable plug-in.\r\n\t\t\r\n\t\t// source: [const] Array\r\n\t\t//\t\tAn array of src and type,\r\n\t\t//\t\tex. [{src:\"a.mp3\", type:\"audio/mpeg\"}, {src:\"a.ogg\", type:\"audio/ogg\"}, ...].\r\n\t\t//\t\tThe src gives the path of the media resource. The type gives the\r\n\t\t//\t\ttype of the media resource.\r\n\t\t//\t\tNote that changing the value of the property after the widget\r\n\t\t//\t\tcreation has no effect.\r\n\t\tsource: null,\r\n\r\n\t\t// width: [const] String\r\n\t\t//\t\tThe width of the embed element. \r\n\t\t//\t\tNote that changing the value of the property after the widget\r\n\t\t//\t\tcreation has no effect.\r\n\t\twidth: \"200px\",\r\n\r\n\t\t// height: [const] String\r\n\t\t//\t\tThe height of the embed element.\r\n\t\t//\t\tNote that changing the value of the property after the widget\r\n\t\t//\t\tcreation has no effect.\r\n\t\theight: \"15px\",\r\n\r\n\t\t// _playable: [private] Boolean\r\n\t\t//\t\tInternal flag.\r\n\t\t_playable: false,\r\n\t\t\r\n\t\t// _tag: [private] String\r\n\t\t//\t\tThe name of the tag (\"audio\").\r\n\t\t_tag: \"audio\",\r\n\r\n\t\tconstructor: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreates a new instance of the class.\r\n\t\t\tthis.source = [];\r\n\t\t},\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.domNode = this.srcNodeRef || domConstruct.create(this._tag);\r\n\t\t},\r\n\r\n\t\t_getEmbedRegExp: function(){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\treturn has('ff') ? /audio\\/mpeg/i :\r\n\t\t\t\t   has('ie') ? /audio\\/wav/i :\r\n\t\t\t\t   null;\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tvar i, len, re;\r\n\t\t \tif(this.domNode.canPlayType){\r\n\t\t\t\tif(this.source.length > 0){\r\n\t\t\t\t\tfor(i = 0, len = this.source.length; i < len; i++){\r\n\t\t\t\t\t\tdomConstruct.create(\"source\", {src:this.source[i].src, type:this.source[i].type}, this.domNode);\r\n\t\t\t\t\t\tthis._playable = this._playable || !!this.domNode.canPlayType(this.source[i].type);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(i = 0, len = this.domNode.childNodes.length; i < len; i++){\r\n\t\t\t\t\t\tvar n = this.domNode.childNodes[i];\r\n\t\t\t\t\t\tif(n.nodeType === 1 && n.nodeName === \"SOURCE\"){\r\n\t\t\t\t\t\t\tthis.source.push({src:n.src, type:n.type});\r\n\t\t\t\t\t\t\tthis._playable = this._playable || !!this.domNode.canPlayType(n.type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thas.add(\"mobile-embed-audio-video-support\", true);\t//It should move to staticHasFeatures\r\n\t\t \tif(has(\"mobile-embed-audio-video-support\")){\r\n\t\t\t\tif(!this._playable){\r\n\t\t\t\t\tfor(i = 0, len = this.source.length, re = this._getEmbedRegExp(); i < len; i++){\r\n\t\t\t\t\t \tif(this.source[i].type.match(re)){\r\n\t\t\t\t\t\t\tvar node = domConstruct.create(\"embed\", {\r\n\t\t\t\t\t\t\t\tsrc: this.source[0].src,\r\n\t\t\t\t\t\t\t\ttype: this.source[0].type,\r\n\t\t\t\t\t\t\t\twidth: this.width,\r\n\t\t\t\t\t\t\t\theight: this.height\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.domNode.parentNode.replaceChild(node, this.domNode);\r\n\t\t\t\t\t\t\tthis.domNode = node;\r\n\t\t\t\t\t\t\tthis._playable = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n});\r\n"]}