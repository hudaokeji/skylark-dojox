{"version":3,"sources":["mobile/bidi/common.js"],"names":["define","array","_BidiSupport","common","enforceTextDirWithUcc","text","textDir","prototype","_checkContextual","MARK","RLE","LRE","PDF","removeUCCFromText","replace","setTextDirForButtons","widget","children","getChildren","forEach","ch","set"],"mappings":";;;;;;;AAAAA,QAAQ,mBAAoB,sBAAuB,SAASC,EAAOC,GASjE,IAAIC,GACJC,sBAA+B,SAASC,EAAMC,GAW7C,OAAGA,GAEmB,SADrBA,EAAuB,SAAZA,EAAsBJ,EAAaK,UAAUC,iBAAiBH,GAAQC,GACnDH,EAAOM,KAAKC,IAAMP,EAAOM,KAAKE,KAAON,EAAOF,EAAOM,KAAKG,IAEhFP,GAGRQ,kBAA2B,SAASR,GAKnC,OAAKA,EAGEA,EAAKS,QAAQ,wBAAwB,IAFpCT,GAKTU,qBAA8B,SAASC,GAKtC,IAAIC,EAAWD,EAAOE,cAClBD,GAAYD,EAAOV,SACtBL,EAAMkB,QAAQF,EAAU,SAASG,GAChCA,EAAGC,IAAI,UAAWL,EAAOV,UACvBU,IAKLP,MACCE,IAAM,IACND,IAAM,IACNE,IAAM,MAGP,OAAOT","file":"../../../mobile/bidi/common.js","sourcesContent":["define([\"dojo/_base/array\", \"dijit/_BidiSupport\"], function(array, _BidiSupport){\r\n\r\n\t\t// module:\r\n\t\t//\t\tbidi/common\r\n\t\t// summary:\r\n\t\t//\t\tModule contains functions to support text direction, that can be set independent to GUI direction.\r\n\t\t// description:\r\n\t\t//\t\tUnicode control characters (UCC) used to control text direction.\r\n\r\n\t\tvar common = {};\r\n\t\tcommon.enforceTextDirWithUcc = function(text, textDir){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tWraps by UCC (Unicode control characters) displayed text according to textDir.\r\n\t\t\t// text:\r\n\t\t\t//\t\tThe text to be wrapped.\r\n\t\t\t// textDir:\r\n\t\t\t//\t\tText direction.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThere's a dir problem with some HTML elements. For some Android browsers Hebrew text is displayed right to left also \r\n\t\t\t//\t\twhen dir is set to LTR.\r\n\t\t\t//\t\tTherefore the only solution is to use UCC to display the text in correct orientation.\r\n\t\t\tif(textDir){\r\n\t\t\t\ttextDir = (textDir === \"auto\") ? _BidiSupport.prototype._checkContextual(text) : textDir;\r\n\t\t\t\treturn ((textDir === \"rtl\") ? common.MARK.RLE : common.MARK.LRE) + text + common.MARK.PDF;\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t};\r\n\r\n\t\tcommon.removeUCCFromText = function(text){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRemoves UCC from input string.\r\n\t\t\t// text:\r\n\t\t\t//\t\tThe text to be stripped from UCC.\r\n\t\t\tif (!text){\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t\treturn text.replace(/\\u202A|\\u202B|\\u202C/g,\"\");\r\n\t\t};\r\n\r\n\t\tcommon.setTextDirForButtons = function(widget){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets textDir property to children.\r\n\t\t\t// widget:\r\n\t\t\t//\t\tparent widget\r\n\t\t\tvar children = widget.getChildren();\r\n\t\t\tif (children && widget.textDir){\r\n\t\t\t\tarray.forEach(children, function(ch){\r\n\t\t\t\t\tch.set(\"textDir\", widget.textDir);\r\n\t\t\t\t}, widget); \r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// UCC - constants that will be used by bidi support.\r\n\t\tcommon.MARK = {\r\n\t\t\tLRE : '\\u202A',\r\n\t\t\tRLE : '\\u202B',\r\n\t\t\tPDF : '\\u202C'\r\n\t\t};\r\n\r\n\t\treturn common;\r\n});\r\n"]}