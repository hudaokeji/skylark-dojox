{"version":3,"sources":["mobile/app/List.js"],"names":["dojo","provide","experimental","require","templateCache","declare","dijit","_WidgetBase","items","itemTemplate","emptyTemplate","dividerTemplate","dividerFunction","labelDelete","labelCancel","controller","autoDelete","enableDelete","enableHold","formatters","_templateLoadCount","_mouseDownPos","baseClass","constructor","this","_checkLoadComplete","hitch","_replaceToken","_postDeleteAnim","postCreate","_this","connect","domNode","event","touch","targetTouches","length","rowNode","_getRowNode","target","_setDataInfo","_selectRow","x","pageX","y","pageY","_dragThreshold","_selectedRow","onSelect","_data","_idx","_deselectRow","stopEvent","_deleting","handleDrag","touches","Error","declaredClass","_loadTemplate","diff","absDiff","Math","abs","marginBox","w","createDeleteButtons","style","left","preDelete","handleDragCancel","removeClass","_deleteBtns","currentLeftPos","animateProperty","node","duration","properties","end","onEnd","deleteRow","play","row","visibility","minHeight","_deleteAnimConn","addClass","disconnect","sibling","nextSibling","prevSibling","previousSibling","_isDivider","parentNode","removeChild","onDelete","destroy","query","forEach","applyClass","aroundNode","mb","_abs","create","class","buttons","push","dojox","mobile","Button","btnClass","label","place","_handleButtonClick","display","width","height","h","top","data","index","array","splice","render","cancelDelete","hasClass","idx","item","fromNode","ignoreNoClick","applyTemplate","template","_toDom","string","substitute","appendChild","_renderRange","divs","startIdx","endIdx","i","rows","frag","document","createDocumentFragment","max","min","dividerValue","divider","prevDividerValue","value","key","charAt","getObject","substr","toString","replace","get","url","thisAttr","callback","set","xhrGet","sync","handleAs","load","text","trim","_setFormattersAttr","_setItemsAttr","button","inherited","arguments"],"mappings":"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","file":"../../../mobile/app/List.js","sourcesContent":["dojo.provide(\"dojox.mobile.app.List\");\r\ndojo.experimental(\"dojox.mobile.app.List\");\r\n\r\ndojo.require(\"dojo.string\");\r\ndojo.require(\"dijit._WidgetBase\");\r\n\r\n(function(){\r\n\r\n\tvar templateCache = {};\r\n\r\n\tdojo.declare(\"dojox.mobile.app.List\", dijit._WidgetBase, {\r\n\t\t// summary:\r\n\t\t//\t\tA templated list widget. Given a simple array of data objects\r\n\t\t//\t\tand a HTML template, it renders a list of elements, with\r\n\t\t//\t\tsupport for a swipe delete action.  An optional template\r\n\t\t//\t\tcan be provided for when the list is empty.\r\n\r\n\t\t// items: Array\r\n\t\t//\t\tThe array of data items that will be rendered.\r\n\t\titems: null,\r\n\r\n\t\t// itemTemplate: String\r\n\t\t//\t\tThe URL to the HTML file containing the markup for each individual\r\n\t\t//\t\tdata item.\r\n\t\titemTemplate: \"\",\r\n\r\n\t\t// emptyTemplate: String\r\n\t\t//\t\tThe URL to the HTML file containing the HTML to display if there\r\n\t\t//\t\tare no data items. This is optional.\r\n\t\temptyTemplate: \"\",\r\n\r\n\t\t// dividerTemplate: String\r\n\t\t//\t\tThe URL to the HTML file containing the markup for the dividers\r\n\t\t//\t\tbetween groups of list items\r\n\t\tdividerTemplate: \"\",\r\n\r\n\t\t// dividerFunction: Function\r\n\t\t//\t\tFunction to create divider elements. This should return a divider\r\n\t\t//\t\tvalue for each item in the list\r\n\t\tdividerFunction: null,\r\n\r\n\t\t// labelDelete: String\r\n\t\t//\t\tThe label to display for the Delete button\r\n\t\tlabelDelete: \"Delete\",\r\n\r\n\t\t// labelCancel: String\r\n\t\t//\t\tThe label to display for the Cancel button\r\n\t\tlabelCancel: \"Cancel\",\r\n\r\n\t\t// controller: Object\r\n\t\tcontroller: null,\r\n\r\n\t\t// autoDelete: Boolean\r\n\t\tautoDelete: true,\r\n\r\n\t\t// enableDelete: Boolean\r\n\t\tenableDelete: true,\r\n\r\n\t\t// enableHold: Boolean\r\n\t\tenableHold: true,\r\n\r\n\t\t// formatters: Object\r\n\t\t//\t\tA name/value map of functions used to format data for display\r\n\t\tformatters: null,\r\n\r\n\t\t// _templateLoadCount: Number\r\n\t\t//\t\tThe number of templates remaining to load before the list renders.\r\n\t\t_templateLoadCount: 0,\r\n\r\n\t\t// _mouseDownPos: Object\r\n\t\t//\t\tThe coordinates of where a mouseDown event was detected\r\n\t\t_mouseDownPos: null,\r\n\r\n\t\tbaseClass: \"list\",\r\n\r\n\t\tconstructor: function(){\r\n\t\t\tthis._checkLoadComplete = dojo.hitch(this, this._checkLoadComplete);\r\n\t\t\tthis._replaceToken = dojo.hitch(this, this._replaceToken);\r\n\t\t\tthis._postDeleteAnim = dojo.hitch(this, this._postDeleteAnim);\r\n\t\t},\r\n\r\n\t\tpostCreate: function(){\r\n\r\n\t\t\tvar _this = this;\r\n\r\n\t\t\tif(this.emptyTemplate){\r\n\t\t\t\tthis._templateLoadCount++;\r\n\t\t\t}\r\n\t\t\tif(this.itemTemplate){\r\n\t\t\t\tthis._templateLoadCount++;\r\n\t\t\t}\r\n\t\t\tif(this.dividerTemplate){\r\n\t\t\t\tthis._templateLoadCount++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.connect(this.domNode, \"onmousedown\", function(event){\r\n\t\t\t\tvar touch = event;\r\n\t\t\t\tif(event.targetTouches && event.targetTouches.length > 0){\r\n\t\t\t\t\ttouch = event.targetTouches[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find the node that was tapped/clicked\r\n\t\t\t\tvar rowNode = _this._getRowNode(event.target);\r\n\r\n\t\t\t\tif(rowNode){\r\n\t\t\t\t\t// Add the rows data to the event so it can be picked up\r\n\t\t\t\t\t// by any listeners\r\n\t\t\t\t\t_this._setDataInfo(rowNode, event);\r\n\r\n\t\t\t\t\t// Select and highlight the row\r\n\t\t\t\t\t_this._selectRow(rowNode);\r\n\r\n\t\t\t\t\t// Record the position that was tapped\r\n\t\t\t\t\t_this._mouseDownPos = {\r\n\t\t\t\t\t\tx: touch.pageX,\r\n\t\t\t\t\t\ty: touch.pageY\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_this._dragThreshold = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.connect(this.domNode, \"onmouseup\", function(event){\r\n\t\t\t\t// When the mouse/finger comes off the list,\r\n\t\t\t\t// call the onSelect function and deselect the row.\r\n\t\t\t\tif(event.targetTouches && event.targetTouches.length > 0){\r\n\t\t\t\t\tevent = event.targetTouches[0];\r\n\t\t\t\t}\r\n\t\t\t\tvar rowNode = _this._getRowNode(event.target);\r\n\r\n\t\t\t\tif(rowNode){\r\n\r\n\t\t\t\t\t_this._setDataInfo(rowNode, event);\r\n\r\n\t\t\t\t\tif(_this._selectedRow){\r\n\t\t\t\t\t\t_this.onSelect(rowNode._data, rowNode._idx, rowNode);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._deselectRow();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If swipe-to-delete is enabled, listen for the mouse moving\r\n\t\t\tif(this.enableDelete){\r\n\t\t\t\tthis.connect(this.domNode, \"mousemove\", function(event){\r\n\t\t\t\t\tdojo.stopEvent(event);\r\n\t\t\t\t\tif(!_this._selectedRow){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar rowNode = _this._getRowNode(event.target);\r\n\r\n\t\t\t\t\t// Still check for enableDelete in case it's changed after\r\n\t\t\t\t\t// this listener is added.\r\n\t\t\t\t\tif(_this.enableDelete && rowNode && !_this._deleting){\r\n\t\t\t\t\t\t_this.handleDrag(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Put the data and index onto each onclick event.\r\n\t\t\tthis.connect(this.domNode, \"onclick\", function(event){\r\n\t\t\t\tif(event.touches && event.touches.length > 0){\r\n\t\t\t\t\tevent = event.touches[0];\r\n\t\t\t\t}\r\n\t\t\t\tvar rowNode = _this._getRowNode(event.target, true);\r\n\r\n\t\t\t\tif(rowNode){\r\n\t\t\t\t\t_this._setDataInfo(rowNode, event);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If the mouse or finger moves off the selected row,\r\n\t\t\t// deselect it.\r\n\t\t\tthis.connect(this.domNode, \"mouseout\", function(event){\r\n\t\t\t\tif(event.touches && event.touches.length > 0){\r\n\t\t\t\t\tevent = event.touches[0];\r\n\t\t\t\t}\r\n\t\t\t\tif(event.target == _this._selectedRow){\r\n\t\t\t\t\t_this._deselectRow();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If no item template has been provided, it is an error.\r\n\t\t\tif(!this.itemTemplate){\r\n\t\t\t\tthrow Error(\"An item template must be provided to \" + this.declaredClass);\r\n\t\t\t}\r\n\r\n\t\t\t// Load the item template\r\n\t\t\tthis._loadTemplate(this.itemTemplate, \"itemTemplate\", this._checkLoadComplete);\r\n\r\n\t\t\tif(this.emptyTemplate){\r\n\t\t\t\t// If the optional empty template has been provided, load it.\r\n\t\t\t\tthis._loadTemplate(this.emptyTemplate, \"emptyTemplate\", this._checkLoadComplete);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.dividerTemplate){\r\n\t\t\t\tthis._loadTemplate(this.dividerTemplate, \"dividerTemplate\", this._checkLoadComplete);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleDrag: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandles rows being swiped for deletion.\r\n\t\t\tvar touch = event;\r\n\t\t\tif(event.targetTouches && event.targetTouches.length > 0){\r\n\t\t\t\ttouch = event.targetTouches[0];\r\n\t\t\t}\r\n\r\n\t\t\t// Get the distance that the mouse or finger has moved since\r\n\t\t\t// beginning the swipe action.\r\n\t\t\tvar diff = touch.pageX - this._mouseDownPos.x;\r\n\r\n\t\t\tvar absDiff = Math.abs(diff);\r\n\t\t\tif(absDiff > 10 && !this._dragThreshold){\r\n\t\t\t\t// Make the user drag the row 60% of the width to remove it\r\n\t\t\t\tthis._dragThreshold = dojo.marginBox(this._selectedRow).w * 0.6;\r\n\t\t\t\tif(!this.autoDelete){\r\n\t\t\t\t\tthis.createDeleteButtons(this._selectedRow);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._selectedRow.style.left = (absDiff > 10 ? diff : 0) + \"px\";\r\n\r\n\t\t\t// If the user has dragged the row more than the threshold, slide\r\n\t\t\t// it off the screen in preparation for deletion.\r\n\t\t\tif(this._dragThreshold && this._dragThreshold < absDiff){\r\n\t\t\t\tthis.preDelete(diff);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleDragCancel: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandle a drag action being cancelled, for whatever reason.\r\n\t\t\t//\t\tReset handles, remove CSS classes etc.\r\n\t\t\tif(this._deleting){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdojo.removeClass(this._selectedRow, \"hold\");\r\n\t\t\tthis._selectedRow.style.left = 0;\r\n\t\t\tthis._mouseDownPos = null;\r\n\t\t\tthis._dragThreshold = null;\r\n\r\n\t\t\tthis._deleteBtns && dojo.style(this._deleteBtns, \"display\", \"none\");\r\n\t\t},\r\n\r\n\t\tpreDelete: function(currentLeftPos){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSlides the row offscreen before it is deleted\r\n\r\n\t\t\t// TODO: do this with CSS3!\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis._deleting = true;\r\n\r\n\t\t\tdojo.animateProperty({\r\n\t\t\t\tnode: this._selectedRow,\r\n\t\t\t\tduration: 400,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tleft: {\r\n\t\t\t\t\tend: currentLeftPos +\r\n\t\t\t\t\t\t((currentLeftPos > 0 ? 1 : -1) * this._dragThreshold * 0.8)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonEnd: dojo.hitch(this, function(){\r\n\t\t\t\t\tif(this.autoDelete){\r\n\t\t\t\t\t\tthis.deleteRow(this._selectedRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}).play();\r\n\t\t},\r\n\r\n\t\tdeleteRow: function(row){\r\n\r\n\t\t\t// First make the row invisible\r\n\t\t\t// Put it back where it came from\r\n\t\t\tdojo.style(row, {\r\n\t\t\t\tvisibility: \"hidden\",\r\n\t\t\t\tminHeight: \"0px\"\r\n\t\t\t});\r\n\t\t\tdojo.removeClass(row, \"hold\");\r\n\r\n\t\t\tthis._deleteAnimConn =\r\n\t\t\t\tthis.connect(row, \"webkitAnimationEnd\", this._postDeleteAnim);\r\n\r\n\t\t\tdojo.addClass(row, \"collapsed\");\r\n\t\t},\r\n\r\n\t\t_postDeleteAnim: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCompletes the deletion of a row.\r\n\r\n\t\t\tif(this._deleteAnimConn){\r\n\t\t\t\tthis.disconnect(this._deleteAnimConn);\r\n\t\t\t\tthis._deleteAnimConn = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = this._selectedRow;\r\n\t\t\tvar sibling = row.nextSibling;\r\n\t\t\tvar prevSibling = row.previousSibling;\r\n\r\n\t\t\t// If the previous node is a divider and either this is\r\n\t\t\t// the last element in the list, or the next node is\r\n\t\t\t// also a divider, remove the divider for the deleted section.\r\n\t\t\tif(prevSibling && prevSibling._isDivider){\r\n\t\t\t\tif(!sibling || sibling._isDivider){\r\n\t\t\t\t\tprevSibling.parentNode.removeChild(prevSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trow.parentNode.removeChild(row);\r\n\t\t\tthis.onDelete(row._data, row._idx, this.items);\r\n\r\n\t\t\t// Decrement the index of each following row\r\n\t\t\twhile(sibling){\r\n\t\t\t\tif(sibling._idx){\r\n\t\t\t\t\tsibling._idx--;\r\n\t\t\t\t}\r\n\t\t\t\tsibling = sibling.nextSibling;\r\n\t\t\t}\r\n\r\n\t\t\tdojo.destroy(row);\r\n\r\n\t\t\t// Fix up the 'first' and 'last' CSS classes on the rows\r\n\t\t\tdojo.query(\"> *:not(.buttons)\", this.domNode).forEach(this.applyClass);\r\n\r\n\t\t\tthis._deleting = false;\r\n\t\t\tthis._deselectRow();\r\n\t\t},\r\n\r\n\t\tcreateDeleteButtons: function(aroundNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreates the two buttons displayed when confirmation is\r\n\t\t\t//\t\trequired before deletion of a row.\r\n\t\t\t// aroundNode:\r\n\t\t\t//\t\tThe DOM node of the row about to be deleted.\r\n\t\t\tvar mb = dojo.marginBox(aroundNode);\r\n\t\t\tvar pos = dojo._abs(aroundNode, true);\r\n\r\n\t\t\tif(!this._deleteBtns){\r\n\t\t\t// Create the delete buttons.\r\n\t\t\t\tthis._deleteBtns = dojo.create(\"div\",{\r\n\t\t\t\t\t\"class\": \"buttons\"\r\n\t\t\t\t}, this.domNode);\r\n\r\n\t\t\t\tthis.buttons = [];\r\n\r\n\t\t\t\tthis.buttons.push(new dojox.mobile.Button({\r\n\t\t\t\t\tbtnClass: \"mblRedButton\",\r\n\t\t\t\t\tlabel: this.labelDelete\r\n\t\t\t\t}));\r\n\t\t\t\tthis.buttons.push(new dojox.mobile.Button({\r\n\t\t\t\t\tbtnClass: \"mblBlueButton\",\r\n\t\t\t\t\tlabel: this.labelCancel\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tdojo.place(this.buttons[0].domNode, this._deleteBtns);\r\n\t\t\t\tdojo.place(this.buttons[1].domNode, this._deleteBtns);\r\n\r\n\t\t\t\tdojo.addClass(this.buttons[0].domNode, \"deleteBtn\");\r\n\t\t\t\tdojo.addClass(this.buttons[1].domNode, \"cancelBtn\");\r\n\r\n\t\t\t\tthis._handleButtonClick = dojo.hitch(this._handleButtonClick);\r\n\t\t\t\tthis.connect(this._deleteBtns, \"onclick\", this._handleButtonClick);\r\n\t\t\t}\r\n\t\t\tdojo.removeClass(this._deleteBtns, \"fade out fast\");\r\n\t\t\tdojo.style(this._deleteBtns, {\r\n\t\t\t\tdisplay: \"\",\r\n\t\t\t\twidth: mb.w + \"px\",\r\n\t\t\t\theight: mb.h + \"px\",\r\n\t\t\t\ttop: (aroundNode.offsetTop) + \"px\",\r\n\t\t\t\tleft: \"0px\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonDelete: function(data, index, array){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when a row is deleted\r\n\t\t\t// data:\r\n\t\t\t//\t\tThe data related to the row being deleted\r\n\t\t\t// index:\r\n\t\t\t//\t\tThe index of the data in the total array\r\n\t\t\t// array:\r\n\t\t\t//\t\tThe array of data used.\r\n\r\n\t\t\tarray.splice(index, 1);\r\n\r\n\t\t\t// If the data is empty, rerender in case an emptyTemplate has\r\n\t\t\t// been provided\r\n\t\t\tif(array.length < 1){\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcancelDelete: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCancels the deletion of a row.\r\n\t\t\tthis._deleting = false;\r\n\t\t\tthis.handleDragCancel();\r\n\t\t},\r\n\r\n\t\t_handleButtonClick: function(event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandles the click of one of the deletion buttons, either to\r\n\t\t\t//\t\tdelete the row or to cancel the deletion.\r\n\t\t\tif(event.touches && event.touches.length > 0){\r\n\t\t\t\tevent = event.touches[0];\r\n\t\t\t}\r\n\t\t\tvar node = event.target;\r\n\t\t\tif(dojo.hasClass(node, \"deleteBtn\")){\r\n\t\t\t\tthis.deleteRow(this._selectedRow);\r\n\t\t\t}else if(dojo.hasClass(node, \"cancelBtn\")){\r\n\t\t\t\tthis.cancelDelete();\r\n\t\t\t}else{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdojo.addClass(this._deleteBtns, \"fade out\");\r\n\t\t},\r\n\r\n\t\tapplyClass: function(node, idx, array){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tApplies the 'first' and 'last' CSS classes to the relevant\r\n\t\t\t//\t\trows.\r\n\r\n\t\t\tdojo.removeClass(node, \"first last\");\r\n\t\t\tif(idx == 0){\r\n\t\t\t\tdojo.addClass(node, \"first\");\r\n\t\t\t}\r\n\t\t\tif(idx == array.length - 1){\r\n\t\t\t\tdojo.addClass(node, \"last\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDataInfo: function(rowNode, event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAttaches the data item and index for each row to any event\r\n\t\t\t//\t\tthat occurs on that row.\r\n\t\t\tevent.item = rowNode._data;\r\n\t\t\tevent.index = rowNode._idx;\r\n\t\t},\r\n\r\n\t\tonSelect: function(data, index, rowNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDummy function that is called when a row is tapped\r\n\t\t},\r\n\r\n\t\t_selectRow: function(row){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSelects a row, applies the relevant CSS classes.\r\n\t\t\tif(this._deleting && this._selectedRow && row != this._selectedRow){\r\n\t\t\t\tthis.cancelDelete();\r\n\t\t\t}\r\n\r\n\t\t\tif(!dojo.hasClass(row, \"row\")){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.enableHold || this.enableDelete){\r\n\t\t\t\tdojo.addClass(row, \"hold\");\r\n\t\t\t}\r\n\t\t\tthis._selectedRow = row;\r\n\t\t},\r\n\r\n\t\t_deselectRow: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDeselects a row, and cancels any drag actions that were\r\n\t\t\t//\t\toccurring.\r\n\t\t\tif(!this._selectedRow || this._deleting){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.handleDragCancel();\r\n\t\t\tdojo.removeClass(this._selectedRow, \"hold\");\r\n\t\t\tthis._selectedRow = null;\r\n\t\t},\r\n\r\n\t\t_getRowNode: function(fromNode, ignoreNoClick){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets the DOM node of the row that is equal to or the parent\r\n\t\t\t//\t\tof the node passed to this function.\r\n\t\t\twhile(fromNode && !fromNode._data && fromNode != this.domNode){\r\n\t\t\t\tif(!ignoreNoClick && dojo.hasClass(fromNode, \"noclick\")){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tfromNode = fromNode.parentNode;\r\n\t\t\t}\r\n\t\t\treturn fromNode == this.domNode ? null : fromNode;\r\n\t\t},\r\n\r\n\t\tapplyTemplate: function(template, data){\r\n\t\t\treturn dojo._toDom(dojo.string.substitute(\r\n\t\t\t\t\ttemplate, data, this._replaceToken, this.formatters || this));\r\n\t\t},\r\n\r\n\t\trender: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRenders the list.\r\n\r\n\t\t\t// Delete all existing nodes, except the deletion buttons.\r\n\t\t\tdojo.query(\"> *:not(.buttons)\", this.domNode).forEach(dojo.destroy);\r\n\r\n\t\t\t// If there is no data, and an empty template has been provided,\r\n\t\t\t// render it.\r\n\t\t\tif(this.items.length < 1 && this.emptyTemplate){\r\n\t\t\t\tdojo.place(dojo._toDom(this.emptyTemplate), this.domNode, \"first\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.domNode.appendChild(this._renderRange(0, this.items.length));\r\n\t\t\t}\r\n\t\t\tif(dojo.hasClass(this.domNode.parentNode, \"mblRoundRect\")){\r\n\t\t\t\tdojo.addClass(this.domNode.parentNode, \"mblRoundRectList\")\r\n\t\t\t}\r\n\r\n\t\t\tvar divs = dojo.query(\"> .row\", this.domNode);\r\n\t\t\tif(divs.length > 0){\r\n\t\t\t\tdojo.addClass(divs[0], \"first\");\r\n\t\t\t\tdojo.addClass(divs[divs.length - 1], \"last\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_renderRange: function(startIdx, endIdx){\r\n\r\n\t\t\tvar rows = [];\r\n\t\t\tvar row, i;\r\n\t\t\tvar frag = document.createDocumentFragment();\r\n\t\t\tstartIdx = Math.max(0, startIdx);\r\n\t\t\tendIdx = Math.min(endIdx, this.items.length);\r\n\r\n\t\t\tfor(i = startIdx; i < endIdx; i++){\r\n\t\t\t\t// Create a document fragment containing the templated row\r\n\t\t\t\trow = this.applyTemplate(this.itemTemplate, this.items[i]);\r\n\t\t\t\tdojo.addClass(row, 'row');\r\n\t\t\t\trow._data = this.items[i];\r\n\t\t\t\trow._idx = i;\r\n\t\t\t\trows.push(row);\r\n\t\t\t}\r\n\t\t\tif(!this.dividerFunction || !this.dividerTemplate){\r\n\t\t\t\tfor(i = startIdx; i < endIdx; i++){\r\n\t\t\t\t\trows[i]._data = this.items[i];\r\n\t\t\t\t\trows[i]._idx = i;\r\n\t\t\t\t\tfrag.appendChild(rows[i]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar prevDividerValue = null;\r\n\t\t\t\tvar dividerValue;\r\n\t\t\t\tvar divider;\r\n\t\t\t\tfor(i = startIdx; i < endIdx; i++){\r\n\t\t\t\t\trows[i]._data = this.items[i];\r\n\t\t\t\t\trows[i]._idx = i;\r\n\r\n\t\t\t\t\tdividerValue = this.dividerFunction(this.items[i]);\r\n\t\t\t\t\tif(dividerValue && dividerValue != prevDividerValue){\r\n\t\t\t\t\t\tdivider = this.applyTemplate(this.dividerTemplate, {\r\n\t\t\t\t\t\t\tlabel: dividerValue,\r\n\t\t\t\t\t\t\titem: this.items[i]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdivider._isDivider = true;\r\n\t\t\t\t\t\tfrag.appendChild(divider);\r\n\t\t\t\t\t\tprevDividerValue = dividerValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfrag.appendChild(rows[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn frag;\r\n\t\t},\r\n\r\n\t\t_replaceToken: function(value, key){\r\n\t\t\tif(key.charAt(0) == '!'){ value = dojo.getObject(key.substr(1), false, _this); }\r\n\t\t\tif(typeof value == \"undefined\"){ return \"\"; } // a debugging aide\r\n\t\t\tif(value == null){ return \"\"; }\r\n\r\n\t\t\t// Substitution keys beginning with ! will skip the transform step,\r\n\t\t\t// in case a user wishes to insert unescaped markup, e.g. ${!foo}\r\n\t\t\treturn key.charAt(0) == \"!\" ? value :\r\n\t\t\t\t// Safer substitution, see heading \"Attribute values\" in\r\n\t\t\t\t// http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.3.2\r\n\t\t\t\tvalue.toString().replace(/\"/g,\"&quot;\"); //TODO: add &amp? use encodeXML method?\r\n\r\n\t\t},\r\n\r\n\t\t_checkLoadComplete: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks if all templates have loaded\r\n\t\t\tthis._templateLoadCount--;\r\n\r\n\t\t\tif(this._templateLoadCount < 1 && this.get(\"items\")){\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_loadTemplate: function(url, thisAttr, callback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tLoads a template\r\n\t\t\tif(!url){\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(templateCache[url]){\r\n\t\t\t\tthis.set(thisAttr, templateCache[url]);\r\n\t\t\t\tcallback();\r\n\t\t\t}else{\r\n\t\t\t\tvar _this = this;\r\n\r\n\t\t\t\tdojo.xhrGet({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tsync: false,\r\n\t\t\t\t\thandleAs: \"text\",\r\n\t\t\t\t\tload: function(text){\r\n\t\t\t\t\t\ttemplateCache[url] = dojo.trim(text);\r\n\t\t\t\t\t\t_this.set(thisAttr, templateCache[url]);\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t_setFormattersAttr: function(formatters){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets the data items, and causes a rerender of the list\r\n\t\t\tthis.formatters = formatters;\r\n\t\t},\r\n\r\n\t\t_setItemsAttr: function(items){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets the data items, and causes a rerender of the list\r\n\r\n\t\t\tthis.items = items || [];\r\n\r\n\t\t\tif(this._templateLoadCount < 1 && items){\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\tif(this.buttons){\r\n\t\t\t\tdojo.forEach(this.buttons, function(button){\r\n\t\t\t\t\tbutton.destroy();\r\n\t\t\t\t});\r\n\t\t\t\tthis.buttons = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\r\n\r\n\t});\r\n\r\n})();"]}