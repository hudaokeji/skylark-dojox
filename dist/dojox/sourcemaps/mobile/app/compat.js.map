{"version":3,"sources":["mobile/app/compat.js"],"names":["dojo","provide","require","extend","dojox","mobile","app","AlertDialog","_doTransition","dir","console","log","this","h","marginBox","domNode","firstChild","bodyHeight","controller","getWindowSize","high","low","anim1","fx","slideTo","node","duration","top","start","end","anim2","mask","anim","combine","_this","connect","style","display","destroy","play","List","deleteRow","row","_selectedRow","visibility","minHeight","removeClass","height","contentBox","animateProperty","properties","paddingTop","paddingBottom","onEnd","_postDeleteAnim","ImageView","create","getContext","buildRendering","innerHTML","canvas","postCreate","ImageThumbView","place","x","y","left"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,2BACbD,KAAKE,QAAQ,uBAgBbF,KAAKG,OAAOC,MAAMC,OAAOC,IAAIC,aAC5BC,cAAe,SAASC,GACvBC,QAAQC,IAAI,+BAAgCC,MAE5C,IAAIC,EAAIb,KAAKc,UAAUF,KAAKG,QAAQC,YAAYH,EAE5CI,EAAaL,KAAKM,WAAWC,gBAAgBN,EAE7CO,EAAOH,EAAaJ,EACpBQ,EAAMJ,EAENK,EAAQtB,KAAKuB,GAAGC,SACnBC,KAAMb,KAAKG,QACXW,SAAU,IACVC,KAAMC,MAAOnB,EAAM,EAAIW,EAAOC,EAAKQ,IAAKpB,EAAM,EAAIY,EAAKD,KAGpDU,EAAQ9B,KAAKS,EAAM,EAAI,UAAY,WACtCgB,KAAMb,KAAKmB,KACXL,SAAU,MAGPM,EAAOhC,KAAKuB,GAAGU,SAASX,EAAOQ,IAE/BI,EAAQtB,KAEZZ,KAAKmC,QAAQH,EAAM,QAASpB,KAAM,WAC9BH,EAAM,IACRyB,EAAMnB,QAAQqB,MAAMC,QAAU,OAC9BrC,KAAKsC,QAAQJ,EAAMnB,SACnBf,KAAKsC,QAAQJ,EAAMH,SAGrBC,EAAKO,UAIPvC,KAAKG,OAAOC,MAAMC,OAAOC,IAAIkC,MAC5BC,UAAW,WACV/B,QAAQC,IAAI,2BAA4B+B,GAExC,IAAIA,EAAM9B,KAAK+B,aAGf3C,KAAKoC,MAAMM,GACVE,WAAY,SACZC,UAAW,QAEZ7C,KAAK8C,YAAYJ,EAAK,QAKtB,IAAIK,EAAS/C,KAAKgD,WAAWN,GAAK7B,EAClCb,KAAKiD,iBACHxB,KAAMiB,EACNhB,SAAU,IACVwB,YACAH,QAASnB,MAAOmB,EAAQlB,IAAK,GAC7BsB,YAAatB,IAAK,GAClBuB,eAAgBvB,IAAK,IAEtBwB,MAAOzC,KAAK0C,kBACVf,UAIFnC,MAAMC,OAAOC,IAAIiD,YAAcvD,KAAKwD,OAAO,UAAUC,YACvDzD,KAAKG,OAAOC,MAAMC,OAAOC,IAAIiD,WAC5BG,eAAgB,WACf9C,KAAKG,QAAQ4C,UACZ,2HAGD/C,KAAKgD,WAGNC,WAAY,eAIXzD,MAAMC,OAAOC,IAAIwD,gBACnB9D,KAAKG,OAAOC,MAAMC,OAAOC,IAAIwD,gBAC5BC,MAAO,SAAStC,EAAMuC,EAAGC,GACxBjE,KAAKoC,MAAMX,GACVE,IAAKsC,EAAI,KACTC,KAAMF,EAAI,KACVpB,WAAY","file":"../../../mobile/app/compat.js","sourcesContent":["dojo.provide(\"dojox.mobile.app.compat\");\r\ndojo.require(\"dojox.mobile.compat\");\r\n\r\n// summary:\r\n//\t\tCSS3 compatibility module for apps\r\n// description:\r\n//\t\tThis module provides support for some of the CSS3 features to djMobile\r\n//\t\tfor non-CSS3 browsers, such as IE or Firefox.\r\n//\t\tIf you load this module, it directly replaces some of the methods of\r\n//\t\tdjMobile instead of subclassing. This way, html pages remains the same\r\n//\t\tregardless of whether this compatibility module is used or not.\r\n//\t\tRecommended usage is as follows. the code below loads dojox.mobile.compat\r\n//\t\tonly when isWebKit is true.\r\n//\r\n//\t\tdojo.require(\"dojox.mobile\");\r\n//\t\tdojo.requireIf(!dojo.isWebKit, \"dojox.mobile.appCompat\");\r\n\r\ndojo.extend(dojox.mobile.app.AlertDialog, {\r\n\t_doTransition: function(dir){\r\n\t\tconsole.log(\"in _doTransition and this = \", this);\r\n\r\n\t\tvar h = dojo.marginBox(this.domNode.firstChild).h;\r\n\r\n\t\tvar bodyHeight = this.controller.getWindowSize().h;\r\n\t\r\n\t\tvar high = bodyHeight - h;\r\n\t\tvar low = bodyHeight;\r\n\r\n\t\tvar anim1 = dojo.fx.slideTo({\r\n\t\t\tnode: this.domNode,\r\n\t\t\tduration: 400,\r\n\t\t\ttop: {start: dir < 0 ? high : low, end: dir < 0 ? low: high}\r\n\t\t});\r\n\r\n\t\tvar anim2 = dojo[dir < 0 ? \"fadeOut\" : \"fadeIn\"]({\r\n\t\t\tnode: this.mask,\r\n\t\t\tduration: 400\r\n\t\t});\r\n\t\r\n\t\tvar anim = dojo.fx.combine([anim1, anim2]);\r\n\t\r\n\t\tvar _this = this;\r\n\r\n\t\tdojo.connect(anim, \"onEnd\", this, function(){\r\n\t\t\tif(dir < 0){\r\n\t\t\t\t_this.domNode.style.display = \"none\";\r\n\t\t\t\tdojo.destroy(_this.domNode);\r\n\t\t\t\tdojo.destroy(_this.mask);\r\n\t\t\t}\r\n\t\t});\r\n\t\tanim.play();\r\n\t}\r\n});\r\n\r\ndojo.extend(dojox.mobile.app.List, {\r\n\tdeleteRow: function(){\r\n\t\tconsole.log(\"deleteRow in compat mode\", row);\r\n\t\r\n\t\tvar row = this._selectedRow;\r\n\t\t// First make the row invisible\r\n\t\t// Put it back where it came from\r\n\t\tdojo.style(row, {\r\n\t\t\tvisibility: \"hidden\",\r\n\t\t\tminHeight: \"0px\"\r\n\t\t});\r\n\t\tdojo.removeClass(row, \"hold\");\r\n\t\r\n\t\r\n\t\t// Animate reducing it's height to zero, then delete the data from the\r\n\t\t// array\r\n\t\tvar height = dojo.contentBox(row).h;\r\n\t\tdojo.animateProperty({\r\n\t\t\t\tnode: row,\r\n\t\t\t\tduration: 800,\r\n\t\t\t\tproperties: {\r\n\t\t\t\theight: {start: height, end: 1},\r\n\t\t\t\tpaddingTop: {end: 0},\r\n\t\t\t\tpaddingBottom: {end: 0}\r\n\t\t\t},\r\n\t\t\tonEnd: this._postDeleteAnim\r\n\t\t}).play();\r\n\t}\r\n});\r\n\r\nif(dojox.mobile.app.ImageView && !dojo.create(\"canvas\").getContext){\r\n\tdojo.extend(dojox.mobile.app.ImageView, {\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.domNode.innerHTML =\r\n\t\t\t\t\"ImageView widget is not supported on this browser.\"\r\n\t\t\t\t+ \"Please try again with a modern browser, e.g. \"\r\n\t\t\t\t+ \"Safari, Chrome or Firefox\";\r\n\t\t\tthis.canvas = {};\r\n\t\t},\r\n\t\t\r\n\t\tpostCreate: function(){}\r\n\t});\r\n}\r\n\r\nif(dojox.mobile.app.ImageThumbView){\r\n\tdojo.extend(dojox.mobile.app.ImageThumbView, {\r\n\t\tplace: function(node, x, y){\r\n\t\t\tdojo.style(node, {\r\n\t\t\t\ttop: y + \"px\",\r\n\t\t\t\tleft: x + \"px\",\r\n\t\t\t\tvisibility: \"visible\"\r\n\t\t\t});\r\n\t\t}\r\n\t})\r\n}\r\n"]}