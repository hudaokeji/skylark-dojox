{"version":3,"sources":["mobile/migrationAssist.js"],"names":["define","declare","lang","win","domClass","domConstruct","domStyle","ready","Container","WidgetBase","_ItemBase","mobile","FixedSplitterPane","Heading","iconUtils","ListItem","RoundRect","SpinWheel","SpinWheelSlot","SwapView","TabBarButton","ToolBarButton","View","currentTheme","dojox","FlippableView","migrationAssist","this","dispatch","cls","w","base","replace","checkCarousel","console","log","checkFixedSplitter","_fixedSplitter_css_checked","dummy","create","className","body","get","href","type","rel","doc","getElementsByTagName","removeChild","setTimeout","resize","checkFixedSplitterPane","checkListItem","undefined","sync","srcNodeRef","getAttribute","btnClass","rightIcon","btnClass2","rightIcon2","checkSpinWheelSlot","labels","charAt","i","length","checkSwapView","n","checkSwitch","checkTabBar","key","innerHTML","checkTabBarButton","indexOf","icon","checkToolBarButton","defaultColor","prototype","postMixInProperties","declaredClass","dojo","forEach","module","extendSelectFunction","obj","extend","select","id","set","apply","arguments","deselect","value","getValue","setValue","newValue","getKey","mixin","createDomButton","j","cssFiles","s","styleSheets","r","cssRules","imports","push","elems","add","documentElement","match","RegExp","$1","$2","hash","require"],"mappings":"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","file":"../../mobile/migrationAssist.js","sourcesContent":["/*\r\n\r\nAbout migrationAssist\r\n=====================\r\n\r\nThe migrationAssist is a Dojo module that helps you migrate your\r\ndojox/mobile 1.6/1.7 applications to 1.8. To enable migrationAssist,\r\nall you need to do is require this module as shown in the examples below.\r\n\r\n\t<script language=\"JavaScript\" type=\"text/javascript\">\r\n\t\tdojo.require(\"dojox.mobile.migrationAssist\");\r\n\t\tdojo.require(\"dojox.mobile\"); // This is a mobile app.\r\n\t\t....\r\n\t</script>\r\n\r\n\t<script language=\"JavaScript\" type=\"text/javascript\">\r\n\t\trequire([\r\n\t\t\t\"dojox/mobile/migrationAssist\",\r\n\t\t\t\"dojox/mobile\", // This is a mobile app.\r\n\t\t\t....\r\n\t\t]);\r\n\t</script>\r\n\r\nIf your application uses deprecated or no longer available functions,\r\nthis module detects them and displays messages in the browser console.\r\n\r\nAlso, it tries to dynamically fix them as much as possible so that\r\nthe target application can work somehow.\r\n\r\nNote, however, that the purpose of migrationAssist is not to\r\nrun the older applications as they are, but to assist migration.\r\n\r\n\r\nChanges from 1.6/1.7 to 1.8\r\n===========================\r\n\r\nCarousel\r\n--------\r\n - Carousel has no backward compatibility, since it was experimental in 1.7.\r\n   There are two subclasses that support data stores.\r\n   Use DataCarousel if you want to use carousel with dojo/data.\r\n   Use StoreCarousel if you want to use carousel with dojo/store.\r\n\r\nFixedSplitter\r\n-------------\r\n - FixedSplitter.css is no longer in the themes/common folder.\r\n   It is in the device theme folder. (e.g. themes/iphone/FixedSplitter.css)\r\n\r\nFlippableView\r\n-------------\r\n - FlippableView was deprecated in 1.7, and removed in 1.8. Use SwapView instead.\r\n\r\nListItem\r\n--------\r\n - The sync property is no longer supported. It always behaves asynchronously.\r\n - The btnClass property is no longer supported. Use rightIcon instead.\r\n - The btnClass2 property is no longer supported. Use rightIcon2 instead.\r\n\r\nSpinWheel\r\n---------\r\n - SpinWheel.css is no longer in the themes/common folder.\r\n   It is in the device theme folder. (e.g. themes/iphone/SpinWheel.css)\r\n - getValue() is no longer supported. Use get(\"values\") instead.\r\n - setValue() is no longer supported. Use set(\"values\", newValue) instead.\r\n\r\nSpinWheelSlot\r\n-------------\r\n - getValue() is no longer supported. Use get(\"value\") instead.\r\n - getKey() is no longer supported. Use get(\"key\") instead.\r\n - setValue() is no longer supported. Use set(\"value\", newValue) instead.\r\n\r\nSwitch\r\n------\r\n - When you place it in a ListItem, class=\"mblItemSwitch\" is no longer necessary.\r\n\r\nTabBar\r\n------\r\n- In 1.7 or older, barType=\"segmentedControl\" produced different UIs according to the\r\n  current theme. In the iphone theme, it was a segmented control, but in other themes,\r\n  it was tabs with or without icons. In 1.8, however, barType=\"segmentedControl\"\r\n  always produces a segmented control UI regardless of the current theme.\r\n  If you still need the old behavior,\r\n      barType:{\"iphone_theme\":\"segmentedControl\",\"*\":\"tallTab\"}\r\n  should produce a segmented control for the iphone theme, and a tall tab bar for\r\n  the other themes. You need to use deviceTheme.js to specify barType that way.\r\n  Also, if you want to hide the tab icons on the segmented control in the iphone theme,\r\n  you could apply a css like this:\r\n      <style>\r\n      .iphone_theme .mblTabBarSegmentedControl .mblTabBarButtonIconArea {\r\n          display: none;\r\n      }\r\n      </style>\r\n  See test_ScrollableView-demo.html for an example usage.\r\n\r\nTabBarButton\r\n-------------\r\n - Specifying a DOM Button with the class attribute like class=\"mblDomButtonWhitePlus\"\r\n   is no longer supported. Use icon=\"mblDomButtonWhitePlus\" instead.\r\n - select() and deselect() are no longer supported. Use set(\"selected\", boolean) instead.\r\n\r\nToolBarButton\r\n-------------\r\n - Specifying the button color style with the class attribute like class=\"mblColorBlue\"\r\n   is no longer supported. Use defaultColor=\"mblColorBlue\" instead.\r\n - Specifying a DOM Button with the class attribute like class=\"mblDomButtonWhitePlus\"\r\n   is no longer supported. Use icon=\"mblDomButtonWhitePlus\" instead.\r\n - select() and deselect() are no longer supported. Use set(\"selected\", boolean) instead.\r\n\r\ndojox/mobile/parser\r\n-------------------\r\n - dojox/mobile/parser no longer accepts array-type attribute like\r\n     labels=\"['A','B','C','D','E']\"\r\n   Instead, you should specify like labels=\"A,B,C,D,E\", which is the format dojo/parser\r\n   accepts.\r\n\r\nbookmarkable\r\n------------\r\n - To enable the bookmarkable feature, require dojox/mobile/bookmarkable\r\n   instead of dojo/hash\r\n\r\n*/\r\n\r\ndefine([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/ready\",\r\n\t\"dijit/_Container\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"./_ItemBase\",\r\n\t\"./common\", \r\n\t\"./FixedSplitterPane\",\r\n\t\"./Heading\",\r\n\t\"./iconUtils\",\r\n\t\"./ListItem\",\r\n\t\"./RoundRect\",\r\n\t\"./SpinWheel\",\r\n\t\"./SpinWheelSlot\",\r\n\t\"./SwapView\",\r\n\t\"./TabBarButton\",\r\n\t\"./ToolBarButton\",\r\n\t\"./View\"\r\n], function(declare, lang, win, domClass, domConstruct, domStyle, ready, Container, WidgetBase, _ItemBase, mobile, FixedSplitterPane, Heading, iconUtils, ListItem, RoundRect, SpinWheel, SpinWheelSlot, SwapView, TabBarButton, ToolBarButton, View){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/migrationAssist\r\n\r\n\tvar currentTheme;\r\n\r\n\tvar MigrationAssist = function(){\r\n\t\t// summary:\r\n\t\t//\t\tDojo Mobile 1.6/1.7 to 1.8 migration assistance.\r\n\r\n\t\tvar get = function(w, key){\r\n\t\t\treturn w[key] || w.srcNodeRef && w.srcNodeRef.getAttribute(key);\r\n\t\t};\r\n\r\n\t\tthis.dispatch = function(/*String*/cls, /*Widget*/ w){\r\n\t\t\tvar base = cls.replace(/.*\\./, \"\");\r\n\t\t\tthis[\"check\" + base] && this[\"check\" + base](w);\r\n\t\t};\r\n\r\n\t\tthis.checkCarousel = function(/*Widget*/ w){\r\n\t\t\tconsole.log('[MIG:error] Carousel has no backward compatibility, since it was experimental in 1.7. The new Carousel supports dojo/store instead of dojo/data.');\r\n\t\t};\r\n\r\n\t\tthis.checkFixedSplitter = function(/*Widget*/ w){\r\n\t\t\t// FixedSplitter.css has been moved from the themes/common folder\r\n\t\t\t// to the device theme folder such as themes/android.\r\n\t\t\tif(!this._fixedSplitter_css_checked){\r\n\t\t\t\tthis._fixedSplitter_css_checked = true;\r\n\t\t\t\tvar dummy = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"mblFixedSplitter\"\r\n\t\t\t\t}, win.body());\r\n\t\t\t\tif(domStyle.get(dummy, \"height\") == 0){\r\n\t\t\t\t\tdomConstruct.create(\"link\", {\r\n\t\t\t\t\t\thref: \"../themes/android/FixedSplitter.css\",\r\n\t\t\t\t\t\ttype: \"text/css\",\r\n\t\t\t\t\t\trel: \"stylesheet\"\r\n\t\t\t\t\t}, win.doc.getElementsByTagName('head')[0]);\r\n\t\t\t\t\tconsole.log('[MIG:fixed] FixedSplitter.css does not seem to be loaded. Loaded it for you just now. It is in the device theme folder.');\r\n\t\t\t\t}\r\n\t\t\t\twin.body().removeChild(dummy);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tw.resize();\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkFixedSplitterPane = function(/*Widget*/ w){\r\n\t\t\tconsole.log('[MIG:fixed] FixedSplitterPane: Deprecated. Use dojox/mobile/Container instead.');\r\n\t\t};\r\n\t\tthis.checkFixedSplitter = function(/*Widget*/ w){\r\n\t\t\t// FixedSplitter.css has been moved from the themes/common folder\r\n\t\t\t// to the device theme folder such as themes/android.\r\n\t\t\tif(!this._fixedSplitter_css_checked){\r\n\t\t\t\tthis._fixedSplitter_css_checked = true;\r\n\t\t\t\tvar dummy = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"mblFixedSplitter\"\r\n\t\t\t\t}, win.body());\r\n\t\t\t\tif(domStyle.get(dummy, \"height\") == 0){\r\n\t\t\t\t\tdomConstruct.create(\"link\", {\r\n\t\t\t\t\t\thref: \"../themes/android/FixedSplitter.css\",\r\n\t\t\t\t\t\ttype: \"text/css\",\r\n\t\t\t\t\t\trel: \"stylesheet\"\r\n\t\t\t\t\t}, win.doc.getElementsByTagName('head')[0]);\r\n\t\t\t\t\tconsole.log('[MIG:fixed] FixedSplitter.css does not seem to be loaded. Loaded it for you just now. It is in the device theme folder.');\r\n\t\t\t\t}\r\n\t\t\t\twin.body().removeChild(dummy);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tw.resize();\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkListItem = function(/*Widget*/ w){\r\n\t\t\tif(w.sync !== undefined || w.srcNodeRef && w.srcNodeRef.getAttribute(\"sync\")){\r\n\t\t\t\tconsole.log('[MIG:fixed] ListItem: The sync property is no longer supported. (async always)');\r\n\t\t\t}\r\n\t\t\tif(w.btnClass !== undefined || w.srcNodeRef && w.srcNodeRef.getAttribute(\"btnClass\")){\r\n\t\t\t\tconsole.log('[MIG:fixed] ListItem: The btnClass property is no longer supported. Use rightIcon instead.');\r\n\t\t\t\tw.rightIcon = w.btnClass || w.srcNodeRef && w.srcNodeRef.getAttribute(\"btnClass\");\r\n\t\t\t}\r\n\t\t\tif(w.btnClass2 !== undefined || w.srcNodeRef && w.srcNodeRef.getAttribute(\"btnClass2\")){\r\n\t\t\t\tconsole.log('[MIG:fixed] ListItem: The btnClass2 property is no longer supported. Use rightIcon2 instead.');\r\n\t\t\t\tw.rightIcon2 = w.btnClass2 || w.srcNodeRef && w.srcNodeRef.getAttribute(\"btnClass2\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkSpinWheelSlot = function(/*Widget*/ w){\r\n\t\t\tif(w.labels && w.labels[0] && w.labels[0].charAt(0) === '['){\r\n\t\t\t\tfor(var i = 0; i < w.labels.length; i++){\r\n\t\t\t\t\tw.labels[i] = w.labels[i].replace(/^\\[*[\\'\\\"]*/, '');\r\n\t\t\t\t\tw.labels[i] = w.labels[i].replace(/[\\'\\\"]*\\]*$/, '');\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('[MIG:fixed] SpinWheelSlot: dojox/mobile/parser no longer accepts array-type attribute like labels=\"[\\'A\\',\\'B\\',\\'C\\',\\'D\\',\\'E\\']\". Specify as labels=\"A,B,C,D,E\" instead.' );\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkSwapView = function(/*Widget*/ w){\r\n\t\t\tvar n = w.srcNodeRef;\r\n\t\t\tif(n){\r\n\t\t\t\tvar type = n.getAttribute(\"dojoType\") || n.getAttribute(\"data-dojo-type\");\r\n\t\t\t\tif(type === \"dojox.mobile.FlippableView\"){\r\n\t\t\t\t\tconsole.log('[MIG:fixed] FlippableView: FlippableView is no longer supported. Use SwapView instead.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkSwitch = function(/*Widget*/ w){\r\n\t\t\tif(w[\"class\"] === \"mblItemSwitch\"){\r\n\t\t\t\tconsole.log('[MIG:fixed] Switch: class=\"mblItemSwitch\" is no longer necessary.');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkTabBar = function(/*Widget*/ w){\r\n\t\t\tif(get(w, \"barType\") === \"segmentedControl\"){\r\n\t\t\t\tconsole.log('[MIG:warning] TabBar: segmentedControl in 1.8 produces the same UI regardless of the current theme. See the inline doc in migrationAssist.js for details.');\r\n\t\t\t\tdomConstruct.create(\"style\", {\r\n\t\t\t\t\tinnerHTML: \".iphone_theme .mblTabBarSegmentedControl .mblTabBarButtonIconArea { display: none; }\"\r\n\t\t\t\t}, win.doc.getElementsByTagName('head')[0]);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkTabBarButton = function(/*Widget*/ w){\r\n\t\t\tif((w[\"class\"] || \"\").indexOf(\"mblDomButton\") === 0){\r\n\t\t\t\tconsole.log('[MIG:fixed] TabBarButton: Use icon=\"' + w[\"class\"] + '\" instead of class=\"' + w[\"class\"] + '\".');\r\n\t\t\t\tw.icon = w[\"class\"];\r\n\t\t\t\tw[\"class\"] = \"\";\r\n\t\t\t\tif(w.srcNodeRef){\r\n\t\t\t\t\tw.srcNodeRef.className = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.checkToolBarButton = function(/*Widget*/ w){\r\n\t\t\tif((w[\"class\"] || \"\").indexOf(\"mblColor\") === 0){\r\n\t\t\t\tconsole.log('[MIG:fixed] ToolBarButton: Use defaultColor=\"' + w[\"class\"] + '\" instead of class=\"' + w[\"class\"] + '\".');\r\n\t\t\t\tw.defaultColor = w[\"class\"];\r\n\t\t\t\tw[\"class\"] = \"\";\r\n\t\t\t\tif(w.srcNodeRef){\r\n\t\t\t\t\tw.srcNodeRef.className = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif((w[\"class\"] || \"\").indexOf(\"mblDomButton\") === 0){\r\n\t\t\t\tconsole.log('[MIG:fixed] ToolBarButton: Use icon=\"' + w[\"class\"] + '\" instead of class=\"' + w[\"class\"] + '\".');\r\n\t\t\t\tw.icon = w[\"class\"];\r\n\t\t\t\tw[\"class\"] = \"\";\r\n\t\t\t\tif(w.srcNodeRef){\r\n\t\t\t\t\tw.srcNodeRef.className = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tdojox.mobile.FlippableView = SwapView;\r\n\r\n\tvar migrationAssist = new MigrationAssist();\r\n\r\n\t// Hide from the API doc tool, we want to get the documentation for the normal WidgetBase.postMixInProperties()\r\n\tWidgetBase.prototype.postMixInProperties = /*===== WidgetBase.prototype.postMixInProperties || =====*/ function(){\r\n\t\tmigrationAssist.dispatch(this.declaredClass, this);\r\n\t\tdojo.forEach([FixedSplitterPane, Heading, RoundRect, SpinWheel, TabBarButton, ToolBarButton, View], function(module){\r\n\t\t\tif(this.declaredClass !== module.prototype.declaredClass && this instanceof module){\r\n\t\t\t\tmigrationAssist.dispatch(module.prototype.declaredClass, this);\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t};\r\n\r\n\r\n\tvar extendSelectFunction = function(obj) {\r\n\t\tlang.extend(obj, {\r\n\t\t\tselect: function(){\r\n\t\t\t\tconsole.log('[MIG:fixed] ' + this.declaredClass + '(id='+this.id+'): Use set(\"selected\", boolean) instead of select/deselect.');\r\n\t\t\t\tobj.prototype.set.apply(this, [\"selected\", !arguments[0]]);\r\n\t\t\t},\r\n\t\t\tdeselect: function(){\r\n\t\t\t\tthis.select(true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\textendSelectFunction(ToolBarButton);\r\n\textendSelectFunction(TabBarButton);\r\n\r\n\tlang.extend(ListItem, {\r\n\t\tset: function(key, value){\r\n\t\t\tif(key === \"btnClass\"){\r\n\t\t\t\tconsole.log('[MIG:fixed] ' + this.declaredClass + '(id='+this.id+'): Use set(\"rightIcon\",x) instead of set(\"btnClass\",x).');\r\n\t\t\t\tkey = \"rightIcon\";\r\n\t\t\t}else if(key === \"btnClass2\"){\r\n\t\t\t\tconsole.log('[MIG:fixed] ' + this.declaredClass + '(id='+this.id+'): Use set(\"rightIcon2\",x) instead of set(\"btnClass2\",x).');\r\n\t\t\t\tkey = \"rightIcon2\";\r\n\t\t\t}\r\n\t\t\tWidgetBase.prototype.set.apply(this, [key, value]);\r\n\t\t}\r\n\t});\r\n\r\n\tlang.extend(SpinWheel, {\r\n\t\tgetValue: function(){\r\n\t\t\tconsole.log('[MIG:fixed] SpinWheel: getValue() is no longer supported. Use get(\"values\") instead.');\r\n\t\t\treturn this.get(\"values\");\r\n\t\t},\r\n\t\tsetValue: function(newValue){\r\n\t\t\tconsole.log('[MIG:fixed] SpinWheel: setValue() is no longer supported. Use set(\"values\",x) instead.');\r\n\t\t\treturn this.set(\"values\", newValue);\r\n\t\t}\r\n\t});\r\n\r\n\tlang.extend(SpinWheelSlot, {\r\n\t\tgetValue: function(){\r\n\t\t\tconsole.log('[MIG:fixed] SpinWheelSlot: getValue() is no longer supported. Use get(\"value\") instead.');\r\n\t\t\treturn this.get(\"value\");\r\n\t\t},\r\n\t\tgetKey: function(){\r\n\t\t\tconsole.log('[MIG:fixed] SpinWheelSlot: getKey() is no longer supported. Use get(\"key\") instead.');\r\n\t\t\treturn this.get(\"key\");\r\n\t\t},\r\n\t\tsetValue: function(newValue){\r\n\t\t\tconsole.log('[MIG:fixed] SpinWheelSlot: setValue() is no longer supported. Use set(\"value\",x) instead.');\r\n\t\t\treturn this.set(\"value\", newValue);\r\n\t\t}\r\n\t});\r\n\r\n\tlang.mixin(mobile, {\r\n\t\tcreateDomButton: function(){\r\n\t\t\tconsole.log('[MIG:fixed] dojox.mobile(id='+arguments[0].id+'): createDomButton was moved to iconUtils.');\r\n\t\t\treturn iconUtils.createDomButton.apply(this, arguments);\r\n\t\t}\r\n\t});\r\n\r\n\t// check css\r\n\tvar cssFiles = [], i, j;\r\n\r\n\t// collect @import\r\n\tvar s = win.doc.styleSheets;\r\n\tfor(i = 0; i < s.length; i++){\r\n\t\tif(s[i].href){ continue; }\r\n\t\tvar r = s[i].cssRules || s[i].imports;\r\n\t\tif(!r){ continue; }\r\n\t\tfor(j = 0; j < r.length; j++){\r\n\t\t\tif(r[j].href){\r\n\t\t\t\tcssFiles.push(r[j].href);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// collect <link>\r\n\tvar elems = win.doc.getElementsByTagName(\"link\");\r\n\tfor(i = 0; i < elems.length; i++){\r\n\t\tcssFiles.push(elems[i].href);\r\n\t}\r\n\r\n\tfor(i = 0; i < cssFiles.length; i++){\r\n\t\tif(cssFiles[i].indexOf(\"/iphone/\") !== -1){\r\n\t\t\tcurrentTheme = \"iphone\";\r\n\t\t}else if(cssFiles[i].indexOf(\"/android/\") !== -1){\r\n\t\t\tcurrentTheme = \"android\";\r\n\t\t}else if(cssFiles[i].indexOf(\"/blackberry/\") !== -1){\r\n\t\t\tcurrentTheme = \"blackberry\";\r\n\t\t}else if(cssFiles[i].indexOf(\"/custom/\") !== -1){\r\n\t\t\tcurrentTheme = \"custom\";\r\n\t\t}\r\n\t\tdomClass.add(win.doc.documentElement, currentTheme + \"_theme\");\r\n\r\n\t\tif(cssFiles[i].match(/themes\\/common\\/(FixedSplitter.css)|themes\\/common\\/(SpinWheel.css)/)){\r\n\t\t\tconsole.log('[MIG:error] ' + (RegExp.$1 || RegExp.$2) + ' is no longer in the themes/common folder. It is in the device theme folder.');\r\n\t\t}\r\n\t}\r\n\r\n\tready(function(){\r\n\t\tif(dojo.hash){\r\n\t\t\tconsole.log('[MIG:fixed] dojo/hash detected. If you would like to enable the bookmarkable feature, require dojox/mobile/bookmarkable instead of dojo/hash');\r\n\t\t\tif(dojo.require){\r\n\t\t\t\tdojo[\"require\"](\"dojox.mobile.bookmarkable\");\r\n\t\t\t}else{\r\n\t\t\t\trequire([\"dojox/mobile/bookmarkable\"]);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Return singleton.  (TODO: can we replace LazyLoadUtils class and singleton w/a simple hash of functions?)\r\n\treturn migrationAssist;\r\n});\r\n"]}