{"version":3,"sources":["mobile/TabBar.js"],"names":["define","array","declare","win","domClass","domConstruct","domGeometry","domStyle","domAttr","Contained","Container","WidgetBase","TabBarButton","has","BidiTabBar","TabBar","iconBase","iconPos","barType","closable","center","syncWithViews","tag","fill","selectOne","baseClass","_fixedButtonWidth","_fixedButtonMargin","_largeScreenWidth","buildRendering","this","domNode","srcNodeRef","create","set","reset","inherited","arguments","postCreate","f","view","moveTo","dir","transition","context","method","child","filter","getChildren","w","id","subscribe","startup","_started","resize","prev","_barType","c","contains","doc","documentElement","cap","s","charAt","toUpperCase","substring","remove","add","size","i","getMarginBox","bw","bm","arr","map","toggle","some","iconNode1","label","margin","containerNode","style","paddingLeft","Math","floor","length","width","isLeftToRight","marginLeft","marginRight","padding","parent","getParent","paddingRight","setMarginBox","getSelectedTab","selected","onCloseButtonClick","tab"],"mappings":"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","file":"../../mobile/TabBar.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dijit/_Contained\",\r\n\t\"dijit/_Container\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"./TabBarButton\",// to load TabBarButton for you (no direct references)\r\n\t\"dojo/has\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/TabBar\"\t\r\n], function(array, declare, win, domClass, domConstruct, domGeometry, domStyle, domAttr, Contained, Container, WidgetBase, TabBarButton, has, BidiTabBar){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/TabBar\r\n\r\n\tvar TabBar =  declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiTabBar\" : \"dojox.mobile.TabBar\", [WidgetBase, Container, Contained],{\r\n\t\t// summary:\r\n\t\t//\t\tA bar widget that has buttons to control visibility of views.\r\n\t\t// description:\r\n\t\t//\t\tTabBar is a container widget that has typically multiple\r\n\t\t//\t\tTabBarButtons which controls visibility of views. It can be used\r\n\t\t//\t\tas a tab container.\r\n\r\n\t\t// iconBase: String\r\n\t\t//\t\tThe default icon path for child items.\r\n\t\ticonBase: \"\",\r\n\r\n\t\t// iconPos: String\r\n\t\t//\t\tThe default icon position for child items.\r\n\t\ticonPos: \"\",\r\n\r\n\t\t// barType: String\r\n\t\t//\t\t\"tabBar\", \"segmentedControl\", \"standardTab\", \"slimTab\", \"flatTab\",\r\n\t\t//\t\tor \"tallTab\"\r\n\t\tbarType: \"tabBar\",\r\n\r\n\t\t// closable: Boolean\r\n\t\t//\t\tIf true, user can close (destroy) a child tab by clicking the X on the tab.\r\n\t\t//\t\tThis property is NOT effective for \"tabBar\" and \"tallBar\".\r\n\t\tclosable: false,\r\n\r\n\t\t// center: Boolean\r\n\t\t//\t\tIf true, place the tabs in the center of the bar.\r\n\t\t//\t\tThis property is NOT effective for \"tabBar\".\r\n\t\tcenter: true,\r\n\r\n\t\t// syncWithViews: Boolean\r\n\t\t//\t\tIf true, this widget listens to view transition events to be\r\n\t\t//\t\tsynchronized with view's visibility.\r\n\t\tsyncWithViews: false,\r\n\r\n\t\t// tag: String\r\n\t\t//\t\tA name of html tag to create as domNode.\r\n\t\ttag: \"ul\",\r\n\r\n\t\t// fill: String\r\n\t\t//\t\tDefine if the TabBar should resize its children so that they evenly fill all the available space in the bar.\r\n\t\t//\r\n\t\t//\t\tAllowed values:\r\n\t\t//\r\n\t\t//\t\t1. \"auto\" is the default behavior from version 1.8: bar buttons are resized to evenly fill the entire bar only on small devices (width < 500px) and when barType is \"tabBar\"\r\n\t\t//\t\t2. \"always\": bar buttons are always resized to evenly fill the entire bar\r\n\t\t//\t\t3. \"never\": bar buttons are never resized to evenly fill the entire bar\r\n\t\tfill: \"auto\",\r\n\r\n\t\t/* internal properties */\r\n\t\t// selectOne: [private] Boolean\r\n\t\t//\t\tSpecifies that only one item can be selected.\r\n\t\tselectOne: true,\r\n\t\tbaseClass: \"mblTabBar\",\r\n\t\t_fixedButtonWidth: 76,\r\n\t\t_fixedButtonMargin: 17,\r\n\t\t_largeScreenWidth: 500,\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.domNode = this.srcNodeRef || domConstruct.create(this.tag);\r\n\t\t\tdomAttr.set(this.domNode, \"role\", \"tablist\");\r\n\t\t\tthis.reset();\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\tpostCreate: function(){\r\n\t\t\tif(this.syncWithViews){ // see also RoundRect#postCreate\r\n\t\t\t\tvar f = function(view, moveTo, dir, transition, context, method){\r\n\t\t\t\t\tvar child = array.filter(this.getChildren(), function(w){\r\n\t\t\t\t\t\treturn w.moveTo === \"#\" + view.id || w.moveTo === view.id; })[0];\r\n\t\t\t\t\tif(child){ child.set(\"selected\", true); }\r\n\t\t\t\t};\r\n\t\t\t\tthis.subscribe(\"/dojox/mobile/afterTransitionIn\", f);\r\n\t\t\t\tthis.subscribe(\"/dojox/mobile/startView\", f);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.resize();\r\n\t\t},\r\n\r\n\t\treset: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResets the widget to its initial state.\r\n\t\t\tvar prev = this._barType;\r\n\t\t\tif(typeof this.barType === \"object\"){\r\n\t\t\t\tthis._barType = this.barType[\"*\"];\r\n\t\t\t\tfor(var c in this.barType){\r\n\t\t\t\t\tif(domClass.contains(win.doc.documentElement, c)){\r\n\t\t\t\t\t\tthis._barType = this.barType[c];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis._barType = this.barType;\r\n\t\t\t}\r\n\t\t\tvar cap = function(s){\r\n\t\t\t\treturn s.charAt(0).toUpperCase() + s.substring(1);\r\n\t\t\t};\r\n\t\t\tif(prev){\r\n\t\t\t\tdomClass.remove(this.domNode, this.baseClass + cap(prev));\r\n\t\t\t}\r\n\t\t\tdomClass.add(this.domNode, this.baseClass + cap(this._barType));\r\n\t\t},\r\n\r\n\t\tresize: function(size){\r\n\t\t\tvar i, w;\r\n\t\t\tif(size && size.w){\r\n\t\t\t\tw = size.w;\r\n\t\t\t}else{\r\n\t\t\t\tw = domGeometry.getMarginBox(this.domNode).w;\r\n\t\t\t}\r\n\t\t\tvar bw = this._fixedButtonWidth;\r\n\t\t\tvar bm = this._fixedButtonMargin;\r\n\t\t\tvar arr = array.map(this.getChildren(), function(w){ return w.domNode; });\r\n\r\n\t\t\tdomClass.toggle(this.domNode, \"mblTabBarNoIcons\",\r\n\t\t\t\t\t\t\t!array.some(this.getChildren(), function(w){ return w.iconNode1; }));\r\n\t\t\tdomClass.toggle(this.domNode, \"mblTabBarNoText\",\r\n\t\t\t\t\t\t\t!array.some(this.getChildren(), function(w){ return w.label; }));\r\n\r\n\t\t\tvar margin = 0;\r\n\t\t\tif(this._barType == \"tabBar\"){\r\n\t\t\t\tthis.containerNode.style.paddingLeft = \"\";\r\n\t\t\t\tmargin = Math.floor((w - (bw + bm * 2) * arr.length) / 2);\r\n\t\t\t\tif(this.fill == \"always\" || (this.fill == \"auto\" && (w < this._largeScreenWidth || margin < 0))){\r\n\t\t\t\t\tdomClass.add(this.domNode, \"mblTabBarFill\");\r\n\t\t\t\t\tfor(i = 0; i < arr.length; i++){\r\n\t\t\t\t\t\tarr[i].style.width = (100/arr.length) + \"%\";\r\n\t\t\t\t\t\tarr[i].style.margin = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// Fixed width buttons. Mainly for larger screen such as iPad.\r\n\t\t\t\t\tfor(i = 0; i < arr.length; i++){\r\n\t\t\t\t\t\tarr[i].style.width = bw + \"px\";\r\n\t\t\t\t\t\tarr[i].style.margin = \"0 \" + bm + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(arr.length > 0){\r\n\t\t\t\t\t\tif(has(\"dojo-bidi\") && !this.isLeftToRight()){\r\n\t\t\t\t\t\t\tarr[0].style.marginLeft = \"0px\";\r\n\t\t\t\t\t\t\tarr[0].style.marginRight = margin + bm + \"px\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tarr[0].style.marginLeft = margin + bm + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.containerNode.style.padding = \"0px\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(i = 0; i < arr.length; i++){\r\n\t\t\t\t\tarr[i].style.width = arr[i].style.margin = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tvar parent = this.getParent();\r\n\t\t\t\tif(this.fill == \"always\"){\r\n\t\t\t\t\tdomClass.add(this.domNode, \"mblTabBarFill\");\r\n\t\t\t\t\tfor(i = 0; i < arr.length; i++){\r\n\t\t\t\t\t\tarr[i].style.width = (100/arr.length) + \"%\";\r\n\t\t\t\t\t\tif(this._barType != \"segmentedControl\" && this._barType != \"standardTab\") {\r\n\t\t\t\t\t\t\tarr[i].style.margin = \"0\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.center && (!parent || !domClass.contains(parent.domNode, \"mblHeading\"))){\r\n\t\t\t\t\t\tmargin = w;\r\n\t\t\t\t\t\tfor(i = 0; i < arr.length; i++){\r\n\t\t\t\t\t\t\tmargin -= domGeometry.getMarginBox(arr[i]).w;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmargin = Math.floor(margin/2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(has(\"dojo-bidi\") && !this.isLeftToRight()){\r\n\t\t\t\t\t\tthis.containerNode.style.paddingLeft = \"0px\";\r\n\t\t\t\t\t\tthis.containerNode.style.paddingRight = margin ? margin + \"px\" : \"\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.containerNode.style.paddingLeft = margin ? margin + \"px\" : \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(size && size.w){\r\n\t\t\t\tdomGeometry.setMarginBox(this.domNode, size);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetSelectedTab: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns the first selected child.\r\n\t\t\treturn array.filter(this.getChildren(), function(w){ return w.selected; })[0];\r\n\t\t},\r\n\r\n\t\tonCloseButtonClick: function(/*TabBarButton*/tab){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled whenever the close button [X] of a child tab is clicked.\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn has(\"dojo-bidi\")?declare(\"dojox.mobile.TabBar\", [TabBar, BidiTabBar]):TabBar;\t\r\n});\r\n"]}