{"version":3,"sources":["mobile/Opener.js"],"names":["define","declare","Deferred","lang","win","domClass","domConstruct","domStyle","domGeometry","Tooltip","Overlay","lazyLoadUtils","isOverlay","contains","doc","documentElement","cls","lazy","requires","buildRendering","this","inherited","arguments","cover","create","onclick","hitch","class","style","position","backgroundColor","overflow","zIndex","domNode","onShow","node","onHide","v","show","positions","_this","when","instantiateLazyWidgets","set","top","left","width","height","_resizeCover","hide","val","_reposition","popupPos","parseInt","get","y","x","Math","max","w","scrollWidth","body","clientWidth","scrollHeight","clientHeight","_onBlur","e","ret","onBlur","prototype","baseClass"],"mappings":";;;;;;;AAAAA,QACC,qBACA,sBACA,kBACA,oBACA,iBACA,qBACA,iBACA,oBACA,YACA,YACA,mBACE,SAASC,EAASC,EAAUC,EAAMC,EAAKC,EAAUC,EAAcC,EAAUC,EAAaC,EAASC,EAASC,GAE1G,IAAIC,EAAYP,EAASQ,SAAST,EAAIU,IAAIC,gBAAiB,YAEvDC,EAAMf,EAAQ,sBAAuBW,EAAYF,EAAUD,GAU9DQ,MAAM,EAQNC,SAAU,GAEVC,eAAgB,WACfC,KAAKC,UAAUC,WACfF,KAAKG,MAAQjB,EAAakB,OAAO,OAChCC,QAAStB,EAAKuB,MAAMN,KAAM,WAAYO,MAAS,oBAC/CC,OAASC,SAAUjB,EAAY,WAAa,QAASkB,gBAAgB,cAAeC,SAAS,SAAUC,OAAO,OAC5GZ,KAAKa,QAAS,UAGlBC,OAAQ,SAAoBC,KAC5BC,OAAQ,SAAoBD,EAAkBE,KAE9CC,KAAM,SAASH,EAAMI,GACpB,GAAGnB,KAAKH,KAAK,CACZG,KAAKH,MAAO,EACZ,IAAIuB,EAAQpB,KACZ,OAAOlB,EAASuC,KAAK9B,EAAc+B,uBAAuBtB,KAAKa,QAASb,KAAKF,UAAW,WACvF,OAAOsB,EAAMF,KAAKH,EAAMI,KAO1B,OAJAnB,KAAKe,KAAOA,EACZf,KAAKc,OAAOC,GACZ5B,EAASoC,IAAIvB,KAAKG,OAASqB,IAAI,MAAOC,KAAK,MAAOC,MAAM,MAAOC,OAAO,QACtE3B,KAAK4B,aAAaxC,EAAYqB,SAAST,KAAKa,SAAS,IAC9Cb,KAAKC,UAAUC,YAGvB2B,KAAM,SAAsBC,GAC3B9B,KAAKC,UAAUC,WACfF,KAAKgB,OAAOhB,KAAKe,KAAMe,IAGxBC,YAAa,WAGZ,IAAIC,EAAWhC,KAAKC,UAAUC,WAE9B,OADAF,KAAK4B,aAAaI,GACXA,GAGRJ,aAAc,SAASI,GAGtB,GAAGxC,GACF,GAAGyC,SAAS9C,EAAS+C,IAAIlC,KAAKG,MAAO,UAAY6B,EAASG,GAAKF,SAAS9C,EAAS+C,IAAIlC,KAAKG,MAAO,YAAc6B,EAASG,EAAE,CACzH,IAAIC,EAAIC,KAAKC,IAAIN,EAASI,EAAG,GAC7BjD,EAASoC,IAAIvB,KAAKG,OAASqB,KAAKQ,EAASG,EAAE,KAAMV,MAAMW,EAAE,KAAMV,MAAMM,EAASO,EAAEH,EAAE,KAAMT,OAAOK,EAASG,EAAE,aAG3GhD,EAASoC,IAAIvB,KAAKG,OACjBuB,MAAMW,KAAKC,IAAItD,EAAIU,IAAIC,gBAAgB6C,aAAexD,EAAIyD,OAAOD,aAAexD,EAAIU,IAAIC,gBAAgB+C,aAAa,KACrHf,OAAOU,KAAKC,IAAItD,EAAIU,IAAIC,gBAAgBgD,cAAgB3D,EAAIyD,OAAOE,cAAgB3D,EAAIU,IAAIC,gBAAgBiD,cAAc,QAK5HC,QAAS,SAASC,GAGjB,IAAIC,EAAM/C,KAAKgD,OAAOF,GAItB,OAHW,IAARC,GACF/C,KAAK6B,KAAKiB,GAEJC,KAIT,OADAnD,EAAIqD,UAAUC,WAAa,aACpBtD","file":"../../mobile/Opener.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/Deferred\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"./Tooltip\",\r\n\t\"./Overlay\",\r\n\t\"./lazyLoadUtils\"\r\n], function(declare, Deferred, lang, win, domClass, domConstruct, domStyle, domGeometry, Tooltip, Overlay, lazyLoadUtils){\r\n\r\n\tvar isOverlay = domClass.contains(win.doc.documentElement, \"dj_phone\");\r\n\t\r\n\tvar cls = declare(\"dojox.mobile.Opener\", isOverlay ? Overlay : Tooltip, {\r\n\t\t// summary:\r\n\t\t//\t\tA non-templated popup widget that will use either Tooltip or \r\n\t\t//\t\tOverlay depending on screen size.\r\n\r\n\t\t// lazy: String\r\n\t\t//\t\tIf true, the content of the widget, which includes dojo markup,\r\n\t\t//\t\tis instantiated lazily. That is, only when the widget is opened\r\n\t\t//\t\tby the user, the required modules are loaded and the content\r\n\t\t//\t\twidgets are instantiated.\r\n\t\tlazy: false,\r\n\r\n\t\t// requires: String\r\n\t\t//\t\tComma-separated required module names to be lazily loaded. This\r\n\t\t//\t\tis effective only when lazy=true. All the modules specified with\r\n\t\t//\t\tdojoType and their depending modules are automatically loaded\r\n\t\t//\t\twhen the widget is opened. However, if you need other extra\r\n\t\t//\t\tmodules to be loaded, use this parameter.\r\n\t\trequires: \"\",\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.cover = domConstruct.create('div', {\r\n\t\t\t\tonclick: lang.hitch(this, '_onBlur'), 'class': 'mblOpenerUnderlay',\r\n\t\t\t\tstyle: { position: isOverlay ? 'absolute' : 'fixed', backgroundColor:'transparent', overflow:'hidden', zIndex:'-1' }\r\n\t\t\t}, this.domNode, 'first');\r\n\t\t},\r\n\r\n\t\tonShow: function(/*DomNode*/node){},\r\n\t\tonHide: function(/*DomNode*/node, /*Anything*/v){},\r\n\r\n\t\tshow: function(node, positions){\r\n\t\t\tif(this.lazy){\r\n\t\t\t\tthis.lazy = false;\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\treturn Deferred.when(lazyLoadUtils.instantiateLazyWidgets(this.domNode, this.requires), function(){\r\n\t\t\t\t\treturn _this.show(node, positions);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.node = node;\r\n\t\t\tthis.onShow(node);\r\n\t\t\tdomStyle.set(this.cover, { top:'0px', left:'0px', width:'0px', height:'0px' }); // move cover temporarily to calculate domNode vertical position correctly\r\n\t\t\tthis._resizeCover(domGeometry.position(this.domNode, false)); // must be before this.inherited(arguments) for Tooltip sizing\r\n\t\t\treturn this.inherited(arguments);\r\n\t\t},\r\n\r\n\t\thide: function(/*Anything*/ val){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.onHide(this.node, val);\r\n\t\t},\r\n\t\t\r\n\t\t_reposition: function(){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar popupPos = this.inherited(arguments);\r\n\t\t\tthis._resizeCover(popupPos);\r\n\t\t\treturn popupPos;\r\n\t\t},\r\n\r\n\t\t_resizeCover: function(popupPos){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(isOverlay){\r\n\t\t\t\tif(parseInt(domStyle.get(this.cover, 'top')) != -popupPos.y || parseInt(domStyle.get(this.cover, 'height')) != popupPos.y){\r\n\t\t\t\t\tvar x = Math.max(popupPos.x, 0); // correct onorientationchange values\r\n\t\t\t\t\tdomStyle.set(this.cover, { top:-popupPos.y+'px', left:-x+'px', width:popupPos.w+x+'px', height:popupPos.y+'px' });\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdomStyle.set(this.cover, { \r\n\t\t\t\t\twidth:Math.max(win.doc.documentElement.scrollWidth || win.body().scrollWidth || win.doc.documentElement.clientWidth)+'px', \r\n\t\t\t\t\theight:Math.max(win.doc.documentElement.scrollHeight || win.body().scrollHeight || win.doc.documentElement.clientHeight)+'px' \r\n\t\t\t\t});\r\n\t\t\t}\t\t\t\r\n\t\t},\r\n\r\n\t\t_onBlur: function(e){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar ret = this.onBlur(e);\r\n\t\t\tif(ret !== false){ // only exactly false prevents hide()\r\n\t\t\t\tthis.hide(e);\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t});\r\n\tcls.prototype.baseClass += \" mblOpener\"; // add to either mblOverlay or mblTooltip\r\n\treturn cls;\r\n});\r\n"]}