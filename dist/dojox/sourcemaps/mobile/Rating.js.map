{"version":3,"sources":["mobile/Rating.js"],"names":["define","declare","lang","domConstruct","WidgetBase","iconUtils","has","BidiRating","Rating","image","numStars","value","alt","baseClass","buildRendering","this","inherited","arguments","domNode","style","display","img","imgNode","create","connect","hitch","set","createIcon","_setValueAttr","_set","h","height","empty","i","left","w","width","parent","float","isLeftToRight","_setCustomTransform"],"mappings":";;;;;;;AAAAA,QACC,qBACA,kBACA,qBACA,oBACA,cACA,WACA,+CACE,SAASC,EAASC,EAAMC,EAAcC,EAAYC,EAAWC,EAAKC,GAMpE,IAAIC,EAASP,EAAQK,EAAI,aAAe,6BAA+B,uBAAwBF,IAU9FK,MAAO,GAIPC,SAAU,EAIVC,MAAO,EAIPC,IAAK,GAMLC,UAAW,YAEXC,eAAgB,WACfC,KAAKC,UAAUC,WACfF,KAAKG,QAAQC,MAAMC,QAAU,eAC7B,IAAIC,EAAMN,KAAKO,QAAUnB,EAAaoB,OAAO,OAC7CR,KAAKS,QAAQH,EAAK,SACjBnB,EAAKuB,MAAMV,KAAM,WAAYA,KAAKW,IAAI,QAASX,KAAKJ,UACrDN,EAAUsB,WAAWZ,KAAKN,MAAO,KAAMY,IAGxCO,cAAe,SAAmBjB,GAKjCI,KAAKc,KAAK,QAASlB,GACnB,IAAImB,EAAIf,KAAKO,QAAQS,OACrB,GAAQ,GAALD,EAAH,CACA3B,EAAa6B,MAAMjB,KAAKG,SACxB,IAAIe,EAAGC,EAAMC,EAAIpB,KAAKO,QAAQc,MAAQ,EACtC,IAAIH,EAAI,EAAGA,EAAIlB,KAAKL,SAAUuB,IAAI,CAEhCC,EADED,GAAKtB,EAAQ,EACR,EACCsB,GAAKtB,EACNwB,EAEI,EAAJA,EAER,IAAIE,EAASlC,EAAaoB,OAAO,OAChCJ,OAAQmB,MAAS,SACfvB,KAAKG,SACJH,KAAKwB,kBACRF,EAAStB,KAAKyB,oBAAoBH,IAEnChC,EAAUsB,WAAWZ,KAAKN,MACzB,KAAOyB,EAAO,IAAMC,EAAI,IAAML,EAAG,KAAMf,KAAKH,IAAKyB,MAIpDG,oBAAqB,SAAmBH,GAGvC,OAAOA,KAIT,OAAO/B,EAAI,aAAeL,EAAQ,uBAAwBO,EAAQD,IAAeC","file":"../../mobile/Rating.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"./iconUtils\",\r\n\t\"dojo/has\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/Rating\"\r\n], function(declare, lang, domConstruct, WidgetBase, iconUtils, has, BidiRating){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/Rating\r\n\r\n\t\r\n\tvar Rating = declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiRating\" : \"dojox.mobile.Rating\", [WidgetBase], {\r\n\t\t// summary:\r\n\t\t//\t\tA widget that displays a rating, usually with stars.\r\n\t\t// description:\r\n\t\t//\t\tThis widget simply shows the specified number of stars. It is a\r\n\t\t//\t\tread-only widget, and has no editing capability.\r\n\r\n\t\t// image: String\r\n\t\t//\t\tPath to a star image, which includes three stars, full star,\r\n\t\t//\t\tempty star, and half star, from left to right.\r\n\t\timage: \"\",\r\n\r\n\t\t// numStars: Number\r\n\t\t//\t\tThe number of stars to show.\r\n\t\tnumStars: 5,\r\n\r\n\t\t// value: Number\r\n\t\t//\t\tThe current value of the Rating.\r\n\t\tvalue: 0,\r\n\r\n\t\t// alt: String\r\n\t\t//\t\tAn alternate text for the icon image.\r\n\t\talt: \"\",\r\n\r\n\t\t/* internal properties */\r\n\t\t\r\n\t\t// baseClass: String\r\n\t\t//\t\tThe name of the CSS class of this widget.\r\n\t\tbaseClass: \"mblRating\",\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.domNode.style.display = \"inline-block\";\r\n\t\t\tvar img = this.imgNode = domConstruct.create(\"img\");\r\n\t\t\tthis.connect(img, \"onload\",\r\n\t\t\t\tlang.hitch(this, function(){ this.set(\"value\", this.value); }));\r\n\t\t\ticonUtils.createIcon(this.image, null, img);\r\n\t\t},\r\n\r\n\t\t_setValueAttr: function(/*Number*/value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets the value of the Rating.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"value\", value);\r\n\t\t\tvar h = this.imgNode.height;\r\n\t\t\tif(h == 0){ return; } // loading of image has not been completed yet\r\n\t\t\tdomConstruct.empty(this.domNode);\r\n\t\t\tvar i, left, w = this.imgNode.width / 3;\r\n\t\t\tfor(i = 0; i < this.numStars; i++){\r\n\t\t\t\tif(i <= value - 1){\r\n\t\t\t\t\tleft = 0; // full\r\n\t\t\t\t}else if(i >= value){\r\n\t\t\t\t\tleft = w; // empty\r\n\t\t\t\t}else{\r\n\t\t\t\t\tleft = w * 2; // half\r\n\t\t\t\t}\r\n\t\t\t\tvar parent = domConstruct.create(\"div\", {\r\n\t\t\t\t\tstyle: {\"float\": \"left\"}\r\n\t\t\t\t}, this.domNode);\r\n\t\t\t\tif(!this.isLeftToRight()){\r\n\t\t\t\t\tparent = this._setCustomTransform(parent);\r\n\t\t\t\t}\r\n\t\t\t\ticonUtils.createIcon(this.image,\r\n\t\t\t\t\t\"0,\" + left + \",\" + w + \",\" + h, null, this.alt, parent);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_setCustomTransform: function(/*Object*/parent){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTo be implemented in bidi/Rating.js.\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn has(\"dojo-bidi\") ? declare(\"dojox.mobile.Rating\", [Rating, BidiRating]) : Rating;\r\n\r\n});\r\n"]}