{"version":3,"sources":["mobile/viewRegistry.js"],"names":["define","array","domClass","registry","length","hash","initialView","add","view","this","id","remove","getViews","arr","i","push","getParentView","v","getParent","contains","domNode","getChildViews","parent","filter","getEnclosingView","node","n","tagName","parentNode","nodeType","byNode","getEnclosingScrollable","w","getEnclosingWidget","scrollableParams","_v"],"mappings":";;;;;;;AAAAA,QACC,mBACA,iBACA,kBACE,SAASC,EAAOC,EAAUC,GAwF5B,OA7ECC,OAAQ,EAIRC,QAIAC,YAAa,KAEbC,IAAK,SAA+BC,GAGnCC,KAAKJ,KAAKG,EAAKE,IAAMF,EACrBC,KAAKL,UAGNO,OAAQ,SAAoBD,GAGxBD,KAAKJ,KAAKK,YACLD,KAAKJ,KAAKK,GACjBD,KAAKL,WAIPQ,SAAU,WAIT,IAAIC,KACJ,IAAI,IAAIC,KAAKL,KAAKJ,KACjBQ,EAAIE,KAAKN,KAAKJ,KAAKS,IAEpB,OAAOD,GAGRG,cAAe,SAA+BR,GAI7C,IAAI,IAAIS,EAAIT,EAAKU,YAAaD,EAAGA,EAAIA,EAAEC,YACtC,GAAGhB,EAASiB,SAASF,EAAEG,QAAS,WAAa,OAAOH,EAErD,OAAO,MAGRI,cAAe,SAA+BC,GAI7C,OAAOrB,EAAMsB,OAAOd,KAAKG,WAAY,SAASK,GAAI,OAAOR,KAAKO,cAAcC,KAAOK,GAAWb,OAG/Fe,iBAAkB,SAAqBC,GAItC,IAAI,IAAIC,EAAID,EAAMC,GAAmB,SAAdA,EAAEC,QAAoBD,EAAIA,EAAEE,WAClD,GAAkB,IAAfF,EAAEG,UAAkB3B,EAASiB,SAASO,EAAG,WAC3C,OAAOvB,EAAS2B,OAAOJ,GAGzB,OAAO,MAGRK,uBAAwB,SAAqBN,GAI5C,IAAI,IAAIO,EAAI7B,EAAS8B,mBAAmBR,GAAOO,EAAGA,EAAIA,EAAEd,YACvD,GAAGc,EAAEE,kBAAoBF,EAAEG,GAAK,OAAOH,EAExC,OAAO","file":"../../mobile/viewRegistry.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/dom-class\",\r\n\t\"dijit/registry\"\r\n], function(array, domClass, registry){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/viewRegistry\r\n\r\n\tvar viewRegistry = {\r\n\t\t// summary:\r\n\t\t//\t\tA registry of existing views.\r\n\r\n\t\t// length: Number\r\n\t\t//\t\tThe number of registered views.\r\n\t\tlength: 0,\r\n\t\t\r\n\t\t// hash: [private] Object\r\n\t\t//\t\tThe object used to register views.\r\n\t\thash: {},\r\n\t\t\r\n\t\t// initialView: [private] dojox/mobile/View\r\n\t\t//\t\tThe initial view.\r\n\t\tinitialView: null,\r\n\r\n\t\tadd: function(/*dojox/mobile/View*/ view){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds a view to the registry.\r\n\t\t\tthis.hash[view.id] = view;\r\n\t\t\tthis.length++;\r\n\t\t},\r\n\r\n\t\tremove: function(/*String*/ id){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRemoves a view from the registry.\r\n\t\t\tif(this.hash[id]){\r\n\t\t\t\tdelete this.hash[id];\r\n\t\t\t\tthis.length--;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetViews: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets all registered views.\r\n\t\t\t// returns: Array\r\n\t\t\tvar arr = [];\r\n\t\t\tfor(var i in this.hash){\r\n\t\t\t\tarr.push(this.hash[i]);\r\n\t\t\t}\r\n\t\t\treturn arr;\r\n\t\t},\r\n\r\n\t\tgetParentView: function(/*dojox/mobile/View*/ view){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets the parent view of the specified view.\r\n\t\t\t// returns: dojox/mobile/View\r\n\t\t\tfor(var v = view.getParent(); v; v = v.getParent()){\r\n\t\t\t\tif(domClass.contains(v.domNode, \"mblView\")){ return v; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tgetChildViews: function(/*dojox/mobile/View*/ parent){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets the children views of the specified view.\r\n\t\t\t// returns: Array\r\n\t\t\treturn array.filter(this.getViews(), function(v){ return this.getParentView(v) === parent; }, this);\r\n\t\t},\r\n\r\n\t\tgetEnclosingView: function(/*DomNode*/ node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets the view containing the specified DOM node.\r\n\t\t\t// returns: dojox/mobile/View\r\n\t\t\tfor(var n = node; n && n.tagName !== \"BODY\"; n = n.parentNode){\r\n\t\t\t\tif(n.nodeType === 1 && domClass.contains(n, \"mblView\")){\r\n\t\t\t\t\treturn registry.byNode(n);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tgetEnclosingScrollable: function(/*DomNode*/ node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGets the dojox/mobile/scrollable object containing the specified DOM node.\r\n\t\t\t// returns: dojox/mobile/scrollable\r\n\t\t\tfor(var w = registry.getEnclosingWidget(node); w; w = w.getParent()){\r\n\t\t\t\tif(w.scrollableParams && w._v){ return w; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\treturn viewRegistry;\r\n});\r\n"]}