{"version":3,"sources":["mobile/deviceTheme.js"],"names":["define","deps","def","config","lang","win","require","dm","getObject","DeviceTheme","window","doc","document","_no_dojo_dm","mblConfig","scripts","getElementsByTagName","i","length","n","src","getAttribute","match","baseUrl","replace","conf","obj","eval","key","this","loadCssFile","file","link","createElement","href","type","rel","head","insertBefore","firstChild","loadedCssFiles","push","toUrl","path","setDm","_dm","themeMap","loadDeviceTheme","userAgent","j","t","mblThemeFiles","themeFiles","m","ua","mblUserAgent","location","search","RegExp","$1","navigator","theme","mblDisableWindowsTheme","cls","documentElement","className","currentTheme","files","concat","isArray","Array","indexOf","pkg","name","unshift","k","parentNode","removeChild","cssFilePath","toString","cssName","substr","lastIndexOf","loadCompatCssFiles","deviceTheme"],"mappings":"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","file":"../../mobile/deviceTheme.js","sourcesContent":["(typeof define === \"undefined\" ? function(deps, def) { def(); } : define)([\r\n\t\"dojo/_base/config\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\",\r\n\t\"require\"\r\n], function(config, lang, win, require){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/deviceTheme\r\n\r\n\tvar dm = lang && lang.getObject(\"dojox.mobile\", true) || {};\r\n\r\n\tvar DeviceTheme = function(){\r\n\t\t// summary:\r\n\t\t//\t\tAutomatic theme loader.\r\n\t\t// description:\r\n\t\t//\t\tThis module detects the user agent of the browser and loads the\r\n\t\t//\t\tappropriate theme files. It can be enabled by simply including \r\n\t\t//\t\tthe dojox/mobile/deviceTheme script in your application as follows:\r\n\t\t//\r\n\t\t//\t|\t<script src=\"dojox/mobile/deviceTheme.js\"></script>\r\n\t\t//\t|\t<script src=\"dojo/dojo.js\" data-dojo-config=\"parseOnLoad: true\"></script>\r\n\t\t//\r\n\t\t//\t\tUsing the script tag as above is the recommended way to load the \r\n\t\t//\t\tdeviceTheme. Trying to load it using the AMD loader can lead to styles \r\n\t\t//\t\tbeing applied too late, because the loading of the theme files would \r\n\t\t//\t\tbe performed asynchronously by the browser, so you could not assume \r\n\t\t//\t\tthat the loading has been completed when your widgets are initialized.\r\n\t\t//\t\tHowever, loading deviceTheme using the script tag has the drawback that \r\n\t\t//\t\tdeviceTheme.js cannot be included in a build.\r\n\t\t//\r\n\t\t//\t\tYou can also pass an additional query parameter string:\r\n\t\t//\t\ttheme={theme id} to force a specific theme through the browser\r\n\t\t//\t\tURL input. The available theme ids are Android, Holodark (theme introduced in Android 3.0), \r\n\t\t//\t\tBlackBerry, Custom, iPhone, and iPad. The theme names are case-sensitive. If the given\r\n\t\t//\t\tid does not match, the iPhone theme is used.\r\n\t\t//\r\n\t\t//\t|\thttp://your.server.com/yourapp.html // automatic detection\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=Android // forces Android theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=Holodark // forces Holodark theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=BlackBerry // forces Blackberry theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=Custom // forces Custom theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=iPhone // forces iPhone theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=iPad // forces iPad theme\r\n\t\t//\t|\thttp://your.server.com/yourapp.html?theme=ios7 // forces iOS 7 theme\r\n\t\t//\r\n\t\t//\t\tTo simulate a particular device from the application code, the user agent\r\n\t\t//\t\tcan be forced by setting dojoConfig.mblUserAgent as follows:\r\n\t\t//\r\n\t\t//\t|\t<script src=\"dojox/mobile/deviceTheme.js\" data-dojo-config=\"mblUserAgent: 'Holodark'\"></script>\r\n\t\t//\t|\t<script src=\"dojo/dojo.js\" data-dojo-config=\"parseOnLoad: true\"></script>\r\n\t\t//\r\n\t\t//\t\tBy default, an all-in-one theme file (e.g. themes/iphone/iphone.css) is\r\n\t\t//\t\tloaded. The all-in-one theme files contain style sheets for all the\r\n\t\t//\t\tdojox/mobile widgets regardless of whether they are used in your\r\n\t\t//\t\tapplication or not.\r\n\t\t//\r\n\t\t//\t\tIf you want to choose what theme files to load, you can specify them\r\n\t\t//\t\tvia dojoConfig or data-dojo-config as shown in the following example:\r\n\t\t//\r\n\t\t//\t|\t<script src=\"dojox/mobile/deviceTheme.js\"\r\n\t\t//\t|\t\tdata-dojo-config=\"mblThemeFiles:['base','Button']\"></script>\r\n\t\t//\t|\t<script src=\"dojo/dojo.js\" data-dojo-config=\"parseOnLoad: true\"></script>\r\n\t\t//\r\n\t\t//\t\tIn the case of this example, if iphone is detected, for example, the\r\n\t\t//\t\tfollowing files will be loaded:\r\n\t\t//\r\n\t\t//\t|\tdojox/mobile/themes/iphone/base.css\r\n\t\t//\t|\tdojox/mobile/themes/iphone/Button.css\r\n\t\t//\r\n\t\t//\t\tIf you want to load style sheets for your own custom widgets, you can\r\n\t\t//\t\tspecify a package name along with a theme file name in an array.\r\n\t\t//\r\n\t\t//\t|\t['base',['com.acme','MyWidget']]\r\n\t\t//\r\n\t\t//\t\tIn this case, the following files will be loaded.\r\n\t\t//\r\n\t\t//\t|\tdojox/mobile/themes/iphone/base.css\r\n\t\t//\t|\tcom/acme/themes/iphone/MyWidget.css\r\n\t\t//\r\n\t\t//\t\tIf you specify '@theme' as a theme file name, it will be replaced with\r\n\t\t//\t\tthe theme folder name (e.g. 'iphone'). For example,\r\n\t\t//\r\n\t\t//\t|\t['@theme',['com.acme','MyWidget']]\r\n\t\t//\r\n\t\t//\t\twill load the following files:\r\n\t\t//\r\n\t\t//\t|\tdojox/mobile/themes/iphone/iphone.css\r\n\t\t//\t|\tcom/acme/themes/iphone/MyWidget.css\r\n\t\t\r\n\t\tif(!win){\r\n\t\t\twin = window;\r\n\t\t\twin.doc = document;\r\n\t\t\twin._no_dojo_dm = dm;\r\n\t\t}\r\n\t\tconfig = config || win.mblConfig || {};\r\n\t\tvar scripts = win.doc.getElementsByTagName(\"script\");\r\n\t\tfor(var i = 0; i < scripts.length; i++){\r\n\t\t\tvar n = scripts[i];\r\n\t\t\tvar src = n.getAttribute(\"src\") || \"\";\r\n\t\t\tif(src.match(/\\/deviceTheme\\.js/i)){\r\n\t\t\t\tconfig.baseUrl = src.replace(\"deviceTheme\\.js\", \"../../dojo/\");\r\n\t\t\t\tvar conf = (n.getAttribute(\"data-dojo-config\") || n.getAttribute(\"djConfig\"));\r\n\t\t\t\tif(conf){\r\n\t\t\t\t\tvar obj = eval(\"({ \" + conf + \" })\");\r\n\t\t\t\t\tfor(var key in obj){\r\n\t\t\t\t\t\tconfig[key] = obj[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}else if(src.match(/\\/dojo\\.js/i)){\r\n\t\t\t\tconfig.baseUrl = src.replace(\"dojo\\.js\", \"\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadCssFile = function(/*String*/file){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tLoads the given CSS file programmatically.\r\n\t\t\tvar link = win.doc.createElement(\"link\");\r\n\t\t\tlink.href = file;\r\n\t\t\tlink.type = \"text/css\";\r\n\t\t\tlink.rel = \"stylesheet\";\r\n\t\t\tvar head = win.doc.getElementsByTagName('head')[0];\r\n\t\t\thead.insertBefore(link, head.firstChild);\r\n\t\t\tdm.loadedCssFiles.push(link);\r\n\t\t};\r\n\r\n\t\tthis.toUrl = function(/*String*/path){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA wrapper for require.toUrl to support non-dojo usage.\r\n\t\t\treturn require ? require.toUrl(path) : config.baseUrl + \"../\" + path;\r\n\t\t};\r\n\r\n\t\tthis.setDm = function(/*Object*/_dm){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReplaces the dojox/mobile object.\r\n\t\t\t// description:\r\n\t\t\t//\t\tWhen this module is loaded from a script tag, dm is a plain\r\n\t\t\t//\t\tlocal object defined at the beginning of this module.\r\n\t\t\t//\t\tcommon.js will replace the local dm object with the\r\n\t\t\t//\t\treal dojox/mobile object through this method.\r\n\t\t\tdm = _dm;\r\n\t\t};\r\n\r\n\t\tthis.themeMap = config.themeMap || [\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA map of user-agents to theme files.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThe first array element is a regexp pattern that matches the\r\n\t\t\t//\t\tuserAgent string.\r\n\t\t\t//\r\n\t\t\t//\t\tThe second array element is a theme folder name.\r\n\t\t\t//\r\n\t\t\t//\t\tThe third array element is an array of css file paths to load.\r\n\t\t\t//\r\n\t\t\t//\t\tThe matching is performed in the array order, and stops after the\r\n\t\t\t//\t\tfirst match.\r\n\t\t\t[\r\n\t\t\t\t\"Holodark\",\r\n\t\t\t\t\"holodark\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Android 3\",\r\n\t\t\t\t\"holodark\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Android 4\",\r\n\t\t\t\t\"holodark\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Android\",\r\n\t\t\t\t\"android\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"BlackBerry\",\r\n\t\t\t\t\"blackberry\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"BB10\",\r\n\t\t\t\t\"blackberry\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPhone;.*OS 7_\",\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPhone;.*OS 8_\",\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPad;.*OS 7_\",\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPad;.*OS 8_\",\r\n\t\t\t\t\"ios7\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPhone\",\r\n\t\t\t\t\"iphone\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"iPad\",\r\n\t\t\t\t\"iphone\",\r\n\t\t\t\t[this.toUrl(\"dojox/mobile/themes/iphone/ipad.css\")]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"WindowsPhone\",\r\n\t\t\t\t\"windows\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Windows Phone\",\r\n\t\t\t\t\"windows\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Trident\",\r\n\t\t\t\t\"iphone\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"Custom\",\r\n\t\t\t\t\"custom\",\r\n\t\t\t\t[]\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\".*\",\r\n\t\t\t\t\"iphone\",\r\n\t\t\t\t[]\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tdm.loadedCssFiles = [];\r\n\t\tthis.loadDeviceTheme = function(/*String?*/userAgent){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tLoads a device-specific theme according to the user-agent\r\n\t\t\t//\t\tstring.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function is automatically called when this module is\r\n\t\t\t//\t\tevaluated.\r\n\t\t\tvar t = config.mblThemeFiles || dm.themeFiles || [\"@theme\"];\r\n\t\t\tvar i, j;\r\n\t\t\tvar m = this.themeMap;\r\n\t\t\tvar ua = userAgent || config.mblUserAgent || (location.search.match(/theme=(\\w+)/) ? RegExp.$1 : navigator.userAgent);\r\n\t\t\tfor(i = 0; i < m.length; i++){\r\n\t\t\t\tif(ua.match(new RegExp(m[i][0]))){\r\n\t\t\t\t\tvar theme = m[i][1];\r\n\t\t\t\t\tif(theme == \"windows\" && config.mblDisableWindowsTheme){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cls = win.doc.documentElement.className;\r\n\t\t\t\t\tcls = cls.replace(new RegExp(\" *\" + dm.currentTheme + \"_theme\"), \"\") + \" \" + theme + \"_theme\";\r\n\t\t\t\t\twin.doc.documentElement.className = cls;\r\n\t\t\t\t\tdm.currentTheme = theme;\r\n\t\t\t\t\tvar files = [].concat(m[i][2]);\r\n\t\t\t\t\tfor(j = 0; j < t.length; j++){ \r\n\t\t\t\t\t\tvar isArray = (t[j] instanceof Array || typeof t[j] == \"array\");\r\n\t\t\t\t\t\tvar path;\r\n\t\t\t\t\t\tif(!isArray && t[j].indexOf('/') !== -1){\r\n\t\t\t\t\t\t\tpath = t[j];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar pkg = isArray ? (t[j][0]||\"\").replace(/\\./g, '/') : \"dojox/mobile\";\r\n\t\t\t\t\t\t\tvar name = (isArray ? t[j][1] : t[j]).replace(/\\./g, '/');\r\n\t\t\t\t\t\t\tvar f = \"themes/\" + theme + \"/\" +\r\n\t\t\t\t\t\t\t\t(name === \"@theme\" ? theme : name) + \".css\";\r\n\t\t\t\t\t\t\tpath = pkg + \"/\" + f;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfiles.unshift(this.toUrl(path));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//remove old css files\r\n\t\t\t\t\tfor(var k = 0; k < dm.loadedCssFiles.length; k++){\r\n\t\t\t\t\t\tvar n = dm.loadedCssFiles[k];\r\n\t\t\t\t\t\tn.parentNode.removeChild(n);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdm.loadedCssFiles = [];\r\n\t\t\t\t\tfor(j = 0; j < files.length; j++){\r\n\t\t\t\t\t\t// dojox.mobile mirroring support\r\n\t\t\t\t\t\tvar cssFilePath = files[j].toString();\r\n\t\t\t\t\t\tif(config[\"dojo-bidi\"] == true && cssFilePath.indexOf(\"_rtl\") == -1){\r\n\t\t\t\t\t\t\tvar rtlCssList = \"android.css blackberry.css custom.css iphone.css holodark.css base.css Carousel.css ComboBox.css IconContainer.css IconMenu.css ListItem.css RoundRectCategory.css SpinWheel.css Switch.css TabBar.css ToggleButton.css ToolBarButton.css ProgressIndicator.css Accordion.css GridLayout.css FormLayout.css\";\r\n\t\t\t\t\t\t\tvar cssName = cssFilePath.substr(cssFilePath.lastIndexOf('/') + 1);\r\n\t\t\t\t\t\t\tif(rtlCssList.indexOf(cssName) != -1){\r\n\t\t\t\t\t\t\t\tthis.loadCssFile(cssFilePath.replace(\".css\",\"_rtl.css\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loadCssFile(files[j].toString());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(userAgent && dm.loadCompatCssFiles){\r\n\t\t\t\t\t\tdm.loadCompatCssFiles();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Singleton.  (TODO: can we replace DeviceTheme class and singleton w/a simple hash of functions?)\r\n\tvar deviceTheme = new DeviceTheme();\r\n\r\n\tdeviceTheme.loadDeviceTheme();\r\n\twindow.deviceTheme = dm.deviceTheme = deviceTheme;\r\n\r\n\treturn deviceTheme;\r\n});\r\n"]}