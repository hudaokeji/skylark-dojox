{"version":3,"sources":["mobile/Accordion.js"],"names":["define","array","declare","lang","has","domClass","domConstruct","domAttr","Contained","Container","WidgetBase","iconUtils","lazyLoadUtils","css3","common","require","BidiAccordion","_AccordionTitle","label","icon1","icon2","iconPos1","iconPos2","selected","baseClass","buildRendering","this","inherited","arguments","a","anchorNode","create","className","role","domNode","textBoxNode","labelNode","innerHTML","_cv","_isOnLine","inheritParams","set","postCreate","connect","setSelectable","parent","getParent","iconBase","charAt","length","iconPos","_setIcon","icon","n","_set","setIcon","alt","toggle","isLeftToRight","_setIconDir","_setIcon1Attr","_setIcon2Attr","startup","_started","_onClick","e","onClick","p","fixedHeight","contentWidget","style","display","expand","animation","collapse","_setSelectedAttr","Accordion","singleOpen","roundRect","duration","_openSpace","contains","add","sel","children","getChildren","forEach","_setupChild","posinset","child","_at","_updateLast","defer","resize","overflow","place","id","addChild","widget","insertIndex","height","_addChildAriaAttrs","removeChild","destroy","filter","getSelectedPanes","pane","panes","openSpace","clientHeight","offsetHeight","name","c","i","noAnimation","lazy","instantiateLazyWidgets","containerNode","requires","h","parseInt","getAttribute","select","_this","v","deselect","ChildWidgetProperties","extend"],"mappings":"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","file":"../../mobile/Accordion.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/sniff\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dijit/_Contained\",\r\n\t\"dijit/_Container\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"./iconUtils\",\r\n\t\"./lazyLoadUtils\",\r\n\t\"./_css3\",\r\n\t\"./common\",\r\n\t\"require\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/Accordion\"\r\n], function(array, declare, lang, has, domClass, domConstruct, domAttr, Contained, Container, WidgetBase, iconUtils, lazyLoadUtils, css3, common, require, BidiAccordion){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/Accordion\r\n\r\n\t// inner class\r\n\tvar _AccordionTitle = declare([WidgetBase, Contained], {\r\n\t\t// summary:\r\n\t\t//\t\tA widget for the title of the accordion.\r\n\t\r\n\t\t// label: String\r\n\t\t//\t\tThe title of the accordion.\r\n\t\tlabel: \"Label\",\r\n\t\t\r\n\t\t// icon1: String\r\n\t\t//\t\tA path for the unselected (typically dark) icon. If icon is not\r\n\t\t//\t\tspecified, the iconBase parameter of the parent widget is used.\r\n\t\ticon1: \"\",\r\n\r\n\t\t// icon2: String\r\n\t\t//\t\tA path for the selected (typically highlight) icon. If icon is\r\n\t\t//\t\tnot specified, the iconBase parameter of the parent widget or\r\n\t\t//\t\ticon1 is used.\r\n\t\ticon2: \"\",\r\n\r\n\t\t// iconPos1: String\r\n\t\t//\t\tThe position of an aggregated unselected (typically dark)\r\n\t\t//\t\ticon. IconPos1 is a comma-separated list of values like\r\n\t\t//\t\ttop,left,width,height (ex. \"0,0,29,29\"). If iconPos1 is not\r\n\t\t//\t\tspecified, the iconPos parameter of the parent widget is used.\r\n\t\ticonPos1: \"\",\r\n\r\n\t\t// iconPos2: String\r\n\t\t//\t\tThe position of an aggregated selected (typically highlight)\r\n\t\t//\t\ticon. IconPos2 is a comma-separated list of values like\r\n\t\t//\t\ttop,left,width,height (ex. \"0,0,29,29\"). If iconPos2 is not\r\n\t\t//\t\tspecified, the iconPos parameter of the parent widget or\r\n\t\t//\t\ticonPos1 is used.\r\n\t\ticonPos2: \"\",\r\n\r\n\t\t// selected: Boolean\r\n\t\t//\t\tIf true, the widget is in the selected state.\r\n\t\tselected: false,\r\n\r\n\t\t// baseClass: String\r\n\t\t//\t\tThe name of the CSS class of this widget.\r\n\t\tbaseClass: \"mblAccordionTitle\",\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\tvar a = this.anchorNode = domConstruct.create(\"a\", {\r\n\t\t\t\tclassName: \"mblAccordionTitleAnchor\",\r\n\t\t\t\trole: \"presentation\"\r\n\t\t\t}, this.domNode);\r\n\r\n\t\t\t// text box\r\n\t\t\tthis.textBoxNode = domConstruct.create(\"div\", {className:\"mblAccordionTitleTextBox\"}, a);\r\n\t\t\tthis.labelNode = domConstruct.create(\"span\", {\r\n\t\t\t\tclassName: \"mblAccordionTitleLabel\",\r\n\t\t\t\tinnerHTML: this._cv ? this._cv(this.label) : this.label\r\n\t\t\t}, this.textBoxNode);\r\n\t\t\tthis._isOnLine = this.inheritParams();\r\n\r\n\t\t\tdomAttr.set(this.textBoxNode, \"role\", \"tab\"); // A11Y\r\n\t\t\tdomAttr.set(this.textBoxNode, \"tabindex\", \"0\");\r\n\t\t},\r\n\r\n\t\tpostCreate: function(){\r\n\t\t\tthis.connect(this.domNode, \"onclick\", \"_onClick\");\r\n\t\t\tcommon.setSelectable(this.domNode, false);\r\n\t\t},\r\n\r\n\t\tinheritParams: function(){\r\n\t\t\tvar parent = this.getParent();\r\n\t\t\tif(parent){\r\n\t\t\t\tif(this.icon1 && parent.iconBase &&\r\n\t\t\t\t\tparent.iconBase.charAt(parent.iconBase.length - 1) === '/'){\r\n\t\t\t\t\tthis.icon1 = parent.iconBase + this.icon1;\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.icon1){ this.icon1 = parent.iconBase; }\r\n\t\t\t\tif(!this.iconPos1){ this.iconPos1 = parent.iconPos; }\r\n\t\t\t\tif(this.icon2 && parent.iconBase &&\r\n\t\t\t\t\tparent.iconBase.charAt(parent.iconBase.length - 1) === '/'){\r\n\t\t\t\t\tthis.icon2 = parent.iconBase + this.icon2;\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.icon2){ this.icon2 = parent.iconBase || this.icon1; }\r\n\t\t\t\tif(!this.iconPos2){ this.iconPos2 = parent.iconPos || this.iconPos1; }\r\n\t\t\t}\r\n\t\t\treturn !!parent;\r\n\t\t},\r\n\r\n\t\t_setIcon: function(icon, n){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(!this.getParent()){ return; } // icon may be invalid because inheritParams is not called yet\r\n\t\t\tthis._set(\"icon\" + n, icon);\r\n\t\t\tif(!this[\"iconParentNode\" + n]){\r\n\t\t\t\tthis[\"iconParentNode\" + n] = domConstruct.create(\"div\",\r\n\t\t\t\t\t{className:\"mblAccordionIconParent mblAccordionIconParent\" + n}, this.anchorNode, \"first\");\r\n\t\t\t}\r\n\t\t\tthis[\"iconNode\" + n] = iconUtils.setIcon(icon, this[\"iconPos\" + n],\r\n\t\t\t\tthis[\"iconNode\" + n], this.alt, this[\"iconParentNode\" + n]);\r\n\t\t\tthis[\"icon\" + n] = icon;\r\n\t\t\tdomClass.toggle(this.domNode, \"mblAccordionHasIcon\", icon && icon !== \"none\");\r\n\t\t\tif(has(\"dojo-bidi\") && !this.getParent().isLeftToRight()){\r\n\t\t\t\tthis.getParent()._setIconDir(this[\"iconParentNode\" + n]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setIcon1Attr: function(icon){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._setIcon(icon, 1);\r\n\t\t},\r\n\r\n\t\t_setIcon2Attr: function(icon){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._setIcon(icon, 2);\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\t\t\tif(!this._isOnLine){\r\n\t\t\t\tthis.inheritParams();\r\n\t\t\t}\r\n\t\t\tif(!this._isOnLine){\r\n\t\t\t\tthis.set({ // retry applying the attribute\r\n\t\t\t\t\ticon1: this.icon1,\r\n\t\t\t\t\ticon2: this.icon2\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\t_onClick: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInternal handler for click events.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this.onClick(e) === false){ return; } // user's click action\r\n\t\t\tvar p = this.getParent();\r\n\t\t\tif(!p.fixedHeight && this.contentWidget.domNode.style.display !== \"none\"){\r\n\t\t\t\tp.collapse(this.contentWidget, !p.animation);\r\n\t\t\t}else{\r\n\t\t\t\tp.expand(this.contentWidget, !p.animation);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(/*Event*/ /*===== e =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUser-defined function to handle clicks\r\n\t\t\t// tags:\r\n\t\t\t//\t\tcallback\r\n\t\t},\r\n\r\n\t\t_setSelectedAttr: function(/*Boolean*/selected){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tdomClass.toggle(this.domNode, \"mblAccordionTitleSelected\", selected);\r\n\t\t\tthis._set(\"selected\", selected);\r\n\t\t}\r\n\t});\r\n\r\n\tvar Accordion = declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiAccordion\" : \"dojox.mobile.Accordion\", [WidgetBase, Container, Contained], {\r\n\t\t// summary:\r\n\t\t//\t\tA container widget that can display a group of child panes in a stacked format.\r\n\t\t// description:\r\n\t\t//\t\tTypically, dojox/mobile/Pane, dojox/mobile/Container, or dojox/mobile/ContentPane are \r\n\t\t//\t\tused as child widgets, but Accordion requires no specific child widget. \r\n\t\t//\t\tAccordion supports three modes for opening child panes: multiselect, fixed-height,\r\n\t\t//\t\tand single-select. Accordion can have rounded corners, and it can lazy-load the \r\n\t\t//\t\tcontent modules.\r\n\r\n\t\t// iconBase: String\r\n\t\t//\t\tThe default icon path for child widgets.\r\n\t\ticonBase: \"\",\r\n\r\n\t\t// iconPos: String\r\n\t\t//\t\tThe default icon position for child widgets.\r\n\t\ticonPos: \"\",\r\n\r\n\t\t// fixedHeight: Boolean\r\n\t\t//\t\tIf true, the entire accordion widget has fixed height regardless\r\n\t\t//\t\tof the height of each pane; in this mode, there is always an open pane and\r\n\t\t//\t\tcollapsing a pane can only be done by opening a different pane.\r\n\t\tfixedHeight: false,\r\n\r\n\t\t// singleOpen: Boolean\r\n\t\t//\t\tIf true, only one pane is open at a time. The current open pane\r\n\t\t//\t\tis collapsed, when another pane is opened.\r\n\t\tsingleOpen: false,\r\n\r\n\t\t// animation: Boolean\r\n\t\t//\t\tIf true, animation is used when a pane is opened or\r\n\t\t//\t\tcollapsed. The animation works only on webkit browsers.\r\n\t\tanimation: true,\r\n\r\n\t\t// roundRect: Boolean\r\n\t\t//\t\tIf true, the widget shows rounded corners.\r\n\t\t//\t\tAdding the \"mblAccordionRoundRect\" class to domNode has the same effect.\r\n\t\troundRect: false,\r\n\r\n\t\t/* internal properties */\r\n\t\tduration: .3, // [seconds]\r\n\r\n\t\t// baseClass: String\r\n\t\t//\t\tThe name of the CSS class of this widget.\r\n\t\tbaseClass: \"mblAccordion\",\r\n\r\n\t\t// _openSpace: [private] Number|String \r\n\t\t_openSpace: 1,\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tdomAttr.set(this.domNode, \"role\", \"tablist\"); // A11Y\r\n\t\t\tdomAttr.set(this.domNode, \"aria-multiselectable\", !this.singleOpen); // A11Y\r\n\t\t},\r\n\t\t\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\r\n\t\t\tif(domClass.contains(this.domNode, \"mblAccordionRoundRect\")){\r\n\t\t\t\tthis.roundRect = true;\r\n\t\t\t}else if(this.roundRect){\r\n\t\t\t\tdomClass.add(this.domNode, \"mblAccordionRoundRect\");\r\n\t\t\t}\r\n\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tthis.singleOpen = true;\r\n\t\t\t}\r\n\t\t\tvar children = this.getChildren();\r\n\t\t\tarray.forEach(children, this._setupChild, this);\r\n\t\t\tvar sel;\r\n\t\t\tvar posinset = 1;\r\n\t\t\tarray.forEach(children, function(child){\r\n\t\t\t\tchild.startup();\r\n\t\t\t\tchild._at.startup();\r\n\t\t\t\tthis.collapse(child, true);\r\n\t\t\t\tdomAttr.set(child._at.textBoxNode, \"aria-setsize\", children.length);\r\n\t\t\t\tdomAttr.set(child._at.textBoxNode, \"aria-posinset\", posinset++);\r\n\t\t\t\tif(child.selected){\r\n\t\t\t\t\tsel = child;\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tif(!sel && this.fixedHeight){\r\n\t\t\t\tsel = children[children.length - 1];\r\n\t\t\t}\r\n\t\t\tif(sel){\r\n\t\t\t\tthis.expand(sel, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis._updateLast();\r\n\t\t\t}\r\n\t\t\tthis.defer(function(){ this.resize(); });\r\n\r\n\t\t\tthis._started = true;\r\n\t\t},\r\n\r\n\t\t_setupChild: function(/*Widget*/ child){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(child.domNode.style.overflow != \"hidden\"){\r\n\t\t\t\tchild.domNode.style.overflow = this.fixedHeight ? \"auto\" : \"hidden\";\r\n\t\t\t}\r\n\t\t\tchild._at = new _AccordionTitle({\r\n\t\t\t\tlabel: child.label,\r\n\t\t\t\talt: child.alt,\r\n\t\t\t\ticon1: child.icon1,\r\n\t\t\t\ticon2: child.icon2,\r\n\t\t\t\ticonPos1: child.iconPos1,\r\n\t\t\t\ticonPos2: child.iconPos2,\r\n\t\t\t\tcontentWidget: child\r\n\t\t\t});\r\n\t\t\tdomConstruct.place(child._at.domNode, child.domNode, \"before\");\r\n\t\t\tdomClass.add(child.domNode, \"mblAccordionPane\");\r\n\t\t\tdomAttr.set(child._at.textBoxNode, \"aria-controls\", child.domNode.id); // A11Y\r\n\t\t\tdomAttr.set(child.domNode, \"role\", \"tabpanel\"); // A11Y\r\n\t\t\tdomAttr.set(child.domNode, \"aria-labelledby\", child._at.id); // A11Y\r\n\t\t},\r\n\r\n\t\taddChild: function(/*Widget*/ widget, /*int?*/ insertIndex){\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tif(this._started){\r\n\t\t\t\tthis._setupChild(widget);\r\n\t\t\t\twidget._at.startup();\r\n\t\t\t\tif(widget.selected){\r\n\t\t\t\t\tthis.expand(widget, true);\r\n\t\t\t\t\tthis.defer(function(){\r\n\t\t\t\t\t\twidget.domNode.style.height = \"\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.collapse(widget);\r\n\t\t\t\t}\r\n\t\t\t\tthis._addChildAriaAttrs();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tremoveChild: function(/*Widget|int*/ widget){\r\n\t\t\tif(typeof widget == \"number\"){\r\n\t\t\t\twidget = this.getChildren()[widget];\r\n\t\t\t}\r\n\t\t\tif(widget){\r\n\t\t\t\twidget._at.destroy();\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis._addChildAriaAttrs();\r\n\t\t},\r\n\t\t\r\n\t\t_addChildAriaAttrs: function(){\r\n\t\t\tvar posinset = 1;\r\n\t\t\tvar children = this.getChildren();\r\n\t\t\tarray.forEach(children, function(child){\r\n\t\t\t\tdomAttr.set(child._at.textBoxNode, \"aria-posinset\", posinset++);\r\n\t\t\t\tdomAttr.set(child._at.textBoxNode, \"aria-setsize\", children.length);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetChildren: function(){\r\n\t\t\treturn array.filter(this.inherited(arguments), function(child){\r\n\t\t\t\treturn !(child instanceof _AccordionTitle);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetSelectedPanes: function(){\r\n\t\t\treturn array.filter(this.getChildren(), function(pane){\r\n\t\t\t\treturn pane.domNode.style.display != \"none\";\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tresize: function(){\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tvar panes = array.filter(this.getChildren(), function(child){ // active pages\r\n\t\t\t\t\treturn child._at.domNode.style.display != \"none\";\r\n\t\t\t\t});\r\n\t\t\t\tvar openSpace = this.domNode.clientHeight; // height of all panes\r\n\t\t\t\tarray.forEach(panes, function(child){\r\n\t\t\t\t\topenSpace -= child._at.domNode.offsetHeight;\r\n\t\t\t\t});\r\n\t\t\t\tthis._openSpace = openSpace > 0 ? openSpace : 0;\r\n\t\t\t\tvar sel = this.getSelectedPanes()[0];\r\n\t\t\t\tsel.domNode.style[css3.name(\"transition\")] = \"\";\r\n\t\t\t\tsel.domNode.style.height = this._openSpace + \"px\";\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateLast: function(){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar children = this.getChildren();\r\n\t\t\tarray.forEach(children, function(c, i){\r\n\t\t\t\t// add \"mblAccordionTitleLast\" to the last, closed accordion title\r\n\t\t\t\tdomClass.toggle(c._at.domNode, \"mblAccordionTitleLast\",\r\n\t\t\t\t\ti === children.length - 1 && !domClass.contains(c._at.domNode, \"mblAccordionTitleSelected\"))\r\n\t\t\t}, this);\r\n\t\t},\r\n\r\n\t\texpand: function(/*Widget*/pane, /*boolean*/noAnimation){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tExpands the given pane to make it visible.\r\n\t\t\t// pane:\r\n\t\t\t//\t\tA pane widget to expand.\r\n\t\t\t// noAnimation:\r\n\t\t\t//\t\tIf true, the pane expands immediately without animation effect.\r\n\t\t\tif(pane.lazy){\r\n\t\t\t\tlazyLoadUtils.instantiateLazyWidgets(pane.containerNode, pane.requires);\r\n\t\t\t\tpane.lazy = false;\r\n\t\t\t}\r\n\t\t\tvar children = this.getChildren();\r\n\t\t\tarray.forEach(children, function(c, i){\r\n\t\t\t\tc.domNode.style[css3.name(\"transition\")] = noAnimation ? \"\" : \"height \"+this.duration+\"s linear\";\r\n\t\t\t\tif(c === pane){\r\n\t\t\t\t\tc.domNode.style.display = \"\";\r\n\t\t\t\t\tvar h;\r\n\t\t\t\t\tif(this.fixedHeight){\r\n\t\t\t\t\t\th = this._openSpace;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\th = parseInt(c.height || c.domNode.getAttribute(\"height\")); // ScrollableView may have the height property\r\n\t\t\t\t\t\tif(!h){\r\n\t\t\t\t\t\t\tc.domNode.style.height = \"\";\r\n\t\t\t\t\t\t\th = c.domNode.offsetHeight;\r\n\t\t\t\t\t\t\tc.domNode.style.height = \"0px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.defer(function(){ // necessary for webkitTransition to work\r\n\t\t\t\t\t\tc.domNode.style.height = h + \"px\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.select(pane);\r\n\t\t\t\t}else if(this.singleOpen){\r\n\t\t\t\t\tthis.collapse(c, noAnimation);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._updateLast();\r\n\t\t\tdomAttr.set(pane.domNode, \"aria-expanded\", \"true\"); // A11Y\r\n\t\t\tdomAttr.set(pane.domNode, \"aria-hidden\", \"false\"); // A11Y\r\n\t\t},\r\n\r\n\t\tcollapse: function(/*Widget*/pane, /*boolean*/noAnimation){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCollapses the given pane to close it.\r\n\t\t\t// pane:\r\n\t\t\t//\t\tA pane widget to collapse.\r\n\t\t\t// noAnimation:\r\n\t\t\t//\t\tIf true, the pane collapses immediately without animation effect.\r\n\t\t\tif(pane.domNode.style.display === \"none\"){ return; } // already collapsed\r\n\t\t\tpane.domNode.style[css3.name(\"transition\")] = noAnimation ? \"\" : \"height \"+this.duration+\"s linear\";\r\n\t\t\tpane.domNode.style.height = \"0px\";\r\n\t\t\tif(!has(\"css3-animations\") || noAnimation){\r\n\t\t\t\tpane.domNode.style.display = \"none\";\r\n\t\t\t\tthis._updateLast();\r\n\t\t\t}else{\r\n\t\t\t\t// Adding a webkitTransitionEnd handler to panes may cause conflict\r\n\t\t\t\t// when the panes already have the one. (e.g. ScrollableView)\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.defer(function(){\r\n\t\t\t\t\tpane.domNode.style.display = \"none\";\r\n\t\t\t\t\t_this._updateLast();\r\n\r\n\t\t\t\t\t// Need to call parent view's resize() especially when the Accordion is\r\n\t\t\t\t\t// on a ScrollableView, the ScrollableView is scrolled to\r\n\t\t\t\t\t// the bottom, and then expand any other pane while in the\r\n\t\t\t\t\t// non-fixed singleOpen mode.\r\n\t\t\t\t\tif(!_this.fixedHeight && _this.singleOpen){\r\n\t\t\t\t\t\tfor(var v = _this.getParent(); v; v = v.getParent()){\r\n\t\t\t\t\t\t\tif(domClass.contains(v.domNode, \"mblView\")){\r\n\t\t\t\t\t\t\t\tif(v && v.resize){ v.resize(); }\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this.duration*1000);\r\n\t\t\t}\r\n\t\t\tthis.deselect(pane);\r\n\t\t\tdomAttr.set(pane.domNode, \"aria-expanded\", \"false\"); // A11Y\r\n\t\t\tdomAttr.set(pane.domNode, \"aria-hidden\", \"true\"); // A11Y\r\n\t\t},\r\n\r\n\t\tselect: function(/*Widget*/pane){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHighlights the title bar of the given pane.\r\n\t\t\t// pane:\r\n\t\t\t//\t\tA pane widget to highlight.\r\n\t\t\tpane._at.set(\"selected\", true);\r\n\t\t\tdomAttr.set(pane._at.textBoxNode, \"aria-selected\", \"true\"); // A11Y\r\n\t\t},\r\n\r\n\t\tdeselect: function(/*Widget*/pane){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tUnhighlights the title bar of the given pane.\r\n\t\t\t// pane:\r\n\t\t\t//\t\tA pane widget to unhighlight.\r\n\t\t\tpane._at.set(\"selected\", false);\r\n\t\t\tdomAttr.set(pane._at.textBoxNode, \"aria-selected\", \"false\"); // A11Y\r\n\t\t}\r\n\t});\r\n\t\r\n\tAccordion.ChildWidgetProperties = {\r\n\t\t// summary:\r\n\t\t//\t\tThese properties can be specified for the children of a dojox/mobile/Accordion.\r\n\r\n\t\t// alt: String\r\n\t\t//\t\tThe alternate text of the Accordion title.\r\n\t\talt: \"\",\r\n\t\t// label: String\r\n\t\t//\t\tThe label of the Accordion title.\r\n\t\tlabel: \"\",\r\n\t\t// icon1: String\r\n\t\t//\t\tThe unselected icon of the Accordion title.\r\n\t\ticon1: \"\",\r\n\t\t// icon2: String\r\n\t\t//\t\tThe selected icon of the Accordion title.\r\n\t\ticon2: \"\",\r\n\t\t// iconPos1: String\r\n\t\t//\t\tThe position (\"top,left,width,height\") of the unselected aggregated icon of the Accordion title.\r\n\t\ticonPos1: \"\",\r\n\t\t// iconPos2: String\r\n\t\t//\t\tThe position (\"top,left,width,height\") of the selected aggregated icon of the Accordion title.\r\n\t\ticonPos2: \"\",\r\n\t\t// selected: Boolean\r\n\t\t//\t\tThe selected state of the Accordion title.\r\n\t\tselected: false,\r\n\t\t// lazy: Boolean\r\n\t\t//\t\tSpecifies that the Accordion child must be lazily loaded.\r\n\t\tlazy: false\r\n\t};\r\n\r\n\t// Since any widget can be specified as an Accordion child, mix ChildWidgetProperties\r\n\t// into the base widget class.  (This is a hack, but it's effective.)\r\n\t// This is for the benefit of the parser.   Remove for 2.0.  Also, hide from doc viewer.\r\n\tlang.extend(WidgetBase, /*===== {} || =====*/ Accordion.ChildWidgetProperties);\r\n\r\n\treturn has(\"dojo-bidi\") ? declare(\"dojox.mobile.Accordion\", [Accordion, BidiAccordion]) : Accordion;\r\n});\r\n"]}