{"version":3,"sources":["mobile/Heading.js"],"names":["define","array","connect","declare","lang","win","domClass","domConstruct","domStyle","domAttr","registry","common","Contained","Container","WidgetBase","ProgressIndicator","ToolBarButton","View","has","BidiHeading","getObject","Heading","back","href","moveTo","transition","label","iconBase","tag","busy","progStyle","baseClass","buildRendering","this","templateString","domNode","containerNode","srcNodeRef","doc","createElement","inherited","arguments","forEach","childNodes","n","nodeType","v","trim","nodeValue","labelNode","create","innerHTML","className","labelDivNode","set","setSelectable","startup","_started","parent","getParent","resize","_this","defer","leftBtn","rightBtn","children","i","length","c","get","labelNodeLen","style","display","offsetWidth","bw","rw","offsetLeft","lw","tw","Math","max","getChildren","child","_setBackAttr","_set","backButton","arrow","transitionDir","dir","isLeftToRight","placeAt","_setMoveToAttr","_setHrefAttr","_setTransitionAttr","_setLabelAttr","_cv","_setBusyAttr","prog","_prog","size","center","add","place","start","stop"],"mappings":"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","file":"../../mobile/Heading.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\",\r\n\t\"dojo/_base/connect\",\r\n\t\"dojo/_base/declare\",\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/_base/window\",\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dijit/registry\",\r\n\t\"./common\",\r\n\t\"dijit/_Contained\",\r\n\t\"dijit/_Container\",\r\n\t\"dijit/_WidgetBase\",\r\n\t\"./ProgressIndicator\",\r\n\t\"./ToolBarButton\",\r\n\t\"./View\",\r\n\t\"dojo/has\",\r\n\t\"dojo/has!dojo-bidi?dojox/mobile/bidi/Heading\"\r\n], function(array, connect, declare, lang, win, domClass, domConstruct, domStyle, domAttr, registry, common, Contained, Container, WidgetBase, ProgressIndicator, ToolBarButton, View, has, BidiHeading){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/Heading\r\n\r\n\tvar dm = lang.getObject(\"dojox.mobile\", true);\r\n\r\n\tvar Heading = declare(has(\"dojo-bidi\") ? \"dojox.mobile.NonBidiHeading\" : \"dojox.mobile.Heading\", [WidgetBase, Container, Contained],{\r\n\t\t// summary:\r\n\t\t//\t\tA widget that represents a navigation bar.\r\n\t\t// description:\r\n\t\t//\t\tHeading is a widget that represents a navigation bar, which\r\n\t\t//\t\tusually appears at the top of an application. It usually\r\n\t\t//\t\tdisplays the title of the current view and can contain a\r\n\t\t//\t\tnavigational control. If you use it with\r\n\t\t//\t\tdojox/mobile/ScrollableView, it can also be used as a fixed\r\n\t\t//\t\theader bar or a fixed footer bar. In such cases, specify the\r\n\t\t//\t\tfixed=\"top\" attribute to be a fixed header bar or the\r\n\t\t//\t\tfixed=\"bottom\" attribute to be a fixed footer bar. Heading can\r\n\t\t//\t\thave one or more ToolBarButton widgets as its children.\r\n\r\n\t\t// back: String\r\n\t\t//\t\tA label for the navigational control to return to the previous View.\r\n\t\tback: \"\",\r\n\r\n\t\t// href: String\r\n\t\t//\t\tA URL to open when the navigational control is pressed.\r\n\t\thref: \"\",\r\n\r\n\t\t// moveTo: String\r\n\t\t//\t\tThe id of the transition destination of the navigation control.\r\n\t\t//\t\tIf the value has a hash sign ('#') before the id (e.g. #view1)\r\n\t\t//\t\tand the dojox/mobile/bookmarkable module is loaded by the user application,\r\n\t\t//\t\tthe view transition updates the hash in the browser URL so that the\r\n\t\t//\t\tuser can bookmark the destination view. In this case, the user\r\n\t\t//\t\tcan also use the browser's back/forward button to navigate\r\n\t\t//\t\tthrough the views in the browser history.\r\n\t\t//\r\n\t\t//\t\tIf null, transitions to a blank view.\r\n\t\t//\t\tIf '#', returns immediately without transition.\r\n\t\tmoveTo: \"\",\r\n\r\n\t\t// transition: String\r\n\t\t//\t\tA type of animated transition effect. You can choose from the\r\n\t\t//\t\tstandard transition types, \"slide\", \"fade\", \"flip\", or from the\r\n\t\t//\t\textended transition types, \"cover\", \"coverv\", \"dissolve\",\r\n\t\t//\t\t\"reveal\", \"revealv\", \"scaleIn\", \"scaleOut\", \"slidev\",\r\n\t\t//\t\t\"swirl\", \"zoomIn\", \"zoomOut\", \"cube\", and \"swap\". If \"none\" is\r\n\t\t//\t\tspecified, transition occurs immediately without animation.\r\n\t\ttransition: \"slide\",\r\n\r\n\t\t// label: String\r\n\t\t//\t\tA title text of the heading. If the label is not specified, the\r\n\t\t//\t\tinnerHTML of the node is used as a label.\r\n\t\tlabel: \"\",\r\n\r\n\t\t// iconBase: String\r\n\t\t//\t\tThe default icon path for child items.\r\n\t\ticonBase: \"\",\r\n\r\n\t\t// tag: String\r\n\t\t//\t\tA name of HTML tag to create as domNode.\r\n\t\ttag: \"h1\",\r\n\r\n\t\t// busy: Boolean\r\n\t\t//\t\tIf true, a progress indicator spins on this widget.\r\n\t\tbusy: false,\r\n\r\n\t\t// progStyle: String\r\n\t\t//\t\tA css class name to add to the progress indicator.\r\n\t\tprogStyle: \"mblProgWhite\",\r\n\r\n\t\t/* internal properties */\r\n\t\t\r\n\t\t// baseClass: String\r\n\t\t//\t\tThe name of the CSS class of this widget.\t\r\n\t\tbaseClass: \"mblHeading\",\r\n\r\n\t\tbuildRendering: function(){\r\n\t\t\tif(!this.templateString){ // true if this widget is not templated\r\n\t\t\t\t// Create root node if it wasn't created by _TemplatedMixin\r\n\t\t\t\tthis.domNode = this.containerNode = this.srcNodeRef || win.doc.createElement(this.tag);\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\t\r\n\t\t\tif(!this.templateString){ // true if this widget is not templated\r\n\t\t\t\tif(!this.label){\r\n\t\t\t\t\tarray.forEach(this.domNode.childNodes, function(n){\r\n\t\t\t\t\t\tif(n.nodeType == 3){\r\n\t\t\t\t\t\t\tvar v = lang.trim(n.nodeValue);\r\n\t\t\t\t\t\t\tif(v){\r\n\t\t\t\t\t\t\t\tthis.label = v;\r\n\t\t\t\t\t\t\t\tthis.labelNode = domConstruct.create(\"span\", {innerHTML:v}, n, \"replace\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.labelNode){\r\n\t\t\t\t\tthis.labelNode = domConstruct.create(\"span\", null, this.domNode);\r\n\t\t\t\t}\r\n\t\t\t\tthis.labelNode.className = \"mblHeadingSpanTitle\";\r\n\t\t\t\tthis.labelDivNode = domConstruct.create(\"div\", {\r\n\t\t\t\t\tclassName: \"mblHeadingDivTitle\",\r\n\t\t\t\t\tinnerHTML: this.labelNode.innerHTML\r\n\t\t\t\t}, this.domNode);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.labelDivNode){\r\n\t\t\t\tdomAttr.set(this.labelDivNode, \"role\", \"heading\"); //a11y\r\n\t\t\t\tdomAttr.set(this.labelDivNode, \"aria-level\", \"1\");\r\n\t\t\t}\r\n\r\n\t\t\tcommon.setSelectable(this.domNode, false);\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\t\t\tvar parent = this.getParent && this.getParent();\r\n\t\t\tif(!parent || !parent.resize){ // top level widget\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.defer(function(){ // necessary to render correctly\r\n\t\t\t\t\t_this.resize();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\tresize: function(){\r\n\t\t\tif(this.labelNode){\r\n\t\t\t\t// find the rightmost left button (B), and leftmost right button (C)\r\n\t\t\t\t// +-----------------------------+\r\n\t\t\t\t// | |A| |B|             |C| |D| |\r\n\t\t\t\t// +-----------------------------+\r\n\t\t\t\tvar leftBtn, rightBtn;\r\n\t\t\t\tvar children = this.containerNode.childNodes;\r\n\t\t\t\tfor(var i = children.length - 1; i >= 0; i--){\r\n\t\t\t\t\tvar c = children[i];\r\n\t\t\t\t\tif(c.nodeType === 1 && domStyle.get(c, \"display\") !== \"none\"){\r\n\t\t\t\t\t\tif(!rightBtn && domStyle.get(c, \"float\") === \"right\"){\r\n\t\t\t\t\t\t\trightBtn = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!leftBtn && domStyle.get(c, \"float\") === \"left\"){\r\n\t\t\t\t\t\t\tleftBtn = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this.labelNodeLen && this.label){\r\n\t\t\t\t\tthis.labelNode.style.display = \"inline\";\r\n\t\t\t\t\tthis.labelNodeLen = this.labelNode.offsetWidth;\r\n\t\t\t\t\tthis.labelNode.style.display = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar bw = this.domNode.offsetWidth; // bar width\r\n\t\t\t\tvar rw = rightBtn ? bw - rightBtn.offsetLeft + 5 : 0; // rightBtn width\r\n\t\t\t\tvar lw = leftBtn ? leftBtn.offsetLeft + leftBtn.offsetWidth + 5 : 0; // leftBtn width\r\n\t\t\t\tvar tw = this.labelNodeLen || 0; // title width\r\n\t\t\t\tdomClass[bw - Math.max(rw,lw)*2 > tw ? \"add\" : \"remove\"](this.domNode, \"mblHeadingCenterTitle\");\r\n\t\t\t}\r\n\t\t\tarray.forEach(this.getChildren(), function(child){\r\n\t\t\t\tif(child.resize){ child.resize(); }\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_setBackAttr: function(/*String*/back){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"back\", back);\r\n\t\t\tif(!this.backButton){\r\n\t\t\t\tthis.backButton = new ToolBarButton({\r\n\t\t\t\t\tarrow: \"left\",\r\n\t\t\t\t\tlabel: back,\r\n\t\t\t\t\tmoveTo: this.moveTo,\r\n\t\t\t\t\tback: !this.moveTo && !this.href, // use browser history unless moveTo or href\r\n\t\t\t\t\thref: this.href,\r\n\t\t\t\t\ttransition: this.transition,\r\n\t\t\t\t\ttransitionDir: -1,\r\n\t\t\t\t\tdir: this.isLeftToRight() ? \"ltr\" : \"rtl\"\r\n\t\t\t\t});\r\n\t\t\t\tthis.backButton.placeAt(this.domNode, \"first\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.backButton.set(\"label\", back);\r\n\t\t\t}\r\n\t\t\tthis.resize();\r\n\t\t},\r\n\t\t\r\n\t\t_setMoveToAttr: function(/*String*/moveTo){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"moveTo\", moveTo);\r\n\t\t\tif(this.backButton){\r\n\t\t\t\tthis.backButton.set(\"moveTo\", moveTo);\r\n\t\t\t\tthis.backButton.set(\"back\", !moveTo && !this.href);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_setHrefAttr: function(/*String*/href){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"href\", href);\r\n\t\t\tif(this.backButton){\r\n\t\t\t\tthis.backButton.set(\"href\", href);\r\n\t\t\t\tthis.backButton.set(\"back\", !this.moveTo && !href);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_setTransitionAttr: function(/*String*/transition){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"transition\", transition);\r\n\t\t\tif(this.backButton){\r\n\t\t\t\tthis.backButton.set(\"transition\", transition);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_setLabelAttr: function(/*String*/label){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis._set(\"label\", label);\r\n\t\t\tthis.labelNode.innerHTML = this.labelDivNode.innerHTML = this._cv ? this._cv(label) : label;\r\n\t\t\tdelete this.labelNodeLen;\r\n\t\t},\r\n\r\n\t\t_setBusyAttr: function(/*Boolean*/busy){\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar prog = this._prog;\r\n\t\t\tif(busy){\r\n\t\t\t\tif(!prog){\r\n\t\t\t\t\tprog = this._prog = new ProgressIndicator({size:30, center:false});\r\n\t\t\t\t\tdomClass.add(prog.domNode, this.progStyle);\r\n\t\t\t\t}\r\n\t\t\t\tdomConstruct.place(prog.domNode, this.domNode, \"first\");\r\n\t\t\t\tprog.start();\r\n\t\t\t}else if(prog){\r\n\t\t\t\tprog.stop();\r\n\t\t\t}\r\n\t\t\tthis._set(\"busy\", busy);\r\n\t\t}\t\r\n\t});\r\n\r\n\treturn has(\"dojo-bidi\") ? declare(\"dojox.mobile.Heading\", [Heading, BidiHeading]) : Heading;\r\n});\r\n"]}