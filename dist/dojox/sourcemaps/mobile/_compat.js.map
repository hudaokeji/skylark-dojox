{"version":3,"sources":["mobile/_compat.js"],"names":["define","array","config","connect","bfx","lang","has","win","domClass","domConstruct","domGeometry","domStyle","domAttr","fx","easing","ready","uacss","registry","xfx","flip","EdgeToEdgeList","IconContainer","ProgressIndicator","RoundRect","RoundRectList","ScrollableView","Switch","View","Heading","require","dm","getObject","extend","_doTransition","fromNode","toNode","transition","dir","anim","s1","s2","this","wakeUp","w","offsetWidth","slideTo","node","duration","left","top","get","style","position","display","combine","_inProgress","toWidget","byNode","contains","domNode","containerNode","paddingTop","invokeCallback","play","h","offsetHeight","depth","chain","fadeOut","fadeIn","set","_wokeup","disp","nodes","getElementsByTagName","i","len","length","val","scale","size","dim","setMarginBox","MozTransform","MozTransformOrigin","buildRendering","createRoundRect","className","_addChild","prototype","addChild","_postCreate","postCreate","isLeftToRight","apply","arguments","redrawBorders","widget","insertIndex","applyPngFilter","lastChildFound","childNodes","c","tagName","borderBottomStyle","srcNodeRef","doc","createElement","mixin","_this","isList","padding","backgroundColor","border","parentNode","replaceChild","appendChild","removeChild","firstChild","create","insertBefore","bottom","dummy","innerHTML","marginBottom","fontSize","root","body","blank","toUrl","img","src","indexOf","runtimeStyle","filter","width","height","_disableBgFilter","createDomButton","_createDomButton_orig","refNode","f","currentStyle","backgroundImage","match","RegExp","$1","background","setTimeout","loadCssFile","file","loadedCssFiles","createStyleSheet","ss","push","owningElement","href","type","rel","loadCss","files","_loadedCss","obj","forEach","getCssPaths","path","isArray","j","paths","s","styleSheets","r","cssRules","imports","elems","loadCompatPattern","loadCompatCssFiles","force","undefined","loadRtlCssFiles","mblLoadCompatPattern","location","compatCss","substring","cssName","substr","lastIndexOf","rtlPath","replace","hideAddressBar","evt","doResize","resizeAll","mblLoadCompatCssFiles"],"mappings":"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","file":"../../mobile/_compat.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\",\t// array.forEach\r\n\t\"dojo/_base/config\",\r\n\t\"dojo/_base/connect\",\t// connect.connect\r\n\t\"dojo/_base/fx\",\t// fx.fadeOut, fx.fadeIn\r\n\t\"dojo/_base/lang\",\t// lang.extend, lang.isArray\r\n\t\"dojo/sniff\",\t\t// has(\"webkit\"), has(\"ie\")\r\n\t\"dojo/_base/window\",\t// win.doc, win.body\r\n\t\"dojo/dom-class\",\r\n\t\"dojo/dom-construct\",\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\",\r\n\t\"dojo/dom-attr\",\r\n\t\"dojo/fx\",\r\n\t\"dojo/fx/easing\",\r\n\t\"dojo/ready\",\r\n\t\"dojo/uacss\",\r\n\t\"dijit/registry\",\t// registry.byNode\r\n\t\"dojox/fx\",\r\n\t\"dojox/fx/flip\",\r\n\t\"./EdgeToEdgeList\",\r\n\t\"./IconContainer\",\r\n\t\"./ProgressIndicator\",\r\n\t\"./RoundRect\",\r\n\t\"./RoundRectList\",\r\n\t\"./ScrollableView\",\r\n\t\"./Switch\",\r\n\t\"./View\",\r\n\t\"./Heading\",\r\n\t\"require\"\r\n], function(array, config, connect, bfx, lang, has, win, domClass, domConstruct, domGeometry, domStyle, domAttr, fx, easing, ready, uacss, registry, xfx, flip, EdgeToEdgeList, IconContainer, ProgressIndicator, RoundRect, RoundRectList, ScrollableView, Switch, View, Heading, require){\r\n\r\n\t// module:\r\n\t//\t\tdojox/mobile/compat\r\n\r\n/*=====\r\nreturn {\r\n\t// summary:\r\n\t//\t\tCSS3 compatibility module.\r\n\t// description:\r\n\t//\t\tThis module provides to dojox/mobile support for some of the CSS3 features \r\n\t//\t\tin non-CSS3 browsers, such as IE or Firefox.\r\n\t//\t\tIf you require this module, when running in a non-CSS3 browser it directly \r\n\t//\t\treplaces some of the methods of\tdojox/mobile classes, without any subclassing. \r\n\t//\t\tThis way, HTML pages remain the same regardless of whether this compatibility \r\n\t//\t\tmodule is used or not.\r\n\t//\r\n\t//\t\tExample of usage: \r\n\t//\t\t|\trequire([\r\n\t//\t\t|\t\t\"dojox/mobile\",\r\n\t//\t\t|\t\t\"dojox/mobile/compat\",\r\n\t//\t\t|\t\t...\r\n\t//\t\t|\t], function(...){\r\n\t//\t\t|\t\t...\r\n\t//\t\t|\t});\r\n\t//\r\n\t//\t\tThis module also loads compatibility CSS files, which have a -compat.css\r\n\t//\t\tsuffix. You can use either the `<link>` tag or `@import` to load theme\r\n\t//\t\tCSS files. Then, this module searches for the loaded CSS files and loads\r\n\t//\t\tcompatibility CSS files. For example, if you load dojox/mobile/themes/iphone/iphone.css\r\n\t//\t\tin a page, this module automatically loads dojox/mobile/themes/iphone/iphone-compat.css.\r\n\t//\t\tIf you explicitly load iphone-compat.css with `<link>` or `@import`,\r\n\t//\t\tthis module will not load again the already loaded file.\r\n\t//\r\n\t//\t\tNote that, by default, compatibility CSS files are only loaded for CSS files located\r\n\t//\t\tin a directory containing a \"mobile/themes\" path. For that, a matching is done using \r\n\t//\t\tthe default pattern\t\"/\\/mobile\\/themes\\/.*\\.css$/\". If a custom theme is not located \r\n\t//\t\tin a directory containing this path, the data-dojo-config needs to specify a custom \r\n\t//\t\tpattern using the \"mblLoadCompatPattern\" configuration parameter, for instance:\r\n\t//\t\t|\tdata-dojo-config=\"mblLoadCompatPattern: /\\/mycustomtheme\\/.*\\.css$/\"\r\n};\r\n=====*/\r\n\r\n\tvar dm = lang.getObject(\"dojox.mobile\", true);\r\n\r\n\tif(!(has(\"webkit\") || has(\"ie\") === 10 || (!has(\"ie\") && has(\"trident\") > 6))){\r\n\t\tlang.extend(View, {\r\n\t\t\t_doTransition: function(fromNode, toNode, transition, dir){\r\n\t\t\t\tvar anim;\r\n\t\t\t\tthis.wakeUp(toNode);\r\n\t\t\t\tvar s1, s2;\r\n\t\t\t\tif(!transition || transition == \"none\"){\r\n\t\t\t\t\ttoNode.style.display = \"\";\r\n\t\t\t\t\tfromNode.style.display = \"none\";\r\n\t\t\t\t\ttoNode.style.left = \"0px\";\r\n\t\t\t\t\tthis.invokeCallback();\r\n\t\t\t\t}else if(transition == \"slide\" || transition == \"cover\" || transition == \"reveal\"){\r\n\t\t\t\t\tvar w = fromNode.offsetWidth;\r\n\t\t\t\t\ts1 = fx.slideTo({\r\n\t\t\t\t\t\tnode: fromNode,\r\n\t\t\t\t\t\tduration: 400,\r\n\t\t\t\t\t\tleft: -w*dir,\r\n\t\t\t\t\t\ttop: domStyle.get(fromNode, \"top\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\ts2 = fx.slideTo({\r\n\t\t\t\t\t\tnode: toNode,\r\n\t\t\t\t\t\tduration: 400,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\ttop: domStyle.get(toNode, \"top\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoNode.style.position = \"absolute\";\r\n\t\t\t\t\ttoNode.style.left = w*dir + \"px\";\r\n\t\t\t\t\ttoNode.style.display = \"\";\r\n\t\t\t\t\tanim = fx.combine([s1,s2]);\r\n\t\t\t\t\tconnect.connect(anim, \"onEnd\", this, function(){\r\n\t\t\t\t\t\tif(!this._inProgress){ return; } // transition has been aborted\r\n\t\t\t\t\t\tfromNode.style.display = \"none\";\r\n\t\t\t\t\t\tfromNode.style.left = \"0px\";\r\n\t\t\t\t\t\ttoNode.style.position = \"relative\";\r\n\t\t\t\t\t\tvar toWidget = registry.byNode(toNode);\r\n\t\t\t\t\t\tif(toWidget && !domClass.contains(toWidget.domNode, \"out\")){\r\n\t\t\t\t\t\t\t// Reset the temporary padding\r\n\t\t\t\t\t\t\ttoWidget.containerNode.style.paddingTop = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.invokeCallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tanim.play();\r\n\t\t\t\t}else if(transition == \"slidev\" || transition == \"coverv\" || transition == \"reavealv\"){\r\n\t\t\t\t\tvar h = fromNode.offsetHeight;\r\n\t\t\t\t\ts1 = fx.slideTo({\r\n\t\t\t\t\t\tnode: fromNode,\r\n\t\t\t\t\t\tduration: 400,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\ttop: -h*dir\r\n\t\t\t\t\t});\r\n\t\t\t\t\ts2 = fx.slideTo({\r\n\t\t\t\t\t\tnode: toNode,\r\n\t\t\t\t\t\tduration: 400,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\ttop: 0\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoNode.style.position = \"absolute\";\r\n\t\t\t\t\ttoNode.style.top = h*dir + \"px\";\r\n\t\t\t\t\ttoNode.style.left = \"0px\";\r\n\t\t\t\t\ttoNode.style.display = \"\";\r\n\t\t\t\t\tanim = fx.combine([s1,s2]);\r\n\t\t\t\t\tconnect.connect(anim, \"onEnd\", this, function(){\r\n\t\t\t\t\t\tif(!this._inProgress){ return; } // transition has been aborted\r\n\t\t\t\t\t\tfromNode.style.display = \"none\";\r\n\t\t\t\t\t\ttoNode.style.position = \"relative\";\r\n\t\t\t\t\t\tthis.invokeCallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tanim.play();\r\n\t\t\t\t}else if(transition == \"flip\"){\r\n\t\t\t\t\tanim = xfx.flip({\r\n\t\t\t\t\t\tnode: fromNode,\r\n\t\t\t\t\t\tdir: \"right\",\r\n\t\t\t\t\t\tdepth: 0.5,\r\n\t\t\t\t\t\tduration: 400\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoNode.style.position = \"absolute\";\r\n\t\t\t\t\ttoNode.style.left = \"0px\";\r\n\t\t\t\t\tconnect.connect(anim, \"onEnd\", this, function(){\r\n\t\t\t\t\t\tif(!this._inProgress){ return; } // transition has been aborted\r\n\t\t\t\t\t\tfromNode.style.display = \"none\";\r\n\t\t\t\t\t\ttoNode.style.position = \"relative\";\r\n\t\t\t\t\t\ttoNode.style.display = \"\";\r\n\t\t\t\t\t\tthis.invokeCallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tanim.play();\r\n\t\t\t\t}else {\r\n\t\t\t\t\t// other transitions - \"fade\", \"dissolve\", \"swirl\"\r\n\t\t\t\t\tanim = fx.chain([\r\n\t\t\t\t\t\tbfx.fadeOut({\r\n\t\t\t\t\t\t\tnode: fromNode,\r\n\t\t\t\t\t\t\tduration: 600\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tbfx.fadeIn({\r\n\t\t\t\t\t\t\tnode: toNode,\r\n\t\t\t\t\t\t\tduration: 600\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]);\r\n\t\t\t\t\ttoNode.style.position = \"absolute\";\r\n\t\t\t\t\ttoNode.style.left = \"0px\";\r\n\t\t\t\t\ttoNode.style.display = \"\";\r\n\t\t\t\t\tdomStyle.set(toNode, \"opacity\", 0);\r\n\t\t\t\t\tconnect.connect(anim, \"onEnd\", this, function(){\r\n\t\t\t\t\t\tif(!this._inProgress){ return; } // transition has been aborted\r\n\t\t\t\t\t\tfromNode.style.display = \"none\";\r\n\t\t\t\t\t\ttoNode.style.position = \"relative\";\r\n\t\t\t\t\t\tdomStyle.set(fromNode, \"opacity\", 1);\r\n\t\t\t\t\t\tthis.invokeCallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tanim.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\twakeUp: function(/*DomNode*/node){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tFunction to force IE to redraw a node since its layout\r\n\t\t\t\t//\t\tcode tends to misrender in partial draws.\r\n\t\t\t\t// node: DomNode\r\n\t\t\t\t//\t\tThe node to forcibly redraw.\r\n\t\t\t\t// tags:\r\n\t\t\t\t//\t\tpublic\r\n\t\t\t\tif(has(\"ie\") && !node._wokeup){\r\n\t\t\t\t\tnode._wokeup = true;\r\n\t\t\t\t\tvar disp = node.style.display;\r\n\t\t\t\t\tnode.style.display = \"\";\r\n\t\t\t\t\tvar nodes = node.getElementsByTagName(\"*\");\r\n\t\t\t\t\tfor(var i = 0, len = nodes.length; i < len; i++){\r\n\t\t\t\t\t\tvar val = nodes[i].style.display;\r\n\t\t\t\t\t\tnodes[i].style.display = \"none\";\r\n\t\t\t\t\t\tnodes[i].style.display = \"\";\r\n\t\t\t\t\t\tnodes[i].style.display = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.style.display = disp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tlang.extend(ProgressIndicator, {\r\n\t\t\tscale: function(/*Number*/size){\r\n\t\t\t\tif(has(\"ie\")){\r\n\t\t\t\t\tvar dim = {w:size, h:size};\r\n\t\t\t\t\tdomGeometry.setMarginBox(this.domNode, dim);\r\n\t\t\t\t\tdomGeometry.setMarginBox(this.containerNode, dim);\r\n\t\t\t\t}else if(has(\"ff\")){\r\n\t\t\t\t\tvar scale = size / 40;\r\n\t\t\t\t\tdomStyle.set(this.containerNode, {\r\n\t\t\t\t\t\tMozTransform: \"scale(\" + scale + \")\",\r\n\t\t\t\t\t\tMozTransformOrigin: \"0 0\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tdomGeometry.setMarginBox(this.domNode, {w:size, h:size});\r\n\t\t\t\t\tdomGeometry.setMarginBox(this.containerNode, {w:size / scale, h:size / scale});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\t\r\n\r\n\r\n\t\tif(has(\"ie\")){\r\n\t\t\tlang.extend(RoundRect, {\r\n\t\t\t\tbuildRendering: function(){\r\n\t\t\t\t\t// summary:\r\n\t\t\t\t\t//\t\tFunction to simulate the borderRadius appearance on\r\n\t\t\t\t\t//\t\tIE, since IE does not support this CSS style.\r\n\t\t\t\t\t// tags:\r\n\t\t\t\t\t//\t\tprotected\r\n\t\t\t\t\tdm.createRoundRect(this);\r\n\t\t\t\t\tthis.domNode.className = \"mblRoundRect\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tRoundRectList._addChild = RoundRectList.prototype.addChild;\r\n\t\t\tRoundRectList._postCreate = RoundRectList.prototype.postCreate;\r\n\t\t\tlang.extend(RoundRectList, {\r\n\t\t\t\tbuildRendering: function(){\r\n\t\t\t\t\t// summary:\r\n\t\t\t\t\t//\t\tFunction to simulate the borderRadius appearance on\r\n\t\t\t\t\t//\t\tIE, since IE does not support this CSS style.\r\n\t\t\t\t\t// tags:\r\n\t\t\t\t\t//\t\tprotected\r\n\t\t\t\t\tdm.createRoundRect(this, true);\r\n\t\t\t\t\tthis.domNode.className = \"mblRoundRectList\";\r\n\t\t\t\t\tif(has(\"ie\") && has(\"dojo-bidi\") && !this.isLeftToRight()){\r\n\t\t\t\t\t\tthis.domNode.className = \"mblRoundRectList mblRoundRectListRtl\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tpostCreate: function(){\r\n\t\t\t\t\tRoundRectList._postCreate.apply(this, arguments);\r\n\t\t\t\t\tthis.redrawBorders();\r\n\t\t\t\t},\r\n\r\n\t\t\t\taddChild: function(widget, /*Number?*/insertIndex){\r\n\t\t\t\t\tRoundRectList._addChild.apply(this, arguments);\r\n\t\t\t\t\tthis.redrawBorders();\r\n\t\t\t\t\tif(dm.applyPngFilter){\r\n\t\t\t\t\t\tdm.applyPngFilter(widget.domNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tredrawBorders: function(){\r\n\t\t\t\t\t// summary:\r\n\t\t\t\t\t//\t\tFunction to adjust the creation of RoundRectLists on IE.\r\n\t\t\t\t\t//\t\tRemoved undesired styles.\r\n\t\t\t\t\t// tags:\r\n\t\t\t\t\t//\t\tpublic\r\n\r\n\t\t\t\t\t// Remove a border of the last ListItem.\r\n\t\t\t\t\t// This is for browsers that do not support the last-child CSS pseudo-class.\r\n\r\n\t\t\t\t\tif(this instanceof EdgeToEdgeList){ return; }\r\n\t\t\t\t\tvar lastChildFound = false;\r\n\t\t\t\t\tfor(var i = this.containerNode.childNodes.length - 1; i >= 0; i--){\r\n\t\t\t\t\t\tvar c = this.containerNode.childNodes[i];\r\n\t\t\t\t\t\tif(c.tagName == \"LI\"){\r\n\t\t\t\t\t\t\tc.style.borderBottomStyle = lastChildFound ? \"solid\" : \"none\";\r\n\t\t\t\t\t\t\tlastChildFound = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\r\n\r\n\t\t\tlang.extend(EdgeToEdgeList, {\r\n\t\t\t\tbuildRendering: function(){\r\n\t\t\t\tthis.domNode = this.containerNode = this.srcNodeRef || win.doc.createElement(\"ul\");\r\n\t\t\t\t\tthis.domNode.className = \"mblEdgeToEdgeList\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tIconContainer._addChild = IconContainer.prototype.addChild;\r\n\t\t\tlang.extend(IconContainer, {\r\n\t\t\t\taddChild: function(widget, /*Number?*/insertIndex){\r\n\t\t\t\t\tIconContainer._addChild.apply(this, arguments);\r\n\t\t\t\t\tif(dm.applyPngFilter){\r\n\t\t\t\t\t\tdm.applyPngFilter(widget.domNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlang.mixin(dm, {\r\n\t\t\t\tcreateRoundRect: function(_this, isList){\r\n\t\t\t\t\t// summary:\r\n\t\t\t\t\t//\t\tFunction to adjust the creation of rounded rectangles on IE.\r\n\t\t\t\t\t//\t\tDeals with IE's lack of borderRadius support\r\n\t\t\t\t\t// tags:\r\n\t\t\t\t\t//\t\tpublic\r\n\t\t\t\t\tvar i, len;\r\n\t\t\t\t\t_this.domNode = win.doc.createElement(\"div\");\r\n\t\t\t\t\t_this.domNode.style.padding = \"0px\";\r\n\t\t\t\t\t_this.domNode.style.backgroundColor = \"transparent\";\r\n\t\t\t\t\t_this.domNode.style.border = \"none\"; // borderStyle = \"none\"; doesn't work on IE9\r\n\t\t\t\t\t_this.containerNode = win.doc.createElement(isList?\"ul\":\"div\");\r\n\t\t\t\t\t_this.containerNode.className = \"mblRoundRectContainer\";\r\n\t\t\t\t\tif(_this.srcNodeRef){\r\n\t\t\t\t\t\t_this.srcNodeRef.parentNode.replaceChild(_this.domNode, _this.srcNodeRef);\r\n\t\t\t\t\t\tfor(i = 0, len = _this.srcNodeRef.childNodes.length; i < len; i++){\r\n\t\t\t\t\t\t\t_this.containerNode.appendChild(_this.srcNodeRef.removeChild(_this.srcNodeRef.firstChild));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.srcNodeRef = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.domNode.appendChild(_this.containerNode);\r\n\r\n\t\t\t\t\tfor(i = 0; i <= 5; i++){\r\n\t\t\t\t\t\tvar top = domConstruct.create(\"div\");\r\n\t\t\t\t\t\ttop.className = \"mblRoundCorner mblRoundCorner\"+i+\"T\";\r\n\t\t\t\t\t\t_this.domNode.insertBefore(top, _this.containerNode);\r\n\r\n\t\t\t\t\t\tvar bottom = domConstruct.create(\"div\");\r\n\t\t\t\t\t\tbottom.className = \"mblRoundCorner mblRoundCorner\"+i+\"B\";\r\n\t\t\t\t\t\t_this.domNode.appendChild(bottom);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlang.extend(ScrollableView, {\r\n\t\t\t\tpostCreate: function(){\r\n\t\t\t\t\t// On IE, margin-top of the first child does not seem to be effective,\r\n\t\t\t\t\t// probably because padding-top is specified for containerNode\r\n\t\t\t\t\t// to make room for a fixed header. This dummy node is a workaround for that.\r\n\t\t\t\t\tvar dummy = domConstruct.create(\"div\", {className:\"mblDummyForIE\", innerHTML:\"&nbsp;\"}, this.containerNode, \"first\");\r\n\t\t\t\t\tdomStyle.set(dummy, {\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\tmarginBottom: \"-2px\",\r\n\t\t\t\t\t\tfontSize: \"1px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} // if\t(has(\"ie\"))\r\n\r\n\r\n\t\tif(has(\"ie\") <= 6){\r\n\t\t\tdm.applyPngFilter = function(root){\r\n\t\t\t\troot = root || win.body();\r\n\t\t\t\tvar nodes = root.getElementsByTagName(\"IMG\");\r\n\t\t\t\tvar blank = require.toUrl(\"dojo/resources/blank.gif\");\r\n\t\t\t\tfor(var i = 0, len = nodes.length; i < len; i++){\r\n\t\t\t\t\tvar img = nodes[i];\r\n\t\t\t\t\tvar w = img.offsetWidth;\r\n\t\t\t\t\tvar h = img.offsetHeight;\r\n\t\t\t\t\tif(w === 0 || h === 0){\r\n\t\t\t\t\t\t// The reason why the image has no width/height may be because\r\n\t\t\t\t\t\t// display is \"none\". If that is the case, let's change the\r\n\t\t\t\t\t\t// display to \"\" temporarily and see if the image returns them.\r\n\t\t\t\t\t\tif(domStyle.get(img, \"display\") != \"none\"){ continue; }\r\n\t\t\t\t\t\timg.style.display = \"\";\r\n\t\t\t\t\t\tw = img.offsetWidth;\r\n\t\t\t\t\t\th = img.offsetHeight;\r\n\t\t\t\t\t\timg.style.display = \"none\";\r\n\t\t\t\t\t\tif(w === 0 || h === 0){ continue; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar src = img.src;\r\n\t\t\t\t\tif(src.indexOf(\"resources/blank.gif\") != -1){ continue; }\r\n\t\t\t\t\timg.src = blank;\r\n\t\t\t\t\timg.runtimeStyle.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" + src+\"')\";\r\n\t\t\t\t\timg.style.width = w + \"px\";\r\n\t\t\t\t\timg.style.height = h + \"px\";\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif(!dm._disableBgFilter && dm.createDomButton){\r\n\t\t\t\tdm._createDomButton_orig = dm.createDomButton;\r\n\t\t\t\tdm.createDomButton = function(/*DomNode*/refNode, /*Object?*/style, /*DomNode?*/toNode){\r\n\t\t\t\t\tvar node = dm._createDomButton_orig.apply(this, arguments);\r\n\t\t\t\t\tif(node && node.className && node.className.indexOf(\"mblDomButton\") !== -1){\r\n\t\t\t\t\t\tvar f = function(){\r\n\t\t\t\t\t\t\tif(node.currentStyle && node.currentStyle.backgroundImage.match(/url.*(mblDomButton.*\\.png)/)){\r\n\t\t\t\t\t\t\t\tvar img = RegExp.$1;\r\n\t\t\t\t\t\t\t\tvar src = require.toUrl(\"dojox/mobile/themes/common/domButtons/compat/\") + img;\r\n\t\t\t\t\t\t\t\tnode.runtimeStyle.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" + src+\"',sizingMethod='crop')\";\r\n\t\t\t\t\t\t\t\tnode.style.background = \"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tsetTimeout(f, 1000);\r\n\t\t\t\t\t\tsetTimeout(f, 5000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} // if(has(\"ie\") <= 6)\r\n\r\n\t\tdm.loadCssFile = function(/*String*/file){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOverrides dojox/mobile.loadCssFile() defined in\r\n\t\t\t//\t\tdeviceTheme.js.\r\n\t\t\tif(!dm.loadedCssFiles){ dm.loadedCssFiles = []; }\r\n\t\t\tif(win.doc.createStyleSheet){\r\n\t\t\t\t// for some reason, IE hangs when you try to load\r\n\t\t\t\t// multiple css files almost at once.\r\n\t\t\t\tsetTimeout(function(file){\r\n\t\t\t\t\treturn function(){\r\n\t\t\t\t\t\tvar ss = win.doc.createStyleSheet(file);\r\n\t\t\t\t\t\tss && dm.loadedCssFiles.push(ss.owningElement);\r\n\t\t\t\t\t};\r\n\t\t\t\t}(file), 0);\r\n\t\t\t}else{\r\n\t\t\t\tdm.loadedCssFiles.push(domConstruct.create(\"link\", {\r\n\t\t\t\t\thref: file,\r\n\t\t\t\t\ttype: \"text/css\",\r\n\t\t\t\t\trel: \"stylesheet\"\r\n\t\t\t\t}, win.doc.getElementsByTagName('head')[0]));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdm.loadCss = function(/*String|Array*/files){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to load and register CSS files with the page\r\n\t\t\t// files: String|Array\r\n\t\t\t//\t\tThe CSS files to load and register with the page.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(!dm._loadedCss){\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\tarray.forEach(dm.getCssPaths(), function(path){\r\n\t\t\t\t\tobj[path] = true;\r\n\t\t\t\t});\r\n\t\t\t\tdm._loadedCss = obj;\r\n\t\t\t}\r\n\t\t\tif(!lang.isArray(files)){ files = [files]; }\r\n\t\t\tfor(var i = 0; i < files.length; i++){\r\n\t\t\t\tvar file = files[i];\r\n\t\t\t\tif(!dm._loadedCss[file]){\r\n\t\t\t\t\tdm._loadedCss[file] = true;\r\n\t\t\t\t\tdm.loadCssFile(file);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdm.getCssPaths = function(){\r\n\t\t\tvar paths = [];\r\n\t\t\tvar i, j, len;\r\n\r\n\t\t\t// find @import\r\n\t\t\tvar s = win.doc.styleSheets;\r\n\t\t\tfor(i = 0; i < s.length; i++){\r\n\t\t\t\tif(s[i].href){ continue; }\r\n\t\t\t\tvar r = s[i].cssRules || s[i].imports;\r\n\t\t\t\tif(!r){ continue; }\r\n\t\t\t\tfor(j = 0; j < r.length; j++){\r\n\t\t\t\t\tif(r[j].href){\r\n\t\t\t\t\t\tpaths.push(r[j].href);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// find <link>\r\n\t\t\tvar elems = win.doc.getElementsByTagName(\"link\");\r\n\t\t\tfor(i = 0, len = elems.length; i < len; i++){\r\n\t\t\t\tif(elems[i].href){\r\n\t\t\t\t\tpaths.push(elems[i].href);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn paths;\r\n\t\t};\r\n\r\n\t\tdm.loadCompatPattern = /\\/mobile\\/themes\\/.*\\.css$/;\r\n\r\n\t\tdm.loadCompatCssFiles = function(/*Boolean?*/force){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to perform page-level adjustments on browsers such as\r\n\t\t\t//\t\tIE and firefox.  It loads compat specific css files into the\r\n\t\t\t//\t\tpage header.\r\n\t\t\tif(has(\"ie\") && !force){\r\n\t\t\t\tsetTimeout(function(){ // IE needs setTimeout\r\n\t\t\t\t\tdm.loadCompatCssFiles(true);\r\n\t\t\t\t}, 0);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdm._loadedCss = undefined;\r\n\t\t\tvar paths = dm.getCssPaths();\r\n\t\t\t// dojox.mobile mirroring support\r\n\t\t\tif(has(\"dojo-bidi\")){\r\n\t\t\t\tpaths = dm.loadRtlCssFiles(paths);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < paths.length; i++){\r\n\t\t\t\tvar href = paths[i];\r\n\t\t\t\t// Load the -compat.css only for css files that belong to a theme. For that, by default\r\n\t\t\t\t// we match on directories containing \"mobile/themes\". If a custom theme is located\r\n\t\t\t\t// outside a \"mobile/themes\" directory, the dojoConfig needs to specify a custom \r\n\t\t\t\t// pattern using the \"mblLoadCompatPattern\" configuration parameter, for instance:\r\n\t\t\t\t// data-dojo-config=\"mblLoadCompatPattern: /\\/mycustom\\/.*\\.css$/\"\r\n\t\t\t\t// Additionally, compat css files are loaded for css in the mobile/tests directory.\r\n\t\t\t\tif((href.match(config.mblLoadCompatPattern || dm.loadCompatPattern) || \r\n\t\t\t\t\tlocation.href.indexOf(\"mobile/tests/\") !== -1) && href.indexOf(\"-compat.css\") === -1){\r\n\t\t\t\t\tvar compatCss = href.substring(0, href.length-4)+\"-compat.css\";\r\n\t\t\t\t\tdm.loadCss(compatCss);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tif(has(\"dojo-bidi\")){\r\n\t\t\tdm.loadRtlCssFiles = function(/*Array*/paths){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tFunction to load the corresponding *_rtl.css file for every *.css file.\r\n\t\t\t\t//\t\tEnable mobile mirroring support\r\n\t\t\t\t// paths: Array\r\n\t\t\t\t//\t\tArray of css files within the page.\r\n\t\t\t\tfor(var i = 0; i < paths.length; i++){\r\n\t\t\t\t\tvar href = paths[i];\r\n\t\t\t\t\tif(href.indexOf(\"_rtl\") == -1){\r\n\t\t\t\t\t\tvar rtlCssList = \"android.css blackberry.css custom.css iphone.css holodark.css base.css Carousel.css ComboBox.css IconContainer.css IconMenu.css ListItem.css RoundRectCategory.css SpinWheel.css Switch.css TabBar.css ToggleButton.css ToolBarButton.css ProgressIndicator.css Accordion.css GridLayout.css FormLayout.css\";\r\n\t\t\t\t\t\tvar cssName = href.substr(href.lastIndexOf('/') + 1);\r\n\t\t\t\t\t\tif(rtlCssList.indexOf(cssName) != -1){\r\n\t\t\t\t\t\t\tvar rtlPath = href.replace(\".css\", \"_rtl.css\");\r\n\t\t\t\t\t\t\tpaths.push(rtlPath);\r\n\t\t\t\t\t\t\tdm.loadCss(rtlPath);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn paths;\r\n\t\t\t};\r\n\t\t}\r\n\t\tdm.hideAddressBar = function(/*Event?*/evt, /*Boolean?*/doResize){\r\n\t\t\tif(doResize !== false){ dm.resizeAll(); }\r\n\t\t};\r\n\r\n\t\tready(function(){\r\n\t\t\tif(config.mblLoadCompatCssFiles !== false){\r\n\t\t\t\tdm.loadCompatCssFiles();\r\n\t\t\t}\r\n\t\t\tif(dm.applyPngFilter){\r\n\t\t\t\tdm.applyPngFilter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t} // end of if(!has(\"webkit\")){\r\n\r\n\treturn dm;\r\n});\r\n"]}