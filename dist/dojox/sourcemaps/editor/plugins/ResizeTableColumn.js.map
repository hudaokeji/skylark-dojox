{"version":3,"sources":["editor/plugins/ResizeTableColumn.js"],"names":["define","dojo","dijit","dojox","TablePlugins","ResizeTableColumn","declare","constructor","this","isLtr","dir","_isBodyLtr","ruleDiv","create","style","body","setEditor","editor","isBoundary","n","b","nodes","query","parentNode","length","nextSibling","node","tagName","toLowerCase","getTable","t","getHeaderCell","tds","len","i","position","x","marginBox","width","isIE","s","currentStyle","bl","px","borderLeftWidth","br","borderRightWidth","pl","paddingLeft","pr","paddingRight","w","element","avalue","slice","parseFloat","sLeft","left","rsLeft","runtimeStyle","pixelLeft","e","customUndo","onEditorLoaded","onLoadDeferred","addCallback","hitch","connect","editNode","evt","editorCoords","iframe","ex","cx","clientX","isDragging","siblingCoords","sx","sw","activeCell","activeCoords","ax","aw","sibling","containerCoords","ctx","ctw","headerColumn","obj","target","objCoords","ox","ow","pos","cursor","display","backgroundColor","top","y","height","h","tableCoords","headerSibling","newWidth","newSiblingWidth","table","cs","getAttribute","headerCell","parseInt","subscribe","_scopeName","o","plugin","args","command","cmd","charAt","substring","commandName"],"mappings":"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","file":"../../../editor/plugins/ResizeTableColumn.js","sourcesContent":["define([\r\n\t\"dojo\",\r\n\t\"dijit\",\r\n\t\"dojox\",\r\n\t\"./TablePlugins\"\r\n], function(dojo, dijit, dojox, TablePlugins) {\r\n\r\n\r\n\tvar ResizeTableColumn = dojo.declare(\"dojox.editor.plugins.ResizeTableColumn\",\tTablePlugins, {\r\n\r\n\t\tconstructor: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tBecause IE will ignore the cursor style when the editMode of the document is on,\r\n\t\t\t//\t\twe need to create a div within the outer document to mimic the behavior of drag&drop\r\n\t\t\tthis.isLtr = this.dir ? (this.dir == \"ltr\") : dojo._isBodyLtr();\r\n\t\t\tthis.ruleDiv = dojo.create(\"div\",\r\n\t\t\t\t{style: \"top: -10000px; z-index: 10001\"},\r\n\t\t\t\tdojo.body(), \"last\");\r\n\t\t},\r\n\t\t\r\n\t\tsetEditor: function(editor){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandle the drag&drop events\r\n\t\t\t// editor:\r\n\t\t\t//\t\tThe editor which this plugin belongs to\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tvar ruleDiv = this.ruleDiv;\r\n\t\t\t\r\n\t\t\tthis.editor = editor;\r\n\t\t\tthis.editor.customUndo = true;\r\n\t\t\tthis.onEditorLoaded();\r\n\t\t\t\r\n\t\t\t// The content of the editor is loaded asynchronously, so the function\r\n\t\t\t// should be called when it is loaded.\r\n\t\t\teditor.onLoadDeferred.addCallback(dojo.hitch(this, function(){\r\n\t\t\t\tthis.connect(this.editor.editNode, \"onmousemove\", function(evt){\r\n\t\t\t\t\tvar editorCoords = dojo.position(editor.iframe, true),\r\n\t\t\t\t\t\tex = editorCoords.x, cx = evt.clientX;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!this.isDragging){\r\n\t\t\t\t\t\t// If it is just a movement, put the div at the edge of the\r\n\t\t\t\t\t\t// target cell so that when the cursor hover on it, it will\r\n\t\t\t\t\t\t// change to the col-resize style.\r\n\t\t\t\t\t\tvar obj = evt.target;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(obj.tagName && obj.tagName.toLowerCase() == \"td\"){\r\n\t\t\t\t\t\t\tvar objCoords = dojo.position(obj), ox = objCoords.x, ow = objCoords.w,\r\n\t\t\t\t\t\t\t\tpos = ex + objCoords.x - 2;\r\n\t\t\t\t\t\t\tif(this.isLtr){\r\n\t\t\t\t\t\t\t\truleDiv.headerColumn = true;\r\n\t\t\t\t\t\t\t\tif(!isBoundary(obj, \"first\") || cx > ox + ow / 2){\r\n\t\t\t\t\t\t\t\t\tpos += ow;\r\n\t\t\t\t\t\t\t\t\truleDiv.headerColumn = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\truleDiv.headerColumn = false;\r\n\t\t\t\t\t\t\t\tif(isBoundary(obj, \"first\") && cx > ox + ow / 2){\r\n\t\t\t\t\t\t\t\t\tpos += ow;\r\n\t\t\t\t\t\t\t\t\truleDiv.headerColumn = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdojo.style(ruleDiv, {\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\tcursor: \"col-resize\",\r\n\t\t\t\t\t\t\t\tdisplay: \"block\",\r\n\t\t\t\t\t\t\t\twidth: \"4px\",\r\n\t\t\t\t\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t\t\t\t\t\ttop: editorCoords.y + objCoords.y + \"px\",\r\n\t\t\t\t\t\t\t\tleft: pos + \"px\",\r\n\t\t\t\t\t\t\t\theight: objCoords.h + \"px\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.activeCell = obj;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tdojo.style(ruleDiv, {display: \"none\", top: \"-10000px\"});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// Begin to drag&drop\r\n\t\t\t\t\t\tvar activeCell = this.activeCell,\r\n\t\t\t\t\t\t\tactiveCoords = dojo.position(activeCell), ax = activeCoords.x, aw = activeCoords.w,\r\n\t\t\t\t\t\t\tsibling = nextSibling(activeCell), siblingCoords, sx, sw,\r\n\t\t\t\t\t\t\tcontainerCoords = dojo.position(getTable(activeCell).parentNode),\r\n\t\t\t\t\t\t\tctx = containerCoords.x, ctw = containerCoords.w;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(sibling){\r\n\t\t\t\t\t\t\tsiblingCoords = dojo.position(sibling);\r\n\t\t\t\t\t\t\tsx = siblingCoords.x;\r\n\t\t\t\t\t\t\tsw = siblingCoords.w;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// The leading and trailing columns can only be sized to the extent of the containing div.\r\n\t\t\t\t\t\tif(this.isLtr &&\r\n\t\t\t\t\t\t\t\t((ruleDiv.headerColumn && sibling && ctx < cx && cx < ax + aw) ||\r\n\t\t\t\t\t\t\t\t\t((!sibling && ax < cx && cx < ctx + ctw) || (sibling && ax < cx && cx < sx + sw))) ||\r\n\t\t\t\t\t\t\t!this.isLtr &&\r\n\t\t\t\t\t\t\t\t((ruleDiv.headerColumn && sibling && ctx > cx && cx > ax) ||\r\n\t\t\t\t\t\t\t\t\t((!sibling && ax + aw > cx && cx > ctx) || (sibling && ax + aw > cx && cx > sx)))){\r\n\t\t\t\t\t\t\tdojo.style(ruleDiv, {left: ex + cx + \"px\"});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.connect(ruleDiv, \"onmousedown\", function(evt){\r\n\t\t\t\t\tvar editorCoords = dojo.position(editor.iframe, true),\r\n\t\t\t\t\t\ttableCoords = dojo.position(getTable(this.activeCell));\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.isDragging = true;\r\n\t\t\t\t\tdojo.style(editor.editNode, {cursor: \"col-resize\"});\r\n\t\t\t\t\tdojo.style(ruleDiv, {\r\n\t\t\t\t\t\twidth: \"1px\",\r\n\t\t\t\t\t\tleft: evt.clientX + \"px\",\r\n\t\t\t\t\t\ttop: editorCoords.y + tableCoords.y + \"px\",\r\n\t\t\t\t\t\theight: tableCoords.h + \"px\",\r\n\t\t\t\t\t\tbackgroundColor: \"#777\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.connect(ruleDiv, \"onmouseup\", function(evt){\r\n\t\t\t\t\tvar activeCell = this.activeCell,\r\n\t\t\t\t\t\tactiveCoords = dojo.position(activeCell), aw = activeCoords.w, ax = activeCoords.x,\r\n\t\t\t\t\t\tsibling = nextSibling(activeCell), siblingCoords, sx, sw,\r\n\t\t\t\t\t\teditorCoords = dojo.position(editor.iframe), ex = editorCoords.x,\r\n\t\t\t\t\t\ttable = getTable(activeCell), tableCoords = dojo.position(table),\r\n\t\t\t\t\t\tcs = table.getAttribute(\"cellspacing\"),\r\n\t\t\t\t\t\tcx = evt.clientX,\r\n\t\t\t\t\t\theaderCell = getHeaderCell(activeCell), headerSibling,\r\n\t\t\t\t\t\tnewWidth, newSiblingWidth;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!cs || (cs = parseInt(cs, 10)) < 0){ cs = 2; }\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(sibling){\r\n\t\t\t\t\t\tsiblingCoords = dojo.position(sibling);\r\n\t\t\t\t\t\tsx = siblingCoords.x;\r\n\t\t\t\t\t\tsw = siblingCoords.w;\r\n\t\t\t\t\t\theaderSibling = getHeaderCell(sibling);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// The delta width is either taken from or added to the adjacent column on the trailing edge.\r\n\t\t\t\t\t// Sizing the rightmost or leftmost columns affects only those columns.\r\n\t\t\t\t\tif(this.isLtr){\r\n\t\t\t\t\t\tif(ruleDiv.headerColumn){\r\n\t\t\t\t\t\t\tnewWidth = ex + ax + aw - cx;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewWidth = cx - ex - ax;\r\n\t\t\t\t\t\t\tif(sibling) { newSiblingWidth = ex + sx + sw - cx - cs; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(ruleDiv.headerColumn){\r\n\t\t\t\t\t\t\tnewWidth = cx - ex - ax;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewWidth = ex + ax + aw - cx;\r\n\t\t\t\t\t\t\tif(sibling) { newSiblingWidth = cx - ex - sx - cs; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.isDragging = false;\r\n\t\t\t\t\tmarginBox(headerCell, newWidth);\r\n\t\t\t\t\tif(sibling){\r\n\t\t\t\t\t\tif(!ruleDiv.headerColumn){\r\n\t\t\t\t\t\t\tmarginBox(headerSibling, newSiblingWidth);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(ruleDiv.headerColumn && isBoundary(activeCell, \"first\") || isBoundary(activeCell, \"last\")){\r\n\t\t\t\t\t\tdojo.marginBox(table, {w: tableCoords.w + newWidth - aw});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Do it again to consolidate the result,\r\n\t\t\t\t\t// because maybe the cell cannot be so narrow as you specified.\r\n\t\t\t\t\tmarginBox(headerCell, dojo.position(activeCell).w);\r\n\t\t\t\t\tif(sibling){\r\n\t\t\t\t\t\tmarginBox(headerSibling, dojo.position(sibling).w);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdojo.style(editor.editNode, {cursor: \"auto\"});\r\n\t\t\t\t\tdojo.style(ruleDiv, {display: \"none\", top: \"-10000px\"});\r\n\t\t\t\t\tthis.activeCell = null;\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\tfunction isBoundary(/*DomNode*/ n, /*String*/ b){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tCheck if the current cell is in the first column or\r\n\t\t\t\t//\t\tin the last column.\r\n\t\t\t\t// n:\r\n\t\t\t\t//\t\tThe node of a table cell\r\n\t\t\t\t// b:\r\n\t\t\t\t//\t\tIndicate if the cell node is compared with the first coluln\r\n\t\t\t\t//\t\tor the last column\r\n\t\t\t\tvar nodes = dojo.query(\"> td\", n.parentNode);\r\n\t\t\t\tswitch(b){\r\n\t\t\t\t\tcase \"first\":\r\n\t\t\t\t\t\treturn nodes[0] == n;\r\n\t\t\t\t\tcase \"last\":\r\n\t\t\t\t\t\treturn nodes[nodes.length - 1] == n;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction nextSibling(/*DomNode*/ node){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tGet the next cell in row\r\n\t\t\t\t// node:\r\n\t\t\t\t//\t\tThe table cell\r\n\t\t\t\tnode = node.nextSibling\r\n\t\t\t\twhile(node){\r\n\t\t\t\t\tif(node.tagName && node.tagName.toLowerCase() == \"td\"){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode = node.nextSibling\r\n\t\t\t\t}\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getTable(/*DomNode*/ t){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tGet the table that this cell belongs to.\r\n\t\t\t\t// t:\r\n\t\t\t\t//\t\tThe table cell\r\n\t\t\t\twhile((t = t.parentNode) && t.tagName.toLowerCase() != \"table\"){}\r\n\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getHeaderCell(/*DomNode*/ t){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tGet the table cell in the first row that shares the same\r\n\t\t\t\t//\t\tcolumn with the node t.\r\n\t\t\t\t// t:\r\n\t\t\t\t//\t\tThe node of the table cell\r\n\t\t\t\tvar tds = dojo.query(\"td\", getTable(t)),\r\n\t\t\t\t\tlen = tds.length;\r\n\t\t\t\tfor(var i = 0; i < len; i++){\r\n\t\t\t\t\tif(dojo.position(tds[i]).x == dojo.position(t).x){\r\n\t\t\t\t\t\treturn tds[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction marginBox(/*DomNode*/ node, /*Number*/ width){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tIn IE, if the border width of the td is not specified in table, the default value is 1px,\r\n\t\t\t\t//\t\tthough it is marked \"medium\".\r\n\t\t\t\t// node:\r\n\t\t\t\t//\t\tThe node to be set width\r\n\t\t\t\t// width:\r\n\t\t\t\t//\t\tThe new width of the node\r\n\t\t\t\tif(dojo.isIE){\r\n\t\t\t\t\tvar s = node.currentStyle,\r\n\t\t\t\t\t\tbl = px(node, s.borderLeftWidth), br = px(node, s.borderRightWidth),\r\n\t\t\t\t\t\tpl = px(node, s.paddingLeft), pr = px(node, s.paddingRight);\r\n\t\t\t\t\t\r\n\t\t\t\t\tnode.style.width = width - bl - br - pl - pr;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdojo.marginBox(node, {w: width});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction px(element, avalue){\r\n\t\t\t\t\tif(!avalue){ return 0; }\r\n\t\t\t\t\tif(avalue == \"medium\"){ return 1; }\r\n\t\t\t\t\t// style values can be floats, client code may\r\n\t\t\t\t\t// want to round this value for integer pixels.\r\n\t\t\t\t\tif(avalue.slice && avalue.slice(-2) == 'px'){ return parseFloat(avalue); }\r\n\t\t\t\t\twith(element){\r\n\t\t\t\t\t\tvar sLeft = style.left;\r\n\t\t\t\t\t\tvar rsLeft = runtimeStyle.left;\r\n\t\t\t\t\t\truntimeStyle.left = currentStyle.left;\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t// 'avalue' may be incompatible with style.left, which can cause IE to throw\r\n\t\t\t\t\t\t\t// this has been observed for border widths using \"thin\", \"medium\", \"thick\" constants\r\n\t\t\t\t\t\t\t// those particular constants could be trapped by a lookup\r\n\t\t\t\t\t\t\t// but perhaps there are more\r\n\t\t\t\t\t\t\tstyle.left = avalue;\r\n\t\t\t\t\t\t\tavalue = style.pixelLeft;\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\tavalue = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstyle.left = sLeft;\r\n\t\t\t\t\t\truntimeStyle.left = rsLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn avalue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tdojo.subscribe(dijit._scopeName + \".Editor.getPlugin\",null,function(o){\r\n\t\tif(o.plugin){ return; }\r\n\t\t// make first character lower case\r\n\t\tif(o.args && o.args.command){\r\n\t\t\tvar cmd = o.args.command.charAt(0).toLowerCase() + o.args.command.substring(1, o.args.command.length);\r\n\t\t\tif(cmd == \"resizeTableColumn\"){\r\n\t\t\t\to.plugin = new ResizeTableColumn({commandName: cmd});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn ResizeTableColumn;\r\n});"]}