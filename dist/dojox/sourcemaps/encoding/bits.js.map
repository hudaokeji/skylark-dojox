{"version":3,"sources":["encoding/bits.js"],"names":["define","lang","bits","getObject","OutputStream","this","reset","extend","buffer","accumulator","available","putBits","value","width","w","Math","min","v","push","getWidth","length","getBuffer","b","InputStream","bbyte","bit","getBits","r"],"mappings":";;;;;;;AAAAA,QACC,mBACE,SAASC,GACX,IAAIC,EAAOD,EAAKE,UAAU,uBAAuB,GAkEjD,OAhEAD,EAAKE,aAAe,WACnBC,KAAKC,SAGNL,EAAKM,OAAOL,EAAKE,cAChBE,MAAO,WACND,KAAKG,UACLH,KAAKI,YAAc,EACnBJ,KAAKK,UAAY,GAElBC,QAAS,SAASC,EAAOC,GACxB,KAAMA,GAAM,CACX,IAAIC,EAAIC,KAAKC,IAAIH,EAAOR,KAAKK,WACzBO,GAAKH,GAAKD,EAAQD,IAAWC,EAAQC,EAAKF,IAAWP,KAAKK,UAAYI,EAC1ET,KAAKI,aAAeQ,EAAK,MAAS,EAAIZ,KAAKK,UAC3CL,KAAKK,WAAaI,EACdT,KAAKK,YACRL,KAAKG,OAAOU,KAAKb,KAAKI,aACtBJ,KAAKI,YAAc,EACnBJ,KAAKK,UAAY,GAElBG,GAASC,IAGXK,SAAU,WACT,OAA4B,EAArBd,KAAKG,OAAOY,QAAc,EAAIf,KAAKK,YAE3CW,UAAW,WACV,IAAIC,EAAIjB,KAAKG,OAGb,OAFGH,KAAKK,UAAY,GAAIY,EAAEJ,KAAKb,KAAKI,YAAe,KAAOJ,KAAKK,WAC/DL,KAAKC,QACEgB,KAITpB,EAAKqB,YAAc,SAASf,EAAQK,GACnCR,KAAKG,OAASA,EACdH,KAAKQ,MAAQA,EACbR,KAAKmB,MAAQnB,KAAKoB,IAAM,GAGzBxB,EAAKM,OAAOL,EAAKqB,aAChBG,QAAS,SAASb,GAEjB,IADA,IAAIc,EAAI,EACFd,GAAM,CACX,IAAIC,EAAIC,KAAKC,IAAIH,EAAO,EAAIR,KAAKoB,KAEjCE,IAAMb,EACNa,GAFQtB,KAAKG,OAAOH,KAAKmB,SAAY,EAAInB,KAAKoB,IAAMX,KAEzC,GAAMA,GACjBT,KAAKoB,KAAOX,EACG,GAAZT,KAAKoB,QACLpB,KAAKmB,MACPnB,KAAKoB,IAAM,GAEZZ,GAASC,EAEV,OAAOa,GAERR,SAAU,WACT,OAAOd,KAAKQ,MAAqB,EAAbR,KAAKmB,MAAYnB,KAAKoB,OAKrCvB","file":"../../encoding/bits.js","sourcesContent":["define([\r\n\t\"dojo/_base/lang\"\t// dojo.extend\r\n], function(lang) {\r\n\tvar bits = lang.getObject(\"dojox.encoding.bits\", true);\r\n\r\n\tbits.OutputStream = function(){\r\n\t\tthis.reset();\r\n\t};\r\n\r\n\tlang.extend(bits.OutputStream, {\r\n\t\treset: function(){\r\n\t\t\tthis.buffer = [];\r\n\t\t\tthis.accumulator = 0;\r\n\t\t\tthis.available = 8;\r\n\t\t},\r\n\t\tputBits: function(value, width){\r\n\t\t\twhile(width){\r\n\t\t\t\tvar w = Math.min(width, this.available);\r\n\t\t\t\tvar v = (w <= width ? value >>> (width - w) : value) << (this.available - w);\r\n\t\t\t\tthis.accumulator |= v & (255 >>> (8 - this.available));\r\n\t\t\t\tthis.available -= w;\r\n\t\t\t\tif(!this.available){\r\n\t\t\t\t\tthis.buffer.push(this.accumulator);\r\n\t\t\t\t\tthis.accumulator = 0;\r\n\t\t\t\t\tthis.available = 8;\r\n\t\t\t\t}\r\n\t\t\t\twidth -= w;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetWidth: function(){\r\n\t\t\treturn this.buffer.length * 8 + (8 - this.available);\r\n\t\t},\r\n\t\tgetBuffer: function(){\r\n\t\t\tvar b = this.buffer;\r\n\t\t\tif(this.available < 8){ b.push(this.accumulator & (255 << this.available)); }\r\n\t\t\tthis.reset();\r\n\t\t\treturn b;\r\n\t\t}\r\n\t});\r\n\r\n\tbits.InputStream = function(buffer, width){\r\n\t\tthis.buffer = buffer;\r\n\t\tthis.width = width;\r\n\t\tthis.bbyte = this.bit = 0;\r\n\t};\r\n\r\n\tlang.extend(bits.InputStream, {\r\n\t\tgetBits: function(width){\r\n\t\t\tvar r = 0;\r\n\t\t\twhile(width){\r\n\t\t\t\tvar w = Math.min(width, 8 - this.bit);\r\n\t\t\t\tvar v = this.buffer[this.bbyte] >>> (8 - this.bit - w);\r\n\t\t\t\tr <<= w;\r\n\t\t\t\tr |= v & ~(~0 << w);\r\n\t\t\t\tthis.bit += w;\r\n\t\t\t\tif(this.bit == 8){\r\n\t\t\t\t\t++this.bbyte;\r\n\t\t\t\t\tthis.bit = 0;\r\n\t\t\t\t}\r\n\t\t\t\twidth -= w;\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t},\r\n\t\tgetWidth: function(){\r\n\t\t\treturn this.width - this.bbyte * 8 - this.bit;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\treturn bits;\r\n});\r\n"]}