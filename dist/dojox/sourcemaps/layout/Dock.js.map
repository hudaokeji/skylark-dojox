{"version":3,"sources":["layout/Dock.js"],"names":["define","lang","winUtil","declare","fx","on","arrayUtil","has","windowLib","dom","domClass","domGeom","domConstruct","_TemplatedMixin","_WidgetBase","BackgroundIframe","Moveable","ContentPane","ResizeHandle","template","Dock","templateString","_docked","_inPositioning","autoPosition","addNode","refNode","div","create","this","containerNode","node","DockNode","title","paneRef","startup","id","isFixedDock","own","window","hitch","domNode","_positionDock","inherited","arguments","e","setTimeout","_inPositiononing","viewport","getBox","s","style","left","l","width","w","top","h","t","offsetHeight","restore","show","bringToTop","destroy"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,oBAAqB,qBAC9C,gBAAiB,UAAW,mBAAoB,mBAChD,cAAe,WAAY,iBAAkB,oBAAqB,qBAClE,wBAAyB,oBAAqB,yBAA0B,oBACxE,gBAAiB,iBAAkB,0CAA2C,kBAAmB,SAClGC,EAAMC,EAASC,EAASC,EAAIC,EAAIC,EAChCC,EAAKC,EAAWC,EAAKC,EAAUC,EAASC,EAAcC,EAAiBC,EAAaC,EACpFC,EAAUC,EAAaC,EAAcC,GAKtC,IAAIC,EAAOjB,EAAQ,qBAAqBW,EAAaD,IAKpDQ,eAAgB,sGAIhBC,WAEAC,gBAAgB,EAEhBC,cAAc,EAEdC,QAAS,SAASC,GAIjB,IAAIC,EAAMf,EAAagB,OAAO,KAAM,KAAMC,KAAKC,eAC9CC,EAAO,IAAIC,GACVC,MAAOP,EAAQO,MACfC,QAASR,GACPC,GAGJ,OADAI,EAAKI,UACEJ,GAGRI,QAAS,YAEO,2BAAXN,KAAKO,IAAmCP,KAAKQ,eAEhDR,KAAKS,IACJjC,EAAGkC,OAAQ,SAAUtC,EAAKuC,MAAMX,KAAM,kBACtCxB,EAAGkC,OAAQ,SAAUtC,EAAKuC,MAAMX,KAAM,mBAEpCtB,EAAI,OACNsB,KAAKS,IACJjC,EAAGwB,KAAKY,QAAS,SAAUxC,EAAKuC,MAAMX,KAAM,oBAI/CA,KAAKa,cAAc,MACnBb,KAAKc,UAAUC,YAIhBF,cAAe,SAAqBG,GAC/BhB,KAAKN,gBACgB,SAArBM,KAAKL,cAEPsB,WAAW7C,EAAKuC,MAAMX,KAAM,WAC3BA,KAAKkB,kBAAmB,EACxB,IAAIC,EAAWxC,EAAUyC,SACrBC,EAAIrB,KAAKY,QAAQU,MACrBD,EAAEE,KAAOJ,EAASK,EAAI,KACtBH,EAAEI,MAASN,EAASO,EAAE,EAAK,KAC3BL,EAAEM,IAAOR,EAASS,EAAIT,EAASU,EAAK7B,KAAKY,QAAQkB,aAAe,KAChE9B,KAAKN,gBAAiB,IACnB,QAQJS,EAAW7B,EAAQ,0BAA0BW,EAAaD,IAO7DoB,MAAO,GAIPC,QAAS,KAETb,eACC,0RAKDuC,QAAS,WAGR/B,KAAKK,QAAQ2B,OACbhC,KAAKK,QAAQ4B,aACbjC,KAAKkC,aAIP,OAAO3C","file":"../../layout/Dock.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/window\", \"dojo/_base/declare\",\r\n\t\t\"dojo/_base/fx\", \"dojo/on\", \"dojo/_base/array\", \"dojo/_base/sniff\",\r\n\t\t\"dojo/window\", \"dojo/dom\", \"dojo/dom-class\", \"dojo/dom-geometry\", \"dojo/dom-construct\",\r\n\t\t\"dijit/_TemplatedMixin\", \"dijit/_WidgetBase\", \"dijit/BackgroundIframe\", \"dojo/dnd/Moveable\",\r\n\t\t\"./ContentPane\", \"./ResizeHandle\", \"dojo/text!./resources/FloatingPane.html\", \"dojo/domReady!\"], function(\r\n\tlang, winUtil, declare, fx, on, arrayUtil, \r\n\thas, windowLib, dom, domClass, domGeom, domConstruct, _TemplatedMixin, _WidgetBase, BackgroundIframe, \r\n\tMoveable, ContentPane, ResizeHandle, template){\r\n\r\n//TODO: don't want to rely on kernel just to make something as experimental\t\r\n//kernel.experimental(\"dojox.layout.Dock\");\r\n\r\nvar Dock = declare(\"dojox.layout.Dock\",[_WidgetBase, _TemplatedMixin],{\r\n\t// summary:\r\n\t//\t\tA widget that attaches to a node and keeps track of incoming / outgoing FloatingPanes\r\n\t//\t\tand handles layout\r\n\r\n\ttemplateString: '<div class=\"dojoxDock\"><ul data-dojo-attach-point=\"containerNode\" class=\"dojoxDockList\"></ul></div>',\r\n\r\n\t// _docked: [private] Array\r\n\t//\t\tarray of panes currently in our dock\r\n\t_docked: [],\r\n\t\r\n\t_inPositioning: false,\r\n\t\r\n\tautoPosition: false,\r\n\t\r\n\taddNode: function(refNode){\r\n\t\t// summary:\r\n\t\t//\t\tInsert a dockNode reference into the dock\r\n\t\t\r\n\t\tvar div = domConstruct.create('li', null, this.containerNode),\r\n\t\t\tnode = new DockNode({\r\n\t\t\t\ttitle: refNode.title,\r\n\t\t\t\tpaneRef: refNode\r\n\t\t\t}, div)\r\n\t\t;\r\n\t\tnode.startup();\r\n\t\treturn node;\r\n\t},\r\n\r\n\tstartup: function(){\r\n\t\t\t\t\r\n\t\tif (this.id == \"dojoxGlobalFloatingDock\" || this.isFixedDock) {\r\n\t\t\t// attach window.onScroll, and a position like in presentation/dialog\r\n\t\t\tthis.own(\r\n\t\t\t\ton(window, \"resize\", lang.hitch(this, \"_positionDock\")),\r\n\t\t\t\ton(window, \"scroll\", lang.hitch(this, \"_positionDock\"))\r\n\t\t\t);\r\n\t\t\tif(has(\"ie\")){ // TODO: All versions of IE, or pre-IE9, or some feature to test?\r\n\t\t\t\tthis.own(\r\n\t\t\t\t\ton(this.domNode, \"resize\", lang.hitch(this, \"_positionDock\"))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._positionDock(null);\r\n\t\tthis.inherited(arguments);\r\n\r\n\t},\r\n\t\r\n\t_positionDock: function(/* Event? */e){\r\n\t\tif(!this._inPositioning){\r\n\t\t\tif(this.autoPosition == \"south\"){\r\n\t\t\t\t// Give some time for scrollbars to appear/disappear\r\n\t\t\t\tsetTimeout(lang.hitch(this, function() {\r\n\t\t\t\t\tthis._inPositiononing = true;\r\n\t\t\t\t\tvar viewport = windowLib.getBox();\r\n\t\t\t\t\tvar s = this.domNode.style;\r\n\t\t\t\t\ts.left = viewport.l + \"px\";\r\n\t\t\t\t\ts.width = (viewport.w-2) + \"px\";\r\n\t\t\t\t\ts.top = (viewport.h + viewport.t) - this.domNode.offsetHeight + \"px\";\r\n\t\t\t\t\tthis._inPositioning = false;\r\n\t\t\t\t}), 125);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n});\r\n\r\nvar DockNode = declare(\"dojox.layout._DockNode\",[_WidgetBase, _TemplatedMixin],{\r\n\t// summary:\r\n\t//\t\tdojox.layout._DockNode is a private widget used to keep track of\r\n\t//\t\twhich pane is docked.\r\n\r\n\t// title: String\r\n\t//\t\tShown in dock icon. should read parent iconSrc?\r\n\ttitle: \"\",\r\n\r\n\t// paneRef: Widget\r\n\t//\t\treference to the FloatingPane we reprasent in any given dock\r\n\tpaneRef: null,\r\n\r\n\ttemplateString:\r\n\t\t'<li data-dojo-attach-event=\"onclick: restore\" class=\"dojoxDockNode\">'+\r\n\t\t\t'<span data-dojo-attach-point=\"restoreNode\" class=\"dojoxDockRestoreButton\" data-dojo-attach-event=\"onclick: restore\"></span>'+\r\n\t\t\t'<span class=\"dojoxDockTitleNode\" data-dojo-attach-point=\"titleNode\">${title}</span>'+\r\n\t\t'</li>',\r\n\r\n\trestore: function(){\r\n\t\t// summary:\r\n\t\t//\t\tremove this dock item from parent dock, and call show() on reffed floatingpane\r\n\t\tthis.paneRef.show();\r\n\t\tthis.paneRef.bringToTop();\r\n\t\tthis.destroy();\r\n\t}\r\n});\r\n\r\nreturn Dock;\r\n});\r\n\r\n"]}