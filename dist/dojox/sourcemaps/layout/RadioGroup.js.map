{"version":3,"sources":["layout/RadioGroup.js"],"names":["define","kernel","declare","html","lang","query","Widget","Templated","Contained","StackContainer","easing","baseFx","domConstruct","domClass","experimental","RadioGroup","duration","hasButtons","buttonClass","templateString","startup","this","inherited","arguments","_children","getChildren","_buttons","length","_size","coords","containerNode","style","buttonHolder","_setupChild","child","domNode","tmp","buttonNode","appendChild","create","n","tmpw","getObject","label","title","page","mixin","_radioButton","display","removeChild","destroy","_transition","newWidget","oldWidget","_showChild","_hideChild","doLayout","resize","_containerContentBox","_contentBox","children","isFirstChild","isLastChild","selected","_onShow","onShow","onHide","fadeOut","node","onEnd","hitch","play","fadeIn","zTop","constructor","isString","_positionChild","rA","rB","slideFrom","Math","round","random","prop","val","zIndex","_anim","status","gotoPercent","animateProperty","properties","left","top","beforeBegin","connect","_onMouse","e","getParent","selectChild","_clearSelected","add","parentNode","removeClass","extend"],"mappings":"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","file":"../../layout/RadioGroup.js","sourcesContent":["define([\"dojo/_base/kernel\",\"dojo/_base/declare\",\"dojo/_base/html\",\"dojo/_base/lang\",\"dojo/_base/query\",\r\n\t\t\"dijit/_Widget\",\"dijit/_Templated\",\"dijit/_Contained\",\"dijit/layout/StackContainer\",\r\n\t\t\"dojo/fx/easing\",\"dojo/_base/fx\",\"dojo/dom-construct\",\"dojo/dom-class\"],function(\r\n\tkernel,declare,html,lang,query,Widget,Templated,Contained,StackContainer,easing,baseFx,domConstruct,domClass){\r\n\r\nkernel.experimental(\"dojox.layout.RadioGroup\");\r\n\r\n/*=====\r\nreturn {\r\n\t// summary:\r\n\t//\t\tdojox.layout.RadioGroup - an experimental (probably poorly named) Layout widget extending StackContainer\r\n\t//\t\tthat accepts ContentPanes as children, and applies aesthetically pleasing responsive transition animations\r\n\t//\t\tattached to :hover of the Buttons created.\r\n\r\n\t// FIXME: take the Buttons out of the root template, and allow layoutAlign or similar attrib to use a different\r\n\t//\ttemplate, or build the template dynamically?\r\n\t};\r\n=====*/\r\nvar RadioGroup = declare(\"dojox.layout.RadioGroup\",[StackContainer,Templated],{\r\n\t// summary:\r\n\t//\t\tA Container that turns its Layout Children into a single Pane and transitions between states\r\n\t//\t\tonHover of the button\r\n\r\n\t// duration: Integer\r\n\t//\t\tused for Fade and Slide RadioGroup's, the duration to run the transition animation. does not affect anything\r\n\t//\t\tin default RadioGroup\r\n\tduration: 750,\r\n\r\n\t// hasButtons: Boolean\r\n\t//\t\ttoggles internal button making on or off\r\n\thasButtons: false,\r\n\r\n\t// buttonClass: String\r\n\t//\t\tThe full declared className of the Button widget to use for hasButtons\r\n\tbuttonClass: \"dojox.layout._RadioButton\",\r\n\t\r\n\t// templateString: String\r\n\t//\t\tthe template for our container\r\n\ttemplateString: '<div class=\"dojoxRadioGroup\">'\r\n\t\t\t+' \t<div dojoAttachPoint=\"buttonHolder\" style=\"display:none;\">'\r\n\t\t\t+'\t\t<table class=\"dojoxRadioButtons\"><tbody><tr class=\"dojoxRadioButtonRow\" dojoAttachPoint=\"buttonNode\"></tr></tbody></table>'\r\n\t\t\t+'\t</div>'\r\n\t\t\t+'\t<div class=\"dojoxRadioView\" dojoAttachPoint=\"containerNode\"></div>'\r\n\t\t\t+'</div>',\r\n\r\n\tstartup: function(){\r\n\t\t// summary:\r\n\t\t//\t\tscan the container for children, and make \"tab buttons\" for them\r\n\t\tthis.inherited(arguments);\r\n\t\tthis._children = this.getChildren();\r\n\t\tthis._buttons = this._children.length;\r\n\t\tthis._size = html.coords(this.containerNode);\r\n\t\tif(this.hasButtons){\r\n\t\t\thtml.style(this.buttonHolder, \"display\", \"block\");\r\n\t\t}\r\n\t},\r\n\r\n\t_setupChild: function(/* dijit._Widget */child){\r\n\t\t// summary:\r\n\t\t//\t\tCreates a hover button for a child node of the RadioGroup\r\n\t\thtml.style(child.domNode, \"position\", \"absolute\");\r\n\t\tif(this.hasButtons){\r\n\t\t\t\r\n\t\t\tvar tmp = this.buttonNode.appendChild(domConstruct.create('td'));\r\n\t\t\tvar n = domConstruct.create(\"div\", null, tmp),\r\n\t\t\t\t_Button = lang.getObject(this.buttonClass),\r\n\t\t\t\ttmpw = new _Button({\r\n\t\t\t\t\tlabel: child.title,\r\n\t\t\t\t\tpage: child\r\n\t\t\t\t}, n)\r\n\t\t\t;\r\n\t\t\t\r\n\t\t\tlang.mixin(child, { _radioButton: tmpw });\r\n\t\t\ttmpw.startup();\r\n\t\t}\r\n\t\tchild.domNode.style.display = \"none\";\r\n\t},\r\n\t\r\n\tremoveChild: function(child){\r\n\t\tif(this.hasButtons && child._radioButton){\r\n\t\t\tchild._radioButton.destroy();\r\n\t\t\tdelete child._radioButton;\r\n\t\t}\r\n\t\tthis.inherited(arguments);\r\n\t},\r\n\t\r\n\t// FIXME: shouldn't have to rewriting these, need to take styling out of _showChild and _hideChild\r\n\t//\t\tand use classes on the domNode in _transition or something similar (in StackContainer)\r\n\t_transition: function(/*dijit._Widget*/ newWidget, /*dijit._Widget*/ oldWidget){\r\n\t\t// summary:\r\n\t\t//\t\tcalled when StackContainer receives a selectChild call, used to transition the panes.\r\n\t\tthis._showChild(newWidget);\r\n\t\tif(oldWidget){\r\n\t\t\tthis._hideChild(oldWidget);\r\n\t\t}\r\n\t\t// Size the new widget, in case this is the first time it's being shown,\r\n\t\t// or I have been resized since the last time it was shown.\r\n\t\t// page must be visible for resizing to work\r\n\t\tif(this.doLayout && newWidget.resize){\r\n\t\t\tnewWidget.resize(this._containerContentBox || this._contentBox);\r\n\t\t}\r\n\t},\r\n\r\n\t_showChild: function(/*dijit._Widget*/ page){\r\n\t\t// summary:\r\n\t\t//\t\tshow the selected child widget\r\n\t\tvar children = this.getChildren();\r\n\t\tpage.isFirstChild = (page == children[0]);\r\n\t\tpage.isLastChild = (page == children[children.length-1]);\r\n\t\tpage.selected = true;\r\n\r\n\t\tpage.domNode.style.display=\"\";\r\n\r\n\t\tif(page._onShow){\r\n\t\t\tpage._onShow(); // trigger load in ContentPane\r\n\t\t}else if(page.onShow){\r\n\t\t\tpage.onShow();\r\n\t\t}\r\n\t},\r\n\r\n\t_hideChild: function(/*dijit._Widget*/ page){\r\n\t\t// summary:\r\n\t\t//\t\thide the specified child widget\r\n\t\tpage.selected = false;\r\n\t\tpage.domNode.style.display=\"none\";\r\n\t\tif(page.onHide){\r\n\t\t\tpage.onHide();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\ndeclare(\"dojox.layout.RadioGroupFade\", RadioGroup, {\r\n\t// summary:\r\n\t//\t\tAn extension on a stock RadioGroup, that fades the panes.\r\n\r\n\t_hideChild: function(page){\r\n\t\t// summary:\r\n\t\t//\t\thide the specified child widget\r\n\t\tbaseFx.fadeOut({\r\n\t\t\tnode:page.domNode,\r\n\t\t\tduration:this.duration,\r\n\t\t\tonEnd: lang.hitch(this,\"inherited\", arguments, arguments)\r\n\t\t}).play();\r\n\t},\r\n\r\n\t_showChild: function(page){\r\n\t\t// summary:\r\n\t\t//\t\tshow the specified child widget\r\n\t\tthis.inherited(arguments);\r\n\t\thtml.style(page.domNode, \"opacity\", 0);\r\n\t\tbaseFx.fadeIn({\r\n\t\t\tnode:page.domNode,\r\n\t\t\tduration:this.duration\r\n\t\t}).play();\r\n\t}\r\n});\r\n\r\ndeclare(\"dojox.layout.RadioGroupSlide\", RadioGroup, {\r\n\t// summary:\r\n\t//\t\tA Sliding Radio Group\r\n\t// description:\r\n\t//\t\tAn extension on a stock RadioGroup widget, sliding the pane\r\n\t//\t\tinto view from being hidden. The entry direction is randomized\r\n\t//\t\ton each view\r\n\t//\r\n\r\n\t// easing: Function\r\n\t//\t\tA hook to override the default easing of the pane slides.\r\n\teasing: \"dojo.fx.easing.backOut\",\r\n\r\n\t// zTop: Integer\r\n\t//\t\tA z-index to apply to the incoming pane\r\n\tzTop: 99,\r\n\t\r\n\tconstructor: function(){\r\n\t\tif(lang.isString(this.easing)){\r\n\t\t\tthis.easing = lang.getObject(this.easing);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_positionChild: function(page){\r\n\t\t// summary:\r\n\t\t//\t\tset the child out of view immediately after being hidden\r\n\r\n\t\t// FIXME: is there a real \"size\" floating around always?\r\n\t\tif(!this._size){ return; } \r\n\t\t\r\n\t\t// there should be a contest: obfuscate this function as best you can.\r\n\t\tvar rA = true, rB = true;\r\n\t\tswitch(page.slideFrom){\r\n\t\t\tcase \"bottom\" : rB = !rB; break;\r\n\t\t\tcase \"right\" : \trA = !rA; rB = !rB; break;\r\n\t\t\tcase \"top\" : \tbreak;\r\n\t\t\tcase \"left\" : \trA = !rA; break;\r\n\t\t\tdefault:\r\n\t\t\t\trA = Math.round(Math.random());\r\n\t\t\t\trB = Math.round(Math.random());\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tvar prop = rA ? \"top\" : \"left\",\r\n\t\t\tval = (rB ? \"-\" : \"\") + (this._size[rA ? \"h\" : \"w\" ] + 20) + \"px\";\r\n\t\t\t\r\n\t\thtml.style(page.domNode, prop, val);\r\n\r\n\t},\r\n\r\n\t_showChild: function(page){\r\n\t\t// summary:\r\n\t\t//\t\tSlide in the selected child widget\r\n\t\t\r\n\t\tvar children = this.getChildren();\r\n\t\tpage.isFirstChild = (page == children[0]);\r\n\t\tpage.isLastChild = (page == children[children.length-1]);\r\n\t\tpage.selected = true;\r\n\r\n\t\thtml.style(page.domNode,{\r\n\t\t\tzIndex: this.zTop, display:\"\"\r\n\t\t});\r\n\r\n\t\tif(this._anim && this._anim.status()==\"playing\"){\r\n\t\t\tthis._anim.gotoPercent(100,true);\r\n\t\t}\r\n\t\t\r\n\t\tthis._anim = baseFx.animateProperty({\r\n\t\t\tnode:page.domNode,\r\n\t\t\tproperties: {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0\r\n\t\t\t},\r\n\t\t\tduration: this.duration,\r\n\t\t\teasing: this.easing,\r\n\t\t\tonEnd: lang.hitch(page, function(){\r\n\t\t\t\tif(this.onShow){ this.onShow(); }\r\n\t\t\t\tif(this._onShow){ this._onShow(); }\r\n\t\t\t}),\r\n\t\t\tbeforeBegin: lang.hitch(this, \"_positionChild\", page)\r\n\t\t});\r\n\t\tthis._anim.play();\r\n\t},\r\n\r\n\t_hideChild: function(page){\r\n\t\t// summary:\r\n\t\t//\t\treset the position of the hidden pane out of sight\r\n\r\n\t\tpage.selected = false;\r\n\t\tpage.domNode.style.zIndex = this.zTop - 1;\r\n\t\tif(page.onHide){\r\n\t\t\tpage.onHide();\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n});\r\n\r\ndeclare(\"dojox.layout._RadioButton\",[Widget,Templated,Contained],{\r\n\t// summary:\r\n\t//\t\tThe Buttons for a RadioGroup\r\n\t// description:\r\n\t//\t\tA private widget used to manipulate the StackContainer (RadioGroup*). Don't create directly.\r\n\t\r\n\t// label: String\r\n\t//\t\tthe Text Label of the button\r\n\tlabel: \"\",\r\n\r\n\t// domNode to tell parent to select\r\n\tpage: null,\r\n\r\n\ttemplateString: '<div dojoAttachPoint=\"focusNode\" class=\"dojoxRadioButton\"><span dojoAttachPoint=\"titleNode\" class=\"dojoxRadioButtonLabel\">${label}</span></div>',\r\n\t\r\n\tstartup: function(){\r\n\t\t// summary:\r\n\t\t//\t\tstart listening to mouseOver\r\n\t\tthis.connect(this.domNode, \"onmouseenter\", \"_onMouse\");\r\n\t},\r\n\t\r\n\t_onMouse: function(/* Event */e){\r\n\t\t// summary:\r\n\t\t//\t\tset the selected child on hover, and set our hover state class\r\n\t\tthis.getParent().selectChild(this.page);\r\n\t\tthis._clearSelected();\r\n\t\tdomClass.add(this.domNode,\"dojoxRadioButtonSelected\");\r\n\r\n\t},\r\n\r\n\t_clearSelected: function(){\r\n\t\t// summary:\r\n\t\t//\t\tremove hover state class from sibling Buttons. This is easier (and more reliable)\r\n\t\t//\t\tthan setting up an additional connection to onMouseOut\r\n\t\t\r\n\t\t// FIXME: this relies on the template being [div][span]node[/span][/div]\r\n\t\tquery(\".dojoxRadioButtonSelected\", this.domNode.parentNode.parentNode)\r\n\t\t\t.removeClass(\"dojoxRadioButtonSelected\")\r\n\t\t;\r\n\t}\r\n\t\r\n});\r\n\r\nlang.extend(Widget,{\r\n\t// slideFrom: String\r\n\t//\t\tA parameter needed by RadioGroupSlide only. An optional parameter to force\r\n\t//\t\tthe ContentPane to slide in from a set direction. Defaults\r\n\t//\t\tto \"random\", or specify one of \"top\", \"left\", \"right\", \"bottom\"\r\n\t//\t\tto slideFrom top, left, right, or bottom.\r\n\tslideFrom: \"random\"\r\n})\r\n});\r\n"]}