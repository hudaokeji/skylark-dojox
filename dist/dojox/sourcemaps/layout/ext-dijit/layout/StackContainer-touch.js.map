{"version":3,"sources":["layout/ext-dijit/layout/StackContainer-touch.js"],"names":["dojo","provide","experimental","require","connect","dijit","layout","StackContainer","prototype","this","axis","baseClass","forEach","p","domNode","e","type","preventDefault","touchPosition","delta","touches","Math","abs","selectedChildWidget","isLastChild","forward","isFirstChild","back","length"],"mappings":";;;;;;;AAAAA,KAAKC,QAAQ,sDACbD,KAAKE,aAAa,sDAClBF,KAAKG,QAAQ,+BAMbH,KAAKI,QAAQC,MAAMC,OAAOC,eAAeC,UAAW,aAAc,WACjEC,KAAKC,KAA0B,2BAAlBD,KAAKE,UAA0C,IAAM,IAClEX,KAAKY,SACH,aAAc,YAAa,WAAY,eACxC,SAASC,GACRJ,KAAKL,QAAQK,KAAKK,QAASD,EAAG,SAASE,GACtC,OAAOA,EAAEC,MACR,IAAK,YAEJ,GADAD,EAAEE,iBACCR,KAAKS,cAAc,CACrB,IAAIC,EAAQJ,EAAEK,QAAQ,GAAG,OAASX,KAAKC,MAAQD,KAAKS,cACjDG,KAAKC,IAAIH,GAAS,MACJ,KAAbV,KAAKC,OAAcS,IAAU,UACzBV,KAAKS,cACTC,EAAQ,GACTV,KAAKc,oBAAoBC,aAAef,KAAKgB,WAE7ChB,KAAKc,oBAAoBG,cAAgBjB,KAAKkB,QAIlD,MACD,IAAK,aACJ,GAAuB,GAApBZ,EAAEK,QAAQQ,OAAY,CACxBnB,KAAKS,cAAgBH,EAAEK,QAAQ,GAAG,OAASX,KAAKC,MAChD,MAGF,IAAK,WACL,IAAK,qBACGD,KAAKS,kBAIhBT","file":"../../../../layout/ext-dijit/layout/StackContainer-touch.js","sourcesContent":["dojo.provide(\"dojox.layout.ext-dijit.layout.StackContainer-touch\");\r\ndojo.experimental(\"dojox.layout.ext-dijit.layout.StackContainer-touch\");\r\ndojo.require(\"dijit.layout.StackContainer\");\r\n\r\n// To support \"flick\" actions on iPhone, iPod Touch, etc.\r\n// Implemented as a mixin to work with StackContainer (horizontal) and AccordionContainer (vertical)\r\n// TODO: use native CSS animations for fx, provide live tracking of touch and perhaps a 'bounce' effect.\r\n\r\ndojo.connect(dijit.layout.StackContainer.prototype, \"postCreate\", function(){\r\n\tthis.axis = (this.baseClass == \"dijitAccordionContainer\") ? \"Y\" : \"X\";\r\n\tdojo.forEach(\r\n\t\t[\"touchstart\", \"touchmove\", \"touchend\", \"touchcancel\"],\r\n\t\tfunction(p){\r\n\t\t\tthis.connect(this.domNode, p, function(e){\r\n\t\t\t\tswitch(e.type){\r\n\t\t\t\t\tcase \"touchmove\":\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tif(this.touchPosition){\r\n\t\t\t\t\t\t\tvar delta = e.touches[0][\"page\" + this.axis] - this.touchPosition;\r\n\t\t\t\t\t\t\tif(Math.abs(delta) > 100){\r\n\t\t\t\t\t\t\t\tif(this.axis == \"Y\"){ delta *= -1;}\r\n\t\t\t\t\t\t\t\tdelete this.touchPosition;\r\n\t\t\t\t\t\t\t\tif(delta > 0){\r\n\t\t\t\t\t\t\t\t\t!this.selectedChildWidget.isLastChild && this.forward();\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t!this.selectedChildWidget.isFirstChild && this.back();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"touchstart\":\r\n\t\t\t\t\t\tif(e.touches.length == 1){\r\n\t\t\t\t\t\t\tthis.touchPosition = e.touches[0][\"page\" + this.axis];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t// else fallthrough\r\n\t\t\t\t\tcase \"touchend\":\r\n\t\t\t\t\tcase \"touchcancel\":\r\n\t\t\t\t\t\tdelete this.touchPosition;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tthis);\r\n});\r\n"]}