{"version":3,"sources":["data/css.js"],"names":["define","lang","array","css","getObject","rules","forEach","fn","ctx","context","styleSheet","cssRules","rule","type","href","call","this","findStyleSheets","sheets","sheetObjects","s","findStyleSheet","sheet","indexOf","push","charAt","substring","_processSS","match","imports","some","importedSS","document","styleSheets","determineContext","initialStylesheets","ret","length"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,oBACzB,SAASC,EAAMC,GAEjB,IAAIC,EAAMF,EAAKG,UAAU,kBAAiB,GAoG1C,OAlGAD,EAAIE,SAEJF,EAAIE,MAAMC,QAAU,SAASC,EAAGC,EAAIC,GACnC,GAAGA,EAAQ,CAcVP,EAAMI,QAAQG,EAbG,SAASC,GAEzBR,EAAMI,QAAQI,EAAWA,EAAWC,SAAS,WAAW,SAAU,SAASC,GAC1E,IAAIA,EAAKC,MAAsB,IAAdD,EAAKC,KAAW,CAChC,IAAIC,EAAO,GACRJ,GAAcA,EAAWI,OAC3BA,EAAOJ,EAAWI,MAEnBP,EAAGQ,KAAKP,GAAQQ,KAAKJ,EAAMF,EAAYI,UAS5CX,EAAIc,gBAAkB,SAASC,GAG9B,IAAIC,KAYJ,OADAjB,EAAMI,QAAQY,EAVG,SAASR,GACzB,IAAIU,EAAIjB,EAAIkB,eAAeX,GACxBU,GACFlB,EAAMI,QAAQc,EAAG,SAASE,IACkB,IAAxCpB,EAAMqB,QAAQJ,EAAcG,IAC9BH,EAAaK,KAAKF,OAMfH,GAGRhB,EAAIkB,eAAiB,SAASC,GAG7B,IAAIH,KACmB,MAApBG,EAAMG,OAAO,KACfH,EAAQA,EAAMI,UAAU,IAEzB,IAAIC,EAAa,SAASjB,GACzB,OAAGA,EAAWI,MAAQJ,EAAWI,KAAKc,MAAMN,IAC3CH,EAAaK,KAAKd,IACX,GAELA,EAAWmB,QACN3B,EAAM4B,KAAKpB,EAAWmB,QAAS,SAASE,GAE9C,OAAOJ,EAAWI,KAIb7B,EAAM4B,KAAKpB,EAAWA,EAAWC,SAAS,WAAW,SAAU,SAASC,GAC9E,SAAGA,EAAKC,MAAsB,IAAdD,EAAKC,OAAcc,EAAWf,EAAKF,gBAQrD,OADAR,EAAM4B,KAAKE,SAASC,YAAaN,GAC1BR,GAGRhB,EAAI+B,iBAAmB,SAASC,GAG/B,IAAIC,KAEHD,EADEA,GAAsBA,EAAmBE,OAAS,EAC/BlC,EAAIc,gBAAgBkB,GAEpBH,SAASC,YAE/B,IAAIN,EAAa,SAASjB,GACzB0B,EAAIZ,KAAKd,GACNA,EAAWmB,SACb3B,EAAMI,QAAQI,EAAWmB,QAAS,SAASE,GAE1CJ,EAAWI,KAIb7B,EAAMI,QAAQI,EAAWA,EAAWC,SAAS,WAAW,SAAU,SAASC,GACvEA,EAAKC,MAAsB,IAAdD,EAAKC,MACpBc,EAAWf,EAAKF,eAKnB,OADAR,EAAMI,QAAQ6B,EAAmBR,GAC1BS,GAGDjC","file":"../../data/css.js","sourcesContent":["define([\"dojo/_base/lang\", \"dojo/_base/array\"], \r\n  function(lang, array) {\r\n\r\nvar css = lang.getObject(\"dojox.data.css\",true) \r\n\r\ncss.rules = {};\r\n\r\ncss.rules.forEach = function(fn,ctx,context){\r\n\tif(context){\r\n\t\tvar _processSS = function(styleSheet){\r\n\t\t\t//iterate across rules in the stylesheet\r\n\t\t\tarray.forEach(styleSheet[styleSheet.cssRules?\"cssRules\":\"rules\"], function(rule){\r\n\t\t\t\tif(!rule.type || rule.type !== 3){// apply fn to current rule with approp ctx. rule is arg (all browsers)\r\n\t\t\t\t\tvar href = \"\";\r\n\t\t\t\t\tif(styleSheet && styleSheet.href){\r\n\t\t\t\t\t\thref = styleSheet.href;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(ctx?ctx:this,rule, styleSheet, href);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//process any child stylesheets\r\n\t\t};\r\n\t\tarray.forEach(context,_processSS);\r\n\t}\r\n};\r\n\r\ncss.findStyleSheets = function(sheets){\r\n\t// Takes an array of stylesheet paths and finds the currently loaded StyleSheet objects matching\r\n\t// those names\r\n\tvar sheetObjects = [];\r\n\tvar _processSS = function(styleSheet){\r\n\t\tvar s = css.findStyleSheet(styleSheet);\r\n\t\tif(s){\r\n\t\t\tarray.forEach(s, function(sheet){\r\n\t\t\t\tif(array.indexOf(sheetObjects, sheet) === -1){\r\n\t\t\t\t\tsheetObjects.push(sheet);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tarray.forEach(sheets, _processSS);\r\n\treturn sheetObjects;\r\n};\r\n\r\ncss.findStyleSheet = function(sheet){\r\n\t// Takes a stylesheet path and finds the currently loaded StyleSheet objects matching\r\n\t// those names (and it's parent(s), if it is imported from another)\r\n\tvar sheetObjects = [];\r\n\tif(sheet.charAt(0) === '.'){\r\n\t\tsheet = sheet.substring(1);\r\n\t}\r\n\tvar _processSS = function(styleSheet){\r\n\t\tif(styleSheet.href && styleSheet.href.match(sheet)){\r\n\t\t\tsheetObjects.push(styleSheet);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif(styleSheet.imports){\r\n\t\t\treturn array.some(styleSheet.imports, function(importedSS){ //IE stylesheet has imports[] containing @import'ed rules\r\n\t\t\t\t//console.debug(\"Processing IE @import rule\",importedSS);\r\n\t\t\t\treturn _processSS(importedSS);\r\n\t\t\t});\r\n\t\t}\r\n\t\t//iterate across rules in the stylesheet\r\n\t\treturn array.some(styleSheet[styleSheet.cssRules?\"cssRules\":\"rules\"], function(rule){\r\n\t\t\tif(rule.type && rule.type === 3 && _processSS(rule.styleSheet)){// CSSImportRule (firefox)\r\n\t\t\t\t//sheetObjects.push(styleSheet);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t};\r\n\tarray.some(document.styleSheets, _processSS);\r\n\treturn sheetObjects;\r\n};\r\n\r\ncss.determineContext = function(initialStylesheets){\r\n\t// Takes an array of stylesheet paths and returns an array of all stylesheets that fall in the\r\n\t// given context.  If no paths are given, all stylesheets are returned.\r\n\tvar ret = [];\r\n\tif(initialStylesheets && initialStylesheets.length > 0){\r\n\t\tinitialStylesheets = css.findStyleSheets(initialStylesheets);\r\n\t}else{\r\n\t\tinitialStylesheets = document.styleSheets;\r\n\t}\r\n\tvar _processSS = function(styleSheet){\r\n\t\tret.push(styleSheet);\r\n\t\tif(styleSheet.imports){\r\n\t\t\tarray.forEach(styleSheet.imports, function(importedSS){ //IE stylesheet has imports[] containing @import'ed rules\r\n\t\t\t\t//console.debug(\"Processing IE @import rule\",importedSS);\r\n\t\t\t\t_processSS(importedSS);\r\n\t\t\t});\r\n\t\t}\r\n\t\t//iterate across rules in the stylesheet\r\n\t\tarray.forEach(styleSheet[styleSheet.cssRules?\"cssRules\":\"rules\"], function(rule){\r\n\t\t\tif(rule.type && rule.type === 3){// CSSImportRule (firefox)\r\n\t\t\t\t_processSS(rule.styleSheet);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tarray.forEach(initialStylesheets,_processSS);\r\n\treturn ret;\r\n};\r\n\r\nreturn css;\r\n\r\n});\r\n"]}