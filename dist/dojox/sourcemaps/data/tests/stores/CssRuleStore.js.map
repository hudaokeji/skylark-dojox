{"version":3,"sources":["data/tests/stores/CssRuleStore.js"],"names":["dojo","provide","require","dojox","data","tests","stores","CssRuleStore","createStore","context","store","isBrowser","_loaded","style","text","head","doc","getElementsByTagName","link","document","createElement","href","toUrl","toString","rel","type","appendChild","isIE","createStyleSheet","cssText","createTextNode","verifyItems","cssRuleStore","items","attribute","compareArray","length","i","getValue","error","t","d","errData","console","log","errback","doh","register","name","timeout","runTest","Deferred","fetch","query","selector","onComplete","assertTrue","callback","onError","partial","setContext","request","is","done","e","onItem","item","count","onBegin","size","requestObj","isItem","dumpThirdFetch","dumpSecondFetch","start","assertEqual","label","getLabel","labelList","getLabelAttributes","isArray","match","values","getValues","hasAttribute","passed","containsValue","attributes","getAttributes","a","features","getFeatures","queryOptions","ignoreCase","sort","descending","testStore","readApi","api","Read","charAt","testStoreMember"],"mappings":"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","file":"../../../../data/tests/stores/CssRuleStore.js","sourcesContent":["dojo.provide(\"dojox.data.tests.stores.CssRuleStore\");\r\ndojo.require(\"dojox.data.CssRuleStore\");\r\ndojo.require(\"dojo.data.api.Read\");\r\ndojo.require(\"dojo.data.api.Identity\");\r\n\r\ndojox.data.tests.stores.CssRuleStore.createStore = function(context){\r\n\t// summary:\r\n\t//\t\tA simple helper function for getting the sample data used in each of the tests.\r\n\t// description:\r\n\t//\t\tA simple helper function for getting the sample data used in each of the tests.\r\n\tvar store = null;\r\n\tif(dojo.isBrowser){\r\n\t\tif(!dojox.data.tests.stores.CssRuleStore._loaded){\r\n\t\t\tvar head = dojo.doc.getElementsByTagName('head')[0];\r\n\t\t\tvar link = document.createElement('link');\r\n\t\t\tlink.href = require.toUrl('dojox/data/tests/stores/test1.css').toString();\r\n\t\t\tlink.rel = \"stylesheet\";\r\n\t\t\tlink.type = \"text/css\";\r\n\t\t\thead.appendChild(link);\r\n\t\t\tvar style;\r\n\t\t\tvar text;\r\n\t\t\tif(dojo.isIE){\r\n\t\t\t\tstyle = document.createStyleSheet();\r\n\t\t\t\tstyle.cssText = '@import \"'+require.toUrl('dojox/data/tests/stores/test2.css').toString()+'\";';\r\n\t\t\t}else{\r\n\t\t\t\tstyle = document.createElement('style');\r\n\t\t\t\ttext = document.createTextNode('@import \"'+require.toUrl('dojox/data/tests/stores/test2.css').toString()+'\";');\r\n\t\t\t\tstyle.appendChild(text);\r\n\t\t\t\thead.appendChild(style);\r\n\t\t\t}\r\n\t\t\tif(dojo.isIE){\r\n\t\t\t\tstyle = document.createStyleSheet();\r\n\t\t\t\tstyle.cssText = '.embeddedTestClass { text-align: center; }';\r\n\t\t\t}else{\r\n\t\t\t\tstyle = document.createElement('style');\r\n\t\t\t\ttext = document.createTextNode('.embeddedTestClass { text-align: center; }');\r\n\t\t\t\tstyle.appendChild(text);\r\n\t\t\t\thead.appendChild(style);\r\n\t\t\t}\r\n\t\t\tdojox.data.tests.stores.CssRuleStore._loaded = true;\r\n\t\t}\r\n\t\tstore = new dojox.data.CssRuleStore({context: context});\r\n\t}else{\r\n\t\t// When running tests in Rhino, xhrGet is not available,\r\n\t\t// so we have the file data in the code below.\r\n\t\t\r\n\t\t// TODO: What are the stipulations re: DOM ? Can I do the same as above?\r\n\t}\r\n\treturn store;\r\n} ;\r\n\r\ndojox.data.tests.stores.CssRuleStore.verifyItems = function(cssRuleStore, items, attribute, compareArray){\r\n\t// summary:\r\n\t//\t\tA helper function for validating that the items array is ordered\r\n\t//\t\tthe same as the compareArray\r\n\tif(items.length != compareArray.length){ return false; }\r\n\tfor(var i = 0; i < items.length; i++){\r\n\t\tif(!(cssRuleStore.getValue(items[i], attribute) === compareArray[i])){\r\n\t\t\treturn false; //Boolean\r\n\t\t}\r\n\t}\r\n\treturn true; //Boolean\r\n};\r\n\r\ndojox.data.tests.stores.CssRuleStore.error = function(t, d, errData){\r\n\t// summary:\r\n\t//\t\tThe error callback function to be used for all of the tests.\r\n\tfor (var i in errData) {\r\n\t\tconsole.log(errData[i]);\r\n\t}\r\n\td.errback(errData);\r\n};\r\n\r\ndoh.register(\"dojox.data.tests.stores.CssRuleStore\",\r\n\t[\r\n\t\t{\r\n\t\t\tname: \"testReadAPI_fetch\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on CssRuleStorem longer timeout because initial load can sometimes take a bit..\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on CssRuleStorem longer timeout because initial load can sometimes take a bit.\r\n\t\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.assertTrue(items.length === 3);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tcssRuleStore.fetch({\r\n\t\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_all(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssClassStore.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore(['dojox/data/tests/stores/test1.css', 'dojox/data/tests/stores/test2.css']);\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completedAll(items){\r\n\t\t\t\tt.assertTrue(items.length === 3);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Get everything...\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tonComplete: completedAll,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_withinContext(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\r\n\t\t\t//dojox.data.tests.stores.CssRuleStore.loadStylesheets();\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore(['dojox/data/tests/stores/test1.css']);\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completedAll(items){\r\n\t\t\t\tt.assertTrue(items.length === 1);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Get everything...\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tonComplete: completedAll,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_withinMultipleSheetContext(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\t\r\n\t\t\t//dojox.data.tests.stores.CssRuleStore.loadStylesheets();\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore(['dojox/data/tests/stores/test1.css', 'dojox/data/tests/stores/test2.css']);\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completedAll(items){\r\n\t\t\t\tt.assertTrue(items.length === 2);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Get everything...\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tonComplete: completedAll,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_switchContext(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CssRuleStore.\r\n\t\t\r\n\t\t\t//dojox.data.tests.stores.CssRuleStore.loadStylesheets();\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore(['dojox/data/tests/stores/test1.css', 'dojox/data/tests/stores/test2.css']);\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completedAll(items){\r\n\t\t\t\tt.assertTrue(items.length === 2);\r\n\r\n\t\t\t\tfunction completedAllTwo(items){\r\n\t\t\t\t\tt.assertTrue(items.length === 1);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcssRuleStore.setContext(['dojox/data/tests/stores/test1.css']);\r\n\t\t\t\tcssRuleStore.fetch({\r\n\t\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\t\tonComplete: completedAllTwo,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Get everything...\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tonComplete: completedAll,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_one(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass'},\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_one_longer(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass .test'},\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_Multiple(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tvar done = [false, false];\r\n\r\n\t\t\tfunction onCompleteOne(items, request){\r\n\t\t\t\tdone[0] = true;\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\tif(done[0] && done[1]){\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction onCompleteTwo(items, request){\r\n\t\t\t\tdone[1] = true;\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\tif(done[0] && done[1]){\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\tcssRuleStore.fetch({\r\n\t\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\t\tonComplete: onCompleteOne,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\tcssRuleStore.fetch({\r\n\t\t\t\t\tquery: {'selector': '.linkTestClass'},\r\n\t\t\t\t\tonComplete: onCompleteTwo,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t}catch(e){\r\n\t\t\t\tfor(var i in e){\r\n\t\t\t\t\tconsole.log(e[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_MultipleMixed(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore of a single item.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\r\n\t\t\tvar done = [false, false];\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tdone[0] = true;\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\tt.is('.embeddedTestClass', cssRuleStore.getValue(items[0], 'selector'));\r\n\t\t\t\tif(done[0] && done[1]){\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tdone[1] = true;\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.is('.linkTestClass .test', cssRuleStore.getValue(item, 'selector'));\r\n\t\t\t\tif(done[0] && done[1]){\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass .test'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_all_streaming(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of a basic fetch on CsvStore.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tvar count = 0;\r\n\r\n\t\t\tfunction onBegin(size, requestObj){\r\n\t\t\t\tt.assertTrue(size === 3);\r\n\t\t\t}\r\n\t\t\tfunction onItem(item, requestObj){\r\n\t\t\t\tt.assertTrue(cssRuleStore.isItem(item));\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tt.is(3, count);\r\n\t\t\t\tt.is(null, items);\r\n\t\t\t    d.callback(true);\r\n\t\t\t}\r\n\r\n\t\t\t//Get everything...\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tonBegin: onBegin,\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_paging(t){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\t\t\t // description:\r\n\t\t\t //\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\r\n\t\t\tfunction dumpThirdFetch(items, request){\r\n\t\t\t\tt.is(2, items.length);\r\n\t\t\t    d.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction dumpSecondFetch(items, request){\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\tt.is('.embeddedTestClass', cssRuleStore.getValue(items[0], 'selector'));\r\n\t\t\t\trequest.start = 0;\r\n\t\t\t\trequest.count = 2;\r\n\t\t\t\trequest.onComplete = dumpThirdFetch;\r\n\t\t\t\tcssRuleStore.fetch(request);\r\n\t\t\t}\r\n\r\n\t\t\tfunction dumpFirstFetch(items, request){\r\n\t\t\t\tt.is(3, items.length);\r\n\t\t\t\trequest.start = 2;\r\n\t\t\t\trequest.count = 1;\r\n\t\t\t\trequest.onComplete = dumpSecondFetch;\r\n\t\t\t\tcssRuleStore.fetch(request);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tonComplete: dumpFirstFetch,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\r\n\t\t},\r\n\t\t\r\n\t\tfunction testReadAPI_getLabel(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\tvar label = cssRuleStore.getLabel(items[0]);\r\n\t\t\t\tt.assertTrue(label !== null);\r\n\t\t\t\tt.assertEqual(\".linkTestClass\", label);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass'},\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getLabelAttributes(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onComplete(items, request){\r\n\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\tvar labelList = cssRuleStore.getLabelAttributes(items[0]);\r\n\t\t\t\tt.assertTrue(dojo.isArray(labelList));\r\n\t\t\t\tt.assertEqual('selector', labelList[0]);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass'},\r\n\t\t\t\tonComplete: onComplete,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getValue(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.is('.linkTestClass', cssRuleStore.getValue(item,'selector'));\r\n\t\t\t\tt.assertTrue(cssRuleStore.getValue(item, 'parentStyleSheetHref').match('dojox/data/tests/stores/test1.css'));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.linkTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getValue_2(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.is('.importTestClass', cssRuleStore.getValue(item,'selector'));\r\n\t\t\t\tt.assertTrue(cssRuleStore.getValue(item, 'parentStyleSheetHref').match('dojox/data/tests/stores/test2.css'));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.importTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getValues(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getValues function of the store.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getValues function of the store.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tvar values = cssRuleStore.getValues(item,'selector');\r\n\t\t\t\tt.assertTrue(dojo.isArray(values));\r\n\t\t\t\tt.is(1, values.length);\r\n\t\t\t\tt.is('.embeddedTestClass', values[0]);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_isItem(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(cssRuleStore.isItem(item));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.isItem({}));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.isItem({ item: \"not an item\" }));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.isItem(\"not an item\"));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.isItem([\"not an item\"]));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_hasAttribute(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.assertTrue(cssRuleStore.hasAttribute(item, 'selector'));\r\n\t\t\t\tt.assertTrue(cssRuleStore.hasAttribute(item, 'classes'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.hasAttribute(item, 'Year'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.hasAttribute(item, 'Nothing'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.hasAttribute(item, 'title'));\r\n\r\n\t\t\t\t//Test that null attributes throw an exception\r\n\t\t\t\tvar passed = false;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tcssRuleStore.hasAttribute(item, null);\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\tpassed = true;\r\n\t\t\t\t}\r\n\t\t\t\tt.assertTrue(passed);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_containsValue(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n \t\t\t\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.assertTrue(cssRuleStore.containsValue(item, 'selector', '.embeddedTestClass'));\r\n\t\t\t\tt.assertTrue(cssRuleStore.containsValue(item, 'classes', '.embeddedTestClass'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.containsValue(item, 'selector', '.embeddedTestClass2'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.containsValue(item, 'classes', 'embeddedTestClass\t'));\r\n\t\t\t\tt.assertTrue(!cssRuleStore.containsValue(item, 'selector', null));\r\n\r\n\t\t\t\t//Test that null attributes throw an exception\r\n\t\t\t\tvar passed = false;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tcssRuleStore.containsValue(item, null, \"foo\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\tpassed = true;\r\n\t\t\t\t}\r\n\t\t\t\tt.assertTrue(passed);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getAttributes(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction onItem(item){\r\n\t\t\t\tt.assertTrue(item !== null);\r\n\t\t\t\tt.assertTrue(cssRuleStore.isItem(item));\r\n\r\n\t\t\t\tvar attributes = cssRuleStore.getAttributes(item);\r\n\t\t\t\tt.assertTrue(attributes.length > 8);\r\n\t\t\t\tfor(var i = 0; i < 8; i++){\r\n\t\t\t\t\tvar a = attributes[i];\r\n\t\t\t\t\tt.assertTrue((\ta === 'selector' \t\t\t|| a === 'classes'\r\n\t\t\t\t\t\t\t\t||\ta === 'rule' \t\t\t\t|| a === 'style'\r\n\t\t\t\t\t\t\t\t||\ta === 'cssText' \t\t\t|| a === 'styleSheet'\r\n\t\t\t\t\t\t\t\t||\ta === 'parentStyleSheet' \t|| a === 'parentStyleSheetHref'));\r\n\t\t\t\t}\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.embeddedTestClass'},\r\n\t\t\t\tonItem: onItem,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tfunction testReadAPI_getFeatures(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\r\n\t\t\tvar features = cssRuleStore.getFeatures();\r\n\t\t\tvar count = 0;\r\n\t\t\tfor(var i in features){\r\n\t\t\t\tt.assertTrue(i === \"dojo.data.api.Read\");\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\tt.assertTrue(count === 1);\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_patternMatch(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to test pattern matching of everything swith Cla in it\r\n\t\t\t// description:\r\n\t\t\t//\t\tFunction to test pattern matching of everything with Cla in it\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completed(items, request){\r\n\t\t\t\tt.is(4, items.length);\r\n\t\t\t\tvar valueArray = ['.linkTestClass', '.linkTestClass .test', '.importTestClass', '.embeddedTestClass'];\r\n\t\t\t\tt.assertTrue(dojox.data.tests.stores.CssRuleStore.verifyItems(cssRuleStore, items, 'selector', valueArray));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestCla*'},\r\n\t\t\t\tonComplete: completed,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_patternMatch_caseInsensitive(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to test exact pattern match with case insensitivity set.\r\n\t\t\t// description:\r\n\t\t\t//\t\tFunction to test exact pattern match with case insensitivity set.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completed(items, request){\r\n\t\t\t\tt.is(1, items.length);\r\n\t\t\t\tt.assertTrue(cssRuleStore.getValue(items[0], 'selector') === '.linkTestClass');\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.LINKtEsTclass'},\r\n\t\t\t\tqueryOptions: {ignoreCase: true},\r\n\t\t\t\tonComplete: completed,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_patternMatch_caseSensitive(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to test exact pattern match with case insensitivity set.\r\n\t\t\t// description:\r\n\t\t\t//\t\tFunction to test exact pattern match with case insensitivity set.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completed(items, request){\r\n\t\t\t\tt.is(0, items.length);\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '.LINKtEsTclass'},\r\n\t\t\t\tqueryOptions: {ignoreCase: false},\r\n\t\t\t\tonComplete: completed,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_sortAlphabetic(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to test sorting alphabetic ordering.\r\n\t\t\t// description:\r\n\t\t\t//\t\tFunction to test sorting alphabetic ordering.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar d = new doh.Deferred();\r\n\t\t\tfunction completed(items, request){\r\n\t\t\t\t//Output should be in this order...\r\n\t\t\t\tvar orderedArray = [ \t'.embeddedTestClass',\r\n\t\t\t\t\t\t\t\t\t\t'.importTestClass',\r\n\t\t\t\t\t\t\t\t\t\t'.linkTestClass'\r\n\t\t\t\t];\r\n\t\t\t\tt.is(3, items.length);\r\n\t\t\t\tt.assertTrue(dojox.data.tests.stores.CssRuleStore.verifyItems(cssRuleStore, items, 'selector', orderedArray));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar sortAttributes = [{attribute: 'selector'}];\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tsort: sortAttributes,\r\n\t\t\t\tonComplete: completed,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_fetch_sortAlphabeticDescending(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to test sorting alphabetic ordering in descending mode.\r\n\t\t\t// description:\r\n\t\t\t//\t\tFunction to test sorting alphabetic ordering in descending mode.\r\n\t\t\tvar cssRuleStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar d = new doh.Deferred();\r\n\r\n\r\n\t\t\tfunction completed(items, request){\r\n\t\t\t\t//Output should be in this order...\r\n\t\t\t\tvar orderedArray = [ \t'.linkTestClass',\r\n\t\t\t\t\t\t\t\t\t\t'.importTestClass',\r\n\t\t\t\t\t\t\t\t\t\t'.embeddedTestClass'\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\tt.is(3, items.length);\r\n\t\t\t\tt.assertTrue(dojox.data.tests.stores.CssRuleStore.verifyItems(cssRuleStore, items, 'selector', orderedArray));\r\n\t\t\t\td.callback(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar sortAttributes = [{attribute: \"selector\", descending: true}];\r\n\t\t\tcssRuleStore.fetch({\r\n\t\t\t\tquery: {'selector': '*TestClass'},\r\n\t\t\t\tsort: sortAttributes,\r\n\t\t\t\tonComplete: completed,\r\n\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.CssRuleStore.error, t, d)\r\n\t\t\t});\r\n\t\t\treturn d; //Object\r\n\t\t},\r\n\t\tfunction testReadAPI_functionConformance(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\t\t\tvar testStore = dojox.data.tests.stores.CssRuleStore.createStore();\r\n\t\t\tvar readApi = new dojo.data.api.Read();\r\n\t\t\tvar passed = true;\r\n\r\n\t\t\tfor(var i in readApi){\r\n\t\t\t\tif(i.toString().charAt(0) !== '_')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar member = readApi[i];\r\n\t\t\t\t\t//Check that all the 'Read' defined functions exist on the test store.\r\n\t\t\t\t\tif(typeof member === \"function\"){\r\n\t\t\t\t\t\tconsole.log(\"Looking at function: [\" + i + \"]\");\r\n\t\t\t\t\t\tvar testStoreMember = testStore[i];\r\n\t\t\t\t\t\tif(!(typeof testStoreMember === \"function\")){\r\n\t\t\t\t\t\t\tconsole.log(\"Problem with function: [\" + i + \"].   Got value: \" + testStoreMember);\r\n\t\t\t\t\t\t\tpassed = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tt.assertTrue(passed);\r\n\t\t}\r\n\t]\r\n);\r\n\r\n"]}