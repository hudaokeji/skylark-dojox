{"version":3,"sources":["data/tests/stores/FlickrRestStore.js"],"names":["dojo","provide","require","dojox","data","tests","stores","FlickrRestStore","error","t","d","errData","errback","doh","register","name","timeout","runTest","flickrStore","Deferred","fetch","query","userid","apikey","count","onComplete","items","request","is","length","callback","onError","partial","onBegin","onItem","item","requestObj","assertTrue","isItem","dumpFirstFetch","start","dumpSecondFetch","dumpThirdFetch","dumpFourthFetch","dumpFifthFetch","dumpSixthFetch","assertEqual","label","getLabel","labelList","getLabelAttributes","isArray","getValue","title","getValues","Array","imgUrl","imgUrlSmall","imgUrlMedium","i","hasAttribute","passed","e","attributes","getAttributes","features","getFeatures","testStore","readApi","api","Read","toString","charAt"],"mappings":"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","file":"../../../../data/tests/stores/FlickrRestStore.js","sourcesContent":["dojo.provide(\"dojox.data.tests.stores.FlickrRestStore\");\r\ndojo.require(\"dojox.data.FlickrRestStore\");\r\ndojo.require(\"dojo.data.api.Read\");\r\n\r\n\r\ndojox.data.tests.stores.FlickrRestStore.error = function(t, d, errData){\r\n\t// summary:\r\n\t//\t\tThe error callback function to be used for all of the tests.\r\n\td.errback(errData);\r\n};\r\n\r\ndoh.register(\"dojox.data.tests.stores.FlickrRestStore\",\r\n\t[\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_One\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on FlickrRestStore of a single item.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on FlickrRestStore of a single item.\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, doh, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_20_Streaming\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on FlickrRestStore.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on FlickrRestStore.\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tvar count = 0;\r\n\r\n\t\t\t\tfunction onItem(item, requestObj){\r\n\t\t\t\t  t.assertTrue(flickrStore.isItem(item));\r\n\t\t\t\t  count++;\r\n\t\t\t\t}\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.is(5, count);\r\n\t\t\t\t\t\r\n\t\t\t\t\tt.is(null, items);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonBegin: null,\r\n\t\t\t\t\tcount: 5,\r\n\t\t\t\t\tonItem: onItem,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_Paging\",\r\n\t\t\ttimeout:\t30000, //30 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction dumpFirstFetch(items, request){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\trequest.start = 3;\r\n\t\t\t\t\trequest.count = 1;\r\n\t\t\t\t\trequest.onComplete = dumpSecondFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpSecondFetch(items, request){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\trequest.start = 0;\r\n\t\t\t\t\trequest.count = 5;\r\n\t\t\t\t\trequest.onComplete = dumpThirdFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpThirdFetch(items, request){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\trequest.start = 2;\r\n\t\t\t\t\trequest.count = 18;\r\n\t\t\t\t\trequest.onComplete = dumpFourthFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpFourthFetch(items, request){\r\n\t\t\t\t\tt.is(18, items.length);\r\n\t\t\t\t\trequest.start = 9;\r\n\t\t\t\t\trequest.count = 11;\r\n\t\t\t\t\trequest.onComplete = dumpFifthFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpFifthFetch(items, request){\r\n\t\t\t\t\tt.is(11, items.length);\r\n\t\t\t\t\trequest.start = 4;\r\n\t\t\t\t\trequest.count = 16;\r\n\t\t\t\t\trequest.onComplete = dumpSixthFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpSixthFetch(items, request){\r\n\t\t\t\t\tt.is(16, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction completed(items, request){\r\n\t\t\t\t\tt.is(7, items.length);\r\n\t\t\t\t\trequest.start = 1;\r\n\t\t\t\t\trequest.count = 5;\r\n\t\t\t\t\trequest.onComplete = dumpFirstFetch;\r\n\t\t\t\t\tflickrStore.fetch(request);\r\n\t\t\t\t}\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 7,\r\n\t\t\t\t\tonComplete: completed,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getLabel\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\t\tvar label = flickrStore.getLabel(items[0]);\r\n\t\t\t\t\tt.assertTrue(label !== null);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getLabelAttributes\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\t\tvar labelList = flickrStore.getLabelAttributes(items[0]);\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(labelList));\r\n\t\t\t\t\tt.assertEqual(\"title\", labelList[0]);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValue\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(flickrStore.getValue(items[0], \"title\") !== null);\r\n\t\t\t\t\tt.assertTrue(flickrStore.getValue(items[0], \"imageUrl\") !== null);\r\n\t\t\t\t\tt.assertTrue(flickrStore.getValue(items[0], \"imageUrlSmall\") !== null);\r\n\t\t\t\t\tt.assertTrue(flickrStore.getValue(items[0], \"imageUrlMedium\") !== null);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item and look at it.\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValues\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tvar title = flickrStore.getValues(items[0], \"title\");\r\n\t\t\t\t\tt.assertTrue(title instanceof Array);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar imgUrl = flickrStore.getValues(items[0], \"imageUrl\");\r\n\t\t\t\t\tt.assertTrue(imgUrl instanceof Array);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar imgUrlSmall = flickrStore.getValues(items[0], \"imageUrlSmall\");\r\n\t\t\t\t\tt.assertTrue(imgUrlSmall instanceof Array);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar imgUrlMedium = flickrStore.getValues(items[0], \"imageUrlMedium\");\r\n\t\t\t\t\tt.assertTrue(imgUrlMedium instanceof Array);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\t//Get one item and look at it.\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error,\r\n\t\t\t\t\t\t\tt,\r\n\t\t\t\t\t\t\td)});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  isItem\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\tfor(var i=0; i < items.length; i++){\r\n\t\t\t\t\t\tt.assertTrue(flickrStore.isItem(items[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcount: 5,\r\n\t\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  hasAttribute\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(items[0] !== null);\r\n\t\t\t\t\tt.assertTrue(flickrStore.hasAttribute(items[0], \"title\"));\r\n\t\t\t\t\tt.assertTrue(flickrStore.hasAttribute(items[0], \"author\"));\r\n\t\t\t\t\tt.assertTrue(!flickrStore.hasAttribute(items[0], \"Nothing\"));\r\n\t\t\t\t\tt.assertTrue(!flickrStore.hasAttribute(items[0], \"Text\"));\r\n\r\n\t\t\t\t\t//Test that null attributes throw an exception\r\n\t\t\t\t\tvar passed = false;\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tflickrStore.hasAttribute(items[0], null);\r\n\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\tpassed = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.assertTrue(passed);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item...\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  containsValue\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item...\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getAttributes\",\r\n\t\t\ttimeout:\t10000, //10 seconds.  Flickr can sometimes be slow.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\r\n\t\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(flickrStore.isItem(items[0]));\r\n\r\n\t\t\t\t\tvar attributes = flickrStore.getAttributes(items[0]);\r\n\t\t\t\t\tt.is(11, attributes.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tflickrStore.fetch({\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\tuserid: \"44153025@N00\",\r\n\t\t\t\t\t\t\tapikey: \"8c6803164dbc395fb7131c9d54843627\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.FlickrRestStore.error, t, d)\r\n\t\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction testReadAPI_getFeatures(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\r\n\t\t\tvar flickrStore = new dojox.data.FlickrRestStore();\r\n\r\n\t\t\tvar features = flickrStore.getFeatures();\r\n\t\t\tvar count = 0;\r\n\t\t\tfor(i in features){\r\n\t\t\t\tt.assertTrue((i === \"dojo.data.api.Read\"));\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\tt.assertTrue(count === 1);\r\n\t\t},\r\n\t\tfunction testReadAPI_functionConformance(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\r\n\t\t\tvar testStore = new dojox.data.FlickrRestStore();\r\n\t\t\tvar readApi = new dojo.data.api.Read();\r\n\t\t\tvar passed = true;\r\n\r\n\t\t\tfor(i in readApi){\r\n\t\t\t\tif(i.toString().charAt(0) !== '_')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar member = readApi[i];\r\n\t\t\t\t\t//Check that all the 'Read' defined functions exist on the test store.\r\n\t\t\t\t\tif(typeof member === \"function\"){\r\n\t\t\t\t\t\tvar testStoreMember = testStore[i];\r\n\t\t\t\t\t\tif(!(typeof testStoreMember === \"function\")){\r\n\t\t\t\t\t\t\tpassed = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n);\r\n\r\n"]}