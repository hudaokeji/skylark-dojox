{"version":3,"sources":["data/tests/stores/GoogleFeedStore.js"],"names":["dojo","provide","require","dojox","data","tests","stores","GoogleFeedStore","getStore","error","t","d","errData","errback","doh","register","name","timeout","runTest","googleStore","Deferred","fetch","query","url","count","onComplete","items","request","is","length","callback","onError","partial","onItem","assertTrue","onBegin","e","console","log","item","requestObj","isItem","assertEqual","label","getLabel","labelList","getLabelAttributes","isArray","getValue","passed","summary","getValues","published","updated","title","titleNoFormatting","content","i","hasAttribute","containsValue","link","attributes","getAttributes","features","getFeatures","testStore","readApi","api","Read","toString","charAt","testStoreMember"],"mappings":"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","file":"../../../../data/tests/stores/GoogleFeedStore.js","sourcesContent":["dojo.provide(\"dojox.data.tests.stores.GoogleFeedStore\");\r\ndojo.require(\"dojox.data.GoogleFeedStore\");\r\ndojo.require(\"dojo.data.api.Read\");\r\n\r\ndojox.data.tests.stores.GoogleFeedStore.getStore = function(){\r\n\treturn new dojox.data.GoogleFeedStore();\r\n};\r\n\r\ndojox.data.tests.stores.GoogleFeedStore.error = function(t, d, errData){\r\n\t// summary:\r\n\t//\t\tThe error callback function to be used for all of the tests.\r\n\r\n\t//console.trace();\r\n\td.errback(errData);\r\n};\r\n\r\ndoh.register(\"dojox.data.tests.stores.GoogleFeedStore\",\r\n\t[\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_One\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore of a single item.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore of a single item.\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, doh, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  test_Invalid_Query\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore of a single item.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore of a single item.\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction doNotCall1(items, request){\r\n\t\t\t\t\tt.assertTrue(false);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tfunction doNotCall2(items, request){\r\n\t\t\t\t\tt.assertTrue(false);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tfunction doNotCall3(items, request){\r\n\t\t\t\t\tt.assertTrue(false);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tonItem:doNotCall2,\r\n\t\t\t\t\t\tonBegin: doNotCall1,\r\n\t\t\t\t\t\tonComplete: doNotCall3,\r\n\t\t\t\t\t\tonError: function(){\r\n\t\t\t\t\t\t\t//Swallow this as it is expected\r\n\t\t\t\t\t\t\td.callback(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"exception thrown\", e);\r\n\t\t\t\t\tt.assertTrue(false);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_20_Streaming\",\r\n\t\t\ttimeout:\t10000, //20 seconds.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of a basic fetch on GoogleFeedStore.\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tvar count = 0;\r\n\r\n\t\t\t\tfunction onItem(item, requestObj){\r\n\t\t\t\t\tt.assertTrue(googleStore.isItem(item));\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.is(20, count);\r\n\r\n\t\t\t\t\tt.is(null, items);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonBegin: null,\r\n\t\t\t\t\tcount: 20,\r\n\t\t\t\t\tonItem: onItem,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  Fetch_Paging\",\r\n\t\t\ttimeout:\t10000, // 10 seconds.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tTest of multiple fetches on a single result.  Paging, if you will.\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\r\n\t\t\t\tfunction dumpSixthFetch(items, request){\r\n\t\t\t\t\tt.is(16, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpFifthFetch(items, request){\r\n\t\t\t\t\tt.is(11, items.length);\r\n\t\t\t\t\trequest.start = 4;\r\n\t\t\t\t\trequest.count = 16;\r\n\t\t\t\t\trequest.onComplete = dumpSixthFetch;\r\n\t\t\t\t\tgoogleStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpFourthFetch(items, request){\r\n\t\t\t\t\tt.is(18, items.length);\r\n\t\t\t\t\trequest.start = 5;\r\n\t\t\t\t\trequest.count = 11;\r\n\t\t\t\t\trequest.onComplete = dumpFifthFetch;\r\n\t\t\t\t\tgoogleStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpThirdFetch(items, request){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\trequest.start = 2;\r\n\t\t\t\t\trequest.count = 18;\r\n\t\t\t\t\trequest.onComplete = dumpFourthFetch;\r\n\t\t\t\t\tgoogleStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dumpSecondFetch(items, request){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\trequest.start = 0;\r\n\t\t\t\t\trequest.count = 5;\r\n\t\t\t\t\trequest.onComplete = dumpThirdFetch;\r\n\t\t\t\t\tgoogleStore.fetch(request);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction dumpFirstFetch(items, request){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\trequest.start = 3;\r\n\t\t\t\t\trequest.count = 1;\r\n\t\t\t\t\trequest.onComplete = dumpSecondFetch;\r\n\t\t\t\t\tgoogleStore.fetch(request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction completed(items, request){\r\n\t\t\t\t\tt.is(7, items.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 7,\r\n\t\t\t\t\tonComplete: completed,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getLabel\",\r\n\t\t\ttimeout:\t10000, // 10 seconds.\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getLabel function against a store set that has a label defined.\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\t\tvar label = googleStore.getLabel(items[0]);\r\n\t\t\t\t\tt.assertTrue(label !== null);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getLabelAttributes\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getLabelAttributes function against a store set that has a label defined.\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items, request){\r\n\t\t\t\t\tt.assertEqual(items.length, 1);\r\n\t\t\t\t\tvar labelList = googleStore.getLabelAttributes(items[0]);\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(labelList));\r\n\t\t\t\t\tt.assertEqual(\"titleNoFormatting\", labelList[0]);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValue\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"unescapedUrl\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"url\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"visibleUrl\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"cacheUrl\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"title\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"titleNoFormatting\") !== null);\r\n\t\t\t\t\tt.assertTrue(googleStore.getValue(items[0], \"content\") !== null);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item and look at it.\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValue_Failure\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\t\t\t\tvar passed = false;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar value = googleStore.getValue(\"NotAnItem\", \"foo\");\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tpassed = true;\r\n\t\t\t\t}\r\n\t\t\t\tt.assertTrue(passed);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValues\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n                var d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tvar summary = googleStore.getValues(items[0], \"unescapedUrl\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(summary));\r\n\r\n\t\t\t\t\tvar url = googleStore.getValues(items[0], \"url\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(url));\r\n\r\n\t\t\t\t\tvar published = googleStore.getValues(items[0], \"visibleUrl\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(published));\r\n\r\n\t\t\t\t\tvar updated = googleStore.getValues(items[0], \"cacheUrl\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(updated));\r\n\r\n\t\t\t\t\tvar title = googleStore.getValues(items[0], \"title\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(title));\r\n\r\n\t\t\t\t\tvar titleNoFormatting = googleStore.getValues(items[0], \"titleNoFormatting\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(titleNoFormatting));\r\n\r\n\t\t\t\t\tvar content = googleStore.getValues(items[0], \"content\");\r\n\t\t\t\t\tt.assertTrue(dojo.isArray(content));\r\n\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\t\t\t\t//Get one item and look at it.\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error,\r\n\t\t\t\t\tt,\r\n\t\t\t\t\td)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getValues_Failure\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getValue function of the store.\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\t\t\t\tvar passed = false;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar value = googleStore.getValues(\"NotAnItem\", \"foo\");\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tpassed = true;\r\n\t\t\t\t}\r\n\t\t\t\tt.assertTrue(passed);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  isItem\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the isItem function of the store\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction completedAll(items){\r\n\t\t\t\t\tt.is(5, items.length);\r\n\t\t\t\t\tfor(var i=0; i < items.length; i++){\r\n\t\t\t\t\t\tt.assertTrue(googleStore.isItem(items[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcount: 5,\r\n\t\t\t\t\t\tonComplete: completedAll,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  hasAttribute\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the hasAttribute function of the store\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(items[0] !== null);\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"title\"));\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"link\"));\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"content\"));\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"author\"));\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"published\"));\r\n\t\t\t\t\tt.assertTrue(googleStore.hasAttribute(items[0], \"categories\"));\r\n\t\t\t\t\tt.assertTrue(!googleStore.hasAttribute(items[0], \"I dont exist\"));\r\n\r\n\t\t\t\t\t//Test that null attributes throw an exception\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tgoogleStore.hasAttribute(items[0], null);\r\n\t\t\t\t\t\tt.assertTrue(false);\r\n\t\t\t\t\t}catch (e){\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item...\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  containsValue\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the containsValue function of the store\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tt.is(1, items.length);\r\n\r\n\t\t\t\t\t// This is the only way to test the results, as we cannot depend on the search\r\n\t\t\t\t\t// result with a hard coded value.\r\n\t\t\t\t\tt.assertTrue(googleStore.containsValue(items[0], \"link\", items[0].link));\r\n\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get one item...\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"ReadAPI:  getAttributes\",\r\n\t\t\ttimeout:\t10000, // 10 seconds\r\n\t\t\trunTest: function(t) {\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tSimple test of the getAttributes function of the store\r\n\r\n\t\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\t\tvar d = new doh.Deferred();\r\n\t\t\t\tfunction onComplete(items){\r\n\t\t\t\t\tconsole.log(\"items.length = \" + items.length);\r\n\t\t\t\t\tt.is(1, items.length);\r\n\t\t\t\t\tt.assertTrue(googleStore.isItem(items[0]));\r\n\r\n\t\t\t\t\tvar attributes = googleStore.getAttributes(items[0]);\r\n\r\n\t\t\t\t\tconsole.log(\"attributes.length = \" + attributes.length, attributes);\r\n\t\t\t\t\tt.is(7, attributes.length);\r\n\t\t\t\t\td.callback(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Get everything...\r\n\t\t\t\tgoogleStore.fetch({\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\turl: \"http://shaneosullivan.wordpress.com/feed\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tonComplete: onComplete,\r\n\t\t\t\t\t\tonError: dojo.partial(dojox.data.tests.stores.GoogleFeedStore.error, t, d)\r\n\t\t\t\t\t});\r\n\t\t\t\treturn d; //Object\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction testReadAPI_getFeatures(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test of the getFeatures function of the store\r\n\r\n\t\t\tvar googleStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\r\n\t\t\tvar features = googleStore.getFeatures();\r\n\t\t\tvar count = 0;\r\n\t\t\tvar i;\r\n\t\t\tfor(i in features){\r\n\t\t\t\tt.assertTrue((i === \"dojo.data.api.Read\"));\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\tt.assertTrue(count === 1);\r\n\t\t},\r\n\t\tfunction testReadAPI_functionConformance(t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSimple test read API conformance.  Checks to see all declared functions are actual functions on the instances.\r\n\r\n\t\t\tvar testStore = dojox.data.tests.stores.GoogleFeedStore.getStore();\r\n\t\t\tvar readApi = new dojo.data.api.Read();\r\n\t\t\tvar passed = true;\r\n\t\t\tvar i;\r\n\t\t\tfor(i in readApi){\r\n\t\t\t\tif(i.toString().charAt(0) !== '_')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar member = readApi[i];\r\n\t\t\t\t\t//Check that all the 'Read' defined functions exist on the test store.\r\n\t\t\t\t\tif(typeof member === \"function\"){\r\n\t\t\t\t\t\tvar testStoreMember = testStore[i];\r\n\t\t\t\t\t\tif(!(typeof testStoreMember === \"function\")){\r\n\t\t\t\t\t\t\tconsole.log(\"Problem with function: [\" + i + \"].   Got value: \" + testStoreMember);\r\n\t\t\t\t\t\t\tpassed = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tt.assertTrue(passed);\r\n\t\t}\r\n\t]\r\n);\r\n"]}