/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define("dojox/html/ellipsis",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/colors"],function(e){if(e.isFF<7){var n=1;"dojoxFFEllipsisDelay"in e.config&&(n=Number(e.config.dojoxFFEllipsisDelay),isNaN(n)&&(n=1));try{var o=(h="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",u=document.createElementNS(h,"window"),(y=document.createElementNS(h,"description")).setAttribute("crop","end"),u.appendChild(y),function(e){var n=u.cloneNode(!0);n.firstChild.setAttribute("value",e.textContent),e.innerHTML="",e.appendChild(n)})}catch(e){}var l,t,i,d=e.create,s=e.doc,a=e.place,r=d("iframe",{className:"dojoxEllipsisIFrame",src:"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'",style:{display:"none"}}),c=function(e,n){if(!e.collapsed)if(n>0)do{c(e),n--}while(n);else if(3==e.endContainer.nodeType&&e.endOffset>0)e.setEnd(e.endContainer,e.endOffset-1);else{if(3==e.endContainer.nodeType)return e.setEndBefore(e.endContainer),void c(e);if(!(e.endOffset&&e.endContainer.childNodes.length>=e.endOffset))return e.setEndBefore(e.endContainer),void c(e);var o=e.endContainer.childNodes[e.endOffset-1];if(3!=o.nodeType)return o.childNodes.length?(e.setEnd(o,o.childNodes.length),void c(e)):(e.setEndBefore(o),void c(e));e.setEnd(o,o.length-1)}},f=e.hasClass,p=e.doc;p.querySelectorAll?(l=p,t="querySelectorAll",i=".dojoxEllipsis"):p.getElementsByClassName?(l=p,t="getElementsByClassName",i="dojoxEllipsis"):(l=e,t="query",i=".dojoxEllipsis"),fx=function(){e.forEach(l[t].apply(l,[i]),function(e){e&&!e._djx_ellipsis_done&&(e._djx_ellipsis_done=!0,o&&e.textContent==e.innerHTML&&!f(e,"dojoxEllipsisSelectable")?o(e):function(e){var n=d("div",{className:"dojoxEllipsisContainer"}),o=d("div",{className:"dojoxEllipsisShown",style:{display:"none"}});e.parentNode.replaceChild(n,e),n.appendChild(e),n.appendChild(o);var l=r.cloneNode(!0),t=e.style,i=o.style,f=function(){if(t.display="",i.display="none",!(e.scrollWidth<=e.offsetWidth)){var n=s.createRange();n.selectNodeContents(e),t.display="none",i.display="";var l=!1;do{var d=1;a(n.cloneContents(),o,"only");var r=o.scrollWidth,f=o.offsetWidth;l=r<=f;var p=1-1*f/r;p>0&&(d=Math.max(Math.round(o.textContent.length*p)-1,1)),c(n,d)}while(!n.collapsed&&!l)}};l.onload=function(){l.contentWindow.onresize=f,f()},n.appendChild(l)}(e))})},e.addOnLoad(function(){var o=null,l=null,t=function(){l&&(e.disconnect(l),l=null),o&&clearTimeout(o),o=setTimeout(function(){o=null,fx(),l=e.connect(e.body(),"DOMSubtreeModified",t)},n)};t()})}var h,u,y});
//# sourceMappingURL=../sourcemaps/html/ellipsis.js.map
