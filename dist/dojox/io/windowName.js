/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/kernel","dojo/_base/window","dojo/_base/xhr","dojo/_base/sniff","dojo/_base/url","dojo/domReady!"],function(e){return e.getObject("io.windowName",!0,dojox),dojox.io.windowName={send:function(o,n){n.url+=(n.url.match(/\?/)?"&":"?")+"windowname="+(!n.authElement||"auth");var t=n.authElement,r=function(o){try{var n=i.ioArgs.frame.contentWindow.document;n.write(" "),n.close()}catch(e){}return(t||e.body()).removeChild(i.ioArgs.outerFrame),o},i=e._ioSetArgs(n,r,r,r);return n.timeout&&setTimeout(function(){-1==i.fired&&i.callback(new Error("Timeout"))},n.timeout),dojox.io.windowName._send(i,o,t,n.onAuthLoad),i},_send:function(o,n,t,r){var i,a=o.ioArgs,d=dojox.io.windowName._frameNum++,l=(e.config.dojoBlankHtmlUrl||e.config.dojoCallbackUrl||e.moduleUrl("dojo","resources/blank.html"))+"#"+d,c=new e._Url(window.location,l),m=e.doc,u=t||e.body();function s(e){e.style.width="100%",e.style.height="100%",e.style.border="0px"}if(e.isMoz&&![].reduce){var w=m.createElement("iframe");s(w),t||(w.style.display="none"),u.appendChild(w);var h=w.contentWindow;(m=h.document).write("<html><body margin='0px'><iframe style='width:100%;height:100%;border:0px' name='protectedFrame'></iframe></body></html>"),m.close();var f=h[0];h.__defineGetter__(0,function(){}),h.__defineGetter__("protectedFrame",function(){}),(m=f.document).write("<html><body margin='0px'></body></html>"),m.close(),u=m.body}if(e.isIE){var p=m.createElement("div");p.innerHTML='<iframe name="'+c+'" onload="dojox.io.windowName['+d+']()">',i=p.firstChild}else i=m.createElement("iframe");a.frame=i,s(i),a.outerFrame=w=w||i,t||(w.style.display="none");var y=0;if(dojox.io.windowName[d]=i.onload=function(){try{if(!e.isMoz&&"about:blank"==i.contentWindow.location)return}catch(e){}y||(y=1,t?r&&r():i.contentWindow.location=l);try{y<2&&"string"==typeof(n=i.contentWindow.name)&&n!=c&&(y=2,o.ioArgs.hash=i.contentWindow.location.hash,o.callback(n))}catch(e){}var n},i.name=c,n.match(/GET/i))e._ioAddQueryToUrl(a),i.src=a.url,u.appendChild(i),i.contentWindow&&i.contentWindow.location.replace(a.url);else{if(!n.match(/POST/i))throw new Error("Method "+n+" not supported with the windowName transport");u.appendChild(i);var b=e.doc.createElement("form");e.body().appendChild(b);var _=e.queryToObject(a.query);for(var v in _){var j=_[v];j=j instanceof Array?j:[j];for(var g=0;g<j.length;g++){var x=m.createElement("input");x.type="hidden",x.name=v,x.value=j[g],b.appendChild(x)}}b.method="POST",b.action=a.url,b.target=c,b.submit(),b.parentNode.removeChild(b)}i.contentWindow&&(i.contentWindow.name=c)},_frameNum:0},dojox.io.windowName});
//# sourceMappingURL=../sourcemaps/io/windowName.js.map
