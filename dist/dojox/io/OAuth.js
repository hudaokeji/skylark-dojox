/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/xhr","dojo/dom","dojox/encoding/digests/SHA1"],function(t,e,r,o,n,u){return t.getObject("io.OAuth",!0,dojox),dojox.io.OAuth=new function(){var e=this.encode=function(t){return(""+t).length?encodeURIComponent(t).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"):""};this.decode=function(t){for(var e=[],r=t.split("&"),o=0,n=r.length;o<n;o++){r[o];if(""!=r[o])if(r[o].indexOf("=")>-1){var u=r[o].split("=");e.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])])}else e.push([decodeURIComponent(r[o]),null])}return e};var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";function n(e,o){var n={oauth_consumer_key:o.consumer.key,oauth_nonce:function(t){for(var e="",o=r.length,n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*o));return e}(16),oauth_signature_method:o.sig_method||"HMAC-SHA1",oauth_timestamp:Math.floor((new Date).valueOf()/1e3)-2,oauth_version:"1.0"};o.token&&(n.oauth_token=o.token.key),e.content=t.mixin(e.content||{},n)}function a(r,o,u){n(o,u),function(e){var r,o=[{}];if(e.form){e.content||(e.content={});var n=t.byId(e.form),u=n.getAttributeNode("action");e.url=e.url||(u?u.value:null),r=t.formToObject(n),delete e.form}r&&o.push(r),e.content&&o.push(e.content);var a=function(t){for(var e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),o={},n=e.length;n--;)o[e[n]]=r[n]||"";var u=o.protocol.toLowerCase(),a=o.authority.toLowerCase();("http"==u&&80==o.port||"https"==u&&443==o.port)&&a.lastIndexOf(":")>-1&&(a=a.substring(0,a.lastIndexOf(":")));var i=o.path||"/";return o.url=u+"://"+a+i,o}(e.url);if(a.query){var i=t.queryToObject(a.query);for(var h in i)i[h]=encodeURIComponent(i[h]);o.push(i)}e._url=a.url;for(var s=[],c=0,f=o.length;c<f;c++){var l=o[c];for(var h in l)if(t.isArray(l[h]))for(var d=0,p=l.length;d<p;d++)s.push([h,l[d]]);else s.push([h,l[h]])}e._parameters=s}(o);var a=o._parameters;a.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:0});var i=t.map(a,function(t){return e(t[0])+"="+e((""+t[1]).length?t[1]:"")}).join("&");return r.toUpperCase()+"&"+e(o._url)+"&"+e(i)}function i(t,r,o){var n=function(t){return e(t.consumer.secret)+"&"+(t.token&&t.token.secret?e(t.token.secret):"")}(o),i=function(t,e,r){if(r&&"PLAINTEXT"!=r&&"HMAC-SHA1"!=r)throw new Error("dojox.io.OAuth: the only supported signature encodings are PLAINTEXT and HMAC-SHA1.");return"PLAINTEXT"==r?e:u._hmac(t,e)}(a(t,r,o),n,o.sig_method||"HMAC-SHA1");return r.content.oauth_signature=i,r}this.sign=function(t,e,r){return i(t,e,r)},this.xhr=function(t,e,r,n){return i(t,e,r),o(t,e,n)},this.xhrGet=function(t,e){return this.xhr("GET",t,e)},this.xhrPost=this.xhrRawPost=function(t,e){return this.xhr("POST",t,e,!0)},this.xhrPut=this.xhrRawPut=function(t,e){return this.xhr("PUT",t,e,!0)},this.xhrDelete=function(t,e){return this.xhr("DELETE",t,e)}},dojox.io.OAuth});
//# sourceMappingURL=../sourcemaps/io/OAuth.js.map
