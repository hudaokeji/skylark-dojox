/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo","dojox","dojox/math/BigInteger"],function(t,i){t.experimental("dojox.math.BigInteger-ext");var r=i.math.BigInteger,s=r._nbi,o=r._nbv,n=r._nbits,h=r._Montgomery;function e(t,i){return t&i}function u(t,i){return t|i}function f(t,i){return t^i}function _(t,i){return t&~i}function a(t){if(0==t)return-1;var i=0;return 0==(65535&t)&&(t>>=16,i+=16),0==(255&t)&&(t>>=8,i+=8),0==(15&t)&&(t>>=4,i+=4),0==(3&t)&&(t>>=2,i+=2),0==(1&t)&&++i,i}function c(t){for(var i=0;0!=t;)t&=t-1,++i;return i}function m(){}function T(t){return t}function l(t){this.r2=s(),this.q3=s(),r.ONE._dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}m.prototype.convert=T,m.prototype.revert=T,m.prototype.mulTo=function(t,i,r){t._multiplyTo(i,r)},m.prototype.sqrTo=function(t,i){t._squareTo(i)},l.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var i=s();return t._copyTo(i),this.reduce(i),i},l.prototype.revert=function(t){return t},l.prototype.reduce=function(t){for(t._drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t._clamp()),this.mu._multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m._multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t._dAddOffset(1,this.m.t+1);for(t._subTo(this.r2,t);t.compareTo(this.m)>=0;)t._subTo(this.m,t)},l.prototype.mulTo=function(t,i,r){t._multiplyTo(i,r),this.reduce(r)},l.prototype.sqrTo=function(t,i){t._squareTo(i),this.reduce(i)};var v=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],d=(1<<26)/v[v.length-1];return t.extend(r,{_chunkSize:function(t){return Math.floor(Math.LN2*this._DB/Math.log(t))},_toRadix:function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var i=this._chunkSize(t),r=Math.pow(t,i),n=o(r),h=s(),e=s(),u="";for(this._divRemTo(n,h,e);h.signum()>0;)u=(r+e.intValue()).toString(t).substr(1)+u,h._divRemTo(n,h,e);return e.intValue().toString(t)+u},_fromRadix:function(t,i){this._fromInt(0),null==i&&(i=10);for(var s=this._chunkSize(i),o=Math.pow(i,s),n=!1,h=0,e=0,u=0;u<t.length;++u){var f=intAt(t,u);f<0?"-"==t.charAt(u)&&0==this.signum()&&(n=!0):(e=i*e+f,++h>=s&&(this._dMultiply(o),this._dAddOffset(e,0),h=0,e=0))}h>0&&(this._dMultiply(Math.pow(i,h)),this._dAddOffset(e,0)),n&&r.ZERO._subTo(this,this)},_fromNumber:function(t,i,s){if("number"==typeof i)if(t<2)this._fromInt(1);else for(this._fromNumber(t,s),this.testBit(t-1)||this._bitwiseTo(r.ONE.shiftLeft(t-1),u,this),this._isEven()&&this._dAddOffset(1,0);!this.isProbablePrime(i);)this._dAddOffset(2,0),this.bitLength()>t&&this._subTo(r.ONE.shiftLeft(t-1),this);else{var o=[],n=7&t;o.length=1+(t>>3),i.nextBytes(o),n>0?o[0]&=(1<<n)-1:o[0]=0,this._fromString(o,256)}},_bitwiseTo:function(t,i,r){var s,o,n=Math.min(t.t,this.t);for(s=0;s<n;++s)r[s]=i(this[s],t[s]);if(t.t<this.t){for(o=t.s&this._DM,s=n;s<this.t;++s)r[s]=i(this[s],o);r.t=this.t}else{for(o=this.s&this._DM,s=n;s<t.t;++s)r[s]=i(o,t[s]);r.t=t.t}r.s=i(this.s,t.s),r._clamp()},_changeBit:function(t,i){var s=r.ONE.shiftLeft(t);return this._bitwiseTo(s,i,s),s},_addTo:function(t,i){for(var r=0,s=0,o=Math.min(t.t,this.t);r<o;)s+=this[r]+t[r],i[r++]=s&this._DM,s>>=this._DB;if(t.t<this.t){for(s+=t.s;r<this.t;)s+=this[r],i[r++]=s&this._DM,s>>=this._DB;s+=this.s}else{for(s+=this.s;r<t.t;)s+=t[r],i[r++]=s&this._DM,s>>=this._DB;s+=t.s}i.s=s<0?-1:0,s>0?i[r++]=s:s<-1&&(i[r++]=this._DV+s),i.t=r,i._clamp()},_dMultiply:function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this._clamp()},_dAddOffset:function(t,i){for(;this.t<=i;)this[this.t++]=0;for(this[i]+=t;this[i]>=this._DV;)this[i]-=this._DV,++i>=this.t&&(this[this.t++]=0),++this[i]},_multiplyLowerTo:function(t,i,r){var s,o=Math.min(this.t+t.t,i);for(r.s=0,r.t=o;o>0;)r[--o]=0;for(s=r.t-this.t;o<s;++o)r[o+this.t]=this.am(0,t[o],r,o,0,this.t);for(s=Math.min(t.t,i);o<s;++o)this.am(0,t[o],r,o,0,i-o);r._clamp()},_multiplyUpperTo:function(t,i,r){--i;var s=r.t=this.t+t.t-i;for(r.s=0;--s>=0;)r[s]=0;for(s=Math.max(i-this.t,0);s<t.t;++s)r[this.t+s-i]=this.am(i-s,t[s],r,0,0,this.t+s-i);r._clamp(),r._drShiftTo(1,r)},_modInt:function(t){if(t<=0)return 0;var i=this._DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==i)r=this[0]%t;else for(var s=this.t-1;s>=0;--s)r=(i*r+this[s])%t;return r},_millerRabin:function(t){var i=this.subtract(r.ONE),o=i.getLowestSetBit();if(o<=0)return!1;var n=i.shiftRight(o);(t=t+1>>1)>v.length&&(t=v.length);for(var h=s(),e=0;e<t;++e){h._fromInt(v[e]);var u=h.modPow(n,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(i)){for(var f=1;f++<o&&0!=u.compareTo(i);)if(0==(u=u.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=u.compareTo(i))return!1}}return!0},clone:function(){var t=s();return this._copyTo(t),t},intValue:function(){if(this.s<0){if(1==this.t)return this[0]-this._DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this._DB)-1)<<this._DB|this[0]},byteValue:function(){return 0==this.t?this.s:this[0]<<24>>24},shortValue:function(){return 0==this.t?this.s:this[0]<<16>>16},signum:function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},toByteArray:function(){var t=this.t,i=[];i[0]=this.s;var r,s=this._DB-t*this._DB%8,o=0;if(t-- >0)for(s<this._DB&&(r=this[t]>>s)!=(this.s&this._DM)>>s&&(i[o++]=r|this.s<<this._DB-s);t>=0;)s<8?(r=(this[t]&(1<<s)-1)<<8-s,r|=this[--t]>>(s+=this._DB-8)):(r=this[t]>>(s-=8)&255,s<=0&&(s+=this._DB,--t)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(i[o++]=r);return i},equals:function(t){return 0==this.compareTo(t)},min:function(t){return this.compareTo(t)<0?this:t},max:function(t){return this.compareTo(t)>0?this:t},and:function(t){var i=s();return this._bitwiseTo(t,e,i),i},or:function(t){var i=s();return this._bitwiseTo(t,u,i),i},xor:function(t){var i=s();return this._bitwiseTo(t,f,i),i},andNot:function(t){var i=s();return this._bitwiseTo(t,_,i),i},not:function(){for(var t=s(),i=0;i<this.t;++i)t[i]=this._DM&~this[i];return t.t=this.t,t.s=~this.s,t},shiftLeft:function(t){var i=s();return t<0?this._rShiftTo(-t,i):this._lShiftTo(t,i),i},shiftRight:function(t){var i=s();return t<0?this._lShiftTo(-t,i):this._rShiftTo(t,i),i},getLowestSetBit:function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this._DB+a(this[t]);return this.s<0?this.t*this._DB:-1},bitCount:function(){for(var t=0,i=this.s&this._DM,r=0;r<this.t;++r)t+=c(this[r]^i);return t},testBit:function(t){var i=Math.floor(t/this._DB);return i>=this.t?0!=this.s:0!=(this[i]&1<<t%this._DB)},setBit:function(t){return this._changeBit(t,u)},clearBit:function(t){return this._changeBit(t,_)},flipBit:function(t){return this._changeBit(t,f)},add:function(t){var i=s();return this._addTo(t,i),i},subtract:function(t){var i=s();return this._subTo(t,i),i},multiply:function(t){var i=s();return this._multiplyTo(t,i),i},divide:function(t){var i=s();return this._divRemTo(t,i,null),i},remainder:function(t){var i=s();return this._divRemTo(t,null,i),i},divideAndRemainder:function(t){var i=s(),r=s();return this._divRemTo(t,i,r),[i,r]},modPow:function(t,i){var r,e,u=t.bitLength(),f=o(1);if(u<=0)return f;r=u<18?1:u<48?3:u<144?4:u<768?5:6,e=u<8?new Classic(i):i._isEven()?new l(i):new h(i);var _=[],a=3,c=r-1,m=(1<<r)-1;if(_[1]=e.convert(this),r>1){var T=s();for(e.sqrTo(_[1],T);a<=m;)_[a]=s(),e.mulTo(T,_[a-2],_[a]),a+=2}var v,d,p=t.t-1,g=!0,b=s();for(u=n(t[p])-1;p>=0;){for(u>=c?v=t[p]>>u-c&m:(v=(t[p]&(1<<u+1)-1)<<c-u,p>0&&(v|=t[p-1]>>this._DB+u-c)),a=r;0==(1&v);)v>>=1,--a;if((u-=a)<0&&(u+=this._DB,--p),g)_[v]._copyTo(f),g=!1;else{for(;a>1;)e.sqrTo(f,b),e.sqrTo(b,f),a-=2;a>0?e.sqrTo(f,b):(d=f,f=b,b=d),e.mulTo(b,_[v],f)}for(;p>=0&&0==(t[p]&1<<u);)e.sqrTo(f,b),d=f,f=b,b=d,--u<0&&(u=this._DB-1,--p)}return e.revert(f)},modInverse:function(t){var i=t._isEven();if(this._isEven()&&i||0==t.signum())return r.ZERO;for(var s=t.clone(),n=this.clone(),h=o(1),e=o(0),u=o(0),f=o(1);0!=s.signum();){for(;s._isEven();)s._rShiftTo(1,s),i?(h._isEven()&&e._isEven()||(h._addTo(this,h),e._subTo(t,e)),h._rShiftTo(1,h)):e._isEven()||e._subTo(t,e),e._rShiftTo(1,e);for(;n._isEven();)n._rShiftTo(1,n),i?(u._isEven()&&f._isEven()||(u._addTo(this,u),f._subTo(t,f)),u._rShiftTo(1,u)):f._isEven()||f._subTo(t,f),f._rShiftTo(1,f);s.compareTo(n)>=0?(s._subTo(n,s),i&&h._subTo(u,h),e._subTo(f,e)):(n._subTo(s,n),i&&u._subTo(h,u),f._subTo(e,f))}return 0!=n.compareTo(r.ONE)?r.ZERO:f.compareTo(t)>=0?f.subtract(t):f.signum()<0?(f._addTo(t,f),f.signum()<0?f.add(t):f):f},pow:function(t){return this._exp(t,new m)},gcd:function(t){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var s=i;i=r,r=s}var o=i.getLowestSetBit(),n=r.getLowestSetBit();if(n<0)return i;for(o<n&&(n=o),n>0&&(i._rShiftTo(n,i),r._rShiftTo(n,r));i.signum()>0;)(o=i.getLowestSetBit())>0&&i._rShiftTo(o,i),(o=r.getLowestSetBit())>0&&r._rShiftTo(o,r),i.compareTo(r)>=0?(i._subTo(r,i),i._rShiftTo(1,i)):(r._subTo(i,r),r._rShiftTo(1,r));return n>0&&r._lShiftTo(n,r),r},isProbablePrime:function(t){var i,r=this.abs();if(1==r.t&&r[0]<=v[v.length-1]){for(i=0;i<v.length;++i)if(r[0]==v[i])return!0;return!1}if(r._isEven())return!1;for(i=1;i<v.length;){for(var s=v[i],o=i+1;o<v.length&&s<d;)s*=v[o++];for(s=r._modInt(s);i<o;)if(s%v[i++]==0)return!1}return r._millerRabin(t)}}),i.math.BigInteger});
//# sourceMappingURL=../sourcemaps/math/BigInteger-ext.js.map
