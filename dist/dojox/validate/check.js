/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(e,t,n){return e.experimental("dojox.validate.check"),n.check=function(e,r){var i=[],a=[],s={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return i.length>0},getMissing:function(){return i},isMissing:function(e){for(var t=0;t<i.length;t++)if(e==i[t])return!0;return!1},hasInvalid:function(){return a.length>0},getInvalid:function(){return a},isInvalid:function(e){for(var t=0;t<a.length;t++)if(e==a[t])return!0;return!1}},o=function(e,t){return void 0===t[e]};if(r.trim instanceof Array)for(var l=0;l<r.trim.length;l++){o("type",d=e[r.trim[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||(d.value=d.value.replace(/(^\s*|\s*$)/g,""))}if(r.uppercase instanceof Array)for(l=0;l<r.uppercase.length;l++){o("type",d=e[r.uppercase[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||(d.value=d.value.toUpperCase())}if(r.lowercase instanceof Array)for(l=0;l<r.lowercase.length;l++){o("type",d=e[r.lowercase[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||(d.value=d.value.toLowerCase())}if(r.ucfirst instanceof Array)for(l=0;l<r.ucfirst.length;l++){o("type",d=e[r.ucfirst[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||(d.value=d.value.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()}))}if(r.digit instanceof Array)for(l=0;l<r.digit.length;l++){o("type",d=e[r.digit[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||(d.value=d.value.replace(/\D/g,""))}if(r.required instanceof Array)for(l=0;l<r.required.length;l++){if(t.isString(r.required[l]))if(o("type",d=e[r.required[l]])||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type&&"file"!=d.type||!/^\s*$/.test(d.value))if(o("type",d)||"select-one"!=d.type&&"select-multiple"!=d.type||-1!=d.selectedIndex&&!/^\s*$/.test(d.options[d.selectedIndex].value)){if(d instanceof Array){for(var c=!1,p=0;p<d.length;p++)d[p].checked&&(c=!0);c||(i[i.length]=d[0].name)}}else i[i.length]=d.name;else i[i.length]=d.name}if(r.required instanceof Array)for(l=0;l<r.required.length;l++)if(t.isObject(r.required[l])){var f;for(var u in r.required[l])d=e[u],f=r.required[l][u];if(d instanceof Array){for(c=0,p=0;p<d.length;p++)d[p].checked&&c++;c<f&&(i[i.length]=d[0].name)}else if(!o("type",d)&&"select-multiple"==d.type){var y=0;for(p=0;p<d.options.length;p++)d.options[p].selected&&!/^\s*$/.test(d.options[p].value)&&y++;y<f&&(i[i.length]=d.name)}}if(t.isObject(r.dependencies))for(u in r.dependencies){if(!o("type",d=e[u]))if("text"==d.type||"textarea"==d.type||"password"==d.type)if(!/\S+/.test(d.value))if(!s.isMissing(d.name))"text"!=(v=e[r.dependencies[u]]).type&&"textarea"!=v.type&&"password"!=v.type||/^\s*$/.test(v.value)||(i[i.length]=d.name)}if(t.isObject(r.constraints))for(u in r.constraints){if((d=e[u])&&(o("tagName",d)||!(d.tagName.toLowerCase().indexOf("input")>=0||d.tagName.toLowerCase().indexOf("textarea")>=0)||!/^\s*$/.test(d.value))){var g;if(t.isFunction(r.constraints[u]))g=r.constraints[u](d.value);else if(t.isFunction(t.getObject(u,!1,r.constraints)))g=t.getObject(u,!1,r.constraints)(d.value);else if(t.isArray(r.constraints[u]))if(t.isArray(r.constraints[u][0]))for(l=0;l<r.constraints[u].length&&(g=n.evaluateConstraint(r,r.constraints[u][l],u,d)).isValid;l++);else g=t.isFunction(t.getObject(u,!1,r.constraints))?n.evaluateConstraint(r,r.constraints[r.constraints[u]],u,d):n.evaluateConstraint(r,r.constraints[u],u,d);g?g.isValid||(a[a.length]={field:d.name,message:g.message}):a[a.length]=d.name}}if(t.isObject(r.confirm))for(u in r.confirm){var d=e[u],v=e[r.confirm[u]];o("type",d)||o("type",v)||"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||v.type!=d.type||v.value==d.value||s.isInvalid(d.name)||/^\s*$/.test(v.value)||(a[a.length]=d.name)}return s},n.evaluateConstraint=function(e,n,r,i){var a=n[0],s=n.slice(1);return s.unshift(i.value),void 0!==a&&"string"!=typeof a?a.apply(null,s):!(void 0===a||"string"!=typeof a||!t.isFunction(t.getObject(a)))&&t.getObject(a).apply(null,s)},n.check});
//# sourceMappingURL=../sourcemaps/validate/check.js.map
