/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.provide("dojox.help._base"),dojo.require("dojox.rpc.Service"),dojo.require("dojo.io.script"),dojo.experimental("dojox.help"),console.warn("Script causes side effects (on numbers, strings, and booleans). Call dojox.help.noConflict() if you plan on executing code."),dojox.help={locate:function(o,e,t){t=t||20;var r,n=[],i={};if(e){dojo.isArray(e)||(e=[e]);for(var _=0;p=e[_];_++){if(r=p,dojo.isString(p)){if(!(p=dojo.getObject(p)))continue}else{if(!dojo.isObject(p))continue;r=p.__name__}n.push(p),r&&(r=r.split(".")[0],i[r]||-1!=dojo.indexOf(dojox.help._namespaces,r)||dojox.help.refresh(r),i[r]=!0)}}n.length||(n.push({__name__:"window"}),dojo.forEach(dojox.help._namespaces,function(o){i[o]=!0}));var s=o.toLowerCase(),d=[];var p;o:for(_=0;p=n[_];_++){var a=p.__name__||"",l=dojo.some(n,function(o){return o=o.__name__||"",0==a.indexOf(o+".")});if(a&&!l){r=a.split(".")[0];var h=[];if("window"==a)for(r in dojox.help._names)dojo.isArray(dojox.help._names[r])&&(h=h.concat(dojox.help._names[r]));else h=dojox.help._names[r];for(var c,j=0;c=h[j];j++)if(("window"==a||0==c.indexOf(a+"."))&&-1!=c.toLowerCase().indexOf(s)){if(".prototype"==c.slice(-10))continue;var u=dojo.getObject(c);if(u&&(d.push([c,u]),d.length==t))break o}}}if(dojox.help._displayLocated(d),!dojo.isMoz)return""},refresh:function(o,e){arguments.length<2&&(e=!0),dojox.help._recurse(o,e)},noConflict:function(o){if(arguments.length)return dojox.help._noConflict(o);for(;dojox.help._overrides.length;){var e=dojox.help._overrides.pop(),t=e[0],r=e[1],n=t[r];t[r]=dojox.help._noConflict(n)}},init:function(o,e){o&&dojox.help._namespaces.concat(o),dojo.addOnLoad(function(){var require;dojo.require=(require=dojo.require,function(){dojox.help.noConflict(),require.apply(dojo,arguments),dojox.help._timer&&clearTimeout(dojox.help._timer),dojox.help._timer=setTimeout(function(){dojo.addOnLoad(function(){dojox.help.refresh(),dojox.help._timer=!1})},500)}),dojox.help._recurse()})},_noConflict:function(o){return o instanceof String?o.toString():o instanceof Number?+o:o instanceof Boolean?1==o:(dojo.isObject(o)&&(delete o.__name__,delete o.help),o)},_namespaces:["dojo","dojox","dijit","djConfig"],_rpc:new dojox.rpc.Service(dojo.moduleUrl("dojox.rpc.SMDLibrary","dojo-api.smd")),_attributes:["summary","type","returns","parameters"],_clean:function(o){for(var e,t={},r=0;e=dojox.help._attributes[r];r++){var n=o["__"+e+"__"];n&&(t[e]=n)}return t},_displayLocated:function(o){throw new Error("_displayLocated should be overridden in one of the dojox.help packages")},_displayHelp:function(o,e){throw new Error("_displayHelp should be overridden in one of the dojox.help packages")},_addVersion:function(o){if(o.name){o.version=[dojo.version.major,dojo.version.minor,dojo.version.patch].join(".");var e=o.name.split(".");"dojo"!=e[0]&&"dijit"!=e[0]&&"dojox"!=e[0]||(o.project=e[0])}return o},_stripPrototype:function(o){var e=o.replace(/\.prototype(\.|$)/g,"."),t=e;return"."==e.slice(-1)?t=e=e.slice(0,-1):e=o,[t,e]},_help:function(){for(var o,e=this.__name__,t=dojox.help._stripPrototype(e)[0],r=[],n=0;o=dojox.help._attributes[n];n++)this["__"+o+"__"]||r.push(o);if(dojox.help._displayHelp(!0,{name:this.__name__}),!r.length||this.__searched__?dojox.help._displayHelp(!1,dojox.help._clean(this)):(this.__searched__=!0,dojox.help._rpc.get(dojox.help._addVersion({name:t,exact:!0,attributes:r})).addCallback(this,function(o){if(this.toString===dojox.help._toString&&this.toString(o),o&&o.length){o=o[0];for(var e,t=0;e=dojox.help._attributes[t];t++)o[e]&&(this["__"+e+"__"]=o[e]);dojox.help._displayHelp(!1,dojox.help._clean(this))}else dojox.help._displayHelp(!1,!1)})),!dojo.isMoz)return""},_parse:function(o){if(delete this.__searching__,o&&o.length){var e=o[0].parameters;if(e){var t=["function ",this.__name__,"("];this.__parameters__=e;for(var r,n=0;r=e[n];n++){if(n&&t.push(", "),t.push(r.name),r.types){for(var i,_=[],s=0;i=r.types[s];s++)_.push(i.title);_.length&&(t.push(": "),t.push(_.join("|")))}r.repeating&&t.push("..."),r.optional&&t.push("?")}t.push(")"),this.__source__=this.__source__.replace(/function[^\(]*\([^\)]*\)/,t.join(""))}this.__output__&&(delete this.__output__,console.log(this))}else dojox.help._displayHelp(!1,!1)},_toStrings:{},_toString:function(o){if(!this.__source__)return this.__name__;var e=!this.__parameters__;if(this.__parameters__=[],o?dojox.help._parse.call(this,o):e&&(this.__searching__=!0,dojox.help._toStrings[dojox.help._stripPrototype(this.__name__)[0]]=this,dojox.help._toStringTimer&&clearTimeout(dojox.help._toStringTimer),dojox.help._toStringTimer=setTimeout(function(){dojox.help.__toString()},50)),!e||!this.__searching__)return this.__source__;var t="function Loading info for "+this.__name__+"... (watch console for result) {}";return dojo.isMoz?{toString:dojo.hitch(this,function(){return this.__output__=!0,t})}:(this.__output__=!0,t)},__toString:function(){dojox.help._toStringTimer&&clearTimeout(dojox.help._toStringTimer);var o=[];for(var e in dojox.help.noConflict(dojox.help._toStrings),dojox.help._toStrings)o.push(e);for(;o.length;)dojox.help._rpc.batch(dojox.help._addVersion({names:o.splice(-50,50),exact:!0,attributes:["parameters"]})).addCallback(this,function(o){for(var e,t=0;e=o[t];t++){var r=dojox.help._toStrings[e.name];r&&(dojox.help._parse.call(r,[e]),delete dojox.help._toStrings[e.name])}})},_overrides:[],_recursions:[],_names:{},_recurse:function(o,e){arguments.length<2&&(e=!0);var t=[];if(o&&dojo.isString(o))dojox.help.__recurse(dojo.getObject(o),o,o,t,e);else for(var r,n=0;r=dojox.help._namespaces[n];n++)window[r]&&(dojox.help._recursions.push([window[r],r,r]),window[r].__name__=r,window[r].help||(window[r].help=dojox.help._help));for(;dojox.help._recursions.length;){var i=dojox.help._recursions.shift();dojox.help.__recurse(i[0],i[1],i[2],t,e)}var _;for(n=0;_=t[n];n++)delete _.__seen__},__recurse:function(o,e,t,r,n){for(var i in o)if(!i.match(/([^\w_.$]|__[\w_.$]+__)/)){var _=o[i];if(!(void 0===_||_===document||_===window||_===dojox.help._toString||_===dojox.help._help||null===_||+dojo.isIE&&_.tagName||_.__seen__)){var s=dojo.isFunction(_),d=dojo.isObject(_)&&!dojo.isArray(_)&&!_.nodeType,p=t?t+"."+i:i;if("dojo._blockAsync"!=p){if(!_.__name__){var a=null;dojo.isString(_)?a=String:"number"==typeof _?a=Number:"boolean"==typeof _&&(a=Boolean),a&&(_=o[i]=new a(_))}_.__seen__=!0,_.__name__=p,(dojox.help._names[e]=dojox.help._names[e]||[]).push(p),r.push(_),s||dojox.help._overrides.push([o,i]),(s||d)&&n&&dojox.help._recursions.push([_,e,p]),s&&(_.__source__||(_.__source__=_.toString().replace(/^function\b ?/,"function "+p)),_.toString===Function.prototype.toString&&(_.toString=dojox.help._toString)),_.help||(_.help=dojox.help._help)}}}}};
//# sourceMappingURL=../sourcemaps/help/_base.js.map
