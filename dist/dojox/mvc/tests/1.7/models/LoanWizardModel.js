/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/declare","dojox/mvc","dojox/mvc/StatefulModel","dojo/data/ItemFileWriteStore"],function(t,e,o,s){return t("dojox.mvc.tests.models.LoanWizardModel",[o],{chartStore:new s({data:{hierarchical:!1,identifier:"id",items:[{id:"mortgage",x:1,y:0},{id:"taxes",x:2,y:0},{id:"otherhousing",x:3,y:0}]}}),constructor:function(t){e.bindInputs([this.Zip,this.Country],dojo.hitch(this,this._lookupAddrs)),e.bindInputs([this.Mortgage,this.Taxes,this.OtherHousing,this.BaseIncome,this.BonusIncome],dojo.hitch(this,this._recomputeTotalAndPercentages)),e.bind(this.HousingPercent,"value",this.HousingPercent,"valid",dojo.hitch(this,this._isHousingLessThanOrEqualToThirtyThreePercent),!0),e.bind(this.HousingPercent,"value",this.HousingPercent,"relevant",dojo.hitch(this,this._nonZeroRelevance),!0),e.bind(this.TotalHousing,"value",this.TotalHousing,"relevant",dojo.hitch(this,this._nonZeroRelevance),!0),this._recomputeTotalAndPercentages()},_lookupItem:function(t,e){var o;return t.fetchItemByIdentity({identity:e,onItem:function(t){o=t}}),o},_lookupAddrs:function(){if(null!=this.Zip.get("value")&&!isNaN(this.Zip.get("value"))){var t=this,e={postalcode:this.Zip.get("value"),country:this.Country.get("value")},o={url:"zips/"+this.Zip.get("value")+".json",sync:!0,content:e,preventCache:!0,handleAs:"json",load:function(e,o){t.City.set("value",e.postalcodes[0].placeName),t.County.set("value",e.postalcodes[0].adminName2),t.State.set("value",e.postalcodes[0].adminCode1),t.Zip.set("valid",!0)},error:function(e){t.City.set("value",""),t.County.set("value",""),t.State.set("value",""),t.Zip.set("valid",!1)}};dojo.xhrGet(o)}},_recomputeTotalAndPercentages:function(){var t=parseInt(this.Mortgage.get("value")),e=parseInt(this.Taxes.get("value")),o=parseInt(this.OtherHousing.get("value")),s=t+e+o,i=parseInt(this.BaseIncome.get("value"))+parseInt(this.BonusIncome.get("value")),n=Math.round(s/i*100);this.HousingPercent.set("value",n),this.TotalHousing.set("value",s),this.TotalIncome.set("value",i);var a=this._lookupItem(this.chartStore,"mortgage"),r=this._lookupItem(this.chartStore,"taxes"),h=this._lookupItem(this.chartStore,"otherhousing");this.chartStore.setValue(a,"y",t),this.chartStore.setValue(r,"y",e),this.chartStore.setValue(h,"y",o)},_isHousingLessThanOrEqualToThirtyThreePercent:function(t){return t<=33},_nonZeroRelevance:function(t){return t>0}})});
//# sourceMappingURL=../../../../sourcemaps/mvc/tests/1.7/models/LoanWizardModel.js.map
