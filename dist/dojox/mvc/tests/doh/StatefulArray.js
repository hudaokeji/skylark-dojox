/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["doh","dojo/Stateful","dojox/mvc/StatefulArray"],function(e,t,n){e.register("dojox.mvc.tests.doh.StatefulArray",[{name:"splice",runTest:function(){var t=new e.Deferred,s=new n([0,1,2,3]);return this.h=s.watchElements(function(n,s,a){try{e.is(1,n,"The removal starts with index 1"),e.is([1,2],s,"Index 1 and index 2 should be removed"),e.is([100,101],a,"100 and 101 should be added")}catch(e){t.errback(e)}}),s.splice(-3,2,100,101),e.is([0,100,101,3],s,"The array should end up with 0, 100, 101, 3"),t.callback(1),t},tearDown:function(){this.h&&this.h.remove()}},function(){var t=new n([0,1,2,3]);e.is([1,2],t.slice(-3,3),"Index 1 and index 2 should be returned"),e.is([1],t.slice(-3,-2),"Index 1 should be returned")},function(){var t=new n([0,1,2,3]);e.is([0,1,2,3],t.concat(),"concat() with empty args should end up with the same array"),e.is([0,1,2,3,4,5,6,7,8],t.concat([4,5],[6,7,8]),"concat() should support multiple args"),e.is([0,1,2,3,4,5,6,7,8],t.concat(4,5,[6,7,8]),"concat() should non-array values")},function(){var s=new n;e.t(s.isInstanceOf(t),"StatefulArray should be a subclass of Stateful"),e.t(s.isInstanceOf(n),"StatefulArray's instance should work with isInstanceOf() call")},{name:"changeLength",runTest:function(){var t=new e.Deferred,s=new n([0,1,2,3]),a=[];return this.h=s.watchElements(t.getTestErrback(function(n,s,o){a.push({idx:n,removals:s,adds:o}),a.length>=2&&(e.is(2,a.length,"Two changes should have been notified"),e.is({idx:2,removals:[2,3],adds:[]},a[0],"The first change should remove two elements at index 2"),e.is({idx:2,removals:[],adds:[void 0,void 0]},a[1],"The second change should add empty two elements"),t.callback(1))})),s.set("length",2),s.set("length",4),t},tearDown:function(){this.h&&this.h.remove()}}])});
//# sourceMappingURL=../../../sourcemaps/mvc/tests/doh/StatefulArray.js.map
