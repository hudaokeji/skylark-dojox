/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["./_base","dojo/_base/lang","./matrix"],function(x,y,t){function i(x,y){return Math.abs(x-y)<=1e-6*(Math.abs(x)+Math.abs(y))}function n(x,y,t,i){return isFinite(x)?isFinite(t)?((y=Math.abs(y))*x+(i=Math.abs(i))*t)/(y+i):x:t}function e(x){return x.xx*x.yy<0||x.xy*x.yx>0?-1:1}function r(x){var y=t.normalize(x),n=-y.xx-y.yy,e=y.xx*y.yy-y.xy*y.yx,r=Math.sqrt(n*n-4*e),a=-(n+(n<0?-r:r))/2,s=e/a,o=y.xy/(a-y.xx),u=1,c=y.xy/(s-y.xx),v=1;i(a,s)&&(o=1,u=0,c=0,v=1),isFinite(o)||(o=1,u=(a-y.xx)/y.xy,isFinite(u)||(o=(a-y.yy)/y.yx,u=1,isFinite(o)||(o=1,u=y.yx/(a-y.yy)))),isFinite(c)||(c=1,v=(s-y.xx)/y.xy,isFinite(v)||(c=(s-y.yy)/y.yx,v=1,isFinite(c)||(c=1,v=y.yx/(s-y.yy))));var M=Math.sqrt(o*o+u*u),h=Math.sqrt(c*c+v*v);return isFinite(o/=M)||(o=0),isFinite(u/=M)||(u=0),isFinite(c/=h)||(c=0),isFinite(v/=h)||(v=0),{value1:a,value2:s,vector1:{x:o,y:u},vector2:{x:c,y:v}}}function a(x,y){var t=e(x),i=y.angle1=(Math.atan2(x.yx,x.yy)+Math.atan2(-t*x.xy,t*x.xx))/2,r=Math.cos(i),a=Math.sin(i);return y.sx=n(x.xx/r,r,-x.xy/a,a),y.sy=n(x.yy/r,r,x.yx/a,a),y}function s(x,y){var t=e(x),i=y.angle2=(Math.atan2(t*x.yx,t*x.xx)+Math.atan2(-x.xy,x.yy))/2,r=Math.cos(i),a=Math.sin(i);return y.sx=n(x.xx/r,r,x.yx/a,a),y.sy=n(x.yy/r,r,-x.xy/a,a),y}return x.decompose=function(x){var n=t.normalize(x),e={dx:n.dx,dy:n.dy,sx:1,sy:1,angle1:0,angle2:0};if(i(n.xy,0)&&i(n.yx,0))return y.mixin(e,{sx:n.xx,sy:n.yy});if(i(n.xx*n.yx,-n.xy*n.yy))return a(n,e);if(i(n.xx*n.xy,-n.yx*n.yy))return s(n,e);var o=function(x){var i=new t.Matrix2D(x);return y.mixin(i,{dx:0,dy:0,xy:i.yx,yx:i.xy})}(n),u=r([n,o]),c=r([o,n]),v=new t.Matrix2D({xx:u.vector1.x,xy:u.vector2.x,yx:u.vector1.y,yy:u.vector2.y}),M=new t.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y}),h=new t.Matrix2D([t.invert(v),n,t.invert(M)]);return a(M,e),h.xx*=e.sx,h.yy*=e.sy,s(v,e),h.xx*=e.sx,h.yy*=e.sy,y.mixin(e,{sx:h.xx,sy:h.yy})}});
//# sourceMappingURL=../sourcemaps/gfx/decompose.js.map
