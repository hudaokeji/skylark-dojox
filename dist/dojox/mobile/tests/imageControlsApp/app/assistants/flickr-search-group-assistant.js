/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
dojo.require("dojox.mobile.app.SceneAssistant"),dojo.declare("FlickrSearchGroupAssistant",dojox.mobile.app.SceneAssistant,{setup:function(){this.controller.parse(),this.apiKey="8c6803164dbc395fb7131c9d54843627",this.listWidget=dijit.byId("searchList"),this.textWidget=dijit.byId("searchTextInput"),this.listWidget.set("items",[]);var t=this;this.search=dojo.hitch(this,this.search),this.handleGroupResults=dojo.hitch(this,this.handleGroupResults),this.connect(this.textWidget,"onChange",function(e){e&&0!=e.length?t.timer||(t.timer=setTimeout(t.search,300)):t.listWidget.set("items",[])}),this.connect(this.listWidget,"onSelect",function(e,s,i){console.log("select",arguments),t.controller.stageController.pushScene("flickr-image-view",dojo.mixin({type:"group"},e))})},activate:function(t){if(this.searchType=t,t){var e=dijit.byId("searchHeader");switch(t){case"group":e.setLabel("Search Flickr Groups");break;case"user":e.setLabel("Search Flickr People");break;case"tag":e.setLabel("Search Flickr Tags")}}this.textWidget.focus(),this.textWidget.set("value")&&this.search()},search:function(){this.timer&&(clearTimeout(this.timer),this.timer=null);var t=this.textWidget.set("value");if(!t||dojo.trim(t).length<1)return this.listWidget.set("items",[]),void console.log("NOT SEARCHING");dojo.io.script.get({url:"http://api.flickr.com/services/rest/?method=flickr.groups.search",content:{api_key:this.apiKey,format:"json",text:t,perPage:10},jsonp:"jsoncallback"}).addBoth(this.handleGroupResults)},handleGroupResults:function(t){var e;if(t&&t.groups&&t.groups.group){e=t.groups.group;for(var s=0;s<e.length;s++)e[s].label=e[s].name}else e=[];this.listWidget.set("items",e)}});
//# sourceMappingURL=../../../../../sourcemaps/mobile/tests/imageControlsApp/app/assistants/flickr-search-group-assistant.js.map
