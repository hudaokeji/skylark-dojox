/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/hash","dijit/registry","./TransitionEvent","./View","./viewRegistry"],function(n,i,t,e,a,s,r,o,d){var f={settingHash:!1,transitionInfo:[],getTransitionInfo:function(n,i){return this.transitionInfo[n.replace(/^#/,"")+":"+i.replace(/^#/,"")]},addTransitionInfo:function(n,i,t){this.transitionInfo[n.replace(/^#/,"")+":"+i.replace(/^#/,"")]=t},findTransitionViews:function(n){if(!n)return[];var i=s.byId(n.replace(/^#/,""));if(!i)return[];for(var t=i.getParent();t;t=t.getParent())t.isVisible&&!t.isVisible()&&(i=t);return[i.getShowingView(),i]},onHashChange:function(n){if(this.settingHash)this.settingHash=!1;else{var i=this.handleFragIds(n);i.hashchange=!0,new r(e.body(),i).dispatch()}},handleFragIds:function(i){var t,e;if(i)for(var a=i.replace(/^#/,"").split(/,/),r=0;r<a.length;r++){var o=s.byId(a[r]);if(!o.isVisible()){for(var f=!0,h=d.getParentView(o);h;h=d.getParentView(h))if(-1===n.indexOf(a,h.id)){f=!1;break}f?2===(t=this.findTransitionViews(a[r])).length&&(e=a[r]):n.forEach(o.getSiblingViews(),function(n){n.domNode.style.display=n===o?"":"none"})}}else e=d.initialView.id,t=this.findTransitionViews(e);var g=this.getTransitionInfo(t[0].id,t[1].id),l=1;return g||(g=this.getTransitionInfo(t[1].id,t[0].id),l=-1),{moveTo:"#"+e,transitionDir:g?g.transitionDir*l:1,transition:g?g.transition:"none"}},setFragIds:function(i){var t=n.filter(d.getViews(),function(n){return n.isVisible()});this.settingHash=!0,a(n.map(t,function(n){return n.id}).join(","))}};return i.subscribe("/dojo/hashchange",null,function(){f.onHashChange.apply(f,arguments)}),t.extend(o,{getTransitionInfo:function(){f.getTransitionInfo.apply(f,arguments)},addTransitionInfo:function(){f.addTransitionInfo.apply(f,arguments)},handleFragIds:function(){f.handleFragIds.apply(f,arguments)},setFragIds:function(){f.setFragIds.apply(f,arguments)}}),f});
//# sourceMappingURL=../sourcemaps/mobile/bookmarkable.js.map
