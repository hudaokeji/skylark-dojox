/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/dom-attr","dojo/fx","dojo/fx/easing","dojo/ready","dojo/uacss","dijit/registry","dojox/fx","dojox/fx/flip","./EdgeToEdgeList","./IconContainer","./ProgressIndicator","./RoundRect","./RoundRectList","./ScrollableView","./Switch","./View","./Heading","require"],function(e,o,t,s,i,n,d,a,l,r,c,f,p,m,h,u,y,g,C,b,v,N,x,R,_,B,j,T,require){var k=i.getObject("dojox.mobile",!0);return n("webkit")||10===n("ie")||!n("ie")&&n("trident")>6||(i.extend(j,{_doTransition:function(e,o,i,n){var d,l,r;if(this.wakeUp(o),i&&"none"!=i)if("slide"==i||"cover"==i||"reveal"==i){var f=e.offsetWidth;l=p.slideTo({node:e,duration:400,left:-f*n,top:c.get(e,"top")}),r=p.slideTo({node:o,duration:400,left:0,top:c.get(o,"top")}),o.style.position="absolute",o.style.left=f*n+"px",o.style.display="",d=p.combine([l,r]),t.connect(d,"onEnd",this,function(){if(this._inProgress){e.style.display="none",e.style.left="0px",o.style.position="relative";var t=y.byNode(o);t&&!a.contains(t.domNode,"out")&&(t.containerNode.style.paddingTop=""),this.invokeCallback()}}),d.play()}else if("slidev"==i||"coverv"==i||"reavealv"==i){var m=e.offsetHeight;l=p.slideTo({node:e,duration:400,left:0,top:-m*n}),r=p.slideTo({node:o,duration:400,left:0,top:0}),o.style.position="absolute",o.style.top=m*n+"px",o.style.left="0px",o.style.display="",d=p.combine([l,r]),t.connect(d,"onEnd",this,function(){this._inProgress&&(e.style.display="none",o.style.position="relative",this.invokeCallback())}),d.play()}else"flip"==i?(d=g.flip({node:e,dir:"right",depth:.5,duration:400}),o.style.position="absolute",o.style.left="0px",t.connect(d,"onEnd",this,function(){this._inProgress&&(e.style.display="none",o.style.position="relative",o.style.display="",this.invokeCallback())}),d.play()):(d=p.chain([s.fadeOut({node:e,duration:600}),s.fadeIn({node:o,duration:600})]),o.style.position="absolute",o.style.left="0px",o.style.display="",c.set(o,"opacity",0),t.connect(d,"onEnd",this,function(){this._inProgress&&(e.style.display="none",o.style.position="relative",c.set(e,"opacity",1),this.invokeCallback())}),d.play());else o.style.display="",e.style.display="none",o.style.left="0px",this.invokeCallback()},wakeUp:function(e){if(n("ie")&&!e._wokeup){e._wokeup=!0;var o=e.style.display;e.style.display="";for(var t=e.getElementsByTagName("*"),s=0,i=t.length;s<i;s++){var d=t[s].style.display;t[s].style.display="none",t[s].style.display="",t[s].style.display=d}e.style.display=o}}}),i.extend(N,{scale:function(e){if(n("ie")){var o={w:e,h:e};r.setMarginBox(this.domNode,o),r.setMarginBox(this.containerNode,o)}else if(n("ff")){var t=e/40;c.set(this.containerNode,{MozTransform:"scale("+t+")",MozTransformOrigin:"0 0"}),r.setMarginBox(this.domNode,{w:e,h:e}),r.setMarginBox(this.containerNode,{w:e/t,h:e/t})}}}),n("ie")&&(i.extend(x,{buildRendering:function(){k.createRoundRect(this),this.domNode.className="mblRoundRect"}}),R._addChild=R.prototype.addChild,R._postCreate=R.prototype.postCreate,i.extend(R,{buildRendering:function(){k.createRoundRect(this,!0),this.domNode.className="mblRoundRectList",n("ie")&&n("dojo-bidi")&&!this.isLeftToRight()&&(this.domNode.className="mblRoundRectList mblRoundRectListRtl")},postCreate:function(){R._postCreate.apply(this,arguments),this.redrawBorders()},addChild:function(e,o){R._addChild.apply(this,arguments),this.redrawBorders(),k.applyPngFilter&&k.applyPngFilter(e.domNode)},redrawBorders:function(){if(!(this instanceof b))for(var e=!1,o=this.containerNode.childNodes.length-1;o>=0;o--){var t=this.containerNode.childNodes[o];"LI"==t.tagName&&(t.style.borderBottomStyle=e?"solid":"none",e=!0)}}}),i.extend(b,{buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||d.doc.createElement("ul"),this.domNode.className="mblEdgeToEdgeList"}}),v._addChild=v.prototype.addChild,i.extend(v,{addChild:function(e,o){v._addChild.apply(this,arguments),k.applyPngFilter&&k.applyPngFilter(e.domNode)}}),i.mixin(k,{createRoundRect:function(e,o){var t,s;if(e.domNode=d.doc.createElement("div"),e.domNode.style.padding="0px",e.domNode.style.backgroundColor="transparent",e.domNode.style.border="none",e.containerNode=d.doc.createElement(o?"ul":"div"),e.containerNode.className="mblRoundRectContainer",e.srcNodeRef){for(e.srcNodeRef.parentNode.replaceChild(e.domNode,e.srcNodeRef),t=0,s=e.srcNodeRef.childNodes.length;t<s;t++)e.containerNode.appendChild(e.srcNodeRef.removeChild(e.srcNodeRef.firstChild));e.srcNodeRef=null}for(e.domNode.appendChild(e.containerNode),t=0;t<=5;t++){var i=l.create("div");i.className="mblRoundCorner mblRoundCorner"+t+"T",e.domNode.insertBefore(i,e.containerNode);var n=l.create("div");n.className="mblRoundCorner mblRoundCorner"+t+"B",e.domNode.appendChild(n)}}}),i.extend(_,{postCreate:function(){var e=l.create("div",{className:"mblDummyForIE",innerHTML:"&nbsp;"},this.containerNode,"first");c.set(e,{position:"relative",marginBottom:"-2px",fontSize:"1px"})}})),n("ie")<=6&&(k.applyPngFilter=function(e){for(var o=(e=e||d.body()).getElementsByTagName("IMG"),t=require.toUrl("dojo/resources/blank.gif"),s=0,i=o.length;s<i;s++){var n=o[s],a=n.offsetWidth,l=n.offsetHeight;if(0===a||0===l){if("none"!=c.get(n,"display"))continue;if(n.style.display="",a=n.offsetWidth,l=n.offsetHeight,n.style.display="none",0===a||0===l)continue}var r=n.src;-1==r.indexOf("resources/blank.gif")&&(n.src=t,n.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+r+"')",n.style.width=a+"px",n.style.height=l+"px")}},!k._disableBgFilter&&k.createDomButton&&(k._createDomButton_orig=k.createDomButton,k.createDomButton=function(e,o,t){var s=k._createDomButton_orig.apply(this,arguments);if(s&&s.className&&-1!==s.className.indexOf("mblDomButton")){var i=function(){if(s.currentStyle&&s.currentStyle.backgroundImage.match(/url.*(mblDomButton.*\.png)/)){var e=RegExp.$1,o=require.toUrl("dojox/mobile/themes/common/domButtons/compat/")+e;s.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+o+"',sizingMethod='crop')",s.style.background="none"}};setTimeout(i,1e3),setTimeout(i,5e3)}return s})),k.loadCssFile=function(e){k.loadedCssFiles||(k.loadedCssFiles=[]),d.doc.createStyleSheet?setTimeout(function(e){return function(){var o=d.doc.createStyleSheet(e);o&&k.loadedCssFiles.push(o.owningElement)}}(e),0):k.loadedCssFiles.push(l.create("link",{href:e,type:"text/css",rel:"stylesheet"},d.doc.getElementsByTagName("head")[0]))},k.loadCss=function(o){if(!k._loadedCss){var t={};e.forEach(k.getCssPaths(),function(e){t[e]=!0}),k._loadedCss=t}i.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var n=o[s];k._loadedCss[n]||(k._loadedCss[n]=!0,k.loadCssFile(n))}},k.getCssPaths=function(){var e,o,t,s=[],i=d.doc.styleSheets;for(e=0;e<i.length;e++)if(!i[e].href){var n=i[e].cssRules||i[e].imports;if(n)for(o=0;o<n.length;o++)n[o].href&&s.push(n[o].href)}var a=d.doc.getElementsByTagName("link");for(e=0,t=a.length;e<t;e++)a[e].href&&s.push(a[e].href);return s},k.loadCompatPattern=/\/mobile\/themes\/.*\.css$/,k.loadCompatCssFiles=function(e){if(!n("ie")||e){k._loadedCss=void 0;var t=k.getCssPaths();n("dojo-bidi")&&(t=k.loadRtlCssFiles(t));for(var s=0;s<t.length;s++){var i=t[s];if((i.match(o.mblLoadCompatPattern||k.loadCompatPattern)||-1!==location.href.indexOf("mobile/tests/"))&&-1===i.indexOf("-compat.css")){var d=i.substring(0,i.length-4)+"-compat.css";k.loadCss(d)}}}else setTimeout(function(){k.loadCompatCssFiles(!0)},0)},n("dojo-bidi")&&(k.loadRtlCssFiles=function(e){for(var o=0;o<e.length;o++){var t=e[o];if(-1==t.indexOf("_rtl")){var s=t.substr(t.lastIndexOf("/")+1);if(-1!="android.css blackberry.css custom.css iphone.css holodark.css base.css Carousel.css ComboBox.css IconContainer.css IconMenu.css ListItem.css RoundRectCategory.css SpinWheel.css Switch.css TabBar.css ToggleButton.css ToolBarButton.css ProgressIndicator.css Accordion.css GridLayout.css FormLayout.css".indexOf(s)){var i=t.replace(".css","_rtl.css");e.push(i),k.loadCss(i)}}}return e}),k.hideAddressBar=function(e,o){!1!==o&&k.resizeAll()},h(function(){!1!==o.mblLoadCompatCssFiles&&k.loadCompatCssFiles(),k.applyPngFilter&&k.applyPngFilter()})),k});
//# sourceMappingURL=../sourcemaps/mobile/_compat.js.map
