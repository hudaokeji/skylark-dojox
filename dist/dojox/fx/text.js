/**
 * dojox - A version of dojox.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojox/
 * @license MIT
 */
define(["dojo/_base/lang","./_base","dojo/_base/fx","dojo/fx","dojo/fx/easing","dojo/dom","dojo/dom-style","dojo/_base/html","dojo/_base/connect"],function(e,n,t,a,o,i,r,d,s){var u=e.getObject("dojox.fx.text",!0);return u._split=function(n){var t=n.node=i.byId(n.node),o=t.style,u=r.getComputedStyle(t),l=d.coords(t,!0);n.duration=n.duration||1e3,n.words=n.words||!1;var c=n.text&&"string"==typeof n.text?n.text:t.innerHTML,p=o.height,h=o.width,y=[];r.set(t,{height:u.height,width:u.width});for(var f=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g,m=n.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g,g="string"==typeof n.text?n.text.match(m):t.innerHTML.match(m),v="",x=0,b=0,w=0;w<g.length;w++){var M=g[w];M.match(f)?v+=M:(v+="<span>"+M+"</span>",x++)}t.innerHTML=v,function t(a){var o=a.nextSibling;if("SPAN"==a.tagName&&1==a.childNodes.length&&3==a.firstChild.nodeType){var i=d.coords(a,!0);b++,r.set(a,{padding:0,margin:0,top:n.crop?"0px":i.t+"px",left:n.crop?"0px":i.l+"px",display:"inline"});var s=n.pieceAnimation(a,i,l,b,x);e.isArray(s)?y=y.concat(s):y[y.length]=s}else a.firstChild&&t(a.firstChild);o&&t(o)}(t.firstChild);var I=a.combine(y);return s.connect(I,"onEnd",I,function(){t.innerHTML=c,r.set(t,{height:p,width:h})}),n.onPlay&&s.connect(I,"onPlay",I,n.onPlay),n.onEnd&&s.connect(I,"onEnd",I,n.onEnd),I},u.explode=function(e){(e.node=i.byId(e.node)).style;return e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,void 0===e.fade&&(e.fade=!0),void 0===e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(n,a,i,d,s){var u=a.h,l=a.w,c=2*e.distance,p=e.duration,h=parseFloat(n.style.top),y=parseFloat(n.style.left),f=0,m=0,g=0;if(e.random){var v=Math.random()*e.random+Math.max(1-e.random,0);c*=v,p*=v,f=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-p:0,m=Math.random()-.5,g=Math.random()-.5}var x=(i.h-u)/2-(a.y-i.y),b=(i.w-l)/2-(a.x-i.x),w=Math.sqrt(Math.pow(b,2)+Math.pow(x,2)),M=h-x*c+w*g,I=y-b*c+w*m,O=t.animateProperty({node:n,duration:p,delay:f,easing:e.easing||(e.unhide?o.sinOut:o.circOut),beforeBegin:e.unhide?function(){e.fade&&r.set(n,"opacity",0),n.style.position=e.crop?"relative":"absolute",n.style.top=M+"px",n.style.left=I+"px"}:function(){n.style.position=e.crop?"relative":"absolute"},properties:{top:e.unhide?{start:M,end:h}:{start:h,end:M},left:e.unhide?{start:I,end:y}:{start:y,end:I}}});if(e.fade){var j=t.animateProperty({node:n,duration:p,delay:f,easing:e.fadeEasing||o.quadOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}}});return e.unhide?[j,O]:[O,j]}return O},u._split(e)},u.converge=function(e){return e.unhide=!0,u.explode(e)},u.disintegrate=function(e){(e.node=i.byId(e.node)).style;e.duration=e.duration||1500,e.distance=e.distance||1.5,e.random=e.random||0,e.fade||(e.fade=!0);var n=Math.abs(e.random);return e.pieceAnimation=function(a,i,d,s,u){i.h,i.w;var l=e.interval||e.duration/(1.5*u),c=e.duration-u*l,p=Math.random()*u*l,h=e.reverseOrder||e.distance<0?s*l:(u-s)*l,y=p*n+Math.max(1-n,0)*h,f={};return e.unhide?(f.top={start:parseFloat(a.style.top)-d.h*e.distance,end:parseFloat(a.style.top)},e.fade&&(f.opacity={start:0,end:1})):(f.top={end:parseFloat(a.style.top)+d.h*e.distance},e.fade&&(f.opacity={end:0})),t.animateProperty({node:a,duration:c,delay:y,easing:e.easing||(e.unhide?o.sinIn:o.circIn),properties:f,beforeBegin:e.unhide?function(){e.fade&&r.set(a,"opacity",0),a.style.position=e.crop?"relative":"absolute",a.style.top=f.top.start+"px"}:function(){a.style.position=e.crop?"relative":"absolute"}})},u._split(e)},u.build=function(e){return e.unhide=!0,u.disintegrate(e)},u.blockFadeOut=function(e){(e.node=i.byId(e.node)).style;e.duration=e.duration||1e3,e.random=e.random||0;var n=Math.abs(e.random);return e.pieceAnimation=function(a,i,d,s,u){var l=e.interval||e.duration/(1.5*u),c=e.duration-u*l,p=Math.random()*u*l,h=e.reverseOrder?(u-s)*l:s*l,y=p*n+Math.max(1-n,0)*h;return t.animateProperty({node:a,duration:c,delay:y,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:e.unhide?function(){r.set(a,"opacity",0)}:void 0})},u._split(e)},u.blockFadeIn=function(e){return e.unhide=!0,u.blockFadeOut(e)},u.backspace=function(e){(e.node=i.byId(e.node)).style;e.words=!1,e.duration=e.duration||2e3,e.random=e.random||0;var n=Math.abs(e.random),a=10;return e.pieceAnimation=function(i,d,s,u,l){var c=e.interval||e.duration/(1.5*l),p="textContent"in i?i.textContent:i.innerText,h=p.match(/\s/g);if(void 0===e.wordDelay&&(e.wordDelay=2*c),e.unhide||(a=(l-u-1)*c),e.fixed){if(e.unhide)var y=function(){r.set(i,"opacity",0)}}else if(e.unhide){y=function(){i.style.display="none"};var f=function(){i.style.display="inline"}}else f=function(){i.style.display="none"};var m=t.animateProperty({node:i,duration:1,delay:a,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:y,onEnd:f});if(e.unhide){var g=Math.random()*p.length*c,v=g*n/2+Math.max(1-n/2,0)*e.wordDelay;a+=g*n+Math.max(1-n,0)*c*p.length+v*(h&&p.lastIndexOf(h[h.length-1])==p.length-1)}return m},u._split(e)},u.type=function(e){return e.unhide=!0,u.backspace(e)},u});
//# sourceMappingURL=../sourcemaps/fx/text.js.map
